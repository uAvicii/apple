(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{4527:function(e,t,a){"use strict";a.d(t,{w:function(){return r}});let r={STANDARD:0,FULL_VIEWPORT:1}},20015:function(e,t,a){"use strict";a.d(t,{u:function(){return h}});var r=a(85893),l=a(67294),n=a(73935),o=a(94184),i=a.n(o),s=a(24799),c=a(67950),u=a(4527);let d={type:u.w.STANDARD,ariaLabel:null,open:null},h=(0,c.d)(e=>{let{name:t="",children:a,ariaLabel:o,isOpened:c,classList:d=[],onClose:h,type:g,ioc:{i18n:p}}=e,v=(0,l.useRef)(null),m=i()(...d,"modal-content"),[b,f]=(0,l.useState)(!1),E=(0,l.useRef)(document.createElement("div"));return(0,l.useEffect)(()=>{let e=E.current,a=s.G.getModalModule(),{FullBleed:r,PageOverlay:l,PageOverlayBundle:n,ScrollPosition:c,Open:d,Close:m,CloseButton:b,Focus:x,Keyboard:_}=s.G.getModalModuleMixins(),T=g===u.w.STANDARD?l:r,N=new(a.withMixins(T,n,c,d,m,b,x,_))(e,{attributes:{container:{class:i()("modal-crossfade modal-close-button-static","".concat(t,"-modal"),{"pz-modal-standard":g===u.w.STANDARD,"pz-modal-fullscreen":g===u.w.FULL_VIEWPORT})},overlay:{"aria-label":o},closeButton:{"aria-label":p.value("global.cta-close")}}});return f(!0),N.on("close",()=>{"function"==typeof h&&h()}),v.current=N,()=>{N.opened&&N.close(),N.destroy()}},[]),(0,l.useEffect)(()=>{v.current&&null!==v.current.model&&(c?v.current.open():(v.current.close(),"function"==typeof h&&h()))},[c]),E.current&&b?(0,n.createPortal)((0,r.jsx)("div",{className:"".concat(m),children:a}),E.current):null});h.defaultProps=d},13584:function(e,t,a){"use strict";a.d(t,{k:function(){return s},C:function(){return c}});var r=a(85893),l=a(20015),n=a(16477),o=a(39066),i=a.n(o);let s=(0,n.a)(e=>{let{error:t,headline:a,text:n,cta:o,onClose:i,analyticsClick:s}=e,u=!!t;return(0,r.jsx)(l.u,{isOpened:u,onClose:i,name:"error",children:e.children?e.children:u&&(0,r.jsx)(c,{headline:a,text:n,cta:o,onClose:i,analyticsClick:s,textClasses:!a&&"typography-label"||""})})}),c=e=>{let{headline:t,text:a,cta:l,onClose:n,analyticsClick:o,textClasses:s}=e;return(0,r.jsxs)("div",{className:"text-centered",children:[t&&(0,r.jsx)("h2",{className:"typography-headline-reduced",children:t}),a&&(0,r.jsx)("p",{className:s,children:a}),l&&"string"==typeof l?(0,r.jsx)("button",{onClick:n,className:"button button-super ".concat(i()["error-modal__button"]),"data-analytics-click":o||"",children:l}):l]})};s.displayName="ErrorModal"},96302:function(e,t,a){"use strict";a.d(t,{V:function(){return o}});var r=a(85893),l=a(45697),n=a.n(l);function o(e){let{className:t,content:a,tag:l}=e;return(0,r.jsx)(l,{className:t,dangerouslySetInnerHTML:{__html:a}})}o.propTypes={className:n().string,content:n().string,tag:n().string},o.defaultProps={tag:"div"}},4146:function(e,t,a){"use strict";function r(e){return e.displayName||e.name||"Component"}a.d(t,{G:function(){return r}})},22030:function(e,t,a){"use strict";a.d(t,{z:function(){return u},k:function(){return d}});var r=a(85893),l=a(67294),n=a(13584),o=a(57182);let i=(0,l.createContext)({});i.displayName="ErrorContext";let s=n.C,c=o.Jl;function u(e){let{errorCallback:t,onClose:a}=e;return(0,r.jsx)(i.Provider,{value:{triggerError:e=>t(e),closeModal:()=>a(),defaultModalTemplate:s,defaultPageTemplate:c},children:e.children})}let d=()=>(0,l.useContext)(i)},67950:function(e,t,a){"use strict";a.d(t,{d:function(){return r.d}});var r=a(34977)},34977:function(e,t,a){"use strict";a.d(t,{d:function(){return o}});var r=a(85893),l=a(54751),n=a(4146);function o(e){let t=t=>(0,r.jsx)(l.h.Consumer,{children:a=>(0,r.jsx)(e,{...t,ioc:a})});return t.displayName="".concat((0,n.G)(e),"WithIocContext"),t}},72331:function(e,t,a){"use strict";a.d(t,{X:function(){return E}});var r=a(85893),l=a(67294),n=a(9008),o=a.n(n),i=a(22030),s=a(35737);let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{[s.Z.SELECTED_STORE_HAS_NO_APPOINTMENTS]:{headline:e.value("error.store-sessions-unavailable"),text:e.value("error.try-different-store")},[s.Z.ALL_STORES_HAVE_NO_APPOINTMENTS]:{headline:e.value("error.nearby-sessions-unavailable"),text:e.value("error.try-different-location")},[s.Z.APPOINTMENT_NOT_FOUND]:{headline:e.value("confirmation-page.not-found-title"),text:e.value("confirmation-page.not-found-copy")},[s.Z.GENERIC_ERROR]:{headline:e.value("error.something-went-wrong"),text:e.value("error.try-cancel-again")},[s.Z.TRY_AGAIN_LATER]:{headline:"".concat(e.value("error.something-went-wrong"),"<br>").concat(e.value("error.come-back-later")),text:e.compileValue("error.cta-shop-or-chat-online",{shopNow:"<a href=".concat(t.url,">").concat(e.value("global.shop-now"),"</a>"),findAppleStore:"<a href=".concat(t.url,">").concat(e.compileValue("global.find-apple-store",{appleStore:e.value("global.apple-store")}),"</a>")})},[s.Z.NO_TIMESLOT_AVAILABLE]:{headline:e.value("error.no-sessions-available"),text:e.value("error.check-back-later"),cta:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("p",{className:"text-centered",children:t.url&&"string"==typeof t.url&&(0,r.jsx)("a",{className:"link",href:t.url,children:(0,r.jsx)("span",{className:"icon  icon-after icon-chevronright link",children:e.value("error.standalone-cta")})})})})},[s.Z.RESERVATION_NOT_ENABLED]:{headline:e.value("error.not-accepting-reservations"),text:e.value("error.not-accepting-reservations-subcopy"),cta:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("p",{className:"text-centered",children:t.url&&"string"==typeof t.url&&(0,r.jsx)("a",{className:"link",href:t.url,children:(0,r.jsx)("span",{className:"icon  icon-after icon-chevronright link",children:e.value("error.standalone-cta")})})})})},[s.Z.NO_TOPICS_AVAILABLE]:{headline:e.value("error.no-topics-available"),text:e.value("error.check-again-or-different-location"),cta:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("p",{className:"text-centered",children:t.url&&"string"==typeof t.url&&(0,r.jsx)("a",{className:"link",href:t.url,children:(0,r.jsx)("span",{className:"icon  icon-after icon-chevronright link",children:e.value("error.standalone-cta")})})})})},[s.Z.ATHENA_QUALIFY_FAILURE]:{headline:e.value("error.generic-sorry"),text:e.value("error.call-apple")}}};var u=a(57182),d=a(31024),h=a(97141),g=a(24799),p=a(49048),v=a(13584),m={landing:{caption:"landing-page.ribbon-caption",link:"landing-page.ribbon-link",url:"landing-page.ribbon-url"},"session-selection":{caption:"session-selection-page.ribbon-caption",link:"session-selection.ribbon-link",url:"session-selection.ribbon-url"},datetime:{},contactinformation:{},confirmation:{}},b=a(96302);let f=(0,l.forwardRef)((e,t)=>{let{ioc:a,page:l,loading:n}=e,{i18n:o}=a,i=l.slice(1).toLowerCase();if(void 0===o.value("_config.ribbon-enabled")[i]||"false"===o.value("_config.ribbon-enabled")[i]||o.value("".concat(m[i],".caption")))return null;let s=o.value(m[i].link)&&o.value(m[i].url);return(0,r.jsx)(r.Fragment,{children:!n&&(0,r.jsx)("div",{className:"ribbon ribbon-blue-to-default",ref:t,children:(0,r.jsx)("div",{className:"ribbon-drop-wrapper",children:(0,r.jsx)("div",{className:"ribbon-content-wrapper",children:(0,r.jsx)("div",{className:"ribbon-content row",children:(0,r.jsxs)("div",{className:"column large-12 large-centered",children:[(0,r.jsx)(b.V,{content:o.value(m[i].caption),tag:"span",className:"ribbon-content-caption"}),s&&(0,r.jsx)("a",{className:"ribbon-link more",href:o.value(m[i].url),children:o.value(m[i].link)})]})})})})})})});function E(e){var t;return(0,h.E)(((t=class extends l.Component{componentDidMount(){(0,p.j)()&&(this.ac_headjs||(this.ac_headjs=g.G.getHeadjsModule()),this.ac_headjs.htmlClass())}render(){let t;let{ioc:a,router:l}=this.props,{meta:{analyticsSPageTrackingData:n},error:s,loading:c}=this.state,d=null;return s&&(t=this.resolveError(s),!s.template&&s.errorComponentProps&&(d=s.errorComponentProps)),(0,r.jsxs)("div",{className:"page-wrapper",children:[(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:this.state.pageTitle},"pageTitle"),(0,r.jsx)("meta",{name:"description",content:this.state.pageDesc},"pageDesc"),this.state.ogTitle&&(0,r.jsx)("meta",{property:"og:title",content:this.state.ogTitle},"ogTitle"),(0,r.jsx)("meta",{property:"og:description",content:this.state.pageDesc},"ogDesc"),(0,r.jsx)("meta",{property:"og:url",content:this.state.pageUrl},"ogUrl"),t&&(0,r.jsx)("meta",{name:"error-name",content:null==t?void 0:t.text}),(0,r.jsx)("link",{rel:"canonical",href:this.state.pageUrl},"canonical"),this.state.meta.analyticsTrack&&(0,r.jsx)("meta",{property:"analytics-track",content:this.state.meta.analyticsTrack}),n&&(0,r.jsx)("meta",{property:"analytics-s-page-tracking-data",content:n})]}),(0,r.jsx)("main",{children:(0,r.jsx)(i.z,{errorCallback:this.errorCallback,onClose:this.onModalClose,children:s&&(null==s?void 0:s.name)&&!(null==s?void 0:s.isModal)?(0,r.jsx)(u.Bc,{...t,...d,children:null==s?void 0:s.template}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{loading:c,ioc:a,page:l.route,ref:this.ribbon}),(0,r.jsx)(e,{...this.props,errorCallback:this.errorCallback,loadingCallback:this.loadingCallback,getUserLocation:this.getUserLocation,setPageMetadata:this.setPageMetadata,ribbonRef:this.ribbon.current})]})})}),(0,r.jsx)(v.k,{error:(null==s?void 0:s.isModal)&&(null==s?void 0:s.name),onClose:this.onModalClose,...t,...d,children:null==s?void 0:s.template})]})}errorCallback(e){let t="string"==typeof e?{name:e,isModal:!0,template:null,errorComponentProps:null}:{name:e.name,isModal:e.isModal,template:e.template,errorComponentProps:e.errorComponentProps};return setTimeout(()=>{this.setState({error:{...t}})},0),new Promise((e,t)=>{this.resolve=e,this.reject=t})}resolveError(e){let t=(null==e?void 0:e.name)&&(null==e?void 0:e.isModal)?this.errorMappings.modals:this.errorMappings.pages;return t[e.name]||t.GENERIC_ERROR}loadingCallback(e){this.setState({loading:e})}onModalClose(){this.resolve&&this.resolve(this.state.error),this.state.error&&this.setState({error:null})}getMetaAnalyticsTrack(e){return e?"".concat("apple shopping session"," : ").concat(e):null}getPageTitle(e){if(!this.props.ioc)return null;let{ioc:{i18n:t}}=this.props,a=t.value("global.apple-shopping-sessions");return e?"".concat(a," - ").concat(e," - Apple"):"".concat(a," - Apple")}getOgTitle(e){if(!this.props.ioc)return null;let{ioc:{i18n:t}}=this.props,a=t.value("global.apple-shopping-sessions");return e?"".concat(a," - ").concat(e):"".concat(a)}getCanonical(e){var t;if(!this.props.ioc)return null;let{ioc:{configManager:a,allLocales:r}}=this.props,l=e?e.split(/[?&]+/)[0]:null,n=a.getMainSiteUrl((null===(t=r.currentLocale)||void 0===t?void 0:t.stageRootPath)||"");return e?n+l:n}getUserLocation(e){if(!e)return{};let{ioc:{allLocales:t,allStores:a}}=this.props,{currentLocale:r}=t;if(!r)return{};let l=a.getStoreByStoreSlug(r.stageRootPath,e);if(!l||!l.store)return{};let n=t.getLocaleByStageRootPath(l.country.stageRootPath);return{storeNum:l.store.storeNum,locale:null==n?void 0:n.id,slug:l.store.slug}}setPageMetadata(e){this.setState({...e.pageTitle&&{pageTitle:this.getPageTitle(e.pageTitle),ogTitle:this.getOgTitle(e.pageTitle)},...e.pageDesc&&{pageDesc:e.pageDesc},...e.pageUrl&&{pageUrl:this.getCanonical(e.pageUrl)},...e.meta&&{meta:{...e.meta.analyticsTrack&&{analyticsTrack:this.getMetaAnalyticsTrack(e.meta.analyticsTrack)},analyticsSPageTrackingData:e.meta.analyticsSPageTrackingData}}})}constructor(e){super(e),this.errorCallback=this.errorCallback.bind(this),this.loadingCallback=this.loadingCallback.bind(this),this.onModalClose=this.onModalClose.bind(this),this.getMetaAnalyticsTrack=this.getMetaAnalyticsTrack.bind(this),this.getPageTitle=this.getPageTitle.bind(this),this.getOgTitle=this.getOgTitle.bind(this),this.getCanonical=this.getCanonical.bind(this),this.getUserLocation=this.getUserLocation.bind(this),this.setPageMetadata=this.setPageMetadata.bind(this),this.resolveError=this.resolveError.bind(this),this.ribbon=(0,l.createRef)(),this.ac_headjs=null,this.resolve=null,this.reject=null,this.state={error:null,loading:!0,pageTitle:this.getPageTitle(""),pageDesc:"",pageUrl:this.getCanonical(),ogTitle:this.getOgTitle(""),meta:{analyticsTrack:this.getMetaAnalyticsTrack(),analyticsSPageTrackingData:null}};let{i18n:t,configManager:a,allLocales:{currentLocale:r}}=e.ioc,n=a.getLocalizedShopUrl((0,d.rm)((0,d._V)(null==r?void 0:r.stageRootPath)));this.errorMappings={modals:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],{[s.Z.GENERIC_ERROR]:{headline:e.value("error.generic-sorry"),text:e.value("error.please-try-again"),cta:e.value("global.cta-ok")},[s.Z.DSID_DAY_LIMIT_REACHED]:{headline:e.value("error.reservation-limit"),text:e.value("error.reservation-limt-try-tomorrow"),cta:e.value("global.cta-ok")},[s.Z.INVALID_TIMESLOT_ID]:{headline:e.value("error.session-unavailable-generic"),text:e.value("error.try-different-one"),cta:e.value("global.cta-ok")},[s.Z.SELECTED_STORE_HAS_NO_APPOINTMENTS]:{headline:e.value("error.store-sessions-unavailable"),text:e.value("error.try-different-store"),cta:e.value("global.cta-ok")},[s.Z.ALL_STORES_HAVE_NO_APPOINTMENTS]:{headline:e.value("error.nearby-sessions-unavailable"),text:e.value("error.try-different-location"),cta:e.value("global.cta-ok")},[s.Z.TIME_WINDOW_GONE]:{headline:e.value("error.session-unavailable-generic"),text:e.value("error.try-different-one"),cta:e.value("global.cta-ok")},[s.Z.INVALID_TOPIC]:{headline:e.value("error.topic-unavailable-generic"),cta:e.value("global.cta-ok")},[s.Z.RESCHEDULE_SELECTED_STORE_HAS_NO_APPOINTMENTS]:{headline:e.value("error.reschedule-store-sessions-unavailable"),text:e.value("error.reschedule-store-sessions-unavailable-text"),cta:e.value("global.cta-ok")},[s.Z.RESCHEDULE_ERROR]:{headline:e.value("error.reschedule-error"),text:e.value("error.reschedule-error-text"),cta:e.value("global.cta-ok")},[s.Z.RESCHEDULE_UNAVAILABLE]:{headline:e.value("error.reschedule-unavailable"),text:e.value("error.reschedule-unavailable-text"),cta:e.value("global.cta-ok")},[s.Z.RESCHEDULE_DATE_TIME_UNAVAILABLE]:{headline:e.value("error.reschedule-date-time-unavailable"),text:e.value("error.try-different-one"),cta:e.value("global.cta-ok")},[s.Z.RESCHEDULE_GENERIC_ERROR]:{headline:e.value("error.reschedule-error"),text:e.value("error.reschedule-error-text"),cta:e.value("global.cta-ok")},[s.Z.RESCHEDULE_TRY_AGAIN_LATER]:{headline:e.value("error.something-went-wrong"),text:e.value("error.reschedule-error-text"),cta:e.value("global.cta-ok")},[s.Z.INVALID_RESERVATION_STATUS_FOR_RESCHEDULE]:{headline:e.value("error.generic-sorry"),cta:e.value("global.cta-ok")},[s.Z.RESCHEDULE_DSID_DAY_LIMIT_REACHED]:{headline:e.value("error.reschedule-limit-reached"),text:e.value("error.reschedule-limit-reached-text"),cta:e.value("global.cta-ok")},[s.Z.INVALID_TIMESLOT_DUE_OUT_OF_LIMIT]:{headline:e.value("error.reschedule-too-close-to-start"),text:e.value("error.reschedule-too-close-to-start-text"),cta:e.value("global.cta-ok")},[s.Z.TIME_WINDOW_MISMATCH]:{headline:e.value("error.session-unavailable-mismatch"),text:e.value("error.session-unavailable-mismatch-text"),cta:e.value("global.cta-ok")}}}(t),pages:c(t,{url:n})}}}).displayName="Layout",t))}f.displayName="Ribbon"},97141:function(e,t,a){"use strict";a.d(t,{E:function(){return n}});var r=a(85893),l=a(11163);function n(e){let t=t=>{let a=(0,l.useRouter)();return(0,r.jsx)(e,{...t,router:a})};return t.displayName="withRouter(".concat(e.displayName,")"),t}},16477:function(e,t,a){"use strict";a.d(t,{a:function(){return i}});var r=a(85893),l=a(99637),n=a(4146),o=a(67294);let i=e=>{var t;return(t=class extends o.Component{render(){let{forwardedRef:t,...a}=this.props;return(0,r.jsx)(l.H.Consumer,{children:l=>(0,r.jsx)(e,{ref:t,viewportData:l,...a})})}}).displayName="".concat((0,n.G)(e),"WithViewportEmitterContext"),t}},39066:function(e){e.exports={"error-modal__button":"ErrorModal_error-modal__button__926_H"}}}]);