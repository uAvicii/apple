!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=19)}([,function(t,e,i){"use strict";t.exports=function(t,e){var i;return e?{width:(i=t.getBoundingClientRect()).width,height:i.height}:{width:t.offsetWidth,height:t.offsetHeight}}},function(t,e,i){"use strict";var s=i(27),r=function(){this.events={}},n=r.prototype;n.requestAnimationFrame=function(t){return this.events[t]||(this.events[t]=new s(t)),this.events[t].requestAnimationFrame},n.cancelAnimationFrame=function(t){return this.events[t]||(this.events[t]=new s(t)),this.events[t].cancelAnimationFrame},t.exports=new r},function(t,e,i){"use strict";function s(){this._events={}}var r=s.prototype;r.on=function(t,e){this._events[t]=this._events[t]||[],this._events[t].unshift(e)},r.once=function(t,e){var i=this;this.on(t,(function s(r){i.off(t,s),void 0!==r?e(r):e()}))},r.off=function(t,e){if(this.has(t)){if(1===arguments.length)return this._events[t]=null,void delete this._events[t];var i=this._events[t].indexOf(e);-1!==i&&this._events[t].splice(i,1)}},r.trigger=function(t,e){if(this.has(t))for(var i=this._events[t].length-1;i>=0;i--)void 0!==e?this._events[t][i](e):this._events[t][i]()},r.has=function(t){return t in this._events!=!1&&0!==this._events[t].length},r.destroy=function(){for(var t in this._events)this._events[t]=null;this._events=null},t.exports=s},function(t,e,i){"use strict";t.exports={SharedInstance:i(32)}},function(t,e,i){"use strict";t.exports={majorVersionNumber:"3.x"}},,,,,,,,,,,,,,function(t,e,i){t.exports=i(20)},function(t,e,i){"use strict";i(21);const s=i(42);t.exports=void s.detect()},function(t,e,i){"use strict";const s=i(22),r=document.getElementById("chapternav");r&&(t.exports=new s(r))},function(t,e,i){"use strict";const s=i(23),r={componentName:"chapternav",scrollEasing:"ease-out",scrollDuration:.4,usePaddles:!0};t.exports=class{constructor(t,e){return this.el=t,e=Object.assign({},r,e),this.options={componentName:e.componentName,itemsSelector:e.itemsSelector||`.${e.componentName}-items`,itemSelector:e.itemSelector||`.${e.componentName}-link`,itemLabelSelector:e.itemLabelSelector||`.${e.componentName}-label`,itemNewSelector:e.itemNewSelector||`.${e.componentName}-new`,leftPaddleSelector:e.leftPaddleSelector||`.${e.componentName}-paddle-left`,rightPaddleSelector:e.rightPaddleSelector||`.${e.componentName}-paddle-right`,tallClass:e.tallClass||`${e.componentName}-tall`,scrollEasing:e.scrollEasing,scrollDuration:e.scrollDuration,usePaddles:e.usePaddles},this.setChapternavTall(this.isChapternavTall()),new s(this.el,this.options)}isChapternavTall(){const t=this.el.querySelectorAll(this.options.itemSelector);let e=!1;return t.forEach((t=>{const i=t.querySelector(this.options.itemLabelSelector),s=!!t.querySelector(this.options.itemNewSelector),r=i.getElementsByTagName("BR").length>0;s&&r&&(e=!0)})),e}setChapternavTall(t){!0===t?this.el.classList.add(this.options.tallClass):this.el.classList.remove(this.options.tallClass)}}},function(t,e,i){"use strict";var s=i(1),r=i(24),n=i(25),a=i(40),h=i(41);const o={usePaddles:!0};t.exports=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.el=t,this._options=Object.assign(o,e),this._wrapper=this.el.querySelector(this._options.itemsSelector),this._items=[...this.el.querySelectorAll(this._options.itemSelector)],this._isRightToLeft="rtl"===window.getComputedStyle(t).direction,this._inlineStart=this._isRightToLeft?"right":"left",this._inlineEnd=this._isRightToLeft?"left":"right",this._scrollType=this._getScrollType(),this.lastCenteredItem=this._items[0],this.centerItem=this.centerItem.bind(this),this._usePaddles=this._options.usePaddles,this._usePaddles&&this._initializePaddles()}centerItem(t,e){this.lastCenteredItem=t;const i=.5*s(this.el).width,n=r(t).left+.5*s(t).width;let a=Math.round(n-i);e?this.el.scrollLeft=this._setNormalizedScroll(a):(this._destroyCurrentClip(),this._isRightToLeft&&(a*=-1),this._smoothScrollTo(a))}_initializePaddles(){const t=this._isRightToLeft?this._options.rightPaddleSelector:this._options.leftPaddleSelector,e=this._isRightToLeft?this._options.leftPaddleSelector:this._options.rightPaddleSelector;this.el.classList.add("with-paddles"),this._paddles={start:this.el.querySelector(t),end:this.el.querySelector(e)},this._children=this._wrapper.children,this._childCount=this._wrapper.children.length,this._onScrollClipComplete=this._onScrollClipComplete.bind(this),this._onPaddleStartClick=this._onPaddleStartClick.bind(this),this._paddles.start.addEventListener("click",this._onPaddleStartClick),this._onPaddleEndClick=this._onPaddleEndClick.bind(this),this._paddles.end.addEventListener("click",this._onPaddleEndClick),this._onScroll=this._onScroll.bind(this),this._wrapper.addEventListener("scroll",this._onScroll,{passive:!0}),this._updateElementMetrics=this._updateElementMetrics.bind(this),window.addEventListener("resize",this._updateElementMetrics),window.addEventListener("orientationchange",this._updateElementMetrics),this._updateElementMetrics()}_updateElementMetrics(){this._wrapperWidth=this._wrapper.offsetWidth,this._contentWidth=this._wrapper.scrollWidth,this._contentWidth<=this._wrapperWidth&&(this._destroyCurrentClip(),this._wrapper.scrollLeft=0),this._scrollStart=this._wrapper.scrollLeft,this._usePaddles&&(this._paddleWidth=this._paddles.start.offsetWidth,this._updatePaddleDisplay())}_onScroll(){this._lockPaddles||(this._scrollStart=this._wrapper.scrollLeft,this._updatePaddleDisplay())}_updatePaddleDisplay(){const t=this._getNormalizedScroll(this._scrollStart)+this._wrapperWidth;this._paddles.start.disabled=this._getNormalizedScroll(this._scrollStart)<=1,this._paddles.end.disabled=t>=this._contentWidth-1}_onPaddleStartClick(t){this._smoothScrollTo(this._getPaddleStartScrollDestination())}_getPaddleStartScrollDestination(){const t=this._getNormalizedScroll(this._scrollStart);let e;for(let i=this._childCount-1;i>0;i--)if(e=this._normalizePosition(r(this._children[i])),e[this._inlineStart]<t)return e[this._inlineEnd]-this._wrapperWidth;return 0}_onPaddleEndClick(t){this._smoothScrollTo(this._getPaddleEndScrollDestination())}_getPaddleEndScrollDestination(){const t=this._getNormalizedScroll(this._scrollStart)+this._wrapperWidth;let e;for(let i=0;i<this._childCount;i++)if(e=this._normalizePosition(r(this._children[i])),e[this._inlineEnd]>t)return e[this._inlineStart];return this._contentWidth}_getBoundedScrollX(t){const e=this._contentWidth-this._wrapperWidth;return Math.max(Math.min(t,e),0)}_smoothScrollTo(t){if(this._updateElementMetrics(),this._lockPaddles||t===this._scrollStart)return;let e=this._wrapper.scrollLeft;const i={ease:a.fromCSSString(h[this._options.scrollEasing]),draw:i=>{this._wrapper.scrollLeft=((t,e,i)=>t*(i-e)+e)(i,e,this._setNormalizedScroll(t))}};this._usePaddles&&(this._lockPaddles=!0),this._clip=new n(this._options.scrollDuration,i),this._clip.play().then((()=>{this._destroyCurrentClip(),this._clip=null,this._usePaddles&&this._onScrollClipComplete()}))}_onScrollClipComplete(){this._updatePaddleDisplay(),this._lockPaddles=!1,this._onScroll()}_getScrollType(){let t="reverse";const e=document.createElement("div");return e.style.cssText="width:2px; height:1px; position:absolute; top:-1000px; overflow:scroll; font-size: 14px;",e.style.direction="rtl",e.innerHTML="test",document.body.appendChild(e),e.scrollLeft>0?t="default":(e.scrollLeft=1,0===e.scrollLeft&&(t="negative")),document.body.removeChild(e),t}_getNormalizedScroll(t){return this._isRightToLeft?"default"===this._scrollType?this._contentWidth-this._wrapperWidth-Math.abs(t):Math.abs(t):t}_setNormalizedScroll(t){let e=this._getBoundedScrollX(t);return this._isRightToLeft&&"reverse"!==this._scrollType?"negative"===this._scrollType?-e:-(e-this._contentWidth+this._wrapperWidth):e}_normalizePosition(t){const e={top:t.top,right:t.right-this._paddleWidth,bottom:t.bottom,left:t.left-this._paddleWidth},i={top:t.top,right:this._wrapperWidth-t.right+this._paddleWidth,bottom:t.bottom,left:this._wrapperWidth-t.left+this._paddleWidth};return this._isRightToLeft?i:e}_destroyCurrentClip(){this._clip&&this._clip._isPlaying&&(this._clip.destroy(),this._lockPaddles=!1)}_destroyPaddles(){this._paddles&&(this._wrapper.removeEventListener("scroll",this._onScroll),this._paddles.start.removeEventListener("click",this._onPaddleStartClick),this._paddles.end.removeEventListener("click",this._onPaddleEndClick),this._paddles=null)}destroy(){this._items=null,this._destroyCurrentClip(),this._destroyPaddles(),window.removeEventListener("resize",this._updateElementMetrics),window.removeEventListener("orientationchange",this._updateElementMetrics)}}},function(t,e,i){"use strict";var s=i(1);t.exports=function(t,e){var i,r,n,a,h,o,c;return e?(r=(i=t.getBoundingClientRect()).top,n=i.left,a=i.width,h=i.height,t.offsetParent&&(r-=(o=t.offsetParent.getBoundingClientRect()).top,n-=o.left)):(c=s(t,e),r=t.offsetTop,n=t.offsetLeft,a=c.width,h=c.height),{top:r,right:n+a,bottom:r+h,left:n}}},function(t,e,i){"use strict";const s=i(26),r=i(35),n=i(36),a=i(37),h=i(38),o=i(39);t.exports=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("number"!=typeof t||!isFinite(t))throw new TypeError(`Clip duration must be a finite number; got "${t}"`);"function"==typeof e&&(e={draw:e}),this.ease=a(e.ease),this.update=a(e.update),this.draw=a(e.draw),this.prepare=a(e.prepare),this.finish=a(e.finish),this._duration=1e3*t,this._startTime=null,this._isPrepared=!1,this._promise=null,this._isPlaying=!1}get isReversed(){return this._duration<0}get isComplete(){const t=this.progress;return!this.isReversed&&t>=1||this.isReversed&&t<=0}get progress(){if(0===this._duration)return 1;let t=(this.lastFrameTime-this._startTime)/this._duration;return this.isReversed&&(t=1+t),o(t,0,1)}get easedProgress(){return this.ease?this.ease(this.progress):this.progress}_run(t,e){this.lastFrameTime=Date.now(),null===this._startTime&&(this._startTime=this.lastFrameTime);const i=this.easedProgress;this.update&&s((()=>this._isPlaying&&this.update(i))),r((()=>{this._isPlaying&&(this.draw&&this.draw(i),this.isComplete?h(r,[this.finish,e]):this._run(this,e))}))}play(){if("function"!=typeof this.draw)throw new Error('Clip must be given a "draw" function as an option or have its "draw" method overriden.');return this._isPlaying=!0,this._promise||(this._promise=new Promise(((t,e)=>{!this._isPrepared&&this.prepare?(this._isPrepared=!0,r((()=>n(this.prepare(),(()=>{this._run(this,t)}))))):this._run(this,t)}))),this._promise}destroy(){this._isPlaying=!1,this.draw=this.finish=this.update=this.prepare=null}static play(){return new this(...arguments).play()}}},function(t,e,i){"use strict";var s=i(2);t.exports=s.requestAnimationFrame("update")},function(t,e,i){"use strict";var s=i(28),r=function(t){this.phase=t,this.rafEmitter=new s,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},n=r.prototype;n.requestAnimationFrame=function(t,e){return!0===e&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,t),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,t),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,t),this._nextFrameCallbacksLength+=2),this._currentFrameID},n.cancelAnimationFrame=function(t){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(t),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(t),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(t),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},n._onRAFExecuted=function(t){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](t.time,t);this._frameCallbacks.length=0,this._frameCallbackLength=0},n._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},n._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},n._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},n._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},n._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},n._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},n._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},t.exports=r},function(t,e,i){"use strict";var s=i(29),r=function(t){s.call(this,t)};(r.prototype=Object.create(s.prototype))._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=r},function(t,e,i){"use strict";var s,r=i(30).EventEmitterMicro,n=i(31),a=i(34);function h(t){t=t||{},r.call(this),this.id=a.getNewID(),this.executor=t.executor||n,this._reset(),this._willRun=!1,this._didDestroy=!1}(s=h.prototype=Object.create(r.prototype)).run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},s.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},s.destroy=function(){var t=this.willRun();return this.cancel(),this.executor=null,r.prototype.destroy.call(this),this._didDestroy=!0,t},s.willRun=function(){return this._willRun},s.isRunning=function(){return this._isRunning},s._subscribe=function(){return this.executor.subscribe(this)},s._unsubscribe=function(){return this.executor.unsubscribe(this)},s._onAnimationFrameStart=function(t){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",t))},s._onAnimationFrameEnd=function(t){this._willRun||(this.trigger("stop",t),this._reset())},s._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=h},function(t,e,i){"use strict";t.exports={EventEmitterMicro:i(3)}},function(t,e,i){"use strict";var s=i(4).SharedInstance,r=i(5).majorVersionNumber,n=i(33);t.exports=s.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",r,n)},function(t,e,i){"use strict";var s,r="undefined"!=typeof window?window:{},n=r.AC,a=(s={},{get:function(t,e){var i=null;return s[t]&&s[t][e]&&(i=s[t][e]),i},set:function(t,e,i){return s[t]||(s[t]={}),s[t][e]="function"==typeof i?new i:i,s[t][e]},share:function(t,e,i){var s=this.get(t,e);return s||(s=this.set(t,e,i)),s},remove:function(t,e){var i=typeof e;if("string"!==i&&"number"!==i)s[t]&&(s[t]=null);else{if(!s[t]||!s[t][e])return;s[t][e]=null}}});n||(n=r.AC={}),n.SharedInstance||(n.SharedInstance=a),t.exports=n.SharedInstance},function(t,e,i){"use strict";var s,r=i(3);function n(t){t=t||{},this._reset(),this.updatePhases(),this.eventEmitter=new r,this._willRun=!1,this._totalSubscribeCount=-1;var e=null,i=null;"undefined"!=typeof window?(e=window.requestAnimationFrame,i=window.cancelAnimationFrame):e=i=function(){},this._requestAnimationFrame=e,this._cancelAnimationFrame=i,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}(s=n.prototype).frameRequestedPhase="requested",s.startPhase="start",s.runPhases=["update","external","draw"],s.endPhase="end",s.disabledPhase="disabled",s.beforePhaseEventPrefix="before:",s.afterPhaseEventPrefix="after:",s.subscribe=function(t,e){return this._totalSubscribeCount++,this._nextFrameSubscribers[t.id]||(e?this._nextFrameSubscribersOrder.unshift(t.id):this._nextFrameSubscribersOrder.push(t.id),this._nextFrameSubscribers[t.id]=t,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},s.subscribeImmediate=function(t,e){return this._totalSubscribeCount++,this._subscribers[t.id]||(e?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,t.id):this._subscribersOrder.unshift(t.id),this._subscribers[t.id]=t,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},s.unsubscribe=function(t){return!!this._nextFrameSubscribers[t.id]&&(this._nextFrameSubscribers[t.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},s.getSubscribeID=function(){return this._totalSubscribeCount+=1},s.destroy=function(){var t=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,t},s.useExternalAnimationFrame=function(t){if("boolean"==typeof t){var e=this._isUsingExternalAnimationFrame;return t&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||t||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=t,t?this._boundOnExternalAnimationFrame:e||!1}},s.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},s._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},s._cancel=function(){var t=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,t=!0),this._isRunning||this._reset(),t},s._onAnimationFrame=function(t){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=t-this.lastFrameTime,this.lastFrameTime=t,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=t,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},s._onExternalAnimationFrame=function(t){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(t)},s._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},t.exports=n},function(t,e,i){"use strict";var s=i(4).SharedInstance,r=i(5).majorVersionNumber,n=function(){this._currentID=0};n.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=s.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",r,n)},function(t,e,i){"use strict";var s=i(2);t.exports=s.requestAnimationFrame("draw")},function(t,e,i){"use strict";t.exports=function(t,e){t instanceof Promise?t.then(e):e()}},function(t,e,i){"use strict";t.exports=function(t){return"function"==typeof t?t:null}},function(t,e,i){"use strict";t.exports=function(t,e){const i=e.length;let s=0;!function r(){"function"==typeof e[s]&&t(e[s]),s++,s<i&&r()}()}},function(t,e,i){"use strict";t.exports=function(t,e,i){return Math.min(Math.max(t,e),i)}},function(t,e,i){"use strict";const s=1e-5,r=Math.abs;class n{constructor(t,e,i,s){this.cp=new Float32Array(6),this.cp[0]=3*t,this.cp[1]=3*(i-t)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*e,this.cp[4]=3*(s-e)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}sampleCurveX(t){return((this.cp[2]*t+this.cp[1])*t+this.cp[0])*t}sampleCurveY(t){return((this.cp[5]*t+this.cp[4])*t+this.cp[3])*t}sampleCurveDerivativeX(t){return(3*this.cp[2]*t+2*this.cp[1])*t+this.cp[0]}solveCurveX(t){var e,i,n,a,h,o;for(n=t,o=0;o<5;o++){if(a=this.sampleCurveX(n)-t,r(a)<s)return n;if(h=this.sampleCurveDerivativeX(n),r(h)<s)break;n-=a/h}if((n=t)<(e=0))return e;if(n>(i=1))return i;for(;e<i;){if(a=this.sampleCurveX(n),r(a-t)<s)return n;t>a?e=n:i=n,n=.5*(i-e)+e}return n}solve(t){return this.sampleCurveY(this.solveCurveX(t))}}const a=/\d*\.?\d+/g;n.fromCSSString=function(t){let e=t.match(a);if(4!==e.length)throw`UnitBezier could not convert ${t} to cubic-bezier`;let i=e.map(Number),s=new n(i[0],i[1],i[2],i[3]);return s.solve.bind(s)},t.exports=n},function(t,e,i){"use strict";const s={easeInCubic:"cubic-bezier(0.42, 0.0, 1.0, 1.0)",easeOutCubic:"cubic-bezier(0.0, 0.0, 0.58, 1.0)",easeInOutCubic:"cubic-bezier(0.42, 0.0, 0.58, 1.0)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.0, 0.0, 1.0, 1.0)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1.0)","ease-in":"cubic-bezier(0.42, 0.0, 1.0, 1.0)","ease-out":"cubic-bezier(0.0, 0.0, 0.58, 1.0)","ease-in-out":"cubic-bezier(0.42, 0.0, 0.58, 1.0)"};t.exports=s},function(t,e,i){"use strict";function s(){this._createElements(),this._bindEvents()}var r=s.prototype;r._bindEvents=function(){this._onResize=this._resize.bind(this)},r._createElements=function(){if("undefined"!=typeof document&&!this.span){this.span=document.createElement("span");var t=this.span.style;if(t.visibility="hidden",t.position="absolute",t.top="0",t.zIndex="-1",this.span.innerHTML="&nbsp;",!window.ResizeObserver){this.iframe=document.createElement("iframe");var e=this.iframe.style;e.position="absolute",e.top="0",e.left="0",e.width="100%",e.height="100%",this.span.appendChild(this.iframe)}document.body.appendChild(this.span)}},r.detect=function(t){this._createElements(),this.originalSize=t||17,this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.currentSize>this.originalSize&&this._onResize(),this.isDetecting||(window.ResizeObserver?(this.resizeObserver=new ResizeObserver(this._onResize),this.resizeObserver.observe(this.span)):this.iframe.contentWindow.addEventListener("resize",this._onResize),this.isDetecting=!0)},r._resize=function(){this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.originalSize<this.currentSize?document.documentElement.classList.add("text-zoom"):document.documentElement.classList.remove("text-zoom"),window.dispatchEvent(new Event("resize")),window.dispatchEvent(new CustomEvent("resize:text-zoom",{detail:this}))},r.getScale=function(){return this.currentSize/this.originalSize},r.remove=function(){this.isDetecting&&(this.resizeObserver&&this.resizeObserver.unobserve(this.span),this.iframe&&this.iframe.contentWindow.removeEventListener("resize",this._onResize),this.isDetecting=!1)},r.destroy=function(){this.remove(),this.span&&this.span.parentElement&&this.span.parentElement.removeChild(this.span),this.span=null,this.iframe=null,this.resizeObserver=null},t.exports=new s}]);