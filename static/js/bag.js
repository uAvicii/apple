/*! 5.0.8 | BH: 965037452b0b6b6d4a55 | CH: 57cae2a32 */
/*! License information is available at licenses.txt */(()=>{var e={7630:(e,t,a)=>{var r,n,s;!function(l){if("object"==typeof e.exports){var o=l(a(5076),t);void 0!==o&&(e.exports=o)}else n=[a,t],void 0===(s="function"==typeof(r=l)?r.apply(t,n):r)||(e.exports=s)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletEncryptedData=t.ECDHWrappedData=t.ApplePayCryptoLib_ECV2=void 0;t.ApplePayCryptoLib_ECV2=class{constructor(){this.ecdhParams={name:"ECDH",namedCurve:"P-256"},this.keyLengthECAndDerived=256,this.keyLengthSecretKeyInBytes=16,this.aesParamsForDerivedSecret={name:"AES-GCM",length:this.keyLengthECAndDerived},this.aesParamsForSecretKey={name:"AES-GCM",length:this.keyLengthSecretKeyInBytes},this.sha256="SHA-256"}ec_v2_web(e,t){if(!e||0==e.trim().length)throw"RecipientPublicKeyJwk is invalid";if(!t||0==t.trim().length)throw"PlaintextToEncrypt is invalid";let a;try{a=JSON.parse(e)}catch(e){throw"RecipientPublicKeyJwk is not proper JSON"}const r=window.crypto.subtle.generateKey(this.ecdhParams,!1,["deriveKey"]),n=window.crypto.subtle.importKey("jwk",a,this.ecdhParams,!0,[]);return Promise.all([r,n]).then((e=>{const a=e[0],r=e[1];return this.innerEcv2Encrypt(a.privateKey,a.publicKey,r,t)}))}innerEcv2Encrypt(e,t,a,r){const n={name:"ECDH",public:a},s=window.crypto.subtle.deriveKey(n,e,this.aesParamsForDerivedSecret,!0,["encrypt"]),l=window.crypto.subtle.exportKey("spki",a);return Promise.all([s,l]).then((e=>{const a=e[0],n=e[1];return window.crypto.subtle.exportKey("raw",a).then((e=>this.ecv2KdfWrapper(t,r,e,n)))}))}ecv2KdfWrapper(e,t,a,r){return this.ecv2Kdf(a,e,this.keyLengthECAndDerived).then((a=>window.crypto.subtle.digest(this.sha256,a).then((a=>{const n=a.slice(0,this.keyLengthSecretKeyInBytes);return window.crypto.subtle.importKey("raw",n,this.aesParamsForSecretKey,!1,["encrypt"]).then((a=>{const n=new ArrayBuffer(this.keyLengthSecretKeyInBytes),s=this.convertStringToUTF8ByteArray(t),l={name:"AES-GCM",iv:n},o=window.crypto.subtle.encrypt(l,a,s),i=this.ecPublicKeyToRawUncompressed(e,this.keyLengthECAndDerived);return this.createEcv2Response(o,i,r)}))}))))}createEcv2Response(e,t,n){const s=window.crypto.subtle.digest(this.sha256,n);return Promise.all([e,t,s]).then((e=>{const t=e[0],n=e[1],s=e[2],l=this.buf2hex(t),o=this.buf2hex(n),i=new r(o,l);return new a("EC_v2",i,this.buf2hex(s))}))}ecv2Kdf(e,t,a){return this.ecPublicKeyToRawUncompressed(t,a).then((t=>{var a=0,r=new ArrayBuffer(t.byteLength+4+e.byteLength),n=new Uint8Array(r);a=this.write(new Uint8Array(e),n,a);var s=new Uint8Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=1,a=this.write(s,n,a),this.write(new Uint8Array(t),n,a),r}),(e=>{throw"KDF failed"}))}ecPublicKeyToRawUncompressed(e,t){t/=8;var a=new ArrayBuffer(2*t+1),r=new Int8Array(a),n=0;return r[n]=4,n++,window.crypto.subtle.exportKey("jwk",e).then((e=>{for(var t=this.base64UrlDecode(e.x||""),s=0;s<t.length;++s,++n)r[n]=t[s];var l=this.base64UrlDecode(e.y||"");for(s=0;s<l.length;++s,++n)r[n]=l[s];return a}),(e=>{throw"Cannot uncompress key"}))}base64UrlDecode(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";const t=window.atob(e);for(var a=new Int8Array(t.length),r=0;r<t.length;++r)a[r]=t.codePointAt(r)||0;return a}write(e,t,a){for(var r=0;r<e.length;++r)t[r+a]=e[r];return r+a}buf2hex(e){return Array.from(new Uint8Array(e)).map((e=>this.padStart(e.toString(16),2,"0"))).join("")}padStart(e,t,a){return t>>=0,e.length>t?e:((t-=e.length)>a.length&&(a+=a.repeat(t/a.length)),a.slice(0,t)+e)}convertStringToUTF8ByteArray(e){const t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,(function(t,a,r){r[a]=e.charCodeAt(a)})),t}};class a{constructor(e,t,a){this._encryptionVersion=e,this._encryptedData=t,this._publicKeyHash=a}}t.WalletEncryptedData=a;class r{constructor(e,t){this.ephemeralPublicKey=e,this.gcmEncryptedData=t.substr(0,t.length-32),this.gcmTag=t.substr(t.length-32)}}t.ECDHWrappedData=r}))},6941:(e,t,a)=>{var r,n,s;!function(l){if("object"==typeof e.exports){var o=l(a(5076),t);void 0!==o&&(e.exports=o)}else n=[a,t],void 0===(s="function"==typeof(r=l)?r.apply(t,n):r)||(e.exports=s)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyAgreementParams=t.KDFParams=t.JWSRoot=t.JWSProtected=t.JWSHeader=t.EncryptionParams=t.EncryptedMessage=t.EncryptedDataContainer=t.ApplePayCryptoLib_ECV3=void 0;t.ApplePayCryptoLib_ECV3=class{constructor(){this.ecdhParams={name:"ECDH",namedCurve:"P-256"},this.ecdsaParams={name:"ECDSA",namedCurve:"P-256"},this.keyLengthECAndDerived=256,this.keyLengthSecretKeyInBytes=16,this.aesParamsForDerivedSecret={name:"AES-GCM",length:this.keyLengthECAndDerived},this.aesParamsForSecretKey={name:"AES-GCM",length:this.keyLengthSecretKeyInBytes},this.sha256="SHA-256",this.defaultSender="web"}ec_v3_web_with_jws(e,t,a,r,n){if(!a||0==a.trim().length)throw"Nonce is invalid";if(!e||0==e.trim().length)throw"RecipientSigningPublicKeyJwk is invalid";if(!t||0==t.trim().length)throw"RecipientKeyAgreementPublicKeyJwk is invalid";if(!r||0==r.trim().length)throw"PlaintextToEncrypt is invalid";if(!n||0==n.trim().length)throw"Recipient is invalid";let s,l;try{s=JSON.parse(e)}catch(e){throw"RecipientSigningPublicKeyJwk is not proper JSON"}try{l=JSON.parse(t)}catch(e){throw"RecipientKeyAgreementPublicKeyJwk is not proper JSON"}const o=window.crypto.subtle.importKey("jwk",s,this.ecdhParams,!0,[]),i=window.crypto.subtle.importKey("jwk",l,this.ecdhParams,!0,[]),c=window.crypto.subtle.generateKey(this.ecdhParams,!1,["deriveKey"]),d=window.crypto.subtle.generateKey(this.ecdsaParams,!1,["sign"]);return Promise.all([c,d,i,o]).then((e=>{const t=e[0],s=e[1],l=e[2],o=e[3];return this.innerEcv3Encrypt(t.privateKey,t.publicKey,s.publicKey,l,o,r,n).then((e=>this.ecPublicKeyToRawUncompressed(s.publicKey,this.keyLengthECAndDerived).then((t=>{const r=window.crypto.subtle.digest(this.sha256,t),n=window.crypto.subtle.exportKey("jwk",s.publicKey);return this.preSignAndGenerateJws(r,n,e[0],a,s.privateKey)}))))}))}preSignAndGenerateJws(e,t,a,r,n){return Promise.all([e,t]).then((e=>{const t=e[0],s=e[1],l=this.base64EncodeFromBuffer(t);return this.signAndGenerateJws(a,l,r,s,n).then((e=>[e]))}))}signAndGenerateJws(e,t,a,r,n){const s=new i("ES256",t,"JOSE+JSON","application/json; charset=utf-8",(new Date).toISOString(),a,["nonce","created"]),l={name:"ECDSA",hash:this.sha256},d=this.base64UrlEncodeNoPadding(JSON.stringify(s)),m=this.base64UrlEncodeNoPadding(JSON.stringify(e)),u=d+"."+m,p=this.convertStringToUTF8ByteArray(u);return window.crypto.subtle.sign(l,n,p).then((e=>{const t=this.base64UrlEncodeFromBuffer(e),a=new c(r);return new o(m,d,a,t)}))}ec_v3_web(e,t,a,r){if(!e||0==e.trim().length)throw"RecipientSigningPublicKeyJwk is invalid";if(!t||0==t.trim().length)throw"RecipientKeyAgreementPublicKeyJwk is invalid";if(!a||0==a.trim().length)throw"PlaintextToEncrypt is invalid";if(!r||0==r.trim().length)throw"Recipient is invalid";let n,s;try{n=JSON.parse(e)}catch(e){throw"RecipientSigningPublicKeyJwk is not proper JSON"}try{s=JSON.parse(t)}catch(e){throw"RecipientKeyAgreementPublicKeyJwk is not proper JSON"}const l=window.crypto.subtle.importKey("jwk",n,this.ecdhParams,!0,[]),o=window.crypto.subtle.importKey("jwk",s,this.ecdhParams,!0,[]),i=window.crypto.subtle.generateKey(this.ecdhParams,!1,["deriveKey"]),c=window.crypto.subtle.generateKey(this.ecdsaParams,!1,["sign"]);return Promise.all([i,c,o,l]).then((e=>{const t=e[0],n=e[1],s=e[2],l=e[3];return this.innerEcv3Encrypt(t.privateKey,t.publicKey,n.publicKey,s,l,a,r)}))}innerEcv3Encrypt(e,t,a,r,n,s,l){var o={name:"ECDH",public:r};return window.crypto.subtle.deriveKey(o,e,this.aesParamsForDerivedSecret,!0,["encrypt"]).then((e=>window.crypto.subtle.exportKey("raw",e).then((e=>this.ecv3KdfWrapper(t,a,r,n,s,e,l)))))}ecv3KdfWrapper(e,t,a,r,n,s,l){return this.ecv3Kdf(s,e,t,a,r,this.keyLengthECAndDerived).then((s=>window.crypto.subtle.digest("SHA-256",s).then((s=>{var o=s.slice(0,this.keyLengthSecretKeyInBytes);return window.crypto.subtle.importKey("raw",o,this.aesParamsForSecretKey,!1,["encrypt"]).then((o=>{const i=s.slice(this.keyLengthSecretKeyInBytes,32),c=this.convertStringToUTF8ByteArray(n),d={name:"AES-GCM",iv:i};return window.crypto.subtle.encrypt(d,o,c).then((n=>this.createEcv3Response(n,r,a,e,t,l)))}))}))))}ecv3Kdf(e,t,a,r,n,s){var l=this.ecPublicKeyToRawUncompressed(t,s),o=this.ecPublicKeyToRawUncompressed(a,s),i=this.ecPublicKeyToRawUncompressed(r,s),c=this.ecPublicKeyToRawUncompressed(n,s);return Promise.all([l,o,i,c]).then((t=>{var a=t[0],r=t[1],n=t[2],s=t[3],l=0,o=new ArrayBuffer(e.byteLength+4+a.byteLength+r.byteLength+n.byteLength+s.byteLength),i=new Uint8Array(o);l=this.write(new Uint8Array(e),i,l);var c=new Uint8Array(4);return c[0]=0,c[1]=0,c[2]=0,c[3]=1,l=this.write(c,i,l),l=this.write(new Uint8Array(a),i,l),l=this.write(new Uint8Array(r),i,l),l=this.write(new Uint8Array(n),i,l),this.write(new Uint8Array(s),i,l),o}),(e=>{throw"KDF failed"}))}createEcv3Response(e,t,o,i,c,d){const m=window.crypto.subtle.exportKey("raw",i),u=this.ecPublicKeyToRawUncompressed(o,this.keyLengthECAndDerived),p=this.ecPublicKeyToRawUncompressed(t,this.keyLengthECAndDerived),g=this.ecPublicKeyToRawUncompressed(c,this.keyLengthECAndDerived);return Promise.all([m,u,p,g]).then((t=>{const o=t[0],i=t[1],c=t[2],m=t[3],u=window.crypto.subtle.digest(this.sha256,i),p=window.crypto.subtle.digest(this.sha256,c),g=window.crypto.subtle.digest(this.sha256,m);return Promise.all([u,p,g]).then((t=>{const i=t[0],c=t[1],u=t[2],p=new l(this.base64EncodeFromBuffer(o),this.base64EncodeFromBuffer(i)),g=this.base64EncodeFromBuffer(u),h=new s(g,this.base64EncodeFromBuffer(c)),y=new n("EC_v3",p,h),E=new r(y,this.base64EncodeFromBuffer(e));return[new a(this.defaultSender,this.base64EncodeFromBuffer(m),d,E)]}))}))}ecPublicKeyToRawUncompressed(e,t){t/=8;var a=new ArrayBuffer(2*t+1),r=new Int8Array(a),n=0;return r[n]=4,n++,window.crypto.subtle.exportKey("jwk",e).then((e=>{for(var t=this.base64UrlDecode(e.x||""),s=0;s<t.length;++s,++n)r[n]=t[s];var l=this.base64UrlDecode(e.y||"");for(s=0;s<l.length;++s,++n)r[n]=l[s];return a}),(e=>{throw"Cannot uncompress key"}))}write(e,t,a){for(var r=0;r<e.length;++r)t[r+a]=e[r];return r+a}base64UrlDecode(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";const t=atob(e);for(var a=new Int8Array(t.length),r=0;r<t.length;++r)a[r]=t.codePointAt(r)||0;return a}base64UrlEncodeFromBuffer(e){var t="";const a=new Uint8Array(e),r=a.byteLength;for(var n=0;n<r;n++)t+=String.fromCharCode(a[n]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_")}base64EncodeFromBuffer(e){var t="";const a=new Uint8Array(e),r=a.byteLength;for(var n=0;n<r;n++)t+=String.fromCharCode(a[n]);return btoa(t)}base64UrlEncodeNoPadding(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}convertStringToUTF8ByteArray(e){const t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,(function(t,a,r){r[a]=e.charCodeAt(a)})),t}};class a{constructor(e,t,a,r){this.sender=e,this.senderSigningKey=t,this.recipient=a,this.message=r}}t.EncryptedMessage=a;class r{constructor(e,t){this.params=e,this.data=t}}t.EncryptedDataContainer=r;class n{constructor(e,t,a){this.algorithmIdentifier=e,this.keyAgreement=t,this.kdf=a}}t.EncryptionParams=n;class s{constructor(e,t){this.senderSigningKeyFingerprint=e,this.recipientSigningKeyFingerprint=t}}t.KDFParams=s;class l{constructor(e,t){this.sender=e,this.recipientFingerprint=t}}t.KeyAgreementParams=l;class o{constructor(e,t,a,r){this.payload=e,this.protected=t,this.header=a,this.signature=r}}t.JWSRoot=o;class i{constructor(e,t,a,r,n,s,l){this.alg=e,this.kid=t,this.typ=a,this.cty=r,this.created=n,this.nonce=s,this.crit=l}}t.JWSProtected=i;class c{constructor(e){this.jwk=e}}t.JWSHeader=c}))},5076:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5076,e.exports=t},3797:(e,t,a)=>{a(5069)},5069:e=>{let t={init:function(){document.addEventListener("click",this.handleClick.bind(this))},handleClick:function(e){let t=e.target,a=null;if(document.documentElement.contains(t))for(;null!==t;){if(t.classList.contains("as-chat-button")){a=t;break}t=t.parentElement}a&&(e.preventDefault(),this.createForm(a),this.openChatWindow())},createForm:function(e){let t,a,r,n,s,l,o,i=window.chatConfig.chat.page,c=i?Object.keys(i):[],d=[],m=null,u=document.forms.chatForm,p=function(e,t){null===t&&(t=""),d+='<input type="hidden" id="'+e+'" name="'+e+'" value="'+t+'" />'};for(a=e?e.getAttribute("data-chat-ui"):null,m=a?a.split(";"):[],r=Object.keys(m),o=0;o<r.length;o++)n=m[r[o]].split("="),""!==n[0]&&p(n[0],n[1]);for(o=0;o<c.length;o++)s=i[c[o]],"url"!==s.name&&p(s.name,s.value),"url"===s.name&&(t=s.value);p("WEB_CHAT_PAGE_URL",document.URL),l=document.createElement("form"),l.id="chatForm",l.dataset.analyticsType="chat",l.action=t,l.target="chatWin",l.method="post",l.innerHTML=d,u&&document.body.removeChild(u),document.body.appendChild(l)},openChatWindow:function(){let e=document.getElementById("chatForm");window.open("#","chatWin","width=375,height=773,menubar=no,location=no,resizable=no,scrollbars=no,status=no"),e.submit()}};document.addEventListener("DOMContentLoaded",(function(){let e=window.chatConfig;e&&e.chat?t.init():window.console.log("No chat config detected.")})),e.exports=t},1836:()=>{const e=window.asMetrics||{};window.as=window.as||{},window.as.mvt=e.Mvt,window.apple=window.apple||{},window.apple.metrics=window.apple.metrics||{},window.apple.metrics.Metrics=e.Metrics,window.Event.onLoad=()=>{}},2485:(e,t)=>{var a;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var s=typeof a;if("string"===s||"number"===s)e.push(a);else if(Array.isArray(a)){if(a.length){var l=n.apply(null,a);l&&e.push(l)}}else if("object"===s){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){e.push(a.toString());continue}for(var o in a)r.call(a,o)&&a[o]&&e.push(o)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(a=function(){return n}.apply(t,[]))||(e.exports=a)}()},5127:()=>{!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,a=n(t);a;)a=n(t=a.ownerDocument);return t}(),t=[],a=null,r=null;l.prototype.THROTTLE_TIMEOUT=100,l.prototype.POLL_INTERVAL=null,l.prototype.USE_MUTATION_OBSERVER=!0,l._setupCrossOriginUpdater=function(){return a||(a=function(e,a){r=e&&a?m(e,a):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),a},l._resetCrossOriginUpdater=function(){a=null,r=null},l.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},l.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},l.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},l.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},l.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,a){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==a[t-1]}))},l.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},l.prototype._monitorIntersections=function(t){var a=t.defaultView;if(a&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,s=null,l=null;this.POLL_INTERVAL?s=a.setInterval(r,this.POLL_INTERVAL):(o(a,"resize",r,!0),o(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in a&&(l=new a.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(s&&e.clearInterval(s),i(e,"resize",r,!0)),i(t,"scroll",r,!0),l&&l.disconnect()}));var c=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=c){var d=n(t);d&&this._monitorIntersections(d.ownerDocument)}}},l.prototype._unmonitorIntersections=function(t){var a=this._monitoringDocuments.indexOf(t);if(-1!=a){var r=this.root&&(this.root.ownerDocument||this.root)||e,s=this._observationTargets.some((function(e){var a=e.element.ownerDocument;if(a==t)return!0;for(;a&&a!=r;){var s=n(a);if((a=s&&s.ownerDocument)==t)return!0}return!1}));if(!s){var l=this._monitoringUnsubscribes[a];if(this._monitoringDocuments.splice(a,1),this._monitoringUnsubscribes.splice(a,1),l(),t!=r){var o=n(t);o&&this._unmonitorIntersections(o.ownerDocument)}}}},l.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},l.prototype._checkForIntersections=function(){if(this.root||!a||r){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var n=r.element,l=c(n),o=this._rootContainsTarget(n),i=r.entry,d=e&&o&&this._computeTargetAndRootIntersection(n,l,t),m=null;this._rootContainsTarget(n)?a&&!this.root||(m=t):m={top:0,bottom:0,left:0,right:0,width:0,height:0};var u=r.entry=new s({time:window.performance&&performance.now&&performance.now(),target:n,boundingClientRect:l,rootBounds:m,intersectionRect:d});i?e&&o?this._hasCrossedThreshold(i,u)&&this._queuedEntries.push(u):i&&i.isIntersecting&&this._queuedEntries.push(u):this._queuedEntries.push(u)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},l.prototype._computeTargetAndRootIntersection=function(t,n,s){if("none"!=window.getComputedStyle(t).display){for(var l,o,i,d,u,g,h,y,E=n,v=p(t),b=!1;!b&&v;){var f=null,w=1==v.nodeType?window.getComputedStyle(v):{};if("none"==w.display)return null;if(v==this.root||9==v.nodeType)if(b=!0,v==this.root||v==e)a&&!this.root?!r||0==r.width&&0==r.height?(v=null,f=null,E=null):f=r:f=s;else{var N=p(v),S=N&&c(N),C=N&&this._computeTargetAndRootIntersection(N,S,s);S&&C?(v=N,f=m(S,C)):(v=null,E=null)}else{var T=v.ownerDocument;v!=T.body&&v!=T.documentElement&&"visible"!=w.overflow&&(f=c(v))}if(f&&(l=f,o=E,i=void 0,d=void 0,u=void 0,g=void 0,h=void 0,y=void 0,i=Math.max(l.top,o.top),d=Math.min(l.bottom,o.bottom),u=Math.max(l.left,o.left),g=Math.min(l.right,o.right),y=d-i,E=(h=g-u)>=0&&y>=0&&{top:i,bottom:d,left:u,right:g,width:h,height:y}||null),!E)break;v=v&&p(v)}return E}},l.prototype._getRootRect=function(){var t;if(this.root&&!g(this.root))t=c(this.root);else{var a=g(this.root)?this.root:e,r=a.documentElement,n=a.body;t={top:0,left:0,right:r.clientWidth||n.clientWidth,width:r.clientWidth||n.clientWidth,bottom:r.clientHeight||n.clientHeight,height:r.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(t)},l.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,a){return"px"==t.unit?t.value:t.value*(a%2?e.width:e.height)/100})),a={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return a.width=a.right-a.left,a.height=a.bottom-a.top,a},l.prototype._hasCrossedThreshold=function(e,t){var a=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(a!==r)for(var n=0;n<this.thresholds.length;n++){var s=this.thresholds[n];if(s==a||s==r||s<a!=s<r)return!0}},l.prototype._rootIsInDom=function(){return!this.root||u(e,this.root)},l.prototype._rootContainsTarget=function(t){var a=this.root&&(this.root.ownerDocument||this.root)||e;return u(a,t)&&(!this.root||a==t.ownerDocument)},l.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},l.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=l,window.IntersectionObserverEntry=s}function n(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function s(e){this.time=e.time,this.target=e.target,this.rootBounds=d(e.rootBounds),this.boundingClientRect=d(e.boundingClientRect),this.intersectionRect=d(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,a=t.width*t.height,r=this.intersectionRect,n=r.width*r.height;this.intersectionRatio=a?Number((n/a).toFixed(4)):this.isIntersecting?1:0}function l(e,t){var a,r,n,s=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(s.root&&1!=s.root.nodeType&&9!=s.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(a=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,n=null,function(){n||(n=setTimeout((function(){a(),n=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function o(e,t,a,r){"function"==typeof e.addEventListener?e.addEventListener(t,a,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,a)}function i(e,t,a,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,a,r||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,a)}function c(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function d(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function m(e,t){var a=t.top-e.top,r=t.left-e.left;return{top:a,left:r,height:t.height,width:t.width,bottom:a+t.height,right:r+t.width}}function u(e,t){for(var a=t;a;){if(a==e)return!0;a=p(a)}return!1}function p(t){var a=t.parentNode;return 9==t.nodeType&&t!=e?n(t):(a&&a.assignedSlot&&(a=a.assignedSlot.parentNode),a&&11==a.nodeType&&a.host?a.host:a)}function g(e){return e&&9===e.nodeType}}()},5338:(e,t,a)=>{"use strict";var r=a(5206);t.H=r.createRoot,r.hydrateRoot},5206:e=>{"use strict";e.exports=ReactDOM}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{"use strict";var e={};a.r(e),a.d(e,{encrypt:()=>Ft});var t={};a.r(t),a.d(t,{encrypt:()=>_t});var r={};a.r(r),a.d(r,{encrypt:()=>Kt});var n={};a.r(n),a.d(n,{encrypt:()=>Ht});a(1836);const s=React;var l=a.n(s),o=a(5338);const i=e=>{if(!e)throw new Error("moduleName parameter required for Logger");const t={TRACE:4,DEBUG:3,INFO:2,WARN:1,ERROR:0};let a,r;const n=n=>s=>{if(r=window.sessionStorage.getItem("AS_LOG_LEVEL")||window.AS_LOG_LEVEL||t.ERROR,a=r in t?t[r]:t.ERROR,t[n]<=a)try{let t;t="string"==typeof s||"number"==typeof s||"boolean"==typeof s||"bigint"==typeof s?{message:s}:Array.isArray(s)?{message:s.toString()}:function(e){const t={message:e.message,colno:e.colno,lineno:e.lineno,stack:e.stack||e.error&&e.error.stack,name:e.name,code:e.code};return{...e,...t}}(s),(e=>{const t=new CustomEvent("echoLogEvent",{detail:e});window.dispatchEvent(t)})({...t,id:e,type:n.toLowerCase()}),console[n.toLowerCase()](s)}catch(e){console.error("as-utilities/logger: could not log message",e)}};return{error:n("ERROR"),warn:n("WARN"),info:n("INFO"),debug:n("DEBUG"),trace:n("TRACE")}},c={Backspace:8,Tab:9,Clear:12,Return:13,Shift:16,Ctrl:17,Alt:18,Esc:27,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45,CapsLock:20,LeftCommand:91,RightCommand:93,MozillaCommand:224,RightWindowsStart:92,Pause:19,Space:32,Help:47,LeftWindow:91,Select:93,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,NumPadMultiply:106,NumPadPlus:107,NumPadEnter:108,NumPadMinus:109,NumPadPeriod:110,NumPadDivide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NumLock:144,ScrollLock:145},d={};Object.entries(c).forEach((([e,t])=>d[t]=e));const m=/^(\S+)\s*(.+)?$/,u="data-trigger";let p=!1;const g={},h=(e,t,a)=>{const r=(e=>{if(e=e.trim(),!g[e]){const t=e.split(",").map((e=>e.trim())).filter((e=>!!e)).map((e=>{const t=e.match(m);return{type:t&&t[1],sel:t&&t[2]}}));g[e]=t}return g[e]})(t);let n=null;r.forEach((({type:t,sel:r})=>{if("preventDefault"===t)a.preventDefault();else if("focus"===t||"click"===t){n=n||(e=>{for(let t=e;t;t=t.parentElement)if(t.hasAttribute("data-trigger-context"))return t;return document.body})(e);const a=r?((e,t=document)=>Array.from(t.querySelectorAll(e)))(r,n):[e];a.forEach((e=>e[t]?e[t]():null))}}))},y=e=>{const t=e.target,a=e&&"keyCode"in e?e.keyCode:null,r=null!==a,n=null!==a&&d[a];for(let s=t;s;s=s.parentElement){if(s&&s.hasAttribute("data-trigger-stoppropagation"))return;const t=!r&&s.getAttribute(`${u}-${e.type}`)||r&&s.getAttribute(`${u}-${a}`)||r&&s.getAttribute(`${u}-${n}`);t&&h(s,t,e)}},E={userAgent:e=>{const t=/(AppleWebkit)/i.test(e),a=/Chrome/.test(e)&&/Google Inc/.test(navigator.vendor),r=/Android.*Mobile|Mobile.*Android/i.test(e),n=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(e),s=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(e),l=n&&n[1]||s&&s[1],o=/(ipad)/i.test(e),i=/(iphone|ipod)/i.test(e)&&t,c=i||o?e.match(/os ([\d_]*)/i):null,d=/CriOS/.test(e)&&i,m=c&&c[1]||"0";return{isMobileIos:i,isIpad:o,isAndroidMobile:r,isIosChrome:d,userAgent:e,isPhantom:/Phantom/i.test(e),isFirefox:/(Firefox)/i.test(e),isChrome:/(Chrome)/i.test(e),isSafari:/(Safari)/i.test(e)&&!/(Chrome)/i.test(e),isHandheldPhone:i||r,iosVersion:parseFloat(m.replace("_",".")),isIe:Boolean(l),ieVersion:parseFloat(l||"0"),isAndroidInternet:r&&!a&&t,androidVersion:r?parseFloat(e.slice(e.indexOf("Android")+8)):0}},getReferrer:()=>document.referrer,getUrlHash:()=>window.location.hash,setUrlHash:e=>{window.location.hash=e},doRedirect:e=>{window.location.href=e},isOnline:()=>window.navigator.onLine,getWindowQueryString:()=>window.location.search,getCurrentPathname:()=>window.location.pathname,getViewportScrollX:()=>window.scrollX,getViewportScrollY:()=>window.scrollY,getViewportHeight:()=>window.innerHeight||document.documentElement.clientHeight,getViewportWidth:()=>window.innerWidth||document.documentElement.clientWidth,submit:e=>{(e&&"get"in e?e.get(0):e).submit()},getFocused:()=>document.activeElement,focus:e=>e.focus(),pixelRatio:window.devicePixelRatio,devicePixelRatio:e=>(E.pixelRatio=void 0!==e?e:E.pixelRatio,E.pixelRatio),selectedText:()=>{const e=window.getSelection();return e?e.toString():""},getCookies:()=>document.cookie||"",setCookie:e=>{document.cookie=e}},v=["","-webkit-","-moz-","-o-","-ms-","-khtml-"],b=["","Webkit","Moz","O","ms","Khtml"];let f=null,w=null;const N=()=>{const e=w||document.createElement("div");return w=e,e},S=(e,t)=>{if("length"===e||"parentRule"===e)return null;const a=N();a.style[e]="";const r=a.style[e],n=v.find((n=>{a.style[e]=n+t;const s=a.style[e]!==r;return a.style[e]="",s}));return"string"==typeof n?n:null},C=e=>{const t=document&&document.documentElement.style,a=e.charAt(0).toUpperCase()+e.slice(1);return b.map((t=>t?t+a:e)).find((e=>e in t))||null},T=(e,t)=>{return!!(t&&C(e))||(a=N().style[e],Boolean(a||""===a));var a},L=(e,t,a,r)=>{const n=document.createElement(t);return n.id=a,n.textContent=r,e.appendChild(n),n},k=()=>{const e=Object.prototype.hasOwnProperty;try{if(e.call(window,"styleMedia")&&window.styleMedia.matchMedium("(-webkit-transform-3d)"))return!0;{const e=document.getElementById("supportsThreeDStyle")||L(document.head,"style","supportsThreeDStyle","@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-ms-transform-3d),(-webkit-transform-3d) { #supportsThreeD { height:3px } }");return 3===(document.getElementById("supportsThreeD")||L(document.body,"div","supportsThreeD","")).offsetHeight||"MozTransform"in e.style||"WebkitTransform"in e.style}}catch(e){return!1}},I=()=>{try{const e=document.createElement("a");return!!e.relList&&e.relList.supports("ar")}catch(e){return!1}},A=()=>{if(f)return f;const e=document.createElement("input"),t=document.createElement("textarea"),a=E.userAgent(navigator.userAgent),r=a.userAgent,n=a.isMobileIos,s=a.isIpad,l=a.iosVersion,o=a.isIe,i=a.ieVersion,c=a.isPhantom,d=a.isAndroidMobile,m=a.isAndroidInternet,u=a.androidVersion,p=a.isHandheldPhone,g=a.isSafari,h=navigator.appVersion,y=document&&document.documentElement.style,v=N(),b=r.match(/AppleWebKit\/(\d+)/),w=b&&b[1]||"",L=parseFloat(w)||null,A=-1!==h.indexOf("Mac")?"macosx":-1!==h.indexOf("X11")||-1!==h.indexOf("Linux")?"linux":-1!==h.indexOf("SunOS")?"sunos":"windows",P=Boolean(window.ontransitionend),D=("transition"in y||"MozTransition"in y)&&(!d||d&&P),O=D?"transitionend":"msTransition"in y?"MSTransitionEnd":"WebkitTransition"in y?"webkitTransitionEnd":null,x=D?"animationend":"msTransition"in y?"MSAnimationEnd":"WebkitTransition"in y?"webkitAnimationEnd":null;try{v.style.height="100vh"}catch(e){}const R="100vh"===v.style.height;try{v.style.height=""}catch(e){}const F={cssPropertyName:C,cssPropertyValuePrefix:S,inputPlaceholder:"placeholder"in e,maxlengthTextarea:"maxLength"in t,onInput:"oninput"in e,touch:!!("ontouchstart"in window)&&!c,overflowScrolling:T("overflowScrolling",!0),textOverflow:T("textOverflow",!0),transform:T("transform",!0),boxShadow:T("boxShadow",!0),opacity:T("opacity",!1),animation:T("animationName",!0),transition:T("transitionProperty",!0),transformProperty:C("transform"),positionSticky:null!==S("position","sticky"),gradient:null!==S("backgroundImage","linear-gradient(top, black, white)"),backgroundSvg:Boolean(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),threeDTransforms:k(),supportsAR:I(),webkitVersion:L,iosVersion:l,ieVersion:i,androidVersion:u,os:A,vhHeight:R,transitionEndName:O,animationEndName:x,isMobileIos:n,isIpad:s,isSafari:g,isIe:o,isAndroidMobile:d,isAndroidInternet:m,isHandheldPhone:p,rtl:!1,isMobileOptimized:!1};return f=F,F},P="as-keyboarduser",D=[c.Tab,c.Esc,c.Alt,c.Ctrl,c.ArrowDown,c.ArrowLeft,c.ArrowRight,c.ArrowUp];let O=null,x=!1,R=!1,F=!1;const M=()=>{O&&(O.classList.toggle("as-mouseuser",x),O.classList.toggle(P,R))},B=()=>{x||(x=!0,R=!1,M())},$=e=>{!R&&D.indexOf(e.keyCode)>-1&&(x=!1,R=!0,M())};a(3797);const U=(e,t)=>{(0,s.useEffect)((()=>(e&&t&&window.addEventListener(e,t),()=>{e&&t&&window.removeEventListener(e,t)})),[e,t])},K=_;var V=a.n(K);const H=(e,t,a)=>(0,s.useCallback)(V().debounce(e,t,a),[]),j=[{name:"small",mediaQuery:"only screen and (max-width: 1023px) and (max-device-width: 736px)"},{name:"medium",mediaQuery:"only screen and (max-width: 1023px) and (max-device-width: 736px)"},{name:"large",mediaQuery:"only screen and (max-width: 1440px)"},{name:"xlarge",mediaQuery:"only screen and (min-width: 1441px)"}],G=e=>{for(let t=0;t<e.length;t+=1){const a=e[t];if(window.matchMedia(a.mediaQuery).matches)return a.name}return"large"},W=(e={})=>{const{recalculate:t=!0,debounceWait:a=100,breakpoints:r=j}=e,[n,s]=l().useState(G(r)),o=H((()=>s(G(r))),a);return U("resize",t?o:void 0),[n]},q={open:"Open",close:"Close",top:"Top",right:"Right",bottom:"Bottom",left:"Left",next:"Next",previous:"Previous",selected:"Selected",show:"Show",hide:"Hide",play:"Play",pause:"Pause",mute:"Mute",unmute:"Unmute",loading:"Loading...",fullscreen:"Show fullscreen",pip:"Show picture-in-picture",airplay:"Show AirPlay",captions:"Show captions",showMore:"Show more",showLess:"Show less",more:"More",less:"Less",item:"Item",image:"Image",video:"Video",edit:"Edit",change:"Change",update:"Update",add:"Add",remove:"Remove",save:"Save",cancel:"Cancel",submit:"Submit",reset:"Reset",opensNewWindow:"(Opens in a new window)",galleryItem:"Gallery item"},Y=(0,s.createContext)({retina:!0,viewport:"large",assets:q}),z=()=>(0,s.useContext)(Y),X=({children:e})=>{const[t]=W(),a={...q,...window.GLOBAL_ASSETS,...window.assets,...window.testAssets},r={...window.fragments,...window.testFragments};return l().createElement(l().Fragment,null,l().createElement(Y.Provider,{value:{viewport:t,assets:a,fragments:r}},e))},J="a",Q="b",Z="c",ee="d",te="events",ae="m",re="meta",ne="t",se="p",le="r",oe=[J,Q,Z,ee,ae,ne,se,le],ie=["f",...oe],ce={createdAt:0,lastUpdated:{},shouldPersist:!1,wasPersisted:!1,wasAncestorPersisted:!1},de="action",me="metric",ue="rule",pe="action",ge="!focused",he="clear_bind_messages",ye="click",Ee="commit",ve="data",be="delete_mod",fe="focused",we="load",Ne="maybe_set_focus",Se="metric",Ce="mouseover",Te="mouseout",Le="run_deferred_data_updates",ke="set",Ie="set_bind_property",Ae="set_bind_value",Pe="set_mod_data",De="set_mod_property",Oe="set_at_path",xe={ERROR:"ERROR",WARNING:"WARN",INFO:"INFO"},Re=["/","^","~"],Fe="_$$_",Me="_$$CACHE",_e=`${Fe}pathToValue`,Be="isLoadingFault",$e="isLoadingSubmit",Ue="wasSubmitted",Ke="wasValidated",Ve="error",He="messages",je="polling",Ge="PAGE",We="MODULE",qe="BINDING",Ye={title:"",metric:{},metricName:"",url:"",htmlUrl:""},ze={"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"Fetch","x-aos-model-page":"","x-aos-stk":"",syntax:"",modelVersion:""};let Xe=[];const Je=e=>{Xe.push(e)},Qe=()=>{Xe.forEach((e=>{e()}))},Ze=()=>{Xe=[]},et=/"/g,tt="&quot;",at=(e,t,a)=>{const r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",t.replace(et,tt)),r.setAttribute("value",a.replace(et,tt)),e.appendChild(r)},rt=e=>{if(!e)return null;const t=e.head&&e.head.data||{},a=t.method?(t.method+"").toLowerCase():"get",r=parseInt((e.head&&e.head.status)+"",10),n=r>=301&&r<=307,s=r>=400&&r<600;return n&&("get"===a||"delete"===a||"put"===a)?((e,t)=>{if(!e)return;const a=[];if(t){for(const e in t)a.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]+""));e+=(e.indexOf("?")>-1?"&":"?")+a.join("&")}E.doRedirect(e)})(t.url,t.args):n&&"post"===a&&((e,t)=>{if(!e)return;const a=document.createElement("form"),r={};if(a.setAttribute("id","AsJsonRpcForm"),a.setAttribute("action",e),a.setAttribute("method","post"),t)for(const e in t){const n=t[e];if(Array.isArray(n))for(let e=0;e<n.length;e++)r[e]!==n[e]&&(at(a,e+"",n[e]+""),r[e]=n[e]);else r[e]!==n&&(at(a,e,n+""),r[e]=n)}a.style.display="none",document.body.appendChild(a),a.submit()})(t.url,t.args),s||n?null:e.body||null},nt=({from:e="",to:t=""})=>{if(!t)return e;let a="";const r=t[0];switch(Re.includes(r)&&(a=r,t=t.split("").slice(1).join("")),a){case"/":return t;case"^":return t?e.split(".").slice(0,-1).concat(t).join("."):e.split(".").slice(0,-1).join(".");default:return e?`${e}.${t}`:t}},st=e=>e.split(".").slice(0,-1).join("."),lt=e=>e.split(".").pop()||"",ot=(e,t,a=new Set)=>(V().get(e,[t,Z],[]).forEach((r=>{const n=`${t}.${r}`;e[n]&&a.add(n),ot(e,n,a)})),[...a]),it=({currentModKey:e="",get:t=""})=>{let a="";const r=t[0];Re.includes(r)&&(a=r,t=t.split("").slice(1).join(""));const n=t.split("."),s=n.findIndex((e=>ie.includes(e))),l=n.slice(0,s),o=nt({from:e,to:`${a}${l.join(".")}`}),i=n.slice(s);return i[0]===Q&&i[2]!==se&&i.splice(2,0,se),[o,...i]},ct=e=>{const t=3===e.length&&e[1]===ee,a=3===e.length&&e[1]===se,r=5===e.length&&e[1]===Q&&e[3]===se;return t||a||r},dt=(e,{modKey:t,bindName:a})=>{const r=V().get(e,[t,Q,a,se,_e],""),n=it({currentModKey:t,get:r});return V().get(e,n,null)},mt=e=>null==e||""===String(e).trim(),ut=e=>"string"==typeof e?e:JSON.stringify(e),pt=e=>{let t=null;try{t=rt(e)}catch(e){}return t},gt=e=>{if(null==e)return"";const t=Math.abs(e/60),a=Math.abs(e%60);return`GMT${e>0?"-":"+"}${t<10?"0":""}${t}${a<10?"0":""}${a}`},ht=(e,t,a)=>{const r=t.pop()||"";V().get(e,t,{})[r]=a};class yt extends Error{constructor(e,t){const a=e.status||0===e.status?e.status:"",r=`${a} ${e.statusText||""}`.trim(),n=r?`response.status: ${r}`:"an unknown error";t.options&&delete t.options.body,t.options&&delete t.options.headers,super(`Request failed with ${n}, response.type: ${e.type}, response.redirected: ${e.redirected}, request.options: ${JSON.stringify(t.options)}, content-type: ${e.headers&&e.headers.get("Content-Type")}, x-request-id: ${e.headers&&e.headers.get("x-request-id")}`),this.name="HTTPError",this.code=a}}class Et extends Error{constructor(e,t,a){const r=e.status||0===e.status?e.status:"",n=`${r} ${e.statusText||""}`.trim(),s=n?`response.status: ${n}`:"an unknown error";t.options&&delete t.options.body,t.options&&delete t.options.headers,super(`Received non-JSON response from JSON API with error.message: ${a&&a.message}, ${s}, response.type: ${e.type}, response.redirected: ${e.redirected}, request.options: ${JSON.stringify(t.options)}, content-type: ${e.headers&&e.headers.get("Content-Type")}, x-request-id: ${e.headers&&e.headers.get("x-request-id")}`),this.name="JSONError",this.code=r}}class vt extends Error{constructor(e){e.options&&delete e.options.body,e.options&&delete e.options.headers,super(`Request timed out after ${e.options&&e.options.timeout} ms, request.options: ${JSON.stringify(e.options)}`),this.name="TimeoutError",this.code=408}}const bt=async(e,t={})=>{let a;t.timeout=t.timeout||1e4;let r=new AbortController;const n={url:e,options:{method:"GET",credentials:"same-origin",signal:r.signal,...t}},s=fetch(n.url,n.options).then((e=>e)),l=new Promise(((e,s)=>{a=setTimeout((()=>{r.abort(),s(new vt(n))}),t.timeout)}));try{const e=window.performance&&window.performance.now(),t=await Promise.race([s,l]);if(t.ok){const a=window.performance&&window.performance.now();return window.performance&&function({request:e,response:t,start:a,end:r}){const n=i("as-utilities/measureFetch");try{let n={};n=new URL(t.url);const s=new CustomEvent("echoCustomEvent",{detail:{type:"fetchTimer",message:`hostname: ${n.hostname}, pathname: ${n.pathname}, duration: ${r-a}, request.options: ${JSON.stringify(e.options)}, response.status: ${t.status}, response.type: ${t.type}, content-type: ${t.headers&&t.headers.get("Content-Type")}, x-request-id: ${t.headers&&t.headers.get("x-request-id")}`}});window.dispatchEvent(s)}catch(e){n.error(e)}}({request:n,response:t,start:e,end:a}),t}throw new yt(t,n)}catch(e){throw e}finally{clearTimeout(a)}},ft=async(e,t={})=>{let a;const r={url:e,options:t};try{a=await bt(r.url,r.options)}catch(e){throw e}try{return await a.json()}catch(e){throw new Et(a,r,e)}},wt=e=>{const t=new ArrayBuffer(e.length/2),a=new Uint8Array(t);for(let t=0,r=0;t<e.length;t+=2,r++)a[r]=parseInt(e.substr(t,2),16);return a},Nt="SHA-256",St="spki",Ct=!1,Tt=!0,Lt="encrypt",kt="jwk",It="EC_v2",At="EC_v2.1",Pt="EC_v3",Dt="rsa-with-hash",Ot={name:"ECDH",namedCurve:"P-256"},xt=(e,t)=>{const a=(e=>{const t=new ArrayBuffer(e.length),a=new Uint8Array(t);for(let t=0,r=e.length;t<r;t++)a[t]=e.charCodeAt(t);return t})(window.atob(e));return window.crypto.subtle.importKey(St,a,{name:t,hash:Nt},Ct,[Lt])},Rt=(e,t,a)=>window.crypto.subtle.encrypt({name:t.algorithm},e,(e=>(new TextEncoder).encode(e))(a)).then((e=>({cipherText:window.btoa(String.fromCharCode(...new Uint8Array(e))),publicKeyHash:t.publicKeyHash}))),Ft=(e,t)=>{let a=t;return"string"==typeof a&&(a=a.replace(/\s/g,"")),xt(e.publicKey,e.algorithm).then((t=>Rt(t,e,a)))};const Mt=new(a(7630).ApplePayCryptoLib_ECV2),_t=(e,t)=>{const a=e.serverKeyAgreementPublicKey,r=wt(a);return window.crypto.subtle.importKey(St,r,Ot,Tt,[]).then((e=>window.crypto.subtle.exportKey(kt,e).then((e=>Mt.ec_v2_web(JSON.stringify(e),t)))))};class Bt{constructor(e,t,a){this._encryptionVersion=e,this._encryptedData=t,this._publicKeyHash=a}}class $t{constructor(e,t){this.ephemeralPublicKey=e,this.gcmEncryptedData=t.substr(0,t.length-32),this.gcmTag=t.substr(t.length-32)}}const Ut=new class{constructor(){this.ecdhParams={name:"ECDH",namedCurve:"P-256"},this.keyLengthECAndDerived=256,this.keyLengthSecretKeyInBytes=16,this.aesParamsForDerivedSecret={name:"AES-GCM",length:this.keyLengthECAndDerived},this.aesParamsForSecretKey={name:"AES-GCM",length:this.keyLengthSecretKeyInBytes},this.sha256="SHA-256"}ec_v2_web(e,t){if(!e||0==e.trim().length)throw"RecipientPublicKeyJwk is invalid";if(!t||0==t.trim().length)throw"PlaintextToEncrypt is invalid";let a;try{a=JSON.parse(e)}catch(e){throw"RecipientPublicKeyJwk is not proper JSON"}const r=window.crypto.subtle.generateKey(this.ecdhParams,!1,["deriveKey"]),n=window.crypto.subtle.importKey("jwk",a,this.ecdhParams,!0,[]);return Promise.all([r,n]).then((e=>{const a=e[0],r=e[1];return this.innerEcv2Encrypt(a.privateKey,a.publicKey,r,t)}))}innerEcv2Encrypt(e,t,a,r){const n={name:"ECDH",public:a},s=window.crypto.subtle.deriveKey(n,e,this.aesParamsForDerivedSecret,!0,["encrypt"]),l=window.crypto.subtle.exportKey("spki",a);return Promise.all([s,l]).then((e=>{const a=e[0],n=e[1];return window.crypto.subtle.exportKey("raw",a).then((e=>this.ecv2KdfWrapper(t,r,e,n)))}))}ecv2KdfWrapper(e,t,a,r){return this.ecv2Kdf(a,e,this.keyLengthECAndDerived).then((a=>window.crypto.subtle.digest(this.sha256,a).then((a=>{const n=a.slice(0,this.keyLengthSecretKeyInBytes);return window.crypto.subtle.importKey("raw",n,this.aesParamsForSecretKey,!1,["encrypt"]).then((a=>{const n=new ArrayBuffer(this.keyLengthSecretKeyInBytes),s=this.convertStringToUTF8ByteArray(t),l={name:"AES-GCM",iv:n},o=window.crypto.subtle.encrypt(l,a,s),i=this.ecPublicKeyToRawUncompressed(e,this.keyLengthECAndDerived);return this.createEcv2Response(o,i,r)}))}))))}createEcv2Response(e,t,a){const r=window.crypto.subtle.digest(this.sha256,a);return Promise.all([e,t,r]).then((e=>{const t=e[0],a=e[1],r=e[2],n=this.base64EncodeFromBuffer(t),s=this.base64EncodeFromBuffer(a),l=new $t(s,n);return new Bt("EC_v2.1",l,this.base64EncodeFromBuffer(r))}))}ecv2Kdf(e,t,a){return this.ecPublicKeyToRawUncompressed(t,a).then((t=>{let a=0;const r=new ArrayBuffer(t.byteLength+4+e.byteLength),n=new Uint8Array(r);a=this.write(new Uint8Array(e),n,a);const s=new Uint8Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=1,a=this.write(s,n,a),this.write(new Uint8Array(t),n,a),r}),(e=>{throw"KDF failed"}))}ecPublicKeyToRawUncompressed(e,t){t/=8;const a=new ArrayBuffer(2*t+1),r=new Int8Array(a);let n=0;r[n]=4,n++;return window.crypto.subtle.exportKey("jwk",e).then((e=>{const t=this.base64UrlDecode(e.x||"");for(var s=0;s<t.length;++s,++n)r[n]=t[s];const l=this.base64UrlDecode(e.y||"");for(s=0;s<l.length;++s,++n)r[n]=l[s];return a}),(e=>{throw"Cannot uncompress key"}))}base64UrlDecode(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";const t=window.atob(e),a=new Int8Array(t.length);for(let e=0;e<t.length;++e)a[e]=t.codePointAt(e)||0;return a}write(e,t,a){let r=0;for(;r<e.length;++r)t[r+a]=e[r];return r+a}base64EncodeFromBuffer(e){let t="";const a=new Uint8Array(e),r=a.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(a[e]);return btoa(t)}padStart(e,t,a){return t>>=0,e.length>t?e:((t-=e.length)>a.length&&(a+=a.repeat(t/a.length)),a.slice(0,t)+e)}convertStringToUTF8ByteArray(e){const t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,((t,a,r)=>{r[a]=e.charCodeAt(a)})),t}},Kt=(e,t)=>{const a=e.serverKeyAgreementPublicKey,r=wt(a);return window.crypto.subtle.importKey(St,r,Ot,Tt,[]).then((e=>window.crypto.subtle.exportKey(kt,e).then((e=>Ut.ec_v2_web(JSON.stringify(e),t)))))};const Vt=new(a(6941).ApplePayCryptoLib_ECV3),Ht=(e,t)=>{const a=e.serverSigningPublicKey,r=e.serverKeyAgreementPublicKey,n=wt(a),s=wt(r),l=window.crypto.subtle.importKey(St,n,Ot,Tt,[]),o=window.crypto.subtle.importKey(St,s,Ot,Tt,[]);return Promise.all([l,o]).then((a=>{const r=a[0],n=a[1],s=window.crypto.subtle.exportKey(kt,r),l=window.crypto.subtle.exportKey(kt,n);return Promise.all([s,l]).then((a=>{const r=JSON.stringify(a[0]),n=JSON.stringify(a[1]);return Vt.ec_v3_web_with_jws(r,n,e.nonce,t,"ino")}))}))},jt={[It]:t,[At]:r,[Pt]:n,[Dt]:e},Gt=Object.values(xe),Wt=(e,t=xe.ERROR)=>({key:"",text:e||"",level:Gt.includes(t)?t:xe.ERROR}),qt=(e,t)=>{const a=[t,ee,He];return[...V().get(e,[...a,"errors"],[]).map((e=>Wt(e,xe.ERROR))),...V().get(e,[...a,"infos"],[]).map((e=>Wt(e,xe.INFO)))]},Yt=(e,t)=>{const a=e[`${t}.${Ve}`];return[...V().get(a,[ee,"errors"],[]).map((e=>Wt(e,xe.ERROR))),...V().get(a,[ee,"infos"],[]).map((e=>Wt(e,xe.INFO)))]},zt=(e,{modKey:t,bindName:a="",level:r="",includeAll:n=!1})=>{if(!t)return[];let s=[...V().get(e,[t,ae],[]),...qt(e,t),...Yt(e,t)];if(n)return s;if(a){const e=`${Q}.${a}`;s=s.filter((t=>t.key===e))}else s=s.filter((e=>!e.key));return r&&(s=s.filter((e=>e.level===r))),s},Xt=e=>Object.entries(e).map((([e,t])=>`${encodeURIComponent(ut(e))}=${encodeURIComponent(ut(t))}`)).join("&"),Jt=({state:e,submitFrom:t,shouldValidate:a=!0,setIsLoading:r=V().noop,setWasSubmitted:n=V().noop,setWasValidated:s=V().noop})=>{const{bindingToFocus:l}=Na,o={},i={},c=[],d=[];let m=!1;!function t(r){const n=e[r];if(!Boolean(n&&n[se].active&&n[se].enabled&&!n[re].get().wasPersisted))return;const s=n[Q];Object.entries(s).forEach((([t,n])=>{const s=`${r}.${t}`;if(!Boolean(n[se].submit&&n[se].active))return;const u=V().get(e,[r,Q,t,se,_e],""),p=it({currentModKey:r,get:u}),g=(e=>mt(e)?"":e)(V().get(e,p,"")),h=Boolean(n[se].validate),y=Boolean(n[se].optional&&!g);if(a&&h&&!y){const a=zt(e,{modKey:r,bindName:t,level:xe.ERROR}),s=Boolean(a.length),o=Boolean(n[se].valid);if(s||o)return m=!0,c.push({modKey:r,bindName:t,hasError:!0}),d.push({modKey:r,bindName:t,hasError:!0}),void l.add(r,t);d.push({modKey:r,bindName:t,hasError:!1})}c.push({modKey:r,bindName:t,hasError:!1}),o[s]=g;const{encryption:E}=n[se];E&&g&&(i[s]=E)})),n[Z].forEach((e=>{t(`${r}.${e}`)}))}(t),m||r(),n(c),s(d);const u=Boolean(Object.keys(i).length);if(!m&&u){const e=Object.keys(i),t=[];return Object.entries(i).forEach((([e,a])=>{const r=o[e];t.push(((e,t)=>{const a=`message=encrypt.call,scheme=${e.scheme}`,r=new CustomEvent("echoCustomEvent",{detail:{message:a,id:"as-crypto.encrypt",type:"fn.call"}});window.dispatchEvent(r);try{const a=jt[e.scheme].encrypt(e.config,t);return a.catch((t=>{const a=t.toString?t.toString():"",r=`message=${t.message},stack=${t.stack},err=${t},scheme=${e.scheme},errStr=${a}`,n=new CustomEvent("echoCustomEvent",{detail:{message:r,id:"as-crypto.encrypt",type:"error"}});window.dispatchEvent(n)})),a}catch(t){const a=t.toString?t.toString():"",r=`message=${t.message},stack=${t.stack},ex=${t},scheme=${e.scheme},exStr=${a}`,n=new CustomEvent("echoCustomEvent",{detail:{message:r,id:"as-crypto.encrypt",type:"error"}});return window.dispatchEvent(n),null}})(a,r))})),Promise.all(t).then((t=>{t.forEach(((t,a)=>{const r=e[a],n=i[r];o[r]=null===t&&"rsa-with-hash"===n.scheme?"FAIL":t}));return{body:Xt(o),submitted:c,validated:d}})).catch((e=>Promise.reject({error:e,submitted:c,validated:d})))}return new Promise(((e,t)=>{if(m){t({error:new Error("Form submitted with client-side errors, canceling POST request."),submitted:c,validated:d})}else{e({body:Xt(o),submitted:c,validated:d})}}))},Qt=(e,t)=>{[t,...Na.dependents.get(t)].forEach((t=>{if(!e[t])return;e[t][se][Me].clear();const a=V().get(e,[t,Q],{});Object.values(a).forEach((e=>{e[se][Me].clear()}))}))},Zt=(e,{state:t,modKey:a,meta:r,key:n,value:s})=>{const{subscriptions:l}=Na;((e,t)=>{if(e!==He||!t)return!1;const a=Array.isArray(t.errors),r=Array.isArray(t.infos);return a||r})(n,s)&&r.set("lastUpdated",[ae]),Object.defineProperty(e,`${Fe}${n}`,{enumerable:!1,writable:!0,value:s}),Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>e[`${Fe}${n}`],set(s){e[`${Fe}${n}`]!==s&&(e[`${Fe}${n}`]=s,r.set("lastUpdated",[ee]),Qt(t,a),l.run([a]))}})},ea=({state:e,modKey:t,meta:a,initData:r={}})=>{const n={};return Object.entries(r).forEach((([r,s])=>{Zt(n,{state:e,modKey:t,meta:a,key:r,value:s})})),n},ta=({state:e,onOrbitUpdate:t=V().noop,customFetcher:a})=>{const{headers:r}=Na,n=[],s=new WeakMap;function l(e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function o(){if(!n.length)return;const e=n[0],a=s.get(e);a&&(t(e,a),n.shift(),s.delete(e),o())}async function c(e){const t=i("createAjax/fetchOrbit"),{body:n,url:c,onComplete:m=V().noop}=e,u={headers:r.get(),method:"POST",credentials:"include",body:n};try{let t;a?t=await a(e,u):(u.timeout=9e4,t=await ft(c,u)),s.set(e,pt(t))}catch(a){t.error(a),l(e),d(e,!1),m({data:{},updated:[],isError:!0})}finally{o()}}function d(t,a){const{modKey:r,origin:n}=t;if(r&&ht(e,[r,se,$e],a),n){const{modKey:t,bindName:r=""}=n;ht(e,[t,Q,r,se,$e],a)}}function m(t){t.forEach((({modKey:t,bindName:a})=>{ht(e,[t,Q,a,se,Ue],!0)}))}function u(t){t.forEach((({modKey:t,bindName:a})=>{ht(e,[t,Q,a,se,Ke],!0)}))}return{fetchDataFault:async function(t){const n=i("createAjax/fetchDataFault"),{modKey:s,url:l="",onComplete:o=V().noop}=t,c={headers:r.get(),method:"GET",credentials:"include"};let d;try{a?d=await a(t,c):(c.timeout=9e4,d=await ft(l,c)),function(t,a){const{modKey:r,key:n="",onComplete:s=V().noop}=t,l=n?V().get(a,n):a;if(l){const t=V().get(e,[r,re]);V().get(e,[r,re,"set"],V().noop)("lastUpdated",[ee]),Object.entries(l).forEach((([a,n])=>{const s={state:e,modKey:r,meta:t,key:a,value:n};Zt(e[r][ee],s)})),ht(e,[r,se,Be],!1),s({data:l,updated:[r],isError:!1})}}(t,pt(d))}catch(t){n.error(t),ht(e,[s,se,Be],!1),o({data:{},updated:[],isError:!0})}},enqueue:function(t){n.push(t);const{modKey:a,submit:r,shouldValidate:s=!0,onComplete:o=V().noop}=t,p=()=>d(t,!0);if(!r)return p(),void c(t);const g={state:e,submitFrom:a,shouldValidate:s,setIsLoading:p,setWasSubmitted:m,setWasValidated:u},h=i("createAjax/enqueue/getRequestBody");Jt(g).then((({body:e})=>{t.body=e,c(t)})).catch((({error:e,submitted:a,validated:r})=>{h.error(e),d(t,!1),m(a),u(r),l(t),o({data:{},updated:[],isError:!0})}))}}},aa=(e,t,{forceDelete:a=!1}={})=>{const r=[];if(!e[t])return r;const n=e[t][re],s=n.get().shouldPersist&&!a;ot(e,t).forEach((t=>{s?e[t][re].set("wasAncestorPersisted",!0):delete e[t],r.push(t)})),s?n.set("wasPersisted",!0):delete e[t],r.push(t);const l=t.split("."),o=l.pop(),i=l.join("."),c=e[i];return c&&(c[Z]=c[Z].filter((e=>e!==o)),r.push(i)),r},ra=(e,{state:t,actionArgs:a=[],currentModKey:r="",ajax:n,key:s="",origin:l,deferDataUpdate:o,expectedDataUpdate:i})=>{const c=new Set,d=V().get(window,"asMetrics.fireMicroEventCollection",V().noop),m=V().get(window,"acStore.__setItemCount",V().noop),{subscriptions:u}=Na,p=(e,{updatedActionArgs:g=null,isDelayed:h=!1}={})=>{if(!(V().isObject(e)&&!Array.isArray(e)))return e;g&&(a=g);const y=e.args||[],E=y.map((e=>p(e)));if(e.delay&&!h)return e.delayId&&clearTimeout(e.delayId),e.delayId=setTimeout((()=>{p(e,{isDelayed:!0})}),e.delay),null;if(e.condition&&!p(e.condition))return null;if(e.if){const t=p(e.if)?e.then:e.else;return p(t)}if(!e.streaming&&e.url){const t=V().toString(p(e.url)||"");if("_top"===e.target)window.location.href=t;else{const a=e.module?nt({from:r,to:p(e.module)}):r,s=((e,{modKey:t,origin:a,deferDataUpdate:r,expectedDataUpdate:n})=>({modKey:t,origin:a,isDataFault:!1,deferDataUpdate:r,expectedDataUpdate:n,url:e.url||"",submit:Boolean(e.submit),shouldValidate:!1!==e.validate,includeGsToken:e.includeGSToken||!1,body:null}))({...e,url:t},{modKey:a,origin:l||{modKey:r},deferDataUpdate:o,expectedDataUpdate:i});n.enqueue(s)}}if(e.streaming){const t=new window.EventSource(e.url);t.addEventListener("message",(e=>{const t=JSON.parse(e.data);pt(t)})),t.addEventListener("close",(e=>{t.close();const a=JSON.parse(e.data);pt(a)}))}if("error"in e)return p(e.error);if("val"in e){const t=p(e.val),r=V().isNumber(t)?t:0;return a[r]}if(e.set){const a=V().toString(p(e.set)),n=it({currentModKey:r,get:a}),s=p(e.to);ct(n)&&ht(t,n,s)}if(e.update){const a=p(e.from)||e.from||{},n=V().toString(p(e.update))||ee;if(V().isObject(a)){const e=it({currentModKey:r,get:n});Object.entries(a).forEach((([a,r])=>{ht(t,[...e,a],r)}))}}if(e.get){const n=E.length>0?E:a,s=p(e.get,{updatedActionArgs:n});if(V().isString(s)){const e=it({currentModKey:r,get:s}),a=V().get(t,e);if(Boolean(a&&a.run))return a.run({actionArgs:n,origin:l});const[o]=e;return o!==r&&c.add(o),a}return p(s,{updatedActionArgs:n})}if(e.do){(Array.isArray(e.do)?e.do:[e.do]).forEach((e=>{if(V().isString(e)){const n=it({currentModKey:r,get:e}),s=V().get(t,n);if(s.run){const e={actionArgs:a,origin:l,deferDataUpdate:o,expectedDataUpdate:i};s.run(e)}else false}else p(e)}))}if(e.metric){const n=V().toString(p(e.metric)),s=it({currentModKey:r,get:n}),o=V().get(t,s,{});o.run&&o.run({actionArgs:a,origin:l})}if(e.microEvents||e.macroEvents||e.products){const t=V().toString(p(e.macroEvents)),a=V().toString(p(e.products)),r=(e.microEvents||[]).map((e=>({key:p(e.key),value:p(e.value),feature:p(e.feature),slot:p(e.slot)})));if(Boolean(t||a||r.length)){const e={microEvents:r,macroEvents:t};a&&(e.products=a),d({[s]:e},(()=>{}))}}if(e.delete&&p(e.delete)){const e=aa(t,r);u.run(e)}if(e.op){const t=V().toString(p(e.op)),a=t.startsWith("!"),r=!a,n=a?t.slice(1):t,s=E[0],l=E.slice(1);if("NUMERIC"===n){return E.every((e=>!Number.isNaN(parseFloat(e))))?r:a}if("MATCH"===n){const e=V().toString(E[0]);return l.every((t=>V().toString(t).match(e)))?r:a}if("MATCHALL"===n){const e=V().toString(E[0]);return l.every((t=>e.match(V().toString(t))))?r:a}if("MATCHANY"===n){const e=V().toString(E[0]);return l.some((t=>e.match(V().toString(t))))?r:a}if("EMPTY"===n){return E.every((e=>mt(e)))?r:a}if("AND"===n){return E.every((e=>Boolean(e)))?r:a}if("OR"===n){return E.some((e=>Boolean(e)))?r:a}if("EQ"===n){return E.every((e=>e===E[0]))?r:a}if("GT"===n){const e=parseFloat(s);return l.every((t=>e>parseFloat(t)))?r:a}if("LT"===n){const e=parseFloat(s);return l.every((t=>e<parseFloat(t)))?r:a}if("GTE"===n){const e=parseFloat(s);return l.every((t=>e>=parseFloat(t)))?r:a}if("LTE"===n){const e=parseFloat(s);return l.every((t=>e<=parseFloat(t)))?r:a}if("ADD"===n)return l.reduce(((e,t)=>e+t),s);if("SUB"===n)return l.reduce(((e,t)=>e-parseFloat(t)),parseFloat(s));if("DIV"===n)return l.reduce(((e,t)=>e/parseFloat(t)),parseFloat(s));if("JOIN"===n&&!E[1]){const e=s;return E.slice(2).join(V().toString(e))}if("JOIN"===n&&E[1])return E.slice(2).filter((e=>!mt(e))).join(V().toString(s));if("IN"===n){const e=E[1],t=V().isObject(s)?null:s;return Array.isArray(e)&&e.includes(t)||V().isString(t)&&V().isString(e)&&e.includes(t)?r:a}if("REPLACE"===n){const e=V().toString(E[0]),t=new RegExp(V().toString(E[1])),a=V().toString(E[2]);return e.replace(t,a)}if("LENGTH"===n)return V().isString(s)||Array.isArray(s)?s.length:V().isNumber(s)?s.toString().length:0;if("ROUND"===n){const e=parseFloat(V().toString(E[0])),t=parseFloat(E[1]);return null===t?e:e.toFixed(t)}if("FLOAT"===n){const e=E[1]?V().toString(E[1]):".",t=V().toString(E[0]).split(e,2).map((e=>e.replace(/[^\d\-+]/g,""))).join(".");return parseFloat(t)}if("NOT"===n)return!E[0];if("LUHN"===n){const e=V().toString(E[0]).replace(/\D/g,""),t=e.length%2;let a=0;for(let r=0;r<e.length;r++){let n=parseFloat(e.charAt(r));r%2===t&&(n*=2,n>9&&(n-=9)),a+=n}return a%10==0}if("DEVICEID"===n&&window.DeviceID)return window.DeviceID.validate();if("FDC"===n)return encodeURIComponent(JSON.stringify({U:window.navigator.userAgent,L:window.navigator.language||"",Z:gt((new Date).getTimezoneOffset()),V:"1.0"}))}return"updateBagCount"===e.method&&m(parseFloat(y[0])),e.print&&window.print(),e};return{value:p(e),dependencies:[...c]}},na=({state:e,ajax:t,modKey:a="",type:r=de,initActions:n={}})=>{const s={};return Object.entries(n).forEach((([n,l])=>{const o=(({modKey:e="",type:t=de,name:a=""})=>{let r;switch(t){case me:r=ne;break;case ue:r=le;break;default:r=J}return`${e}.${r}.${a}`})({modKey:a,type:r,name:n});s[n]={key:o,type:r,action:l,run(s={}){const{value:i}=ra(l,{state:e,currentModKey:a,ajax:t,key:o,actionArgs:[],origin:{modKey:a,name:n,type:r},...s});return i}}})),s},sa=({state:e,ajax:t,modKey:a,bindName:r,initEvents:n=[]})=>{const s=n;s.forEach((n=>{n.on===we&&Je((()=>{const s={modKey:a,bindName:r,eventType:we};l(n),ra(n,{state:e,currentModKey:a,ajax:t,origin:s})}))}));const l=t=>{const n=Array.isArray(t.do)?t.do:[t.do],s=Boolean(n.find((t=>{if(V().isString(t)){const r=it({currentModKey:a,get:t});return V().get(e,[...r,de,je])===qe}return!1})));ht(e,[a,Q,r,se,je],s)};return{actions:s,run:function(n="",l={}){const o=n?s.filter((e=>e.on===n)):s,i=dt(e,{modKey:a,bindName:r}),c={modKey:a,bindName:r,eventType:n};o.forEach((r=>{ra(r,{state:e,currentModKey:a,ajax:t,origin:c,actionArgs:[i],...l})}))}}},la=(e,{state:t,ajax:a,modKey:r,meta:n,bindName:s="",pathToValue:l="",key:o,value:i})=>{const{dependents:c,subscriptions:d}=Na,m=Boolean(s&&l);Object.defineProperty(e,`${Fe}${o}`,{enumerable:!1,writable:!0,value:i}),Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get(){const n=e[`${Fe}${o}`],i=[],d={modKey:r,isCompute:!0,bindName:s};if(m){const e=it({currentModKey:r,get:l}),a=V().get(t,e);i.push(a)}const{value:u="",dependencies:p=[]}=ra(n,{state:t,ajax:a,actionArgs:i,currentModKey:r,origin:d});return p.forEach((e=>{c.add(e,r)})),u},set(a){if(e[`${Fe}${o}`]!==a){e[`${Fe}${o}`]=a;const s=m?Q:se;n.set("lastUpdated",[s]),Qt(t,r),d.run([r])}}})},oa=({state:e,ajax:t,modKey:a="",meta:r,defaultProps:n={},initProps:s={},bindName:l=""})=>{const o={key:"",...n,...s},i=Boolean(l),c=i?`${a}.${l}`:a;let d="";i&&(d=o.key?String(o.key):`${ee}.${l}`),Object.entries(o).forEach((([n,s])=>{la(o,{state:e,ajax:t,modKey:a,meta:r,bindName:l,pathToValue:d,key:n,value:s})})),Object.defineProperty(o,"key",{enumerable:!0,writable:!1,value:c}),d&&Object.defineProperty(o,_e,{enumerable:!1,writable:!1,value:d});let m=null;const u={get:()=>m||(m={key:c},Object.entries(o).forEach((([e,t])=>{m&&(m[e]=t)})),m),clear:()=>{m=null},debug:()=>m};return Object.defineProperty(o,Me,{enumerable:!1,writable:!1,value:u}),o},ia={submit:!1,[Ue]:!1,[Ke]:!1,[$e]:!1,polling:!1,validate:!0,enabled:!0,active:!0,optional:!1,focused:!1,visible:!0,valid:"",info:"",warn:"",type:"",subtype:""},ca=({state:e,meta:t,ajax:a,modKey:r,initBindings:n={}})=>{const{bindingToFocus:s}=Na,l={};return Object.keys(n).forEach((o=>{const i={...ia,...n[o]},c={},d=Object.entries(i).reduce(((e,[t,a])=>([se,te].includes(t)||(e[t]=V().get(i,[se,t],a),"focused"===t&&s.is(r,o)&&(e[t]=!1)),e)),{...i[se]||{}});Object.defineProperties(c,{[se]:{enumerable:!0,writable:!1,value:oa({modKey:r,ajax:a,meta:t,bindName:o,initProps:d,state:e})},[te]:{enumerable:!0,writable:!1,value:sa({state:e,modKey:r,bindName:o,initEvents:i[te]||[],ajax:a})}}),Object.defineProperty(l,o,{enumerable:!0,writable:!1,value:c})})),l},da=Object.values(xe),ma=({modKey:e,initMessages:t=[]})=>{const{bindingToFocus:a}=Na;return Array.isArray(t)?t.filter((e=>Boolean(e.text))).map((t=>{if(t.key){const r=t.key.split(".").pop()||"";a.add(e,r)}return{key:t.key||"",text:t.text||"",level:da.includes(t.level)?t.level:xe.ERROR}})):[]},ua={[Be]:!1,[$e]:!1,visible:!0,enabled:!0,active:!0,valid:""},pa=({data:e,modKey:t,modData:a,state:r,ajax:n})=>{const s={},l=a[se]||{},o=a.f;if(o){if(o.abstract){const r=nt({from:t,to:o.abstract}),n=V().get(e,r,{});a[J]={...n[J],...a[J]},a[Q]={...n[Q],...a[Q]},a[ee]={...n[ee],...a[ee]},a[Z]=[...n[Z]||[],...a[Z]||[]],a[ne]={...n[ne],...a[ne]},a[ae]=[...n[ae]||[],...a[ae]||[]],a[se]={...n[se],...a[se]},a[le]={...n[le],...a[le]}}if(o.url&&"data"===o.type){l[Be]=!0;const e=((e,{modKey:t})=>({modKey:t,origin:{modKey:t},isDataFault:!0,url:e.url||"",submit:!1,key:e.key||"",body:null}))(o,{modKey:t});n.fetchDataFault(e)}}const i=(()=>{const e=V().cloneDeep(ce);function t(t){const a=Date.now();t.forEach((t=>{oe.includes(t)&&(e.lastUpdated[t]=a)}))}return e.createdAt=Date.now(),t([J,Q,Z,ee,ae,ne,se,le]),{get:()=>({...e}),set:(a,r)=>{switch(a){case"lastUpdated":Array.isArray(r)&&t(r);break;case"createdAt":e[a]=Number(r);break;case"shouldPersist":case"wasPersisted":case"wasAncestorPersisted":e[a]=Boolean(r)}}}})(),c=ma({modKey:t,initMessages:a[ae]||[]});return Object.defineProperties(s,{[J]:{enumerable:!0,writable:!1,value:na({state:r,ajax:n,modKey:t,type:de,initActions:a[J]||{}})},[Q]:{enumerable:!0,writable:!1,value:ca({state:r,meta:i,ajax:n,modKey:t,initBindings:a[Q]||{}})},[Z]:{enumerable:!0,writable:!0,value:a[Z]||[]},[ee]:{enumerable:!0,writable:!1,value:ea({state:r,modKey:t,meta:i,initData:a[ee]||{}})},[ae]:{enumerable:!0,writable:!0,value:c},[re]:{enumerable:!0,writable:!1,value:i},[ne]:{enumerable:!0,writable:!1,value:na({state:r,ajax:n,modKey:t,type:me,initActions:a[ne]||{}})},[se]:{enumerable:!0,writable:!1,value:oa({state:r,ajax:n,modKey:t,meta:i,defaultProps:ua,initProps:l})},[le]:{enumerable:!0,writable:!1,value:na({state:r,ajax:n,modKey:t,type:ue,initActions:a[le]||{}})}}),s},ga=(e,{data:t,ajax:a})=>{const r=new Set,n=V().get(t,"meta",{});var s;function l({modData:n,parentModKey:s="",name:o=""}){const i=Boolean(s),c=i?`${s}.${o}`:o;if(!n)return;if(i&&e[s]){const t=e[s][Z];t.includes(o)||t.push(o)}if(i&&o===Ve){V().get(e,[s,re,"set"],V().noop)("lastUpdated",[ae])}e[c]=pa({data:t,modKey:c,modData:n,state:e,ajax:a}),r.add(c);(n[Z]||[]).forEach((e=>{l({modData:n[e],parentModKey:c,name:e})}))}return n.x&&(n.x||[]).forEach((t=>{const a=nt({to:t});e[a]&&aa(e,a).forEach((e=>{r.add(e)}))})),n.l&&(n.l||[]).forEach((a=>{const n=nt({to:a}),s=V().get(t,n,{}),o=[],i=Object.keys(e).reduce(((e,a)=>(a.startsWith(n)&&!V().get(t,a,!1)&&e.push(a),e)),o);i.forEach((t=>{r.add(t);const a=e[t][re],{shouldPersist:n}=a.get(),s=((e,t,a)=>t.split(".").some(((t,r,n)=>{const s=[...Array(r)].map(((e,t)=>n[t])).join(".");if(e[s]){const t=a.includes(s),{shouldPersist:r}=e[s][re].get();return t&&r}return!1})))(e,t,i);n?a.set("wasPersisted",!0):s?a.set("wasAncestorPersisted",!0):delete e[t]})),l({modData:s,parentModKey:st(n),name:lt(n)})})),n.u&&(s=n.u||{},Object.entries(s).forEach((([n,s])=>{const l=s,o=nt({to:n});if(!Boolean(e[o]))return;const i=V().get(e,[o,re]),c=[],d=o.split("."),m=d.length>1,u=d.pop();if(m&&u===Ve){const t=d.join(".");V().get(e,[t,re,"set"],V().noop)("lastUpdated",[ae])}l.forEach((r=>{const n=`${o}.${r}`;switch(r.split(".").shift()||ee){case ae:{const a=t,r=V().get(a,n,[]),s=ma({modKey:o,initMessages:r});ht(e,[o,ae],s),c.push(ae);break}case ee:Zt(e[o][ee],{state:e,modKey:o,meta:i,key:r.split(".")[1],value:V().get(t,n)}),c.push(ee);break;case se:la(e[o][se],{state:e,ajax:a,modKey:o,meta:i,key:r.split(".")[1],value:V().get(t,n)}),c.push(se);break;case Q:{const s=r.split("."),l=s[1],d=e[o][Q][l];d&&la(d[se],{state:e,ajax:a,modKey:o,meta:i,bindName:l,pathToValue:d[se][_e],key:s[2]===se?s[3]:s[2],value:V().get(t,n)}),c.push(Q);break}}})),Qt(e,o),i.set("lastUpdated",c),r.add(o)}))),r},ha=["l","x","u"],ya=(()=>{const e={...ze};return{get:t=>t?e[t]:{...e},update:t=>{const a=V().get(t,[re,"h"],{});Object.assign(e,a)}}})(),Ea=(()=>{let e={};const t=(a,r=new Set)=>{const n=e[a];return n&&n.forEach((e=>{if(!r.has(e))return r.add(e),t(e,r)})),[...r]};return{get:t,add:(t,a)=>{t!==a&&(e[t]||(e[t]=new Set),e[t].add(a))},clear:(t="")=>{t?delete e[t]:e={}}}})(),va=(e=>{const t={},a={func:e=>e()},r=(a=[])=>{const r=new Set;a.forEach((a=>{(a=>{const r=new Set(t[a]);return e.get(a).forEach((e=>{t[e]&&t[e].forEach((e=>{r.add(e)}))})),r})(a).forEach((e=>{r.add(e)}))})),r.forEach((e=>{e()}))};return{add:(e,a)=>(t[e]||(t[e]=new Set),t[e].add(a),function(){t[e].delete(a)}),run:e=>{const t=[...e];a.func((()=>r(t)))},setRunner:e=>{a.func=e},clear:e=>{delete t[e]},debug:()=>t}})(Ea),ba=(()=>{const e=new Set,t=new Set;return{add:(a,r)=>{e.add(a),t.add(`${a}.${r}`)},is:(e,a)=>!(!e||!a)&&t.has(`${e}.${a}`),maybeIn:()=>[...e],clear:()=>{t.clear()}}})(),fa=(()=>{const e=[];return{add:({keysToDefer:t=[],keysExpected:a,data:r,origin:n})=>{const s=[],l=r.meta||{},o=Object.keys(r.meta).filter((e=>ha.includes(e)));if(a){if(!V().isEqual(a.sort(),o.sort()))return s}return t.forEach((t=>{if(l[t]){const a={...r};a.meta={[t]:l[t]},e.push({data:a,origin:n,key:t}),s.push(t)}})),s},run:({state:t,ajax:a,filters:r={}})=>{const{subscriptions:n}=Na;e.forEach(((s,l)=>{const{data:o,origin:i,key:c}=s;if(r.modKey&&i.modKey!==r.modKey)return;if(r.bindName&&i.bindName!==r.bindName)return;if(r.key&&c!==r.key)return;const d=ga(t,{data:o,ajax:a});n.run(d),Qe(),Ze(),e.splice(l,1)}))},queue:e,clear:()=>{e.splice(0,e.length)}}})(),wa=(()=>{const e=new Set;let t=null;const a=e=>{const a=V().get(e,"meta.page",null);return!!a&&(t={...Ye,...a},!0)};return{set:a,get:()=>t?{...t}:null,addListener:t=>(e.add(t),()=>e.delete(t)),update:r=>{a(r)&&e.forEach((e=>e(t)))},listeners:e,debug:t}})(),Na={headers:ya,dependents:Ea,subscriptions:va,bindingToFocus:ba,deferredDataUpdates:fa,page:wa},Sa=[ve,Le],Ca={meta:{}},Ta=(e=Ca,t,a={})=>{const{headers:r,subscriptions:n,deferredDataUpdates:s,page:l}=Na;r.update(e),l.set(e);const o={},i=ta({state:o,onOrbitUpdate:c,customFetcher:a.customFetcher});function c(e,t){const{modKey:a,deferDataUpdate:c,expectedDataUpdate:d,origin:m,onComplete:u=V().noop}=e,{modKey:p,bindName:g=""}=m,h=`${Fe}${$e}`;if(ht(o,[a,se,h],!1),ht(o,[p,Q,g,se,h],!1),Qt(o,a),a!==p&&Qt(o,p),c){s.add({keysToDefer:c,keysExpected:d,data:t,origin:m}).forEach((e=>delete t.meta[e]))}const y=ga(o,{data:t,ajax:i});y.add(a),y.add(p),n.run(y),l.update(t),r.update(t),Qe(),Ze(),u({data:t,updated:[...y],isError:!1})}function d(e){return Boolean(o[e])}function m(e,t){if(!o[e])return t?null:{};const a=o[e][se][Me].get();return t?V().get(a,t,null):{...a}}function u(e,t,a){const r=V().get(o,[e,Q,t],null);if(!r)return a?null:{};const n=r[se][Me].get();return a?V().get(n,a,null):{...n}}return ga(o,{data:e,ajax:i}),Qe(),Ze(),t&&n.setRunner(t),{dispatch:function(e){((e,t,a)=>{const{subscriptions:r,bindingToFocus:n,deferredDataUpdates:s,page:l,headers:o}=Na,{ajax:i}=a,{modKey:c="",bindName:d,type:m,name:u,path:p,key:g,value:h,fwdOptions:y,filters:E={},data:v=null}=t,b=!Sa.includes(m),f=Boolean(e[c]);if(!b||f)switch(t.type){case ge:case ye:case Ee:case fe:case we:case Ce:case Te:case ke:if(d){const t=V().get(e,[c,Q,d,te]);t&&t.run(m,y)}break;case pe:if(u){const t=V().get(e,[c,J,u]);t&&t.run(y)}break;case Se:if(u){const t=V().get(e,[c,ne,u],null);t&&t.run()}break;case be:{const t=aa(e,c,{forceDelete:!0});r.run(t);break}case Oe:if(p){const t=it({currentModKey:c,get:p});ct(t)&&ht(e,t,h)}break;case Pe:g&&ht(e,[c,ee,g],h);break;case De:g&&ht(e,[c,se,g],h);break;case Ae:{const t=V().get(e,[c,Q,d,se,_e],""),a=it({currentModKey:c,get:t});ht(e,a,h);break}case Ie:d&&g&&ht(e,[c,Q,d,se,g],h);break;case he:if(d){const t=`${Q}.${d}`,a=V().get(e,[c,ae],[]).filter((e=>e.key!==t));ht(e,[c,ae],a),r.run([c])}break;case Ne:if(n.is(c,d)){if(!V().get(e,[c,Q,d,se,"active"]))break;const t=[c,Q,d,se,"focused"];V().get(e,t)||ht(e,t,!0),n.clear()}break;case Le:s.run({state:e,ajax:i,filters:E});break;case ve:if(v){const t=ga(e,{data:v,ajax:i});r.run(t),o.update(v),l.update(v)}}})(o,e,{ajax:i})},getHeaders:function(e){return r.get(e)},fetchOrbit:function(e,t=V().noop){const{isDataFault:a=!1}=e,r={modKey:"",origin:{modKey:""},isDataFault:!1,body:null,onComplete:t,...e};a?i.fetchDataFault(r):i.enqueue(r)},moduleExists:d,moduleShouldPersist:function(e){d(e)&&o[e][re].set("shouldPersist",!0)},moduleWasPersisted:function(e){if(d(e)){o[e][re].set("wasPersisted",!0);const t=ot(o,e);t.forEach((e=>{o[e][re].set("wasAncestorPersisted",!0)})),n.run([e,...t])}},moduleActive:function(e=""){return!!d(e)&&!o[e][re].get().wasPersisted},getModuleMeta:function(e){return d(e)?o[e][re].get():{...ce}},getModuleData:function(e,t,a){if(!d(e))return t?a:{};if(!t)return{...o[e][ee]};const r=o[e][ee][t];return void 0===r&&void 0!==a?(Zt(o[e][ee],{state:o,modKey:e,meta:o[e][re],key:t,value:a}),a):r},getModuleProps:m,getModuleChildren:function(e){return V().get(o,[e,Z],[]).map((t=>`${e}.${t}`))},getModuleMessages:function(e,t={}){return zt(o,{modKey:e,...t})},getModuleBindingData:function(e){const t={};return d(e)?Object.keys(o[e][Q]).reduce(((t,a)=>(t[a]=dt(o,{modKey:e,bindName:a}),t)),t):t},getModulePolling:function(e){return!!d(e)&&Boolean(Object.keys(o[e][J]).find((t=>V().get(o,[e,J,t,de,je])===We)))},getPagePolling:function(){return Boolean(Object.keys(o).find((e=>Object.keys(o[e][J]).find((t=>V().get(o,[e,J,t,de,je])===Ge)))))},bindingExists:function(e,t){return!!d(e)&&Boolean(o[e][Q][t])},getBindingProps:u,getBindingValue:function(e,t){return dt(o,{modKey:e,bindName:t})},getBindingMessages:function(e,t,{level:a}={}){return zt(o,{modKey:e,bindName:t,level:a})},getAtSpecPath:function(e,t){const a=it({currentModKey:e,get:t}),r=a[0],n=3===a.length&&a[1]===se,s=5===a.length&&a[4]===se;let l;if(n){l=m(r,a[2])}else if(s){l=u(r,a[2],a[4])}else l=V().get(o,a);return{modKey:r,value:l}},subscribe:function(e,t){return n.add(e,t)},getPage:function(){return l.get()},addPageListener:function(e){return l.addListener(e)},debug:function(){return{state:o,ajax:i,onOrbitUpdate:c,...Na}}}},La=(0,s.createContext)(Ta({})),ka=({initData:e,onInit:t=V().noop,customFetcher:a,children:r})=>{const n=(0,s.useRef)(Ta(e,null,{customFetcher:a}));return(0,s.useEffect)((()=>{t(n.current)})),l().createElement(La.Provider,{value:n.current},r)},Ia=()=>(0,s.useContext)(La),Aa=()=>Ia().getHeaders(),Pa=e=>{const t=Ia(),[a,r]=(0,s.useReducer)((e=>e+1),0);return(0,s.useEffect)((()=>{const a=e.map((e=>t.subscribe(e,r)));return()=>{a.forEach((e=>e()))}}),[e,t]),t},Da=(e,t)=>{const{createdAt:a}=e.getModuleMeta(t);return{modExists:e.moduleExists(t),modCreatedAt:a,data:e.getModuleData(t),properties:e.getModuleProps(t),childModKeys:e.getModuleChildren(t)}},Oa=(e,t,a,r={})=>{const{dispatch:n,bindingExists:s,getBindingValue:l,getBindingProps:o,getBindingMessages:i}=e,{deferLoadWithDelete:c}=r;return{bindExists:s(t,a),value:l(t,a),properties:o(t,a),errors:i(t,a,xe.ERROR),setValue:e=>{n({type:Ae,modKey:t,bindName:a,value:e})},runSetEvents:()=>{n({type:ke,modKey:t,bindName:a})},setProperty:(e,r)=>{n({type:Ie,modKey:t,bindName:a,key:e,value:r})},clearMessages:()=>{n({type:he,modKey:t,bindName:a})},maybeSetFocus:()=>{n({type:Ne,modKey:t,bindName:a})},runClickEvents:()=>{const e={};c&&(e.deferDataUpdate=["l"],e.expectedDataUpdate=["x","l"]),n({type:ye,modKey:t,bindName:a,fwdOptions:e})},runFocusEvents:()=>{n({type:fe,modKey:t,bindName:a})},runBlurEvents:()=>{n({type:ge,modKey:t,bindName:a})}}},xa=e=>{const t=Pa([e]);return Da(t,e)},Ra=e=>Pa([e]).moduleExists(e),Fa=e=>{const t=Pa([e]),a=t.getModuleData(e),r=t.getModuleMeta(e);return[a,V().get(r,"lastUpdated.d","")]},Ma=(e,t,a)=>{const r=Pa([e]);return[r.getModuleData(e,t,a),a=>{r.dispatch({type:Pe,modKey:e,key:t,value:a})}]},_a=e=>{const t=Pa([e]),a=t.getModuleMessages(e),r=t.getModuleMeta(e);return[a,V().get(r,"lastUpdated.m","")]},Ba=e=>{const t=Ia(),a=t.getModuleChildren(e);return Pa([e,...a]),a.map((e=>Da(t,e)))},$a=()=>Ia().dispatch,Ua=(e,t)=>{const a=Pa([e]);return Oa(a,e,t)},Ka=!1,Va=(e="",t="",a={})=>{const r=Pa([e]),n=r.moduleExists(e),l=Oa(r,e,t,a),{value:o=null,properties:i={},errors:c=[],setProperty:d=V().noop,runClickEvents:m=V().noop,runFocusEvents:u=V().noop,runBlurEvents:p=V().noop,maybeSetFocus:g=V().noop}=l;(0,s.useEffect)(g);const h=(0,s.useRef)(),y=a.ref||h,E=a.focusDelay||0,v=!1===i.active||!1===i.enabled,[b,f]=(0,s.useState)(Ka),[w,N]=(0,s.useState)(""),S=c.map((e=>e.text)).join(" "),C=!a.disableErrorOnBlur,T=!a.disableFocusSync;(0,s.useEffect)((()=>{if(!w&&!i.focused)if(S)N(S);else if(i.valid){const e=i.optional&&!o,t=b&&C||i.wasValidated;!e&&t&&N(i.valid)}})),(0,s.useEffect)((()=>{S||i.valid||N("")}),[S,i.valid]),(0,s.useEffect)((()=>{n||(b!==Ka&&f(Ka),""!==w&&N(""))}),[n,b,w]),(0,s.useEffect)((()=>{T&&i.focused&&y.current&&(E>0?setTimeout((()=>{y.current&&y.current.focus()}),E):y.current.focus())}),[i.focused,T,y]);return{binding:l,state:{error:w,setError:N,touched:b,setTouched:f},props:{id:i.key,onClick:()=>{m()},onFocus:()=>{f(!0),T&&d("focused",!0),u()},onBlur:()=>{T&&d("focused",!1),p()},ref:y,disabled:v,value:o}}},Ha=(e="",t="",a={})=>Va(e,t,a),ja=(e="",t="",a={})=>{const{binding:r,state:n,props:s}=Va(e,t,a),{setValue:l,runSetEvents:o,clearMessages:i,setProperty:c}=r,{error:d,setError:m}=n,{id:u,value:p,ref:g,disabled:h,onClick:y,onFocus:E,onBlur:v}=s;return{binding:r,state:n,props:{id:u,onClick:y,onFocus:E,onBlur:v,onChange:e=>{l(e.target.checked),o(),i(),c("wasSubmitted",!1),m("")},ref:g,disabled:h,error:d,checked:Boolean(p)}}};var Ga=a(2485),Wa=a.n(Ga);const qa=e=>({dangerouslySetInnerHTML:{__html:e}}),Ya=(...e)=>(0,s.useMemo)((()=>e.every((e=>null===e))?null:t=>{e.forEach((e=>{((e,t)=>{if(null!==e)if(V().isFunction(e))e(t);else try{e.current=t}catch(a){throw new Error(`Cannot assign value "${t}" to ref "${e}"`)}})(e,t)}))}),e),za=(e,t,a,r)=>{const n=(e-t)%(a+1-t);return r?(n<0?a+1:t)+n:Math.max(t,Math.min(a,e))},Xa=()=>document?.documentElement?.getAttribute?.("dir"),Ja=(e,t)=>{let a="";for(let r=0;r<t;r+=1)a+=e;return a},Qa=(e,t,a,r)=>{let{value:n,cursor:s}=e;const l=s>=a,o=s<a+1;return s=l&&o&&r<0?a:s,s+=l&&o&&r>0?t.length:0,s+=l&&!o?t.length:0,n=n.slice(0,a)+t+n.slice(a),{value:n,cursor:s}},Za=(e,t,a=0,r="")=>{if(!e)return null;return((e,t,a)=>{const{value:r,cursor:n}=e,{inputRegex:s,suffix:l,autoCapitalization:o}=t,i=t.blocks||[],c=r.length===n&&a>0;let d=a,m={value:"",cursor:n},u=0,p=0,g=!1;for(let e=0;e<r.length;e+=1){const t=r.charAt(e),a=r.charAt(e+1),n=i[u]||{},l=i[u+1],o=(l&&l.start||"").charAt(0),y=n.inputRegex||s,E=e>=r.length-1,v=u>=i.length-1,b=n.length||n.maxLength||1/0,f=p>=b,w=void 0!==n.length,N=n.pad&&w,S=!w&&t===n.pad&&p<1,C=E&&t===n.pad,T=!S||C,L=!y||(h=y,"string"==typeof h||h instanceof String?new RegExp(h):h).test(t),k=!f&&T&&L,I=0===e&&t===o||a===o;g||!k&&!c&&w||(m=Qa(m,n.start||"",m.value.length,d),g=!0),p+=k?1:0,m.value+=k?t:"",m.cursor+=k||m.cursor<=m.value.length?0:-1;const A=d>0&&m.cursor===m.value.length,P=d>0&&m.cursor===m.value.length+1,D=I&&P&&N,O=I&&!w,x=p>=b||D||O;if(n.unit&&(x||E)&&!f){const e=p%3==0,t=Math.floor(p/3)-(e?1:0);for(let e=0;e<t;e+=1){const t=(3+n.unit.length)*e+3;m=Qa(m,n.unit,m.value.length-t,d)}}if(D||O&&n.pad&&p<1){const e=O?1:(n.length||0)-p,t=m.value.length-p;m=Qa(m,Ja(n.pad||"",e),t,d),m.cursor+=O&&m.cursor===t?1:0}x&&!v&&(u+=1,p=0,g=!1,d=d>0&&!w&&A?0:d)}var h;return l&&m.value&&(m.value+=l),o&&(m.value=m.value?.toString?.().toUpperCase?.()),m})({value:r||e.value,cursor:e.selectionStart||0},t,a)},er=e=>{const{value:t,format:a,...r}=e,[n,l]=(0,s.useState)(t),[o,i]=(0,s.useState)(-1),c=(0,s.useRef)(null),d=e.ref||c,m=(0,s.useRef)(!1);let u="";(0,s.useEffect)((()=>{const e=d.current;e&&o>-1&&m.current&&(e.selectionStart=o,e.selectionEnd=o,m.current=!1)}));return((...e)=>{const t={};return e.forEach((e=>{Object.keys(t).forEach((a=>{/^on[A-Z]/.test(a)&&"function"==typeof t[a]&&"function"==typeof e[a]?t[a]=((...e)=>(...t)=>{e.forEach((e=>{"function"==typeof e&&e(...t)}))})(t[a],e[a]):"className"===a&&"string"==typeof t.className&&"string"==typeof e.className?t[a]=Wa()(t.className,e.className):t[a]=void 0!==e[a]?e[a]:t[a]})),Object.keys(e).forEach((a=>{void 0===t[a]&&(t[a]=e[a])}))})),t})({...{value:n,ref:d,onPaste:e=>{const t=e.clipboardData||window.clipboardData,a=e.target;u=a&&t?[a.value.slice(0,a.selectionStart||0),t.getData("text/plain"),a.value.slice(a.selectionEnd||a.value.length)].join(""):""},onChange:e=>{const t=e.nativeEvent.inputType||e.target.inputType,r=e.target,n=Za(r,a,"deleteContentBackward"===t?-1:1,u);return u="",m.current=!0,l(n.value),i(n.cursor),n}}},{...r})},tr=[c.ArrowUp,c.ArrowDown,c.ArrowLeft,c.ArrowRight,c.Home,c.PageUp,c.PageDown],ar="number",rr=(e="",t="",a={})=>{const{binding:r,state:n,props:l}=Va(e,t,a),{properties:o,setValue:i,runSetEvents:c,clearMessages:d,setProperty:m}=r,{error:u,setError:p}=n,{debounce:g=0}=a,h=g?V().debounce(c,g):c,y=(0,s.useCallback)(h,[g]),{id:E,ref:v,disabled:b,onClick:f,onFocus:w,onBlur:N}=l,S=null!==l.value?String(l.value):"",C=Boolean(o.optional),T=o.autofill||"off",L=a.format||o.format,k=Boolean(L),I=er({value:S,format:L,ref:l.ref}),P=!k&&o.maxLen?`${o.maxLen}`:null,D=S.includes("•"),O=o.focused;(0,s.useEffect)((()=>{O&&D&&v.current&&v.current.select()}),[O]);const x=((e,{isMaskedValue:t,shouldFormat:a})=>{const r=A().isHandheldPhone,{type:n,subtype:s}=e;return s?(r||a||t)&&s===ar?"tel":s:n||"text"})(o,{isMaskedValue:D,shouldFormat:k}),R=e=>{D&&O&&e.preventDefault()};return{binding:r,state:n,props:{id:E,type:x,onClick:f,onFocus:w,onBlur:N,onChange:e=>{const t=k&&I.onChange(e);let a;a=t?t.value:x===ar&&P?e.target.value.substr(0,Number(P)):e.target.value,i(a),y(),d(),m("wasSubmitted",!1),p("")},onMouseDown:R,onMouseMove:R,onKeyDown:e=>{const t=tr.includes(e.keyCode);D&&t&&e.preventDefault()},ref:v,disabled:b,maxLength:P,required:!C,"aria-required":!C,"aria-invalid":Boolean(u),autoComplete:T,error:u,value:S}}},nr=(e="",t="")=>{const a=Pa([e]),r=Oa(a,e,t),{errors:n,properties:l,setValue:o,runSetEvents:i,clearMessages:c}=r,[d,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)(""),g=n.map((e=>e.text)).join(" ");u||(g?p(g):d&&l.valid&&p(l.valid));return{binding:r,state:{touched:d,setTouched:m,error:u,setError:p},props:{value:"",checked:!1,onChange:e=>{m(!0),o(e.target.value),i(),c(),p("")}}}},sr=(e="",t="",a={})=>{const{binding:r,state:n,props:s}=Va(e,t,a),{setValue:l,runSetEvents:o,clearMessages:i,setProperty:c}=r,{error:d,setError:m}=n,{id:u,ref:p,disabled:g,onFocus:h,onBlur:y}=s;return{binding:r,state:n,props:{id:u,onFocus:h,onBlur:y,onChange:e=>{l(e.target.value),o(),i(),c("wasSubmitted",!1),m("")},ref:p,disabled:g,error:d,value:null!==s.value?String(s.value):""}}},lr=e=>{const t=Pa([e]);return{setModWillPersist:()=>t.moduleShouldPersist(e),persistMod:()=>t.moduleWasPersisted(e),modActive:t.moduleActive(e),deleteMod:()=>t.dispatch({type:be,modKey:e})}},or=(e,t)=>{const a=Pa([e]),r=t||a.getModuleChildren(e),{createdAt:n}=a.getModuleMeta(e);(0,s.useEffect)((()=>{r.forEach((e=>{a.moduleShouldPersist(e)}))}),[n]);return r.map((e=>({modKey:e,modExists:a.moduleExists(e),modActive:a.moduleActive(e),props:{appear:!1,onExited:()=>{(e=>{a.dispatch({type:be,modKey:e})})(e),(e=>{a.dispatch({type:Le,filters:{modKey:e}})})(e)}}})))},ir=e=>{const{setModWillPersist:t,persistMod:a,modActive:r,deleteMod:n}=lr(e);return[{visible:r,onEnter:t,onExited:n,onClose:a,mountOnEnter:!0,unmountOnExit:!0},a]},cr=(e,t,a={})=>{const r=Ia(),{binding:n,state:s,props:o}=rr(e,t,a),{setValue:i,runSetEvents:c,clearMessages:d}=n,{setError:m}=s,{typeAheadDataKey:u}=n.properties,p=u?r.getModuleData(e,u):null,[g,h]=l().useState(p||[]);l().useEffect((()=>{u&&p&&h(p)}),[p,u]);const y="clientData"===u;l().useEffect((()=>{if(y){const e=p.filter((e=>e.toLowerCase().startsWith(o.value.toLowerCase())));h(e)}}),[o.value,y,p]);return{binding:n,state:s,props:{...o,options:g,onSelection:e=>{i(e),c(),d(),m("")},autoComplete:"off"}}},dr=(e,t)=>{const a=(0,s.useRef)(!0);(0,s.useEffect)((()=>{a.current||e()}),[...t]),(0,s.useEffect)((()=>{a.current=!1}),[])};function mr(){return mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},mr.apply(this,arguments)}var ur=a(5206),pr=a.n(ur);const gr=({message:e="",...t})=>{const a=l().useId(),r=document.getElementById("portal")||document.body;return(0,ur.createPortal)(l().createElement("span",mr({id:`announce-message-${a}`,key:`announce-message-${a}`,"aria-live":"polite",role:"status","data-core-announce-message":!0},t,qa(e))),r)},hr=({resetDelay:e=1e3}={})=>{const[t,a]=(0,s.useState)("");return[t,t=>{a(t),setTimeout((()=>a("")),e)}]},yr="idle",Er="pending",vr="finished",br={pending:""},fr=({isPending:e=!1,messages:t=br,finishedDelay:a=500,resetDelay:r=1e3})=>{const[n,o]=(0,s.useState)(yr),[i,c]=(0,s.useState)(null),{pending:d="",finished:m=""}=t;return(0,s.useEffect)((()=>{e&&n===yr?(c(d),o(Er)):e||n!==Er?n===vr&&setTimeout((()=>{c(null),o(yr)}),r):setTimeout((()=>{c(m),o(vr)}),a)}),[n,e]),l().createElement(gr,{message:i||""})};function wr(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}function Nr(e,t){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nr(e,t)}function Sr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Nr(e,t)}function Cr(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Tr=!1,Lr=l().createContext(null);var kr=function(e){return e.scrollTop},Ir="unmounted",Ar="exited",Pr="entering",Dr="entered",Or="exiting",xr=function(e){function t(t,a){var r;r=e.call(this,t,a)||this;var n,s=a&&!a.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(n=Ar,r.appearStatus=Pr):n=Dr:n=t.unmountOnExit||t.mountOnEnter?Ir:Ar,r.state={status:n},r.nextCallback=null,r}Sr(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Ir?{status:Ar}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var a=this.state.status;this.props.in?a!==Pr&&a!==Dr&&(t=Pr):a!==Pr&&a!==Dr||(t=Or)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,a,r=this.props.timeout;return e=t=a=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,a=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:a}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Pr){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:pr().findDOMNode(this);a&&kr(a)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ar&&this.setState({status:Ir})},a.performEnter=function(e){var t=this,a=this.props.enter,r=this.context?this.context.isMounting:e,n=this.props.nodeRef?[r]:[pr().findDOMNode(this),r],s=n[0],l=n[1],o=this.getTimeouts(),i=r?o.appear:o.enter;!e&&!a||Tr?this.safeSetState({status:Dr},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,l),this.safeSetState({status:Pr},(function(){t.props.onEntering(s,l),t.onTransitionEnd(i,(function(){t.safeSetState({status:Dr},(function(){t.props.onEntered(s,l)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,a=this.getTimeouts(),r=this.props.nodeRef?void 0:pr().findDOMNode(this);t&&!Tr?(this.props.onExit(r),this.safeSetState({status:Or},(function(){e.props.onExiting(r),e.onTransitionEnd(a.exit,(function(){e.safeSetState({status:Ar},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ar},(function(){e.props.onExited(r)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,a=!0;return this.nextCallback=function(r){a&&(a=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var a=this.props.nodeRef?this.props.nodeRef.current:pr().findDOMNode(this),r=null==e&&!this.props.addEndListener;if(a&&!r){if(this.props.addEndListener){var n=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],s=n[0],l=n[1];this.props.addEndListener(s,l)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===Ir)return null;var t=this.props,a=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,wr(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return l().createElement(Lr.Provider,{value:null},"function"==typeof a?a(e,r):l().cloneElement(l().Children.only(a),r))},t}(l().Component);function Rr(){}xr.contextType=Lr,xr.propTypes={},xr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Rr,onEntering:Rr,onEntered:Rr,onExit:Rr,onExiting:Rr,onExited:Rr},xr.UNMOUNTED=Ir,xr.EXITED=Ar,xr.ENTERING=Pr,xr.ENTERED=Dr,xr.EXITING=Or;const Fr=xr;var Mr=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((a=e).classList?a.classList.remove(r):"string"==typeof a.className?a.className=Cr(a.className,r):a.setAttribute("class",Cr(a.className&&a.className.baseVal||"",r)));var a,r}))},_r=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,a){var r=t.resolveArguments(e,a),n=r[0],s=r[1];t.removeClasses(n,"exit"),t.addClass(n,s?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,a)},t.onEntering=function(e,a){var r=t.resolveArguments(e,a),n=r[0],s=r[1]?"appear":"enter";t.addClass(n,s,"active"),t.props.onEntering&&t.props.onEntering(e,a)},t.onEntered=function(e,a){var r=t.resolveArguments(e,a),n=r[0],s=r[1]?"appear":"enter";t.removeClasses(n,s),t.addClass(n,s,"done"),t.props.onEntered&&t.props.onEntered(e,a)},t.onExit=function(e){var a=t.resolveArguments(e)[0];t.removeClasses(a,"appear"),t.removeClasses(a,"enter"),t.addClass(a,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var a=t.resolveArguments(e)[0];t.addClass(a,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var a=t.resolveArguments(e)[0];t.removeClasses(a,"exit"),t.addClass(a,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,a){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,a]},t.getClassNames=function(e){var a=t.props.classNames,r="string"==typeof a,n=r?""+(r&&a?a+"-":"")+e:a[e];return{baseClassName:n,activeClassName:r?n+"-active":a[e+"Active"],doneClassName:r?n+"-done":a[e+"Done"]}},t}Sr(t,e);var a=t.prototype;return a.addClass=function(e,t,a){var r=this.getClassNames(t)[a+"ClassName"],n=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===a&&n&&(r+=" "+n),"active"===a&&e&&kr(e),r&&(this.appliedClasses[t][a]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((a=e).classList?a.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(a,r)||("string"==typeof a.className?a.className=a.className+" "+r:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+r)));var a,r}))}(e,r))},a.removeClasses=function(e,t){var a=this.appliedClasses[t],r=a.base,n=a.active,s=a.done;this.appliedClasses[t]={},r&&Mr(e,r),n&&Mr(e,n),s&&Mr(e,s)},a.render=function(){var e=this.props,t=(e.classNames,wr(e,["classNames"]));return l().createElement(Fr,mr({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l().Component);_r.defaultProps={classNames:""},_r.propTypes={};const Br=_r,$r=(e,t,a)=>{const r=(0,s.useRef)(e&&!t),n=(0,s.useRef)(!e);(0,s.useEffect)((()=>{r.current!==e&&(r.current=e),n.current===e&&(n.current=!e)}),[e]);return{finalTransitionClass:Wa()({[`${a}-enter-done`]:r.current&&e,[`${a}-exit-done`]:n.current&&!e}),setTransitionHidden:()=>{n.current=!0}}},Ur=e=>{const t=e.match(/^([\d.+-]+)(\w+)$/)||["0","ms"];return parseFloat(t[0])*("ms"===t[1]?1:1e3)},Kr=e=>{if(e.indexOf(",")>0){const t=e.split(",").map((e=>Ur(e.trim()))).sort();return t[t.length-1]}return Ur(e)},Vr=(e,t)=>{const a=(0,s.useRef)(e),r=!!t;return(0,s.useLayoutEffect)((()=>{t&&(a.current=(e=>{const t=window.getComputedStyle(e),{transitionDuration:a,transitionDelay:r}=t;return Kr(a)+Kr(r)})(t))}),[r]),a.current},Hr=(e,t)=>{if(e)return()=>e(t)},jr=({className:e,in:t,timeout:a=400,classNames:r="r-fade-transition",appear:n=!1,onEnter:o,onEntering:i,onEntered:c,onExit:d,onExiting:m,onExited:u,children:p,...g},h)=>{const y=(0,s.useRef)(null),E=Ya(y,h),v=(0,s.useRef)(!1),{finalTransitionClass:b,setTransitionHidden:f}=$r(t,n,r),w=Vr(a,y.current);return l().createElement(Br,mr({in:t,timeout:w,appear:n,classNames:r,onEnter:Hr(o,y.current),onEntering:Hr(i,y.current),onEntered:Hr(c,y.current),onExit:()=>{v.current=!0,d&&d(y.current)},onExiting:Hr(m,y.current),onExited:()=>{v.current=!1,f(),u&&u(y.current)},className:Wa()(e,v.current?"":b),nodeRef:y},g),l().createElement("div",{ref:E,"aria-hidden":!t||void 0,"data-core-fade-transition-wrapper":""},p))},Gr=(0,s.forwardRef)(jr),Wr=({className:e,in:t,timeout:a=400,classNames:r="r-height-transition",appear:n=!1,onEnter:o,onEntering:i,onEntered:c,onExit:d,onExiting:m,onExited:u,children:p,...g},h)=>{const y=(0,s.useRef)(null),E=Ya(y,h),v=(0,s.useRef)(!1),b=(0,s.useRef)(null),[f,w]=(0,s.useState)(""),N=()=>b.current?b.current.getBoundingClientRect().height:"",S=()=>{t&&y.current&&(y.current.style.height="")};(0,s.useLayoutEffect)((()=>{const e=N();w(t?`${e}px`:"0px")}),[w,t]),(0,s.useEffect)((()=>{setTimeout(S,a)}),[]);const{finalTransitionClass:C,setTransitionHidden:T}=$r(t,n,r),L=Vr(a,y.current);return l().createElement(Br,mr({in:t,appear:n,timeout:L,classNames:r,onEnter:Hr(o,y.current),onEntering:Hr(i,y.current),onEntered:()=>{S(),c&&c(y.current)},onExit:()=>{if(v.current=!0,y.current){const e=N();y.current.style.height=`${e}px`}d&&d(y.current)},onExiting:Hr(m,y.current),onExited:()=>{v.current=!1,T(),u&&u(y.current)},className:Wa()(e,v.current?"":C),nodeRef:y},g),l().createElement("div",{ref:E,style:{height:f},"aria-hidden":!t||void 0,"data-core-height-transition-wrapper":""},l().createElement("div",{ref:b,"data-core-height-transition-content":""},p)))},qr=(0,s.forwardRef)(Wr),Yr=l().useId,zr=function(){return null},Xr=i("measureBagRender");let Jr=null;const Qr="[\\s!¡\\?¿‽\\.\\,…:;_\\-–—~·•‘’“”‚„‛‟′`″'\"#\\$&\\*@§¶\\^\\|\\/]",Zr=(new RegExp("^"+Qr+"+"),new RegExp(Qr+"+$")),en=/\+/g,tn=e=>e.replace(Zr,""),an=e=>Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(""+e[t]))).join("&"),rn=e=>{const t={};return(e="?"===e.charAt(0)||"#"===e.charAt(0)?e.substring(1):e).split("&").forEach((e=>{const[a,r=""]=e.split("="),n=decodeURIComponent(r.replace(en," ")),s=t[a];if(n&&s){const e=Array.isArray(s)?s:[s];e.push(n),t[a]=e}else n&&(t[a]=n)})),t},nn=(e,t)=>{const a=(e=>{const t=Jr||document.createElement("a");Jr=t,t.href=e;const{protocol:a,hostname:r,search:n,hash:s}=t;return{protocol:a,hostname:r,pathname:"/"===(t.pathname||"").charAt(0)?t.pathname:"/"+t.pathname,port:"0"===t.port?"":t.port,search:n,hash:s}})(e),r=rn(a.search);return Object.keys(t).forEach((e=>r[e]=t[e])),a.search="?"+an(r),(e=>{const{protocol:t,hostname:a,pathname:r,port:n,search:s,hash:l}=e;return(a?t+"//"+a+(n?":"+n:""):"")+r+s+l})(a)},sn=e=>e.replace(/([[\\^$.|?*+(){}])/g,"\\$1"),ln=(e,t,a="{",r="}")=>{if(null==e)return String(e);const n=sn(a),s=sn(r);return e.replace(new RegExp(`${n}([\\w-]+)${s}`,"g"),((e,a)=>{return 0===(r=t[a])||r?t[a]+"":"";var r}))},on=Object.freeze({DISABLED_COUNTRY:1,NOT_SAFARI:2,OLD_DEVICE:3,OLD_SAFARI:4,DENIED:5,UNSUPPORTED:6,SUPPORTED:7,COMPLETED:8,SUPPLEMENTARY_SUPPORTED:9}),cn=(Object.freeze({UNSUPPORTED:1,SUPPORTED:2,COMPLETED:3,SUPPLEMENTARY_SUPPORTED:4,API_NIL:5,NIL:6}),Object.freeze({INSTALLMENT:"_installments",BANNER:"_banner",OVERLAYHEADER:"_overlayHeader",OVERLAYFOOTER:"_overlayFooter",NOACI:"_no_aci"})),dn=Object.freeze({INLINE:0,BANNER:1,OVERLAYHEADER:2,OVERLAYFOOTER:3}),mn=Object.freeze({UPDATE:"update",OPEN_OVERLAY:"open_overlay",CLOSE_OVERLAY:"close_overlay",APPLIED:"ac_apply",UPDATE_CONFIG:"update_config"}),un=Object.freeze({NO_CARD:"no_card",WITH_CARD:"with_card"}),pn=(e,t)=>{switch(t.type){case mn.UPDATE:return{...e,...t.payload};case mn.OPEN_OVERLAY:return{...e,overlayVisible:!0,isCompleted:!1,overlayTriggerSel:t.payload.triggerSel,showOverlayContentForBanner:t.payload.isBanner,overrideShowOverlay:t.payload.overrideShowOverlay,assetVariables:{...t.payload.assetVariables},metricsInfo:t.payload.metricsInfo};case mn.CLOSE_OVERLAY:return{...e,overlayVisible:!1};case mn.APPLIED:return{...e,isCompleted:!0,hasApplied:!0};case mn.UPDATE_CONFIG:return{...e,...t.payload};default:return{...e}}},gn=e=>{const t=window.cookieMap;return t&&"object"==typeof t&&e in t?t[e]:e},hn=e=>(e=>{let t=null;if(!e)return t;const a=(E.getCookies()||"").split(";");for(let r=0;r<a.length;r++){const n=(a[r]||"").trim();if(n.substring(0,e.length+1)===e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}if(t&&t.match(/^\s*\{/))try{t=JSON.parse(t)}catch(e){}return t})(gn(e)),yn=e=>{document.body.classList.toggle("as-buyflowmessages-applycompleted",e)},En=e=>{const t=hn(e)||"";return 0===t.indexOf("~")?t.slice(1):t},vn=()=>{const e=window.sessionStorage;e&&e.removeItem("acs")},bn=(e,t,a,r)=>{const n=V().get(e,"appleCardStatusUrl"),s=En("as_cn");n&&s&&ft(n).then((e=>{const{body:t={}}=e;if(1===t.acs){Object.assign(r,{appleCardState:on.COMPLETED});const e=!0;a({type:mn.UPDATE,payload:{hasNativeState:e}})}yn(Boolean(t.acs)),vn(),(e=>{const t=window.sessionStorage;if(t){const a=En("as_cn");if(a){const r={as_cn_value:a,state:e};t.setItem("acs",JSON.stringify(r))}}})(t.acs)})).catch((e=>{window.console.log("error fetching card status...",e)}))},fn=(e,t,a,r)=>{if((e=>!e||[on.DISABLED_COUNTRY,on.NOT_SAFARI,on.OLD_DEVICE,on.OLD_SAFARI,on.DENIED,on.UNSUPPORTED].includes(e))(r.appleCardState)){const t=(()=>{const e=window.sessionStorage;let t=null;if(e){const a=En("as_cn");let r=e.getItem("acs");r=r&&JSON.parse(r),r&&r.as_cn_value===a?t=r.state:vn()}return t})();if([0,1].includes(t)){if(1===t){Object.assign(r,{appleCardState:on.COMPLETED});const e=!0;a({type:mn.UPDATE,payload:{hasNativeState:e}})}}else bn(e,0,a,r);yn(Boolean(t))}else{const e=!0;a({type:mn.UPDATE,payload:{hasNativeState:e}})}},wn=(e,t=!1,a=!1,r=!1,n={},s=!1)=>{const l=s?"web apply | ":"";switch(e){case on.DISABLED_COUNTRY:return{key:"disabledcountry",overlay:!1,showExisting:!0,evarGroupText:`${l}denied | pre:wrong country`};case on.NOT_SAFARI:return{key:"notonsafari",overlay:!1,showExisting:!0,evarGroupText:`${l}denied | pre:not safari`};case on.OLD_DEVICE:return{key:"devicenotcapable",overlay:!1,showExisting:!0,evarGroupText:`${l}denied | pre:unsupported device`};case on.OLD_SAFARI:return{key:"osunsupported",overlay:a,showExisting:!0,evarGroupText:`${l}denied | pre:osunsupported`};case on.DENIED:{const e=V().get(n,"apiStates.applePay","nil");return{key:"denied",overlay:!1,showExisting:!0,evarGroupText:l+(n.apiStates&&"nil"===n.apiStates.appleCard?`denied | api:[${e}, nil]`:"denied | pre:nil")}}case on.UNSUPPORTED:return{key:"unsupported",overlay:!1,showExisting:!0,evarGroupText:`${l}denied | api:unsupported`};case on.SUPPORTED:return{key:"supported",overlay:!0,evarGroupText:(t?"":l)+t&&a?"supported_installments":"supported"};case on.COMPLETED:return{key:"completed",overlay:a&&r,evarGroupText:t&&a?"completed_installments":"completed"};case on.SUPPLEMENTARY_SUPPORTED:return{key:"supplementarysupported",overlay:a&&r,evarGroupText:t&&a?"supplementarysupported_installments":"supplementarysupported"};default:return null}},Nn=({status:e,asset:t,isInstallmentSupported:a,messageType:r=dn.INLINE,isBFIEnabled:n,showBFILink:s,showOverlayContentForBanner:l,isACIXEnabled:o=!1,assetVariables:i={},templateId:c,isBag:d})=>{const{key:m}=wn(e,n,s),u=(e=>{switch(e){case on.DISABLED_COUNTRY:case on.NOT_SAFARI:case on.OLD_DEVICE:case on.OLD_SAFARI:case on.DENIED:case on.UNSUPPORTED:case on.SUPPORTED:return un.NO_CARD;case on.COMPLETED:case on.SUPPLEMENTARY_SUPPORTED:return un.WITH_CARD;default:return null}})(e);let p=m;const g=[on.COMPLETED,on.SUPPORTED,on.SUPPLEMENTARY_SUPPORTED];if(n&&(a&&-1!==g.indexOf(e)&&(p=`${m}${cn.INSTALLMENT}`),d||s||r!==dn.INLINE||(o||-1!==g.indexOf(e))&&(p=`${m}${cn.NOACI}`)),r===dn.BANNER&&(p+=cn.BANNER),r===dn.OVERLAYHEADER||r===dn.OVERLAYFOOTER){const e=r===dn.OVERLAYHEADER,a=e?`${p}${cn.OVERLAYHEADER}`:`${p}${cn.OVERLAYFOOTER}`,o=e?"overlayHeader":"overlayFooter",i=e?`overlayHeader${cn.NOACI}`:`overlayFooter${cn.NOACI}`;p=n&&(s||l||d)?t&&t[a]&&n?a:t&&t[o]?o:"":!n||s||l?o:t&&t[i]?i:""}r===dn.INLINE&&(t&&t[`${p}_${c}`]?p=`${p}_${c}`:t&&t[`${u}_${c}`]?p=`${u}_${c}`:t&&t[u]&&(p=u));const h=V().get(t,p,"");return V().isEmpty(i)?h:ln(h,{...i})},Sn="cid%3Dapy-220-100002",Cn="cid%3Dapy-220-100004",Tn={desktop:{buyflowDefaultValue:"cid%3Dapy-220-100013",defaultValue:"cid%3Dapy-220-100014"},handheld:{buyflowDefaultValue:"cid%3Dapy-220-100016",defaultValue:"cid%3Dapy-220-100017"}},Ln=e=>e?Sn:Cn,kn=e=>{const{isHandheldPhone:t}=A(),a=t?"handheld":"desktop";return e?V().get(Tn,`${a}.buyflowDefaultValue`):V().get(Tn,`${a}.defaultValue`)},In={bagLearnMoreLink:{hier1:"aos:bag",prop3:"modal open|ribbon|learn more about acmi",evar6:'D=pageName+"|ribbon|learn more about acmi|open modal"'},bagLearnMoreWebApply:{evar6:"aos:bag|learn more about acmi|apply for apple card"},bagSummaryLink:{evar6:'D=pageName+"|summary|get 3% daily cash|open modal"'},bagSummaryWebApply:{evar6:'D=pageName+"|modal|info - get 3% daily cash|apply for apple card"'}},An=e=>{try{window.asMetrics&&window.asMetrics.sendUserInteraction({name:"metrics",data:e})}catch(e){window.console.log(e)}},Pn=e=>{try{window.asMetrics&&!V().isEmpty(e)&&window.asMetrics.fireMicroEvent({eVar:"eVar6",page:window.s.pageName,...e})}catch(e){window.console.log(e)}},Dn=(e="apple card modal",t=!1)=>{Pn({feature:`${e} - ${t?"web apply":"native apply"}`,action:"apply now"})},On=(e,t,a=!1)=>{const r=window.acStoreApplePaySetup.RELAY_EVENT_ID,n=a?kn(t):Ln(t);window.asMetrics&&window.asMetrics.relay&&window.asMetrics.relay.sendBeacon({key:r,element:e,callback:()=>{},defaultCampaign:n})},xn=(e,t,a=(e=>e),r)=>{const n=V().get(e,"messages.additionalData.namedAssets",{}),{isBFIEnabled:s,isACIXEnabled:l}=n,o=Boolean(e.acmiEnabled);let i={},c="";const d={},m=window.asMetrics&&window.asMetrics.relay,u={config:{merchantIdentifier:t.merchantIdentifier||"",signature:t.signature||"",signedFields:t.signedFields||null}};m&&m.getOne&&(u.config.referrerIdentifier=m.getOne(window.acStoreApplePaySetup.RELAY_EVENT_ID));const p=u.config.referrerIdentifier||kn(t.fireWithBuyflowReferrer);let g={};p&&(g=rn(decodeURIComponent(p)));const h=V().get(e,"appleCardApplyUrl");if(d.appleCardApplyUrl=h?nn(h,g):"",u.config.referrerIdentifier||(u.config.referrerIdentifier=Ln(t.fireWithBuyflowReferrer)),window.acStoreApplePaySetup&&window.acStoreApplePaySetup.getState)try{window.acStoreApplePaySetup.getState(u).then((m=>{if(m&&(i=wn(m.appleCardState,m.supportsInstallments,s,t.showBFILink,{apiStates:m.apiStates},e.webApplyEnabled),d.supportsInstallments=t.buyflowInstallmentsOverrideEnabled||m.supportsInstallments),d.objStatusMessage=m,!m||!n[i.key]&&i.showExisting)d.showDefaultFinancing=!0;else{d.showDefaultFinancing=!1;const e=t.defaultFinancingSelector||".as-productdecision-selectionarea";if(e){const t=document.querySelector(e);t&&(t.classList+=" as-buyflow-messages-hidedefaultfinancing")}c=n?Nn({status:m.appleCardState,assets:n,isInstallmentsSupported:t.supportsInstallments,messageType:dn.INLINE,isBFIEnabled:s,showBFILink:t.showBFILink,isACIXEnabled:l,templateId:t.templateId}):c,d.linkText=c}d.isSupplementaryLink=(e=>e===on.SUPPLEMENTARY_SUPPORTED)(m.appleCardState),d.canNativeApply=(e=>e===on.SUPPORTED)(m.appleCardState,t.showBFILink);const u=(l?o:s)&&i.key?Nn({status:m.appleCardState,asset:n,isInstallmentsSupported:t.supportsInstallments,messageType:dn.BANNER,isBFIEnabled:s,isACIXEnabled:l}):null;if(d.bannerMessage=u,document.body.classList.toggle("rf-acmibanner-enabled",Boolean(u)),r){fn(e,0,a,m);const n=((e=[],{supportsInstallments:t,appleCardState:a})=>{let r=0;if(0===e.length){const e=[on.COMPLETED,on.SUPPORTED,on.SUPPLEMENTARY_SUPPORTED];t?r=1:-1!==e.indexOf(a)&&(r=2)}else{const n=t?1:0,s=V().find(e,(e=>{const{state:t=[],inst:r=[]}=e;return-1!==t.indexOf(a)&&-1!==r.indexOf(n)}));r=s.key||0}return r})(t.aciConfigMap||[],m);r({messagingState:m.appleCardState,...i,linkText:c,isSupplementaryLink:t.isSupplementaryLink,supportsInstallments:t.supportsInstallments,hasApplied:t.hasApplied,acmiLevel:n,bannerMessage:u})}a({type:mn.UPDATE,payload:{...d}}),window.acmState={...d},i&&i.evarGroupText&&(e=>{window.asMetrics&&window.asMetrics.appleCard&&window.asMetrics.appleCard({name:"Step 1",status:e})})(i.evarGroupText)}))}catch(e){window.console.log(e)}},Rn=(e,t,{isBanner:a=!1,evarParam:r="",triggerSel:n,assetVariables:s={},metricsInfo:l="apple card",metricsKey:o,overrideShowOverlay:i=!1,part:c=""}={})=>{t({type:mn.OPEN_OVERLAY,payload:{isBanner:a,triggerSel:n,assetVariables:s,metricsInfo:l,overrideShowOverlay:i}}),o?(e=>{An(In[e])})(o):(({evarParam:e,metricsInfo:t,part:a})=>{Pn({slot:e,feature:t||"apple card",part:a,action:"open modal"})})({evarParam:r,metricsInfo:l,part:c})},Fn=(e,t,a={})=>{const{fireWithBuyflowReferrer:r,appleCardApplyUrl:n,metricsInfo:s}=e,{metricsKey:l}=a;(n||l)&&(t.preventDefault&&t.preventDefault(),l?(e=>{let t;const a=window.asMetrics&&window.asMetrics.relay;a&&a.getOne&&(t=a.getOne(window.acStoreApplePaySetup.RELAY_EVENT_ID));const r=t||kn();An({...In[e],evar17:r,events:"event287"})})(l):(Dn(s,true),On(t,r,true)),vn(),n&&(window.location.href=n))},Mn=(e,t,a={})=>{window.acStoreApplePaySetup&&window.acStoreApplePaySetup.setup&&(window.acStoreApplePaySetup.setup(e.objStatusMessage),t({type:mn.APPLIED}),Dn(e.metricsInfo),On(a,e.fireWithBuyflowReferrer))},_n=(e,t,a,r)=>{a({type:mn.CLOSE_OVERLAY}),xn(e,t,a,r),Pn({feature:"apple card modal",action:"thank you"})},Bn=({bootstrap:e,onCompleted:t=(e=>e),additionalState:a={}})=>{const{merchantIdentifier:r="",signature:n="",signedFields:l=null}=e,[o,i]=(0,s.useReducer)(pn,{merchantIdentifier:r,signature:n,signedFields:l,overlayVisible:!1,onCompleted:t,...a});(0,s.useEffect)((()=>{xn(e,o,i,t)}),[]);return{state:o,handleOpenOverlay:e=>Rn(0,i,e),handleCloseOverlay:()=>((e,t,a,r)=>{a({type:mn.CLOSE_OVERLAY}),t.isCompleted&&xn(e,t,a,r)})(e,o,i,t),handleApplyClick:e=>Mn(o,i,e),handleWebApplyClick:(e,t)=>Fn(o,e,t),handleInlineApplyClick:e=>((e,t,a)=>{e.canNativeApply?Mn(e,t,a):Fn(e,a)})(o,i,e),handleContinueClick:()=>_n(e,o,i,t),handleConfigUpdate:a=>((e,t,a,r,n)=>{const s=V().has(r,"showBFILink"),l=V().get(t,"objStatusMessage.appleCardState"),o={merchantIdentifier:r.merchantIdentifier||t.merchantIdentifier,signature:r.signature||t.signature,signedFields:r.signedFields||t.signedFields,showBFILink:s?r.showBFILink:t.showBFILink,shouldHideLinks:V().has(r,"shouldHideLinks")?r.shouldHideLinks:t.shouldHideLinks};if(a({type:mn.UPDATE_CONFIG,payload:{...o}}),l&&n&&s){const a=V().get(e,"messages.additionalData.namedAssets",{}),s=wn(l,t.supportsInstallments,a.isBFIEnabled,t.showBFILink);n({linkText:Nn({status:l,asset:a,isInstallmentsSupported:t.supportsInstallments,messageType:dn.INLINE,isBFIEnabled:a.isBFIEnabled,showBFILink:r.showBFILink,isACIXEnabled:a.isACIXEnabled,assetVariables:t.assetVariables,templateId:t.templateId}),...s,isConfigUpdated:!0})}})(e,o,i,a,t),handleSupplementarySetup:e=>((e,t={})=>{t.preventDefault&&t.preventDefault(),window.acStoreApplePaySetup&&window.acStoreApplePaySetup.setup&&(window.acStoreApplePaySetup.setup(e.objStatusMessage),On(t,e.fireWithBuyflowReferrer))})(o,e)}},$n="data-ariafocusable",Un="data-ariasaved-tabindex",Kn="data-ariasaved-disabled",Vn="data-ariasaved-ariadisabled",Hn="data-ariasaved-href";const jn=e=>"BUTTON"===e.tagName||"INPUT"===e.tagName,Gn=(e,t=document)=>Array.from(t.querySelectorAll(e)),Wn=e=>{const t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)||t>=0},qn=(e,t,a=!0)=>{const r=Gn("a,input,select,button,textarea,iframe,*[tabindex]",e).filter(Wn),n=a?r.filter((e=>"none"!==e.style.display)):r;return t?n.slice(0,t):n},Yn=e=>{e.forEach((e=>{if(e.setAttribute($n,"true"),jn(e)){const t=e.disabled,a=Boolean(e.getAttribute(Kn))||t?"true":"";e.setAttribute(Kn,a),e.disabled=!0}const t=e.getAttribute("aria-disabled")||"",a=e.getAttribute(Vn)||"";e.setAttribute(Vn,a||t),e.setAttribute("aria-disabled","true");const r=e.getAttribute("href")||"",n=e.getAttribute(Hn)||"";r&&(e.setAttribute(Hn,n||r),e.removeAttribute("href"));const s=e.getAttribute("tabindex")||"",l=e.getAttribute(Un)||"";e.setAttribute(Un,l||s),e.setAttribute("tabindex","-1")}))},zn=e=>{e.forEach((e=>{if(e.removeAttribute($n),jn(e)){const t=e.disabled,a=e.getAttribute(Kn);t&&(e.disabled=Boolean(a)),e.removeAttribute(Kn)}const t=e.getAttribute("aria-disabled")||"",a=e.getAttribute(Vn)||"";"true"===t&&(a?e.setAttribute("aria-disabled",a):e.removeAttribute("aria-disabled")),e.removeAttribute(Vn);const r=e.getAttribute("href")||"",n=e.getAttribute(Hn)||"";""===r&&n&&e.setAttribute("href",n),e.removeAttribute(Hn);const s=e.getAttribute("tabindex")||"",l=e.getAttribute(Un)||"";parseInt(s,10)<0&&(l?e.setAttribute("tabindex",l):e.removeAttribute("tabindex")),e.removeAttribute(Un)}))},{iosVersion:Xn}=A(),Jn=Xn>0,Qn=Jn&&Xn<15,Zn=HTMLElement.prototype.hasOwnProperty("inert");const es=new class{constructor(){this.map={},this.anyOverlayOpen=!1,this.scrollState={},this.initialPageState={processedNodes:[],originalValues:[],focusableNodes:[]}}update(e,t){this.map[e]=t;const a=Object.keys(this.map).every((e=>!this.map[e]));t&&!this.anyOverlayOpen?(this.initialPageState=(()=>{const e=document.getElementById("portal"),t=Array.from(document.querySelectorAll("body > *")).filter((e=>!e.matches("script,style"))),a=[],r=[],n=[];return t.forEach((t=>{if(t!==e)if(Zn){if(t.inert)return;a.push(t),t.toggleAttribute("inert")}else{const e=t.getAttribute("aria-hidden");if(null!==e&&"false"!==e)return;r.push(e),a.push(t),t.setAttribute("aria-hidden","true"),n.push(qn(t))}})),Zn||n.forEach((e=>Yn(e))),{processedNodes:a,originalValues:r,focusableNodes:n}})(),this.anyOverlayOpen=!0):!t&&a&&this.anyOverlayOpen&&((({processedNodes:e,originalValues:t,focusableNodes:a})=>{e.forEach(((e,a)=>{if(Zn)e.toggleAttribute("inert");else{const r=t[a];null===r?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r)}})),Zn||a.forEach((e=>zn(e)))})(this.initialPageState),this.anyOverlayOpen=!1)}scrollLock(e){const t=document.documentElement,a=`data-core-overlay-${Qn?"open-ios-fixed":"open"}`;e?(Jn&&(this.scrollState.scrollX||(this.scrollState.scrollX=window.pageXOffset),this.scrollState.scrollY||(this.scrollState.scrollY=window.pageYOffset)),t.setAttribute(a,"")):setTimeout((()=>{!this.anyOverlayOpen&&t.hasAttribute(a)&&(t.removeAttribute(a),Jn&&(window.scrollTo(this.scrollState.scrollX||0,this.scrollState.scrollY||0),this.scrollState={}))}),0)}remove(e){delete this.map[e]}getMap(){return this.map}},ts=(0,s.forwardRef)((({in:e,visible:t=e,timeout:a=100,mountOnEnter:r=!0,onEntered:n,onExit:o,onExited:i,onClose:d=(()=>{}),returnFocusRef:m,noCover:u=!1,isFullscreen:p=!1,disableClickAway:g=!1,disableEsc:h=!1,disableFocusIn:y=!1,disableFocusOut:E=!1,ariaLabel:v,ariaDesc:b,ariaModal:f=!0,contentAttrs:w,role:N="dialog",className:S,children:C,...T},L)=>{const k=l().useId(),I=(0,s.useRef)(null),A=Ya(I,L),P=(0,s.useRef)(null),D=(0,s.useRef)(null),O=document.getElementById("portal");(0,s.useEffect)((()=>{t&&D&&(D.current=document.activeElement),es.update(k,t)}),[t]);(0,s.useEffect)((()=>()=>{es.update(k,!1),es.scrollLock(!1),es.remove(k)}),[]),U("click",t?e=>{t&&!g&&I.current===e.target&&d(e)}:null),U("keydown",t?e=>{t&&!h&&e.keyCode===c.Esc&&d(e)}:null);const x={"data-core-overlay":"","data-core-overlay-cover":u?void 0:"","data-core-overlay-fullscreen":p?"":void 0};return(0,ur.createPortal)(l().createElement(Gr,mr({ref:A,in:t,timeout:a,mountOnEnter:r,onEntered:()=>{es.scrollLock(!0),y||P.current&&P.current.focus(),n&&setTimeout(n,0)},onExit:()=>{es.scrollLock(!1),o&&setTimeout(o,0)},onExited:()=>{E||(m&&m.current?m.current.focus():D.current&&D.current.focus()),i&&setTimeout(i,0)},className:S},x,T),l().createElement("div",mr({"data-core-overlay-content":"",tabIndex:-1,ref:P,role:N,"aria-labelledby":v,"aria-describedby":b,"aria-modal":f},w),C)),O||document.body)}));ts.displayName="Overlay";const as=ts,rs=({ariaLabel:e="Close",className:t,stickyClose:a,alignStart:r,children:n,...s})=>l().createElement("button",mr({type:"button",className:Wa()("rc-overlay-close",t,{"rc-sticky":a,"rc-align-start":r}),"aria-label":e,"data-autom":"overlay-close"},s),l().createElement("span",mr({className:"rc-overlay-closesvg"},qa('<svg width="21" height="21" class="as-svgicon as-svgicon-close as-svgicon-tiny as-svgicon-closetiny" role="img" aria-hidden="true"><path fill="none" d="M0 0h21v21H0z"/><path d="m12.12 10 4.07-4.06a1.5 1.5 0 1 0-2.11-2.12L10 7.88 5.94 3.81a1.5 1.5 0 1 0-2.12 2.12L7.88 10l-4.07 4.06a1.5 1.5 0 0 0 0 2.12 1.51 1.51 0 0 0 2.13 0L10 12.12l4.06 4.07a1.45 1.45 0 0 0 1.06.44 1.5 1.5 0 0 0 1.06-2.56Z"/></svg>'))),n),ns=l().forwardRef((({onClose:e,noPadding:t,doublePadding:a,fixedWidth:r=!0,wide:n,isFullscreen:s,noCloseButton:o,disableClickAway:i,footerContent:c,stickyClose:d,blur:m,startAlignClose:u,classes:p={root:"",content:"",close:""},className:g,children:h,closeButtonAttrs:y={},...E},v)=>{const{assets:b,viewport:f}=z();return l().createElement(as,mr({className:Wa()("rc-overlay",g,p.root,s?"rc-overlay-fullscreen":"rc-overlay-popup",{"rc-overlay-fixed-width":r&&!s,"rc-overlay-content-nopadding":t,"rc-overlay-content-doublepadding":a,"rc-overlay-content-wide":n,"rc-overlay-with-footer":!!c,"rc-blur":m,"rc-overlay-no-close-button":o}),onClose:e,isFullscreen:s,disableClickAway:i,ref:v},E),s?l().createElement("div",{className:"rc-overlay-fullscreen-outer"},l().createElement("div",{className:Wa()(p.content,"rc-overlay-fullscreen-content")},h,c&&l().createElement("div",{className:"rc-overlay-footer"},c)),!o&&l().createElement(rs,mr({className:p.close,onClick:e,ariaLabel:b.close,stickyClose:d,alignStart:u},y))):l().createElement("div",{className:Wa()(p.content,"rc-overlay-popup-outer")},l().createElement("div",{className:"rc-overlay-popup-content"},h),c&&l().createElement("div",{className:"rc-overlay-footer"},c),!o&&l().createElement(rs,mr({className:p.close,onClick:e,ariaLabel:b.close,stickyClose:d,alignStart:u},y))),s||"small"!==f||i?null:l().createElement("div",{className:"rc-overlay-popup-dismiss",onClick:e}))}));ns.displayName="Overlay";const ss=ns,ls=({id:e,className:t,children:a,isLoading:r,hasDefaultClass:n=!0,...s},o)=>{const i=Wa()([t,{"form-button":n},{"button-spinner":r}]);return l().createElement("button",mr({id:e,type:"button",className:i,ref:o},s),l().createElement("span",null,a))},os=l().forwardRef(ls),is=({bootstrap:e,state:t,webApplyButtonProps:a,onClose:r=(e=>e),handleApplyClick:n=(e=>e),handleWebApplyClick:s=(e=>e),handleContinueClick:o=(e=>e),dataAutomForOverlay:i})=>{const c=V().get(e,"messages.additionalData.namedAssets",{}),{isBFIEnabled:d,isACIXEnabled:m}=c,u=t&&t.objStatusMessage?t.objStatusMessage:{},p=!d||!t.supportsInstallments||t.overrideShowBFILink||!t.showBFILink&&!t.showOverlayContentForBanner,{appleCardApplyUrl:g,isBag:h}=e,y=!t.overrideShowBFILink&&t.showBFILink,E=t.isCompleted&&d&&c.appliedOverlayHeader?c.appliedOverlayHeader:Nn({status:u.appleCardState,asset:c,isInstallmentSupported:t.supportsInstallments,messageType:dn.OVERLAYHEADER,isBFIEnabled:d,showBFILink:y,showOverlayContentForBanner:t.showOverlayContentForBanner,assetVariables:t.assetVariables,isACIXEnabled:m,isBag:h}),v=t.isCompleted&&d&&c.appliedOverlayFooter?c.appliedOverlayFooter:Nn({status:u.appleCardState,asset:c,isInstallmentSupported:t.supportsInstallments,messageType:dn.OVERLAYFOOTER,isBFIEnabled:d,showBFILink:y,showOverlayContentForBanner:t.showOverlayContentForBanner,assetVariables:t.assetVariables,isACIXEnabled:m,isBag:h});return l().createElement("div",null,l().createElement(ss,{visible:t.overlayVisible,isFullscreen:t.isHandheldPhone,className:"rf-acmessages-overlay",onClose:()=>r(),contentAttrs:{className:"rf-acmessages-overlay-content","data-autom":i},ariaLabel:"buyflowmessages-overlay-header"},l().createElement("div",mr({className:Wa()("rf-acmessages-overlayheader",{"rf-acmessages-noproductprice":V().isEmpty(t.assetVariables)||t.showOverlayContentForBanner})},qa(E))),t.canNativeApply&&!t.isCompleted&&p?l().createElement("button",{onClick:e=>n(e),className:"form-button",type:"button"},c.apply):"",t.hasNativeState||t.isCompleted||!g?"":l().createElement("a",{href:g,onClick:e=>s(e),className:"rf-acmessages-web-apply form-button","data-autom":"Apply Now","aria-label":V().get(c,"applyAllyText")},c.apply),!t.hasNativeState&&a&&l().createElement(os,mr({},a,{onClick:e=>{s(e,{metricsKey:"bagSummaryWebApply"}),a.onClick()}}),a.label),t.hasNativeState&&t.isCompleted?l().createElement("button",{onClick:o,className:"form-button",type:"button"},c.continue):"",l().createElement("div",mr({className:"rf-acmessages-overlayfooter"},qa(v)))))},cs=({bootstrap:e,state:t,overlayAttrs:a})=>{const r=V().get(e,"messages.additionalData.namedAssets")||{},{isBFIEnabled:n}=r,s=t&&t.objStatusMessage?t.objStatusMessage:{},o=wn(s.appleCardState,t.supportsInstallments,n,t.showBFILink);if(!o)return"";const i=o.overlay||t.showOverlayContentForBanner||t.overrideShowOverlay;return l().createElement(l().Fragment,null,n||i?l().createElement(is,a):null)},ds=e=>{const t=l().useRef(null),a=l().useRef(null);return l().useEffect((()=>{t.current&&(e?(a.current=qn(t.current),Yn(a.current),a.current.forEach((e=>e.setAttribute("aria-disabled",!0)))):a.current&&(zn(a.current),a.current.forEach((e=>e.removeAttribute("aria-disabled")))))}),[e]),t},ms=({disabled:e,classes:t={},children:a,...r})=>{const n=ds(e);return l().createElement("div",mr({ref:n,className:Wa()(t.root,{[t.disabled||""]:e}),"data-core-disabled":e},r),a)},us=({bootstrap:e,state:t,handleOpenOverlay:a,handleSupplementarySetup:r,assetVariables:n={},templateId:s,isDisabled:o})=>{const i=V().get(e,"messages.additionalData.namedAssets")||{},{isBFIEnabled:c,isACIXEnabled:d}=i,m=t&&t.objStatusMessage?t.objStatusMessage:{},u=wn(m.appleCardState,t.supportsInstallments,c,t.showBFILink);if(!u)return"";const{isBag:p,webApplyEnabled:g,bagWebApplyStates:h}=e,y=g&&h&&-1!==h.indexOf(m.appleCardState),E=Nn({status:m.appleCardState,asset:i,isInstallmentsSupported:t.supportsInstallments,messageType:dn.INLINE,isBFIEnabled:c,isACIXEnabled:d,showBFILink:t.showBFILink,assetVariables:n,templateId:s,isBag:p}),v=e=>{if(e.target&&e.target.matches('[data-buyflow-messages-overlay = "button"]')){const t=e.target,r=t.getAttribute("data-buyflow-messages-metrics-info"),s=t.closest("[data-messages-part]"),l=s?s.getAttribute("data-messages-part"):"";e.preventDefault(),a({assetVariables:n,evarParam:l?"":"summary",metricsInfo:r,overrideShowOverlay:!0,part:l?`select mac - ${l}`:""})}},b={onClick:v},f=t.isSupplementaryLink&&r?{onClick:r}:{onClick:v},w=p?"bagSummaryLink":"";return l().createElement(l().Fragment,null,c&&t.showBFILink&&!t.shouldHideLinks?l().createElement("div",mr({className:"rf-acmessages-defaultlink"},b,qa(E))):null,!c||t.showBFILink||t.shouldHideLinks?null:l().createElement("div",null,y||u.overlay&&!t.isSupplementaryLink?l().createElement("button",{className:"as-buttonlink",onClick:()=>a({metricsKey:w}),type:"button"},l().createElement("span",qa(E))):l().createElement(ms,{disabled:o},l().createElement("div",mr({className:"rf-acmessages-defaultlink"},f,qa(E))))),c||t.shouldHideLinks?null:l().createElement("div",mr({className:"rf-acmessages-defaultlink"},f,qa(E))))},ps=({bootstrap:e,state:t,handleOpenOverlay:a,handleCloseOverlay:r,handleApplyClick:n,handleWebApplyClick:s,handleContinueClick:o,handleSupplementarySetup:i,assetVariables:c={},templateId:d,webApplyButtonProps:m,dataAutom:u,dataAutomForOverlay:p,isDisabled:g})=>{const h={state:t,bootstrap:e,webApplyButtonProps:m,onClose:r,handleApplyClick:n,handleWebApplyClick:s,handleContinueClick:o,dataAutomForOverlay:p};return l().createElement("div",{"data-autom":u},l().createElement(us,{bootstrap:e,state:t,handleOpenOverlay:a,handleSupplementarySetup:i,assetVariables:c,templateId:d,isDisabled:g}),l().createElement(cs,{state:t,bootstrap:e,overlayAttrs:h}))},gs=(e,t)=>{(0,s.useEffect)((()=>{const a=a=>{if(a.target.matches('[data-buyflow-messages-overlay="ribbon"]')){const t=a.target;a.preventDefault();const r="data-analytics-region",n=t.closest(`[${r}]`),s=n?n.getAttribute(r):"ribbon";e({isBanner:!0,evarParam:s,metricsInfo:t.getAttribute("data-buyflow-messages-metrics-info")})}else a.target.matches("[data-buyflow-messages-apply]")&&(a.preventDefault&&a.preventDefault(),t(a))},r=e=>{e.keyCode!==c.Return&&e.keyCode!==c.Space||a(e)};return document.addEventListener("click",a),document.addEventListener("keydown",r),()=>{document.removeEventListener("click",a),document.removeEventListener("keydown",r)}}),[])},hs=({bootstrap:e={},showDefaultFinancing:t=!1,shouldHideLinks:a=!1,fireWithBuyflowReferrer:r=!1,onCompleted:n=(e=>e),acConfig:o=null,aciConfigMap:i=[],children:c,webApplyButtonProps:d,dataAutom:m,dataAutomForOverlay:u,isDisabled:p=!1})=>{const{buyflowMessagesEnabled:g}=e,{assetVariables:h,templateId:y}=o||{},{state:E,handleOpenOverlay:v,handleCloseOverlay:b,handleApplyClick:f,handleWebApplyClick:w,handleInlineApplyClick:N,handleContinueClick:S,handleConfigUpdate:C,handleSupplementarySetup:T}=Bn({bootstrap:e,onCompleted:n,additionalState:{showDefaultFinancing:t,shouldHideLinks:a,fireWithBuyflowReferrer:r,assetVariables:h,aciConfigMap:i,hasNativeState:!1,templateId:y}}),L=V().get(E,"showDefaultFinancing")||!g;return gs(v,N),(0,s.useEffect)((()=>{o&&C&&C(o)}),[o]),l().createElement("div",{id:"buyflow-message-container",className:"rf-ac-messages"},E&&g?l().createElement(ps,{bootstrap:e,state:E,handleOpenOverlay:v,handleCloseOverlay:b,handleApplyClick:f,handleWebApplyClick:w,handleContinueClick:S,handleSupplementarySetup:T,assetVariables:h,templateId:y,webApplyButtonProps:d,dataAutom:m,isDisabled:p,dataAutomForOverlay:u}):"",L&&l().createElement("div",{"data-autom":m,className:"rf-acmessages-defaultmessage"},c))},ys=l().createContext(),Es=(ys.Consumer,"shoppingCart"),vs="shoppingCart.items",bs="shoppingCart.toolbar",fs="shoppingCart.cartBanner",ws="shoppingCart.cartMessages",Ns="shoppingCart.recommendedSystem",Ss="shoppingCart.shoppingCartMetaData",Cs="shoppingCart.recurringServicesSummary",Ts="shoppingCart.summary",Ls="shoppingCart.deviceTradeInServicesSummary",ks="shoppingCart.actions",Is="shoppingCart.xMerch",As="shoppingCart.footnotes",Ps="shoppingCart.summary.webApply",Ds="shoppingCart.pricingOptions",Os="shoppingCart.header",xs="shoppingCart.iUPTradeInSummary",Rs="shoppingCart.getReadyBanner",Fs="shoppingCart.savedItemsMessages",Ms="shoppingCart.bagSavedItems",_s="shoppingCart.bagSavedItems.bagSavedListItems",Bs="eVar6",$s="eVar4",Us=V().get(window,"asMetrics.sendUserInteraction",V().noop),Ks=l().createContext({viewReady:!1,acState:null,acAvailable:!1,acEnabledInstallment:!1,acSupportInstallment:!1,acShowInstallment:!1}),Vs=({children:e})=>{const[t]=Fa(Ss),[a]=Ma(ks,"merchantIdentifier"),{appleCardInstallmentConfig:r,appleCardInstallmentsEnabled:n,appleCardInstallmentsAvailable:o,partnerFinancedInstallmentsAvailable:c,isPartnerFinancingSelectionDisabled:d}=t,{supportInstallments:m,appleCardAvailable:u}=n||{},p=!(m||u),[g,h]=(0,s.useState)(!1),[y]=Ma(Ts,"buyflowMessages"),{state:E}=Bn({bootstrap:{...y}}),[v,b]=(0,s.useState)({viewReady:p,acState:null,acAvailable:!1,acEnabledInstallment:p,acSupportInstallment:!1,acShowInstallment:Boolean(p&&o),showCheckoutButton:!1,showInstallmentTile:!d}),{viewReady:f,acState:w,acEnabledInstallment:N,acShowInstallment:S}=v;return(0,s.useEffect)((()=>{!w&&r&&(f===p&&N===p||b((e=>({...e,viewReady:p,acEnabledInstallment:p}))),(({config:e,appleCardInstallmentsEnabled:t,state:a,setState:r})=>{const n=i("getApplePaySetup/acStoreApplePaySetup.getState/1"),s=i("getApplePaySetup/acStoreApplePaySetup.getState/2");try{window.acStoreApplePaySetup&&window.acStoreApplePaySetup.getState&&window.acStoreApplePaySetup.getState({config:e}).then((e=>{const n=window.acStoreApplePaySetup.AppleCardState,{supportsInstallments:s,appleCardState:l}=e,{supportInstallments:o,appleCardAvailable:i}=t||{};let{acEnabledInstallment:c}=a;const d=l===n.SUPPLEMENTARY_SUPPORTED||l===n.COMPLETED;t&&(c=o&&i?s||d:o?s:!i||d),r((e=>({...e,viewReady:!0,appleCardState:l,acAvailable:d,acEnabledInstallment:c,acSupportInstallment:s})))})).catch((e=>{n.error(e),r((t=>({...t,viewReady:!0,error:e})))}))}catch(e){s.error(e),r((t=>({...t,viewReady:!0,error:e})))}})({config:r,appleCardInstallmentsEnabled:n,state:v,setState:b}))}),[r]),(0,s.useEffect)((()=>{const e=Boolean(N&&o||c);e!==S&&b((t=>({...t,acShowInstallment:e})))}),[N,o,c]),(0,s.useEffect)((()=>{S&&!g&&(Us({name:"metrics",data:{[Bs]:"view|acmi bag"}}),h(!0))}),[S]),(0,s.useEffect)((()=>{if(!v.acAvailable&&E.objStatusMessage){const e=window.acStoreApplePaySetup.AppleCardState;E.objStatusMessage.appleCardState===e.COMPLETED&&b((e=>({...e,acAvailable:!0})))}}),[E.objStatusMessage&&E.objStatusMessage.appleCardState,v.acAvailable]),(0,s.useEffect)((()=>{const e=i("AppleCardContextProvider/setApplePayHasActiveCard");try{window.acStoreApplePay.init(),a&&(window.acStoreApplePay.setApplePayHasActiveCard(a),setTimeout((()=>{b((e=>({...e,showCheckoutButton:!0})))}),3e3))}catch(t){e.error(t),b((e=>({...e,showCheckoutButton:!0})))}}),[a]),l().createElement(Ks.Provider,{value:v},e)},Hs=()=>(0,s.useContext)(Ks),js=e=>{const t=(0,s.useRef)(e);return(0,s.useEffect)((()=>{t.current=e})),t.current},Gs=({title:e,className:t="",error:a,children:r,...n})=>l().createElement("div",mr({className:Wa()(["form-alert",t,{"is-error":a}])},n),e&&l().createElement("p",{className:"form-alert-title"},e),r),Ws=l().forwardRef(((e,t)=>{const{messages:a,lastUpdated:r,className:n,dataAutom:o}=e,i=(0,s.useRef)(),c=t||i,d=Boolean(a.length),m=a.length>1,u=a.sort(((e,t)=>e.level>t.level?1:-1));return(0,s.useEffect)((()=>{d&&c.current&&c.current.focus()}),[c,d,r]),d&&l().createElement("div",{className:Wa()("rt-messages",n),"data-autom":o,tabIndex:"-1",ref:c,role:m?"list":void 0},u.map((({level:e,text:t})=>{const a="ERROR"===e;let r=m?"listitem":void 0;return a&&(r="alert"),l().createElement(Gs,{key:t,error:a,role:r},l().createElement("div",mr({className:"rt-messages-text"},qa(t))))})))})),qs=Ws,Ys=e=>{const t=Pa([e]);return t.getModuleChildren(e).reduce(((e,a)=>(e.push(a),t.getModuleChildren(a).forEach((a=>{const{isChildItem:r,isBundlePromoItem:n}=t.getModuleData(a);r&&n&&e.push(a)})),e)),[])},zs={modExists:!1,data:{},properties:{},childModKeys:[]},Xs="_editing";function Js(e,t){var a=Object.create(null);return e&&s.Children.map(e,(function(e){return e})).forEach((function(e){a[e.key]=function(e){return t&&(0,s.isValidElement)(e)?t(e):e}(e)})),a}function Qs(e,t,a){return null!=a[t]?a[t]:e.props[t]}function Zs(e,t){return Js(e.children,(function(a){return(0,s.cloneElement)(a,{onExited:t.bind(null,a),in:!0,appear:Qs(a,"appear",e),enter:Qs(a,"enter",e),exit:Qs(a,"exit",e)})}))}function el(e,t,a){var r=Js(e.children),n=function(e,t){function a(a){return a in t?t[a]:e[a]}e=e||{},t=t||{};var r,n=Object.create(null),s=[];for(var l in e)l in t?s.length&&(n[l]=s,s=[]):s.push(l);var o={};for(var i in t){if(n[i])for(r=0;r<n[i].length;r++){var c=n[i][r];o[n[i][r]]=a(c)}o[i]=a(i)}for(r=0;r<s.length;r++)o[s[r]]=a(s[r]);return o}(t,r);return Object.keys(n).forEach((function(l){var o=n[l];if((0,s.isValidElement)(o)){var i=l in t,c=l in r,d=t[l],m=(0,s.isValidElement)(d)&&!d.props.in;!c||i&&!m?c||!i||m?c&&i&&(0,s.isValidElement)(d)&&(n[l]=(0,s.cloneElement)(o,{onExited:a.bind(null,o),in:d.props.in,exit:Qs(o,"exit",e),enter:Qs(o,"enter",e)})):n[l]=(0,s.cloneElement)(o,{in:!1}):n[l]=(0,s.cloneElement)(o,{onExited:a.bind(null,o),in:!0,exit:Qs(o,"exit",e),enter:Qs(o,"enter",e)})}})),n}var tl=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},al=function(e){function t(t,a){var r,n=(r=e.call(this,t,a)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},r}Sr(t,e);var a=t.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var a=t.children,r=t.handleExited;return{children:t.firstRender?Zs(e,r):el(e,a,r),firstRender:!1}},a.handleExited=function(e,t){var a=Js(this.props.children);e.key in a||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var a=mr({},t.children);return delete a[e.key],{children:a}})))},a.render=function(){var e=this.props,t=e.component,a=e.childFactory,r=wr(e,["component","childFactory"]),n=this.state.contextValue,s=tl(this.state.children).map(a);return delete r.appear,delete r.enter,delete r.exit,null===t?l().createElement(Lr.Provider,{value:n},s):l().createElement(Lr.Provider,{value:n},l().createElement(t,r,s))},t}(l().Component);al.propTypes={},al.defaultProps={component:"div",childFactory:function(e){return e}};const rl=al,nl=({children:e,...t})=>l().createElement(Br,mr({classNames:"rs-bag-item-transition",timeout:600},t),e),sl=(0,s.createContext)({modKey:"",isReview:!1,isEditable:!1}),ll=()=>(0,s.useContext)(sl),ol=({classes:e="",name:t,labelRed:a,label:r,value:n,valuea11y:s,subLabel:o,subValue:i,monthlyValue:c,useLedgerSummary:d})=>{const m=t&&`rs-summary-${t.toLowerCase()}`,u=`bag${m}label`,p=`bag${m}value`,g=`bag${m}sublabel`,h=`bag${m}subvalue`,y=`bag${m}monthlyValue`,E=`bag${m}labelRed`,v=Wa()("rs-summary-content",m,e),b=Wa()("rs-summary-label",{"rs-webinstallment-monthlyinstallmentlabel":"monthlyTotal"===t});return l().createElement("div",{className:v},l().createElement("div",{className:"rs-summary-labelandvaluecontainer"},r&&("string"==typeof r?l().createElement("div",mr({className:b,"data-autom":u},qa(r))):l().createElement("div",{className:b,"data-autom":u},r)),n&&("string"==typeof n?s&&l().createElement("div",{className:"rs-summary-value","data-autom":p},l().createElement("span",mr({role:"text","aria-label":s},qa(n))))||l().createElement("div",mr({className:"rs-summary-value","data-autom":p},qa(n))):l().createElement("div",{className:"rs-summary-value","data-autom":p},n))),o&&("string"==typeof o?l().createElement("div",mr({className:Wa()("rs-summary-sublabel",{"rs-review-monthly-installment":d}),"data-autom":g},qa(o))):l().createElement("div",{className:Wa()("rs-summary-sublabel",{"rs-review-monthly-installment":d}),"data-autom":g},o)),c&&("string"==typeof c?l().createElement("div",mr({className:"rs-summary-value","data-autom":y},qa(c))):l().createElement("div",{className:"rs-summary-value","data-autom":y},c)),i&&("string"==typeof i?l().createElement("div",mr({className:"rs-summary-subvalue large-last large-6 small-12","data-autom":h},qa(i))):l().createElement("div",{className:"rs-summary-subvalue large-last large-6 small-12","data-autom":h},i)),a&&("string"==typeof a?l().createElement("div",mr({className:"rs-summary-labelred","data-autom":E},qa(a))):a.length>0&&l().createElement("div",{className:"rs-summary-labelred","data-autom":E},a.map((e=>l().createElement("div",mr({key:e,className:"rs-summary-labelred-item"},qa(e))))))))},il=(e=!1,t,a)=>{const{viewport:r}=z(),[n,l]=(0,s.useState)(e),o=(0,s.useCallback)(((e,t)=>{"function"==typeof e&&e(...t)}),[]);return{isSmallScreen:"small"===r,isVisible:n,open:(0,s.useCallback)(((...e)=>{l(!0),o(t,e)}),[l,t,o]),close:(0,s.useCallback)(((...e)=>{l(!1),o(a,e)}),[l,a,o])}},cl=({linkClassName:e,linkText:t,linkMetrics:a,content:r,...n})=>{const{isVisible:s,open:o,close:i}=il(!1,a);return l().createElement("div",{className:e},l().createElement("button",mr({className:"as-buttonlink",type:"button",onClick:o},qa(t))),l().createElement(ss,mr({},n,{visible:s,onClose:i}),l().createElement("div",qa(r))))},dl="eVar1",ml="eVar5",ul="eVar6",pl="eVar21",gl="prop37",hl=(V().get(window,"acStoreApplePaySetup.RELAY_EVENT_ID",""),V().get(window,"asMetrics.relay.sendBeacon",V().noop),V().get(window,"asMetrics.fireMicroEvent",V().noop)),yl=V().get(window,"asMetrics.sendUserInteraction",V().noop),El=(V().get(window,"asMetrics.appleCard",V().noop),V().get(window,"asMetrics.triggerPageHasLoaded",V().noop)),vl=V().get(window,"asMetrics.dude2",V().noop),bl=({isLightning:e,feature:t})=>{hl({action:e?"CompareCoverageOptionsSelected":"LearnMoreSelected",feature:t,eVar:ml})},fl=({action:e})=>{yl({name:"metrics",data:{hier1:"aos:bag",channel:"aos:bag",prop3:`modal open|engraving|${e} engraving`}})},wl=()=>{hl({eVar:gl,feature:"bag",action:"continue checking out"})},Nl=e=>{hl({eVar:gl,slot:"Pickup",feature:"StoreLocator",part:"map",action:e?"expanded":"collapsed"})},Sl=e=>{hl({eVar:pl,slot:e,feature:"ExploreAllMonthlyPaymentOffers",action:"Selected"})},Cl=({messages:e,isGiftCard:t,hasBuyFlowInstallmentDetails:a,priceMessage:r,hasPreOrderTradeIn:n,hasCarrierTradeIn:s,isRecommendedSystems:o,recommendedSystemsQuantity:i,recommendedSystemsActions:c,promoLabel:d,brandTitle:m,productTitle:u,productImage:p,showProductImage:g,productInfo:h,productInfoTrigger:y,carrierLearnMoreTrigger:E,description:v,processLinkText:b,processLinkMetrics:f,processOverlayContent:w,showQuantity:N,quantity:S,price:C,carrierLabel:T,carrierName:L,relatedParentLabel:k,relatedParent:I,inlineFees:A,installmentPrice:P,fullPriceInfo:D,hasSegmentSavingsMessage:O,removeButton:x,saveForLaterButtonMarkup:R,partNumber:F,isNonRefundable:M,installmentDetails:_=[],hasPromos:B,itemRef:$,itemTabIndex:U,changeProduct:K,changeAppleCare:V,changeProductDisclaimer:H,children:j,dataAutom:G,purchaseOptionDescription:W,alignDetailsLeft:q,appleCareDescription:Y,vatInfo:X,itemBundleHeader:J,itemBundleDetails:Q,itemDownPayment:Z,isFullWidthTitleMow:ee,carrierDiscountMessage:te,carrierConnectivityCalloutInfo:ae,carrierConnectivityDiscountMessage:re,priceAfterDiscountMessage:ne})=>{const{isReview:se,isEditable:le,isBundle:oe}=ll(),ie=Boolean(_.length),ce=Boolean(T&&L),de=ie&&!B,me=!de,ue=Boolean(r),{viewport:pe,assets:ge}=z(),he="small"===pe,ye="small"!==pe,Ee=Wa()("rs-bag-item rs-iteminfo-wrap",{"rs-bag-item-bundle":oe}),ve=Wa()("rs-iteminfo","row",{"rs-iteminfo-giftcardcontent":t}),be=Wa()("rs-iteminfo-image","column","large-3",{"small-3":se,"small-12":!se}),fe=Wa()("rs-iteminfo-content","column",{"large-9":g,"large-12":!g,"small-9":se,"small-12":!se}),we=Wa()("rs-iteminfo-details",{"rs-has-segmentsavings":O,"rs-has-pricemessage":ue}),Ne=Wa()("rs-iteminfo-title-wrapper","large-6",{"small-12":ee,"small-6 rs-iteminfo-halfwidth":!ee||s}),Se=Wa()("rs-iteminfo-quantity",{"large-2":a,"small-12":r}),Ce=Wa()("rs-iteminfo-pricedetails","large-last",{"rs-iteminfo-averageprice":s||ue,"large-4":o||a,"large-6":!N&&!o,"small-9":o||s,"small-6":!N&&!o,"small-12":N&&a||ue||oe}),Te=Wa()("rs-iteminfo-detail-wrap",{"rs-iteminfo-detail-wrap-nocarrier":!ce}),Le=te?`- ${te}`:"",ke=ce&&l().createElement("div",{className:"rs-iteminfo-carrier-details small-12"},l().createElement("span",{className:"rs-carrier-label"},T),l().createElement("span",{className:"rs-carrier-name"},`${L} ${Le}`),E&&l().createElement("div",{className:"rs-carrier-learnmore"},E)),Ie=k&&I&&l().createElement("div",{className:"rs-iteminfo-related-details small-12"},l().createElement("div",{className:"rs-related-label"},k),l().createElement("div",{className:"rs-related-name"},I)),Ae=b&&l().createElement(cl,{linkClassName:"rs-iteminfo-process-link",className:"rs-iteminfo-process-overlay",linkText:b,linkMetrics:()=>{(e=>{yl({name:"metrics",data:{[ml]:e}})})(f)},content:w}),Pe=v&&l().createElement("span",{className:"rs-iteminfo-description"},v);return l().createElement("li",{className:Ee,"data-autom":G,role:"listitem"},!he&&e,l().createElement("div",{className:ve,tabIndex:U,ref:$},g&&l().createElement("div",{className:be,"aria-hidden":"true"},p),l().createElement("div",{className:fe},he&&e,d&&l().createElement("div",mr({className:"rs-iteminfo-savings-promo"},qa(d))),l().createElement("div",{className:we},m&&l().createElement("span",mr({className:"rs-iteminfo-brand-title"},qa(m))),l().createElement("div",{className:Ne},u,J,ye&&l().createElement(l().Fragment,null,F&&l().createElement("div",{className:"rs-iteminfo-partnumber"},ge.partNumber,": ",F),re&&l().createElement("p",{className:"rs-iteminfo-carrie-connectivity"},re),ne&&l().createElement("p",{className:"rs-iteminfo-price-discount-message"},ne),Ie,ke,!de&&q&&l().createElement("div",{className:Te},ue&&l().createElement("div",mr({className:"rs-iteminfo-detail"},qa(r))),n&&l().createElement("div",mr({className:"rs-iteminfo-detail"},qa(ge.preOrderTradeInMessage))),W&&l().createElement("div",mr({className:"rs-iteminfo-detail small-12"},qa(W))),Y&&l().createElement("div",{className:"rs-iteminfo-detail"},Y),X&&l().createElement("div",mr({className:"rs-iteminfo-detail"},qa(X)))),Q,me&&l().createElement("div",{className:"rs-iteminfo-actions-left"},Pe,y,h,Ae,M&&l().createElement("div",{className:"rs-iteminfo-noreturnlabel"},ge.noReturns)))),N&&l().createElement("div",{className:Se},S),o&&i&&l().createElement("div",{className:"rs-iteminfo-recommendedsystemsqty large-2"},i),l().createElement("div",{className:Ce},l().createElement("div",{"data-autom":"Monthly_price",className:"rs-iteminfo-price"},C),!de&&ye&&A,P&&l().createElement("div",{className:"rs-iteminfo-installmentprice"},P),D&&l().createElement("div",{className:"rs-iteminfo-fullpriceinfo"},D),ye&&le&&me&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-actions-right"},x),l().createElement("div",{className:"rs-iteminfo-actions-right"},R)),ye&&c),Z,he&&l().createElement(l().Fragment,null,re&&l().createElement("p",{className:"rs-iteminfo-carrie-connectivity"},re),ne&&l().createElement("p",{className:"rs-iteminfo-price-discount-message"},ne),Ie,ke,Q,!de&&q&&l().createElement("div",{className:Te},ue&&l().createElement("div",mr({className:"rs-iteminfo-detail"},qa(r))),n&&l().createElement("div",mr({className:"rs-iteminfo-detail"},qa(ge.preOrderTradeInMessage))),W&&l().createElement("div",mr({className:"rs-iteminfo-detail small-12"},qa(W))),Y&&l().createElement("div",{className:"rs-iteminfo-detail"},Y),X&&l().createElement("div",mr({className:"rs-iteminfo-detail"},qa(X))))),de&&l().createElement("div",{className:"rs-iteminfo-pricelineitemwrapper"},q&&ue&&l().createElement("div",mr({className:"rs-iteminfo-detail"},qa(r))),n&&l().createElement("div",mr({className:"rs-iteminfo-detail"},qa(ge.preOrderTradeInMessage))),_.map((({label:e,value:t})=>l().createElement(ol,{key:`installment-detail-${e}`,name:"iteminfopricelineitem",label:e,value:t}))),q&&l().createElement(l().Fragment,null,W&&l().createElement("div",mr({className:"rs-iteminfo-detail small-12"},qa(W))),Y&&l().createElement("div",{className:"rs-iteminfo-detail"},Y),X&&l().createElement("div",mr({className:"rs-iteminfo-detail"},qa(X)))),ye&&A,ye&&l().createElement(ol,{name:"iteminfoactions",label:l().createElement("div",{className:"rs-iteminfo-actions-left"},Pe,y,h,Ae,M&&l().createElement("div",{className:"rs-iteminfo-noreturnlabel"},ge.noReturns)),value:le&&l().createElement("div",{className:"rs-iteminfo-actions-right"},x)}),ye&&l().createElement(ol,{name:"iteminfosavelater",value:l().createElement("div",{className:"rs-iteminfo-actions-right"},R)}))),ye&&K,ye&&V,he&&l().createElement(l().Fragment,null,A,l().createElement("div",{className:"row rs-iteminfo-actions"},l().createElement("div",{className:"rs-iteminfo-actions-left"},F&&l().createElement("div",{className:"rs-iteminfo-partnumber"},ge.partNumber,": ",F),Pe,Ae,y),h,le&&l().createElement("div",{className:"rs-iteminfo-actions-right"},l().createElement("div",null,x),l().createElement("div",{className:"rs-iteminfo-action-savelater"},R))),K,V,c,M&&l().createElement("div",{className:"rs-iteminfo-noreturnlabel"},ge.noReturns)),H,ae,j)))};a(5127);const Tl=e=>{const{observerOptions:t={},triggerOnce:a=!0,onChange:r=(()=>{})}=e,n=(0,s.useRef)(null),l=(0,s.useRef)(null),[o,i]=(0,s.useState)({inView:!1,entry:null});return[(0,s.useCallback)((e=>{n.current&&l.current&&l.current.unobserve(n.current),e&&(l.current=((e,t,a)=>{const r=new IntersectionObserver((e=>{e.forEach((e=>{const{isIntersecting:r,intersectionRatio:n}=e;let s=!1;void 0!==r&&(s=r||n>=t.threshold,a(s,e))}))}),t);return r.observe(e),r})(e,t,((t,n)=>{i({inView:t,entry:n}),t&&a&&l.current.unobserve(e),r(t,n)}))),n.current=e}),[a]),o.inView,o.entry]},Ll=({src:e,srcSet:t,alt:a,width:r,height:n,data:l})=>{const o=r||V().get(l,"width"),i=n||V().get(l,"height"),c=null!=a?a:V().get(l,"alt",""),d=V().get(l,"src",""),m=V().get(l,"srcSet.src",""),u=(0,s.useMemo)((()=>l&&l.srcSet?(e=>{if(!e||!e.src)return{};const[t,a]=e.src.split("?"),r=a?rn(a):{};return{src:e.scaleParams2?nn(t,rn(e.scaleParams2||"")):nn(t,r)}})(l.srcSet):l),[d,m]);return{finalWidth:o,finalHeight:i,finalAlt:c,finalSrcAttrs:e?{src:e,srcSet:t}:u}},kl=({observerOptions:e,children:t})=>{const[a,r]=Tl({observerOptions:{rootMargin:"100px 0px 100px",...e}});return r?t:l().createElement("div",{ref:a})},Il=({src:e,srcSet:t,alt:a,width:r,height:n,data:s,showInView:o,observerOptions:i,...c})=>{const{finalWidth:d,finalHeight:m,finalAlt:u,finalSrcAttrs:p}=Ll({src:e,srcSet:t,alt:a,width:r,height:n,data:s}),g=l().createElement("img",mr({width:d,height:m,alt:u},p,c));return o?l().createElement(kl,{observerOptions:i},g):g},Al=({src:e="",scaleParams1:t="",linkUrl:a=""})=>{const r=Wa()("rs-iteminfo-child-image",{"as-util-relatedlink":Boolean(a)}),n=a?`click [data-relatedlink='${a}']`:"",s=t?{srcSet:{src:e,scaleParams1:t}}:{src:e};return(e=>e.includes("tradein-icon-recycle"))(e)?l().createElement("div",mr({className:Wa()(r,"as-icondetails-icon","as-svgicon-container"),"data-trigger-click":n},qa('<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-recycle as-svgicon-reduced as-svgicon-recyclereduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 .213h25v25H0z"/><path d="m21.6 17.4-2.97-5.151a.55.55 0 0 0-.953.55l2.969 5.148a1.244 1.244 0 0 1 .012 1.275 1.312 1.312 0 0 1-1.155.651h-4.562l1.341-1.341a.55.55 0 1 0-.777-.777l-2.161 2.161a.549.549 0 0 0-.339.507c0 .01.005.019.006.029a.542.542 0 0 0 .155.419l2.334 2.338a.55.55 0 1 0 .777-.777L14.823 21H19.5a2.425 2.425 0 0 0 2.107-1.229A2.349 2.349 0 0 0 21.6 17.4ZM11.44 19.873H5.5a1.307 1.307 0 0 1-1.141-.665 1.327 1.327 0 0 1 0-1.34l2.307-4 .512 1.911a.55.55 0 0 0 .531.408.556.556 0 0 0 .143-.019.55.55 0 0 0 .389-.674L7.38 12.3c0-.01-.01-.016-.013-.026a.5.5 0 0 0-.584-.368.519.519 0 0 0-.077.005l-3.194.856a.55.55 0 0 0 .143 1.082.556.556 0 0 0 .143-.019l1.912-.512-2.308 4A2.466 2.466 0 0 0 5.5 21h5.94a.574.574 0 0 0 .55-.578.55.55 0 0 0-.55-.549ZM13.635 5.791l2.31 4-1.911-.512a.55.55 0 1 0-.285 1.062l3.194.856a.556.556 0 0 0 .143.019.542.542 0 0 0 .244-.066c.009 0 .02 0 .029-.008s.013-.013.021-.018a.543.543 0 0 0 .112-.1c.011-.013.026-.023.036-.037a.541.541 0 0 0 .087-.179l.856-3.195a.55.55 0 1 0-1.062-.285L16.9 9.241l-2.31-4a2.4 2.4 0 0 0-2.1-1.212 2.4 2.4 0 0 0-2.1 1.211l-2.971 5.145a.55.55 0 0 0 .953.551l2.974-5.146a1.307 1.307 0 0 1 1.144-.661 1.308 1.308 0 0 1 1.145.662Z"/></svg>'))):l().createElement("div",{className:r,"data-trigger-click":n,"aria-hidden":"true"},l().createElement(Il,{data:s}))},Pl=({messages:e,imageSrc:t,imageScaleParams1:a,imageLinkUrl:r,hasTradeInLogo:n,children:s})=>{const o=Boolean(t),i=Wa()("rs-iteminfo-child",{"rs-iteminfo-child-tradein":n},{"rs-iteminfo-child-no-image":!o});return l().createElement("div",{className:i},e,l().createElement("div",{className:"rs-iteminfo-child-content row"},l().createElement("div",{className:"rs-iteminfo-child-details column small-12 large-12"},o&&l().createElement("div",{className:"as-icondetails"},l().createElement(Al,{src:t,scaleParams1:a,linkUrl:r})),s)))},Dl="trade_in_carrier",Ol="trade_in_instant",xl="price_details",Rl="trade_in",Fl="default",Ml="iphone_upgrade",_l=e=>{const{carrierSubsidyTradeInDetails:t,tradeInCredit:a,priceOfNewIphoneValue:r,priceOfNewProduct:n,priceDetails:s,tradeinProduct:l,iupUpgrdCredit:o}=e;return t?Dl:a&&(r||n)?Ol:s?xl:l?Rl:o?Ml:Fl},Bl=({modKey:e,children:t})=>{const a=xa(e),{src:r,dataScaleParams1:n,productUrl:s,promos:o,showChildItemLink:i}=a.data,c=_l(a.data).startsWith(Rl),{isEditable:d}=ll(),m=!o&&i&&d?s:"",[u,p]=_a(e);return l().createElement(Pl,{messages:l().createElement(qs,{messages:u,lastUpdated:p}),imageSrc:r,imageScaleParams1:n,imageLinkUrl:m,hasTradeInLogo:c},t)},$l=l().memo(Bl),Ul=(()=>{const e=i("utils/financeSupported");try{const{iosVersion:e,isIpad:t}=A();return window.ApplePaySession&&window.ApplePaySession.supportsVersion(14)&&e>0&&!t}catch(t){return e.error(t),!1}})(),Kl=(e,t)=>{const a=i("utils/sendBagIdToPrism");try{e&&window.webkit&&window.webkit.messageHandlers.updateValueFromAOS.postMessage(JSON.stringify({key:t,value:e}))}catch(e){a.error(e)}},Vl=({header:e,description:t,subsidyDetails:a,devicePaymentsHeader:r,devicePaymentsSubHeader:n,devicePaymentsSubHeaderA11y:s,deviceBillCredits:o,overlayWithButton:i,showTradeInBalanceGiftMessage:c})=>{const{assets:d}=z();return l().createElement("div",{className:"rs-item-child-content-carriertradein as-icondetails-detail"},l().createElement("div",{className:"large-6 small-12"},l().createElement("div",{className:"rs-carrier-tradein-header"},e),l().createElement("div",{className:"rs-carrier-tradein-ledger"},a.map((({label:e,value:t,valueA11y:a})=>l().createElement("div",{key:`trade-in-row-${e}`,className:"rs-carrier-tradein-details"},l().createElement("div",{className:"rs-carrier-tradein-details-label"},e),a?l().createElement("div",{className:"rs-carrier-tradein-details-value"},l().createElement("span",mr({"aria-hidden":"true"},qa(t))),l().createElement("span",mr({className:"visuallyhidden"},qa(a)))):l().createElement("div",mr({className:"rs-carrier-tradein-details-value"},qa(t))))))),l().createElement("div",{className:"rs-carrier-tradein-desc"},t),l().createElement("div",{className:"rs-carrier-devicepayments-wrapper"},l().createElement("div",{className:"rs-carrier-devicepayments"},l().createElement("div",{className:"rs-carrier-devicepayments-header"},r),l().createElement("div",{className:"rs-carrier-devicepayments-subheader"},l().createElement("span",{"aria-hidden":"true"},n),l().createElement("span",mr({className:"visuallyhidden"},qa(s))))),o.map((({label:e,value:t,valueA11y:a})=>l().createElement("div",{key:`trade-in-row-${e}`,className:"rs-carrier-tradein-details"},l().createElement("div",{className:"rs-carrier-tradein-details-label"},e),a?l().createElement("div",{className:"rs-carrier-tradein-details-value"},l().createElement("span",mr({"aria-hidden":"true"},qa(t))),l().createElement("span",mr({className:"visuallyhidden"},qa(a)))):l().createElement("div",mr({className:"rs-carrier-tradein-details-value"},qa(t)))))))),c&&l().createElement("p",{className:"rs-item-child-content-tradein-overfund typography-body-reduced"},d.tradeInOverfundText),i)},Hl=({hasPriceOfNewProduct:e,instantCreditMessage:t,removeBtn:a,infos:r,priceDetails:n,title:s,tradeInPromoSavings:o,overlayWithButton:i,showTradeInBalanceGiftMessage:c})=>{const d=Wa()("rs-iteminfo-tradein-pricedetails",{"rs-iteminfo-tradein-newdevicedetails":e,"rs-iteminfo-tradein-includes-tradeinpromosavings":!!o}),{assets:m}=z();return l().createElement("div",{className:"rs-item-child-content-instanttradein as-icondetails-detail"},l().createElement("div",{className:"rs-iteminfo-child-wrapper rs-iteminfo-tradein-ledger"},s,a&&l().createElement("div",{className:"rs-iteminfo-child-actions"},a),l().createElement("div",{className:"rs-iteminfo-tradein-details"},r.map((({label:e,value:t,labelDataAutom:a,valueDataAutom:r})=>t?l().createElement("div",{key:`row-${e}`,className:"rs-iteminfo-instant-tradein-row row"},l().createElement("span",{className:"small-12","data-autom":a},e),l().createElement("span",mr({className:"rs-iteminfo-tradein-inlinevalue","data-autom":r},qa(t)))):null)),l().createElement("div",{className:"column large-6 small-12"},l().createElement("div",{className:d},n.map((({label:e,value:t,labelDataAutom:a,valueDataAutom:r})=>t?l().createElement("div",{key:`row-${e}`,className:"rs-iteminfo-tradein-pricedetails-row row"},l().createElement("span",mr({className:"large-9 small-9 column","data-autom":a},qa(e))),l().createElement("span",mr({className:"large-3 small-3 column rs-iteminfo-tradein-value","data-autom":r},qa(t)))):null))))),c&&l().createElement("p",{className:"rs-item-child-content-tradein-overfund typography-body-reduced"},m.tradeInOverfundText),o&&l().createElement("div",{className:"rs-instant-tradein-tradeinpromosavings"},o),t&&l().createElement("div",{className:"rs-instant-tradein-message"},t)),i)},jl=({totalPrice:e,savingsMessage:t,priceDetails:a,removeBtn:r,infos:n,title:s})=>{const o=e&&l().createElement("p",mr({className:"rs-iteminfo-child-price"},qa(e))),i=l().createElement("div",{className:"rs-iteminfo-child-taglinewrapper"},n.map((e=>e?l().createElement("div",{key:`info-row-${e}`,className:"rs-iteminfo-child-desc"},l().createElement("p",mr({className:"rs-iteminfo-child-tagline rs-iteminfo-applecare-desc"},qa(e)))):null))),c=Boolean(t),d=Wa()("rs-summary-iteminfochilddetails-action",{"rs-has-segmentsavings":c});return l().createElement("div",{className:"rs-item-child-content-pricedetails as-icondetails-detail rs-iteminfo-icondetails-detail"},l().createElement(ol,{name:"itemInfoChildDetails",label:l().createElement("div",{className:"rs-iteminfo-child-wrapper"},s),value:o}),a.map((({label:e,value:t})=>l().createElement(ol,{key:`price-detail-row-${e}-${t}`,name:"itemInfoChildPriceDetails",label:e,value:t}))),l().createElement(ol,{name:"itemInfoChildDetails",classes:d,label:i,value:c&&l().createElement("div",mr({className:"rs-iteminfo-segmentsavings"},qa(t)))}),l().createElement("div",{className:"rs-iteminfo-child-actions"},r))},Gl=({creditDisclaimer:e,tradeInEstimatedHeader:t,tradeInEstimatedValue:a,tradeInSubHeader:r,tradeInProduct:n,priceAfterTradeInSubHeader:s,priceAfterTradeIn:o,tradeInCreditInfo:i,tradeInIncentiveHeader:c,tradeInIncentive:d,removeBtn:m,title:u,overlayWithButton:p,showTradeInBalanceGiftMessage:g,serialNumberHeader:h,serialNumber:y})=>{const{viewport:E,assets:v}=z(),b="small"===E,f=l().createElement("div",{className:"rs-iteminfo-child-taglinewrapper"},l().createElement("div",{className:"rs-iteminfo-child-tradeinproduct"},r&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-child-subheader"},r),l().createElement("div",{className:"rs-iteminfo-child-value"},n)),h&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-child-subheader"},h),l().createElement("div",{className:"rs-iteminfo-child-value"},y)),t&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-child-subheader"},t),a&&l().createElement("div",mr({className:"rs-iteminfo-child-value"},qa(a)))),o&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-child-subheader"},s),l().createElement("div",{className:"rs-iteminfo-child-value"},o)),i&&l().createElement("div",{className:"rs-iteminfo-child-tradeincreditinfo"},i),d&&l().createElement("div",{className:"rs-iteminfo-child-tradeinincentive"},l().createElement("div",{className:"rs-iteminfo-child-subheader"},c),l().createElement("div",{className:"rs-iteminfo-child-value"},d)),e&&l().createElement("div",{className:"rs-iteminfo-child-tradeinmessage"},e)));return l().createElement("div",{className:"rs-item-child-content-tradein as-icondetails-detail rs-iteminfo-icondetails-detail"},l().createElement("div",{className:"rs-iteminfo-child-wrapper","data-autom":"tradein_recycledetails"},u,!b&&l().createElement(l().Fragment,null,f,p),g&&l().createElement("p",{className:"rs-item-child-content-tradein-overfund typography-body-reduced"},v.tradeInOverfundText)),b&&l().createElement(l().Fragment,null,f,p),m&&l().createElement("div",{className:"rs-iteminfo-child-actions"},m))},Wl=({label:e,labelA11y:t,sendOmniClickEvents:a,hasOverlay:r,setOverlayVisible:n,href:s,productMetricId:o,productEvar1:i,ACPlusForiUPEnabled:c})=>{const{assets:d}=z();return r?l().createElement("button",{type:"button",className:Wa()("rs-iteminfo-more-details-link as-buttonlink",{more:c,"icon icon-after icon-chevronright":!c}),onClick:()=>{n(!0),a()},"data-autom":"Learn_more"},l().createElement("span",qa(e)),l().createElement("span",{className:"visuallyhidden"},t)):l().createElement("a",{href:s,onClick:a,className:"rs-iteminfo-more-details-link more",target:"_blank",rel:"noopener noreferrer","data-evar1":i,"data-s-object-id":o,"data-autom":"Learn_more"},l().createElement("span",qa(e)),l().createElement("span",{className:"visuallyhidden"},t,d.newWindowAlly))},ql=({visible:e,setVisible:t,content:a,id:r})=>{const{viewport:n}=z(),s="small"===n;return l().createElement(ss,{className:"rs-inline-recommendation-overlay",visible:e,onClose:()=>t(!1),isFullscreen:s,noPadding:!0,fixedWidth:!0,ariaLabel:`${r}-overlayHeading`},l().createElement("div",mr({className:"rs-inline-recommendation-overlay-content"},qa(a))))},Yl=({totalPrice:e,savingsMessage:t,priceMessage:a,removeBtn:r,infos:n,title:o,learnMoreOverlay:i,name:c,productMetricId:d,productEvar1:m,id:u})=>{const{viewport:p,assets:g,fragments:h}=z(),y="small"===p,E=Boolean(r||e||t||a),[v,b]=(0,s.useState)(!1),f=Boolean(t),w=y&&!f,N=Boolean(a),S=Wa()("rs-iteminfo-child-taglinewrapper",{"rs-has-segmentsavings":f}),C=i?ln(i,{id:u,title:c},"${","}"):"",T=i&&l().createElement(l().Fragment,null,l().createElement(Wl,{hasOverlay:i,label:g.learnMore,labelA11y:ln(h.inlineRecommendationLearnMoreA11y,{title:c}),setOverlayVisible:b,sendOmniClickEvents:()=>{i&&bl({isLightning:!1,feature:m})},productMetricId:d,productEvar1:m}),l().createElement(ql,{visible:v,setVisible:b,content:C,id:u})),L=l().createElement("div",{className:S},n.map((e=>e?l().createElement("div",{key:`info-${e}`,className:"rs-iteminfo-child-desc"},l().createElement("p",mr({className:"rs-iteminfo-child-tagline rs-iteminfo-applecare-desc"},qa(e)))):null)),T);return l().createElement("div",{className:"rs-item-child-content-default as-icondetails-detail rs-iteminfo-icondetails-detail"},l().createElement("div",{className:"rs-iteminfo-child-wrapper"},o,!w&&L),w&&L,E&&l().createElement("div",{className:"rs-iteminfo-child-actions"},e&&l().createElement("p",mr({className:"rs-iteminfo-child-price"},qa(e))),f&&l().createElement("div",mr({className:"rs-iteminfo-segmentsavings"},qa(t))),N&&l().createElement("div",mr({className:"rs-iteminfo-price-details"},qa(a))),r))},zl=()=>{const{fragments:e}=z();return V().get(window,"chatConfig.chat",null)&&l().createElement("div",{className:"rs-chatspecialist-wrapper"},l().createElement("div",{className:"as-chat rs-chat rs-chatspecialist"},l().createElement("div",mr({className:"rs-chat-content"},qa(e.chatSpecialist)))))},Xl=({btnLabel:e,overlayContent:t,productFamily:a,btnDataAutom:r})=>{const{viewport:n}=z(),o="small"===n,[i,c]=(0,s.useState)(!1);return l().createElement(l().Fragment,null,l().createElement("button",mr({type:"button",className:"rs-iteminfo-more-details-link as-buttonlink",onClick:()=>{c(!0),(({productFamily:e})=>{hl({eVar:ul,feature:"Bag",action:"Trade In Next Steps"}),yl({name:"metrics",data:{hier1:"aos:bag",evar13:e?e.toLowerCase():null,evar6:"modal open|tradein message|learn more about tradein",evar1:"AOS: account/savedbag | get ready:apple card applicant | link | see how trade-in works",prop3:"modal open|tradein message|learn more about tradein"}})})({productFamily:a})}},qa(e),{"data-autom":r})),l().createElement(ss,{className:"rs-trade-in-overlay",visible:i,onClose:()=>c(!1),isFullscreen:o,noPadding:!0,fixedWidth:!0,ariaLabel:"pd-overlay-header rs-instant-tradeinoverlay-header"},l().createElement("div",mr({className:"rs-trade-in-overlay-content"},qa(t))),l().createElement(zl,null)))},Jl=({showProductLink:e=!1,productUrl:t="",productMetrics:a={},name:r,description:n,descriptionA11y:s,titleDataAutom:o})=>l().createElement("h3",{className:"rs-iteminfo-child-title","data-autom":o},e?l().createElement("a",mr({href:t},a,{"data-relatedlink":t}),l().createElement("span",qa(r))):l().createElement("span",qa(r)),n&&l().createElement(l().Fragment,null,l().createElement("span",{"aria-hidden":"true"}," - ",n),l().createElement("span",{className:"visuallyhidden"},"- ",s||n))),Ql=l().forwardRef(((e,t)=>{const{className:a,isLoading:r,onClick:n,a11yLabel:s,...o}=e,i=Wa()(a,"as-buttonlink"),{assets:c}=z();return r?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray","aria-label":c.processing}):l().createElement("button",mr({type:"button",className:i,onClick:n,ref:t},o),c.remove,l().createElement("span",mr({className:"visuallyhidden"},qa(s))))})),Zl=Ql,eo=({hasPriceOfNewProduct:e,removeBtn:t,priceDetails:a,title:r,iupSubHeader:n})=>{const s=Wa()("rs-iteminfo-iup-pricedetails",{"rs-iteminfo-iup-newdevicedetails":e});return l().createElement("div",{className:"rs-item-child-content-iup as-icondetails-detail"},l().createElement("div",{className:"rs-iteminfo-child-wrapper rs-iteminfo-iup-ledger"},r,t&&l().createElement("div",{className:"rs-iteminfo-child-actions"},t),n&&l().createElement("div",{className:"rs-iteminfo-iup-subheader"},n),l().createElement("div",{className:"rs-iteminfo-iup-details"},l().createElement("div",{className:"column large-8 small-12"},l().createElement("div",{className:s},a.map((({label:e,value:t,labelDataAutom:a,valueDataAutom:r})=>t?l().createElement("div",{key:`row-${e}`,className:"rs-iteminfo-iup-pricedetails-row row"},l().createElement("span",{className:"column","data-autom":a},e),l().createElement("span",{className:"column rs-iteminfo-iup-value","data-autom":r},t)):null)))))))},to=({modKey:e,setAppleCarePlusType:t,removeBtnRef:a,handleRemoveClick:r})=>{const{assets:n,fragments:s}=z(),o=xa(e),{modKey:i,isEditable:c,announceMessage:d,isFulfillment:m,isBundle:u}=ll(),[p]=Ma(i,"productFamilyDisplayName"),g=Ra(`${i}.phoneDetails`),{name:h,description:y,descriptionA11Y:E,isRemovable:v,unitListSavings:b,showPrice:f,totalPrice:w,promos:N,showChildItemLink:S,productUrl:C,productEvar1:T,productMetricId:L,productEvar11:k,segmentSavingsMessage:I,showTradeInBalanceGiftMessage:A,priceMessage:P,tradeInSubHeader:D,tradeinProduct:O,priceAfterTradeIn:x,carrierSpecialTradeInHeader:R,carrierSubsidyTradeInDetails:F,carrierSubsidyDesc:M,devicePaymentsHeader:_,devicePaymentsSubHeader:B,devicePaymentsSubHeaderA11y:$,deviceBillCredits:U,imeiNumberHeader:K,imeiNumber:V,serialNumberHeader:H,serialNumber:j,priceOfNewIphoneHeader:G,priceOfNewIphoneValue:W,priceOfNewProductLabel:q,priceOfNewProduct:Y,tradeInCredit:X,instantCreditMessage:J,tradeInPromoSavings:Q,creditDisclaimer:Z,tradeInEstimatedHeader:ee,tradeinEstimatedValue:te,priceAfterTradeInSubHeader:ae,tradeInCreditInfo:re,tradeInIncentiveHeader:ne,tradeInIncentive:se,priceDetails:le,iupSubHeader:oe,iupUpgrdCredit:ie,iupPriceAfterCreditValue:ce,includedInInstallments:de,displayTagLine:me,insurancePremiumTax:ue,complimentaryACOverlay:pe,id:ge}=o.data,he=v,ye=Ha(e,"delete",{focusDelay:250,deferLoadWithDelete:!0}),{isLoadingSubmit:Ee}=ye.binding.properties,ve=y&&E?`${h} - ${E}`:w?`${h} - ${w}`:h,be={...ye.props,className:"rs-iteminfo-child-actions-button",a11yLabel:ve,isLoading:Ee,onClick:e=>{d(n.processing),ye.props.onClick(e),t(h.split("for")[0].trim()),r()},"data-autom":`bag-item-remove-button-${h}`},fe=(({childModData:e,hasTradeInSummary:t,isBundle:a})=>{const{carrierSubsidyTradeInDetails:r,tradeInCredit:n,priceOfNewIphoneValue:s,showTradeInLedgerLink:l,hasCarrierTradeIn:o,priceOfNewProduct:i}=e;return(a||r||n&&(s||i)||o||!t)&&l})({childModData:o.data,hasTradeInSummary:Ra(Ls)||!1,isBundle:u}),we=(({childModData:e,assets:t,isCarrierDevice:a,isBundle:r})=>{const{carrierSubsidyTradeInDetails:n,tradeInOverlay:s,tradeInCredit:l,priceOfNewIphoneValue:o}=e;return r?t.bundleTradeInOverlayLink:r||n||s&&a||l&&o?t.tradeinOverlayLink:t.tradeInInstruction})({childModData:o.data,assets:n,isCarrierDevice:g,isBundle:u}),Ne=(({childModData:e,fragments:t,isCarrierDevice:a,isBundle:r})=>{const{id:n,carrierSubsidyTradeInDetails:s,tradeInOverlay:l,tradeInCredit:o,priceOfNewIphoneValue:i}=e;return r?t.bundleTradeInOverlayContent:s||l&&a||o&&i?t[`${l}OverlayContent`]:l&&!a?t.tradeUpInstructionOverlayContent:ln(t.acmiTradeInOverlayContent,{headerId:`${n}-tradein-heading`})})({childModData:o.data,fragments:s,isCarrierDevice:g,isBundle:u}),Se=b&&ln(n.includedLoyaltySavings,{includedSavings:b}),Ce=I||Se,Te=!m&&f&&w?w:"",Le=Boolean(!N&&S&&c&&C),ke={"data-evar1":T,"data-s-object-id":L,"data-evar11":k};switch(_l(o.data)){case Dl:return l().createElement(Vl,{header:R,description:M,subsidyDetails:F,devicePaymentsHeader:_,devicePaymentsSubHeader:B,devicePaymentsSubHeaderA11y:$,deviceBillCredits:U,showTradeInBalanceGiftMessage:A,overlayWithButton:fe&&l().createElement(Xl,{btnLabel:we,overlayContent:Ne,productFamily:p})});case Ol:return l().createElement(Hl,{hasPriceOfNewProduct:Boolean(Y),name:h,description:y,descriptionA11y:E,instantCreditMessage:J,showTradeInBalanceGiftMessage:A,removeBtn:he&&l().createElement(Zl,be),tradeInPromoSavings:Q,infos:[{label:D,value:O,labelDataAutom:"yourTradeInDevice",valueDataAutom:"yourTradeInDeviceValue"},{label:K,value:V},{label:H,value:j,labelDataAutom:"tradeInLedgerSerialno",valueDataAutom:"tradeInLedgerSerialValue"}],priceDetails:[{label:G||n.priceOfNewIphoneLabel,value:W,labelDataAutom:"newProductPrice",valueDataAutom:"newProductValue"},{label:q,value:Y},{label:n.tradeInCreditLabel,value:X,labelDataAutom:"tradeInCredit",valueDataAutom:"tradeInCreditValue"},{label:n.priceAfterTradeInLabel,value:x,labelDataAutom:"fullPriceWithTradeIn",valueDataAutom:"fullPriceWithTradeInValue"}],title:l().createElement(Jl,{name:h,description:y,descriptionA11y:E,titleDataAutom:"tradeInLedgerdetailsHeader"}),overlayWithButton:fe&&l().createElement(Xl,{btnLabel:we,overlayContent:Ne,productFamily:p,btnDataAutom:"tradeInOverlay"})});case Rl:return l().createElement(Gl,{creditDisclaimer:Z,tradeInEstimatedHeader:ee,tradeInEstimatedValue:te,serialNumberHeader:H,serialNumber:j,tradeInSubHeader:D,tradeInProduct:O,priceAfterTradeInSubHeader:ae,priceAfterTradeIn:x,tradeInCreditInfo:re,tradeInIncentiveHeader:ne,tradeInIncentive:se,showTradeInBalanceGiftMessage:A,removeBtn:he&&l().createElement(Zl,be),title:l().createElement(Jl,{name:h,description:y,descriptionA11y:E}),overlayWithButton:fe&&l().createElement(Xl,{btnLabel:we,overlayContent:Ne,productFamily:p})});case xl:return l().createElement(jl,{totalPrice:Te,savingsMessage:Ce,priceDetails:le,removeBtn:he&&l().createElement(Zl,be),infos:[de?n.includedInInstallments:"",me,ue],title:l().createElement(Jl,{showProductLink:Le,productUrl:C,productMetrics:ke,name:h,description:y,descriptionA11y:E})});case Ml:return l().createElement(eo,{hasPriceOfNewProduct:Boolean(Y),iupSubHeader:oe,title:l().createElement(Jl,{name:h,description:y,descriptionA11y:E}),priceDetails:[{label:n.priceOfNewIphoneLabel,value:Y,labelDataAutom:"newProductPrice",valueDataAutom:"newProductValue"},{label:n.iupCreditLabel,value:`- ${ie}`,labelDataAutom:"iUpCredit",valueDataAutom:"iUpCreditValue"},{label:n.fullPriceAfterCreditLabel,value:ce,labelDataAutom:"fullPriceCredit",valueDataAutom:"fullPriceCreditValue"}],removeBtn:he&&l().createElement(Zl,be)});default:return l().createElement(Yl,{totalPrice:Te,savingsMessage:Ce,priceMessage:P,removeBtn:he&&l().createElement(Zl,mr({},be,{ref:a})),infos:[de?n.includedInInstallments:"",me,ue],title:l().createElement(Jl,{showProductLink:Le,productUrl:C,productMetrics:ke,name:h,description:y,descriptionA11y:E}),name:h,productEvar1:T,productMetricId:L,learnMoreOverlay:!m&&pe,id:ge})}},ao=l().memo(to),ro=({itemRef:e,setItemTabIndex:t,setAppleCarePlusType:a,removeBtnRef:r,acPlusAddRef:n,handleRemoveClick:o})=>{const i=(0,s.useRef)(!1),{assets:c}=z(),{modKey:d,announceMessage:m}=ll(),u=(e=>{const t=Ia();return t.getModuleChildren(e).filter((e=>{const{isChildItem:a,isBundlePromoItem:r}=t.getModuleData(e);return a&&!r}))})(d),p=or(d,u),[g]=Ma(Ts,"total"),[h]=Ma(Ds,"emiAmount"),y=h||g;return(0,s.useEffect)((()=>{if(t(-1),u.length&&i.current){e&&e.current&&e.current.focus();const t=`${c.bagUpdateSuccessAlly},${ln(c.itemsHeader,{price:y})}`;r&&r.current&&r.current.focus(),n&&n.current&&n.current.blur(),m(t)}i.current=!0}),[u.length,r,n]),l().createElement(rl,{className:"rs-bag-item-children"},p.map((({modKey:e,props:t})=>l().createElement(Gr,mr({key:`bag-item-child-${e}`,className:"rs-item-child-wrap"},t,{appear:i.current,enter:!0}),l().createElement($l,{modKey:e},l().createElement(ao,{modKey:e,setAppleCarePlusType:a,removeBtnRef:r,handleRemoveClick:o}))))))},no=l().memo(ro),so=({className:e,error:t,errorA11y:a,errorAttrs:r,...n})=>l().createElement("div",mr({className:Wa()([e,"form-message-wrapper"])},n),a&&l().createElement("span",{className:"visuallyhidden"},a),"string"==typeof t?l().createElement("span",mr({className:"form-message",dangerouslySetInnerHTML:{__html:t}},r)):l().createElement("div",mr({className:"form-message"},r),t)),lo=({id:e,name:t,value:a,label:r,allowNone:n,error:s,errorA11y:o,errorAttrs:i={},classes:c={},children:d,"aria-describedby":m="",...u},p)=>{const g=l().useId(),h=e||g,y=Wa()(["form-dropdown-select",c.select,{"form-dropdown-selectnone":!a&&!n}]);return l().createElement("div",{className:Wa()("form-dropdown",c.root,{"is-error":s})},l().createElement("select",mr({id:h,name:t,value:a,className:y,"aria-labelledby":`${h}_label`,"aria-describedby":`${h}_error ${m}`,ref:p},u),d),l().createElement("span",{className:Wa()("form-dropdown-chevron",c.chevron),"aria-hidden":"true"}),l().createElement("span",{className:Wa()("form-dropdown-label",c.label),id:`${h}_label`,"aria-hidden":"true"},r),s&&l().createElement(so,{id:`${h}_error`,className:c.error,error:s,errorA11y:o,errorAttrs:i}))},oo=l().forwardRef(lo),io=({children:e,...t},a)=>l().createElement("option",mr({ref:a},t),e),co=l().forwardRef(io),mo="middle",uo="left",po="right",go=(e,t)=>{const a=mo,r=V().get(e,"current"),n=V().get(t,"current");if(!r||!n)return a;const s=r.getBoundingClientRect(),l=n.getBoundingClientRect(),o=s.x+s.width/2,i=l.width/2,c=document.body.offsetWidth-i;return o<i?uo:o>c?po:a},ho=({className:e,...t})=>l().createElement("div",mr({className:Wa()("form-tooltip-title",e)},t)),yo=({className:e,...t})=>l().createElement("div",mr({className:Wa()("form-tooltip-content",e)},t)),Eo=({id:e,before:t,after:a,left:r,right:n,middle:s,autoAlign:o,labelA11y:i,className:c,onFocus:d=(()=>{}),onBlur:m=(()=>{}),onMouseEnter:u=(()=>{}),onMouseLeave:p=(()=>{}),onKeyDown:g=(()=>{}),children:h,...y})=>{const[E,v]=l().useState(!1),[b,f]=l().useState(!1),w=l().useId(),N=e||w,[S,C]=l().useState(""),T=l().useRef(null),L=l().useRef(null);return l().createElement("div",{className:Wa()("form-tooltip",c,{"form-tooltip-before":t,"form-tooltip-after":a,"form-tooltip-show":E||b})},l().createElement("button",mr({type:"button",className:"form-tooltip-button","aria-labelledby":N,onFocus:e=>{o&&C(go(T,L)),v(!0),d(e)},onBlur:e=>{v(!1),m(e)},onMouseEnter:e=>{o&&C(go(T,L)),f(!0),u(e)},onMouseLeave:e=>{f(!1),p(e)},onKeyDown:e=>{"Escape"===e.key&&v(!1),g(e)},ref:T},y),l().createElement("span",{className:Wa()("form-icons","form-icons-info19")}),l().createElement("span",{className:"visuallyhidden"},i)),l().createElement("div",{id:N,className:Wa()("form-tooltip-info",{"form-tooltip-pointer-left":r||S===uo,"form-tooltip-pointer-middle":s||S===mo,"form-tooltip-pointer-right":n||S===po}),role:"tooltip","aria-hidden":"true",ref:L},h))},vo=({isFirst:e,isAdding:t,imageData:a,title:r,titleA11y:n,appleCareTitle:s,descriptions:o,addBtnProps:i,learnMoreBtn:c,savingsMessage:d,isLast:m,options:u,appleCarePartNumber:p,appleCareDropdownProps:g,id:h,acPlusAddRef:y})=>{const{assets:E}=z(),v=Wa()("rs-inline-recommendation","rs-iteminfo-child",{"rs-inline-recommendation-first":e});return l().createElement("div",{className:v},l().createElement("div",{className:"row rs-iteminfo-child-content"},l().createElement("div",{className:"column small-12 large-12 rs-iteminfo-child-details"},l().createElement("div",{className:"as-icondetails"},l().createElement("div",{className:"rs-iteminfo-child-image","aria-hidden":"true"},l().createElement(Il,{data:a}))),l().createElement("div",{className:"as-icondetails-detail"},l().createElement("h3",mr({id:h,"aria-label":n,className:"rs-iteminfo-child-title small-8 "+(u?"large-5 small-12 rs-iteminfo-applecare":"large-9")},qa(r))),u&&l().createElement(l().Fragment,null,l().createElement(oo,mr({},g,{label:E.selectCoverage,classes:{root:"rs-applecare-dropdown large-4 small-8 "+(p?"":"rs-applecare-selectnone")},value:p,allowNone:p}),u&&u.map((e=>l().createElement(co,{"aria-label":e.value?"":s,"aria-hidden":!e.value,key:e.value,value:e.value,disabled:!e.value},e.name)))),l().createElement(Eo,{labelA11y:l().createElement("span",qa(E.appleCareTooltipAlly)),autoAlign:!0,after:!0},l().createElement("span",qa(E.appleCareTooltip)))),l().createElement("div",{className:"rs-iteminfo-child-desc "+(u?"rs-applecare-options-desc":"")},d&&l().createElement("div",mr({className:"rs-iteminfo-segmentsavings"},qa(d))),o.map((e=>l().createElement("p",mr({key:`description-${e}`,className:"rs-iteminfo-child-tagline"},qa(e))))),m&&c),l().createElement("div",{className:"column rs-iteminfo-child-actions "+(u?"large-1 large-last":"large-3 small-4")},t?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray","aria-label":E.processing}):l().createElement("button",mr({},i,{type:"button",className:"rs-iteminfo-child-actions-button as-buttonlink","aria-label":n,ref:y}),E.add))))))},bo=({modKey:e,isLast:t,acPlusAddRef:a,removeClick:r})=>{const{modKey:n,announceMessage:o}=ll(),[i]=Ma(`${n}.inlineRecommendations`,"isLightning"),c=xa(e),d=sr(`${e}`,"appleCarePartNumber").props,{isLoadingSubmit:m}=c.properties,{width:u,height:p,src:g,dataScaleParams1:h,id:y,title:E,price:v,acmiPrice:b,description:f,descriptionA11Y:w,details:N,insurancePremiumTax:S,unitListSavings:C,learnMoreOverlay:T,learnMoreLink:L,AppleCareEvar1:k,productEvar1:I,options:A,monthlyPrice:P,priceA11y:D,monthlyPriceA11y:O,appleCarePartNumber:x,productMetricId:R,ACPlusForiUPEnabled:F,segmentSavingsMessage:M,displayNameVO:_}=c.data,B={width:u,height:p,srcSet:{src:g,scaleParams1:h}},{viewReady:$,acShowInstallment:U}=Hs(),K=$&&U,V=K&&b?b:v,H=[];N&&H.push(N),S&&H.push(S);const{assets:j,fragments:G}=z(),W=G[`inlineRecommendationTitle${f?"Desc":""}`],q=ln(W,{title:E,price:V,description:f}),Y=G.combinationTitle,X=ln(Y,{title:E,price:V,monthlyPrice:P}),J=ln(j.combinationTitleAlly,{title:E,priceA11y:D,monthlyPriceA11y:O}),Q=G[`inlineRecommendationTitle${f&&w?"DescA11y":"A11y"}`],Z=ln(Q,{title:E,price:V,descriptionA11Y:w,displayNameVO:_}),ee=ln(j.loyaltySavingsLabel,{unitListSavings:C}),te=C?ee:"",ae=Ha(e,"add",{focusDelay:250,deferLoadWithDelete:!0}),re=A&&{disabled:!x},ne={...ae.props,"data-autom":"bag-inlineattach-add",...re,onClick:e=>{o(j.processing),ae.props.onClick(e)}},[se,le]=(0,s.useState)(!1),oe=i&&t&&Boolean(T),ie=Boolean(T||L)&&!(i&&!t),ce=!i&&Boolean(T),de=oe||ce;let me="";oe?me=j.compareCoverage:ie&&(me=j.learnMore),F&&(me=j.learnMoreIup);const ue=ie&&l().createElement(Wl,{hasOverlay:de,label:me,labelA11y:ln(G.inlineRecommendationLearnMoreA11y,{title:E}),href:L,setOverlayVisible:le,sendOmniClickEvents:()=>{de?bl({isLightning:i,feature:k}):(({feature:e})=>{hl({action:"LearnMoreSelected",feature:e,eVar:ml})})({feature:k}),K&&yl({name:"metrics",data:{hier1:"aos:bag",channel:"aos:bag",prop3:"modal open|inline recommendation|learn more about apple care"}})},productMetricId:R,productEvar1:I,ACPlusForiUPEnabled:F}),pe=de?ln(T,{id:y,title:E,price:V},"${","}"):"";return(0,s.useEffect)((()=>{r&&a&&a.current&&a.current.focus()}),[r,a]),l().createElement(l().Fragment,null,l().createElement(vo,{isAdding:m,imageData:B,title:P&&X||q,titleA11y:P&&J||Z,descriptions:H,addBtnProps:ne,learnMoreBtn:ue,appleCareTitle:E,isLast:t,options:A,appleCarePartNumber:x,appleCareDropdownProps:d,savingsMessage:M||te,id:E.split("for")[0].trim(),acPlusAddRef:a}),de&&l().createElement(ql,{visible:se,setVisible:le,content:pe,id:y}))},fo=l().memo(bo),wo=({appleCarePlusType:e,acPlusAddRef:t,removeClick:a})=>{const r=(0,s.useRef)(!1),{assets:n}=z(),{modKey:o,announceMessage:i}=ll(),c=$a(),d=`${o}.inlineRecommendations`,{childModKeys:m,modCreatedAt:u}=xa(d),{modActive:p,setModWillPersist:g}=lr(d),h=Boolean(m.length)&&p,[y]=Ma(Ts,"total"),[E]=Ma(Ds,"emiAmount"),v=E||y;(0,s.useEffect)((()=>{r.current=!0}),[r]),(0,s.useEffect)((()=>{if(m.length){const t=`${n.bagUpdateSuccessAlly},${ln(n.itemsHeader,{price:v})}`;if(e){const t=document.getElementById(`${e}`);t&&t.focus()}i(t)}}),[m.length,e]),(0,s.useEffect)(g,[u]);return l().createElement(Gr,{className:"rs-item-inline-recommendations",in:h,onExited:()=>{c({type:Le})},appear:r.current,enter:!0,unmountOnExit:!0,mountOnEnter:!0},m.map(((e,r)=>l().createElement(fo,{key:d,modKey:e,isLast:r===m.length-1,acPlusAddRef:t,removeClick:a}))))},No=l().memo(wo),So=({messages:e,lastUpdated:t})=>l().createElement("div",{className:"rs-iteminfo-messages large-9  small-12 small-offset-0"},l().createElement(qs,{messages:e,lastUpdated:t})),Co=()=>{const{modKey:e}=ll(),[t,a]=_a(e);return Boolean(t.length)&&l().createElement(So,{messages:t,lastUpdate:a})},To=l().memo(Co),Lo=({showAddBtn:e,addBtnProps:t,showDeleteBtn:a,deleteBtnProps:r})=>{const{assets:n}=z();return l().createElement("div",{className:"rs-iteminfo-recommendedsystemsactions"},e&&l().createElement("button",mr({type:"button",className:"form-button"},t),n.addToBag),a&&l().createElement("button",mr({type:"button",className:"as-buttonlink rs-iteminfo-recommended-systems-delete"},r),n.delete))},ko=()=>{const{modKey:e}=ll(),[t]=Fa(e),{isValidSystem:a}=t,r=Ha(e,"addToCart"),n=r.binding.bindExists&&Boolean(a),s=Ha(e,"delete"),o=s.binding.bindExists;return l().createElement(Lo,{showAddBtn:n,addBtnProps:r.props,showDeleteBtn:o,deleteBtnProps:s.props})},Io=l().memo(ko),Ao=({name:e,productUrl:t,productEvar1:a,productMetricId:r,linkRef:n,productTitleHeadingLevel:s=2})=>{const o=`h${s}`;return Boolean(n&&t)?l().createElement(o,{className:"rs-iteminfo-title"},l().createElement("a",{href:t,"data-evar1":a,"data-s-object-id":r,"data-autom":"bag-item-name",ref:n},e)):l().createElement(o,{className:"rs-iteminfo-title"},e)},Po=({linkRef:e,productTitleHeadingLevel:t=2})=>{const{modKey:a}=ll(),[r]=Fa(a),{name:n="",productUrl:s,productEvar1:o,productMetricId:i}=r,c=n&&n.replace(/\u00a0/g," ");return l().createElement(Ao,{name:c,productUrl:s,productEvar1:o,productMetricId:i,linkRef:e,productTitleHeadingLevel:t})},Do=l().memo(Po),Oo=({data:e,onClick:t})=>{const a=Wa()({"as-util-relatedlink":Boolean(t)});return l().createElement(Il,{data:e,className:a,onClick:t,"aria-hidden":"true","data-autom":"bag-item-image"})},xo=({linkRef:e})=>{const{modKey:t}=ll(),[a]=Fa(t),r={width:a.width,height:a.height,srcSet:{src:a.src,scaleParams1:a.dataScaleParams1}},n=Boolean(e&&e.current)?()=>e.current.click():null;return l().createElement(Oo,{data:r,onClick:n})},Ro=l().memo(xo),Fo="mac",Mo="phone",_o=e=>{const t=xa(`${e}.phoneDetails`),a=xa(`${e}.macDetails`);return t.modExists?[t,Mo]:a.modExists?[a,Fo]:[{...zs},""]},Bo=({type:e,label:t,a11y:a,visible:r,setVisible:n,onVisibilityChange:s})=>{const o=Wa()("rs-iteminfo-link","icon","icon-after",{"icon-chevronup":r,"icon-chevrondown":!r});return l().createElement("button",{type:"button",className:o,onClick:()=>{n((e=>(s(!e),!e)))},"data-autom":`item-${e}details-link`,"aria-label":`${t} ${a}`,"aria-expanded":r},t)},$o=({modKey:e,visible:t,setVisible:a})=>{const{modKey:r}=ll(),[n]=Fa(e||r),[s,o]=_o(e||r),i=s.modExists&&o,{assets:c,fragments:d,viewport:m}=z();if(!n.standaloneDeviceActivation&&!i&&!o)return null;const u=(({type:e,itemData:t,assets:a,viewport:r,visible:n})=>{const{isRecommendedSystems:s,standaloneDeviceActivation:l}=t,o="small"===r;if(l)return n?a.hideCarrierDetailsLabel:a.showCarrierDetailsLabel;switch(e){case Fo:return n?a.hideDetailsLabel:a.showDetailsLabel;case Mo:return n?o||s?a.hideDetailsLabel:a.hidePhoneDetailsLabel:s?a.showDetailsLabel:a.showPhoneDetailsLabel;default:return""}})({type:o,itemData:n,assets:c,viewport:m,visible:t}),p=ln(o===Mo?d.phoneDetailsExpandedA11y:d.macDetailsExpandedA11y,s.data),g=n.standaloneDeviceActivation&&ln(d.phoneDetailsExpandedA11y,{model:n.name});return l().createElement(Bo,{type:o,label:u,a11y:g||p,visible:t,setVisible:a,onVisibilityChange:e=>{(e=>{yl({name:"metrics",data:{evar21:`D=pageName+"|Cart|${e} carrier details and charges"`}})})(e?"Show":"Hide")}})},Uo=l().memo($o),Ko=({isExpandable:e,visible:t,acmiDetails:a,children:r})=>l().createElement("div",{className:"rs-item-product-info large-12 rs-iteminfo-detailstext"},e?l().createElement(qr,{in:t,timeout:300},r):r,a),Vo=({phoneDetails:e,editIPhoneUrl:t,tradeInDetails:a,financeOfferPlanDetails:r})=>{const{assets:n,fragments:s}=z(),{ratePlanDetails:o}=e||{},i=Boolean(o&&o.length),c=t=>(({action:e,feature:t})=>{hl({action:e,feature:t,eVar:ml})})(t,e.metricsEvar1);return l().createElement("div",{className:"rs-item-product-info-phone row"},e&&l().createElement("div",{className:"column large-12 small-12 rs-phonedetails-container"},l().createElement("div",{className:"rs-phonedetails"},l().createElement("p",{className:"rs-phonedetails-label"},n.phoneDetails),l().createElement("ul",{role:"list"},l().createElement("li",null,e.model),l().createElement("li",null,e.capacity),l().createElement("li",null,e.finish),t&&l().createElement("li",null,l().createElement("a",{href:t,className:"as-buttonlink",id:"rs-edit-iphone-link",onClick:()=>c("EditiPhoneModel")},l().createElement("span",{"aria-hidden":"true"},n.editModelLabel),l().createElement("span",{className:"visuallyhidden"},n.editIphoneModel),l().createElement("span",{className:"more","aria-hidden":"true"})))),e.phoneNumber&&l().createElement(l().Fragment,null,l().createElement("p",{className:"rs-phonedetails-label"},n.phoneNumber),l().createElement("ul",{role:"list"},l().createElement("li",{className:"as-direction-ltr"},e.phoneNumber))))),l().createElement("div",{className:"rs-phonedetails-rateplan-details"},l().createElement("ul",{role:"list"},i&&o.map(((t,a)=>{const r=a===o.length&&Boolean(e.editIPhoneRatePlanUrl);return l().createElement("li",{key:`row-${t.label}`,className:"rs-phonedetails-row"},l().createElement("span",{className:"rs-phonedetails-label"},t.label),l().createElement("span",mr({className:"rs-phonedetails-value"},qa(t.value))),r&&l().createElement("a",{href:e.editIPhoneRatePlanUrl,className:"as-buttonlink",id:"rs-edit-carrier-link",onClick:()=>c("EditCarrierPlan")},l().createElement("span",{"aria-hidden":"true"},n.editPlan),l().createElement("span",{className:"visuallyhidden"},ln(s.editPlanA11y,e)),l().createElement("span",{className:"more","aria-hidden":"true"})))}))),e&&e.disclaimer&&l().createElement("div",mr({className:"rs-phonedetails-disclaimer small-12 large-12"},qa(e.disclaimer))),r&&l().createElement(l().Fragment,null,l().createElement("h3",{className:"rs-phonedetails-subheader"},r.headerLabel),l().createElement("ul",{role:"list"},r.row.map((e=>l().createElement("li",{key:`financeoffer-plandetails-${e.value}`,className:"rs-phonedetails-financeoffer-details"},l().createElement("span",{className:"rs-phonedetails-label"},e.label),l().createElement("span",{className:"rs-phonedetails-value"},e.value)))))),a&&l().createElement(l().Fragment,null,l().createElement("h3",{className:"rs-phonedetails-subheader"},a.headerLabel),l().createElement("div",{className:"rs-phonedetails-tradein-details"},l().createElement("ul",{role:"list"},a.row.map((e=>[l().createElement("li",{key:`tradein-details-${e.value}`},l().createElement("span",{className:"rs-phonedetails-label"},e.label),l().createElement("span",{className:"rs-phonedetails-value"},e.value))]))),a.upgradeProgramBalance&&l().createElement("span",{className:"rs-phonedetails-label"},a.upgradeProgramBalance)))))},Ho=({macHardwareDetails:e,macSoftwareDetails:t})=>{const{assets:a}=z();return l().createElement("div",{className:"rs-item-info-mac row"},l().createElement("div",{className:"rs-macdetails"},e&&l().createElement("div",null,l().createElement("h3",{className:"rs-macdetails-label list-title"},a.macHardwareLabel),l().createElement("ul",{className:"list large-6 small-12"},e.map((e=>l().createElement("li",{key:`hardware-detail-${e}`},e))))),t&&l().createElement("div",null,l().createElement("h3",{className:"rs-macdetails-label list-title"},a.macSoftwareLabel),l().createElement("ul",{className:"list large-6 small-12"},t.map((e=>l().createElement("li",{key:`software-detail-${e}`},e)))))))},jo=({carrierDetails:e,financeOfferPlanDetails:t,tradeInDetails:a})=>{const{carrierStaticTerms:r,carrierDisclaimer:n,eSimLegalLabel:s,eSimLegalLabelText:o}=e,i=Boolean(r&&r.length);return l().createElement("div",{className:"rs-item-product-info-phone row"},l().createElement("div",{className:"rs-phonedetails-rateplan-details"},l().createElement("ul",{role:"list"},l().createElement("li",{className:"rs-phonedetails-row"},l().createElement("span",{className:"rs-phonedetails-label"},s),l().createElement("span",mr({className:"rs-phonedetails-value"},qa(o)))),i&&r.map((e=>l().createElement("li",{key:`row-${e.label}`,className:"rs-phonedetails-row"},l().createElement("span",{className:"rs-phonedetails-label"},e.label),l().createElement("span",mr({className:"rs-phonedetails-value"},qa(e.value))))))),n&&l().createElement("div",mr({className:"rs-phonedetails-disclaimer small-12 large-12"},qa(n))),t&&l().createElement(l().Fragment,null,t.headerLabel&&l().createElement("h3",{className:"rs-phonedetails-subheader"},t.headerLabel),l().createElement("ul",{role:"list"},t.row.map((e=>l().createElement("li",{key:`financeoffer-plandetails-${e.value}`,className:"rs-phonedetails-financeoffer-details"},l().createElement("span",{className:"rs-phonedetails-label"},e.label),l().createElement("span",{className:"rs-phonedetails-value"},e.value)))))),a&&l().createElement(l().Fragment,null,a.headerLabel&&l().createElement("h3",{className:"rs-phonedetails-subheader"},a.headerLabel),l().createElement("div",{className:"rs-phonedetails-tradein-details"},l().createElement("ul",{role:"list"},a.row.map((e=>[l().createElement("li",{key:`tradein-details-${e.value}`},l().createElement("span",{className:"rs-phonedetails-label"},e.label),l().createElement("span",{className:"rs-phonedetails-value"},e.value))]))),a.upgradeProgramBalance&&l().createElement("span",{className:"rs-phonedetails-label"},a.upgradeProgramBalance)))))},Go=({buyFlowInstallmentsDetails:e})=>l().createElement("div",{className:"row rs-buyflow-installmentsdetails"},l().createElement("h3",{className:"rs-phonedetails-subheader"},e.headerLabel,l().createElement("span",{className:"visuallyhidden"},e.name)),e.row.map((e=>l().createElement("div",{key:`buyflow-installmentsdetails-${e.value}`,className:"rs-phonedetails-webinstallment-details"},l().createElement("span",{className:"rs-phonedetails-label"},e.label),l().createElement("span",{className:"rs-phonedetails-value"},e.value))))),Wo=[Fo,Mo],qo=({modKey:e,visible:t})=>{const{modKey:a}=ll(),[r]=Fa(e||a),[n,s]=_o(e||a),o=n.modExists&&Wo.includes(s),i=o&&n.data,c=o||r.buyFlowInstallmentsDetails,d=(r.standaloneDeviceActivation||o)&&void 0!==t;if(!r.standaloneDeviceActivation&&!c)return null;let m=null;m=s===Fo?l().createElement(Ho,{macHardwareDetails:i.macHardwareDetails,macSoftwareDetails:i.macSoftwareDetails}):r.standaloneDeviceActivation?l().createElement(jo,{carrierDetails:r.standAloneDeviceActivationDetails,financeOfferPlanDetails:r.financeOfferPlanDetails,tradeInDetails:r.tradeinDetails}):l().createElement(Vo,{phoneDetails:i,editIPhoneUrl:r.editIPhoneUrl,tradeInDetails:r.tradeinDetails,financeOfferPlanDetails:r.financeOfferPlanDetails});const u=r.buyFlowInstallmentsDetails&&r.buyFlowInstallmentsDetails.headerLabel&&l().createElement(Go,{buyFlowInstallmentsDetails:r.buyFlowInstallmentsDetails});return l().createElement(Ko,{isExpandable:d,visible:t,acmiDetails:u},m)},Yo=l().memo(qo),zo=({id:e,name:t,value:a,label:r,labelA11y:n,type:s="text",error:o,errorA11y:i,errorAttrs:c={},search:d,valid:m,countryCode:u,countryCodeA11y:p,characterCounter:g,characterCounterA11y:h,onReset:y,resetA11y:E,resetAttrs:v,classes:b={},children:f,"aria-describedby":w="",...N},S)=>{const C=Wa()(["form-textbox",b.root,{"is-error":o,"form-textbox-with-button":f,"form-textbox-with-righticon":y||m,"form-textbox-with-lefticon":d,"form-textbox-with-countrycode":u&&u.length>4,"form-textbox-with-countrycode-twodigits":u&&3===u.length,"form-textbox-with-countrycode-threedigits":u&&4===u.length,"form-textbox-with-countrycode-onedigit":u&&u.length<=2,"form-textbox-with-counter":g}]),T=Wa()(["form-textbox-input",b.input,{"form-textbox-entered":Boolean(a)}]),L=l().useId(),k=e||L;return l().createElement("div",{className:C}," ",l().createElement("input",mr({id:k,name:t,value:a,type:s,className:T,"aria-labelledby":`${k}_label`,"aria-describedby":`${k}_error ${w}`,"aria-invalid":Boolean(o),ref:S},N)),l().createElement("span",{id:`${k}_label`,className:Wa()("form-textbox-label",b.label),"aria-hidden":"true","aria-label":n},r),f,o&&l().createElement(so,{id:`${k}_error`,className:b.error,error:o,errorA11y:i,errorAttrs:c}),g&&l().createElement("div",{className:Wa()("form-textbox-counter-wrapper",b.characterCounter,{"is-error":o})},h&&l().createElement("span",{className:"visuallyhidden"},h),l().createElement("span",{className:"form-textbox-counter"},g)),u&&l().createElement("span",{className:Wa()("form-textbox-countrycode",b.countryCode)},p&&l().createElement("span",{className:"visuallyhidden"},p),l().createElement("span",null,u)),d&&l().createElement("div",{className:"form-textbox-lefticon"},l().createElement("span",{className:Wa()(["form-icons","form-icons-search15"])})),m&&l().createElement("div",{className:"form-textbox-righticon"},l().createElement("span",{className:Wa()(["icon","icon-check"])})),y&&l().createElement("div",{className:"form-textbox-righticon"},l().createElement("button",mr({type:"button",onClick:y,className:Wa()(["form-icons","form-icons-reset"])},v),E&&l().createElement("span",{className:"visuallyhidden"},E))))},Xo=l().forwardRef(zo),Jo=({classes:e={},children:t,...a},r)=>l().createElement("button",mr({type:"button",className:Wa()("form-textbox-button",e.root),ref:r},a),t),Qo=l().forwardRef(Jo),Zo=({children:e})=>l().createElement("div",{className:"rs-quantity"},e),ei=({quantity:e,productName:t,label:a})=>{const{assets:r}=z();return l().createElement("div",{className:"rs-quantity-text"},a&&l().createElement("span",{"aria-hidden":"true"},a),l().createElement("span",{className:"visuallyhidden"},ln(r.quantityA11y,{productName:t})),l().createElement("span",null,e))},ti=({id:e,productName:t,maxQty:a,maxDropdownQty:r,quantity:n,onChange:o})=>{const i=[...Array(a<=r?a:r+1)],{assets:c}=z(),d=ln(c.quantityA11y,{productName:t}),[m,u]=(0,s.useState)({width:"0rem"}),p=(0,s.useRef)();return(0,s.useEffect)((()=>{if(p.current){const e=p.current.clientWidth/17+"rem";u({width:e})}}),[n,p]),l().createElement("div",{className:"rs-quantity-selector"},l().createElement("div",{className:"rs-quantity-wrapper form-dropdown"},l().createElement("select",{className:"rs-quantity-dropdown form-dropdown-select",id:e,onChange:o,style:m,value:n,"data-autom":"item-quantity-dropdown"},i.map(((e,t)=>{const a=t+1,n=a>r?`${a}+`:a;return l().createElement("option",{key:`option-${a}`,value:a,"aria-label":`${n} ,  ${d}`},n)}))),l().createElement("label",{htmlFor:e,"aria-hidden":"true",className:"visuallyhidden"},n),l().createElement("span",{className:"rs-quantity-icon form-dropdown-chevron","aria-hidden":"true"}),l().createElement("select",{ref:p,"aria-hidden":"true",className:"rs-quantity-hidden-select",onChange:V().noop},l().createElement("option",null,n))))},ai=({label:e})=>{const{viewport:t,assets:a}=z(),r="small"===t,{modKey:n,announceMessage:o}=ll(),[i]=Fa(n),{originalQty:d,name:m,totalPrice:u}=i,p=`${n}.itemQuantity`,[g]=Fa(p),{maxQuantity:h,quantity:y}=g,[E,v]=Ma(p,"wasUpdateQuantityInvoked"),b=Ua(p,"quantity"),f=H(b.runSetEvents,500,{leading:!1}),w=b.bindExists,N=b.properties.enabled,[S]=Ma(Ts,"total"),[C]=Ma(Ds,"emiAmount"),T=C||S,[L,k]=(0,s.useState)(b.value),[I,A]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(I){const e=`${ln(a.quantityUpdateSuccessAlly,g)}, ${ln(a.itemsHeader,{price:T})}`;o(e)}}),[u]);const P=r||h<=10?h:9,[D,O]=(0,s.useState)(b.value<=P);(0,s.useEffect)((()=>{D&&O(b.value<=P),k(b.value)}),[b.value,P]);const x=(0,s.useRef)(null);(0,s.useEffect)((()=>{!D&&x.current&&L!==b.value&&x.current.focus()}),[D]),(0,s.useEffect)((()=>{x.current&&E&&(setTimeout((()=>{x.current.focus()}),0),v(!1))}),[E]);if(Boolean(d)||!w||!N){const t=d||y;return l().createElement(Zo,null,l().createElement(ei,{quantity:t,productName:m,label:e}))}const R=e=>{const t=(e.target.value||String(b.value)).replace(/^0+|\D/g,""),r=t?parseInt(t,10):0,n=r>0?String(r):"";if(k(n),D&&r>P)return r;return b.value!==r&&!(""===n)&&(b.setValue(r),o(a.processing),f()),A(!0),r};if(D){const e=e=>{((e=b.value)=>{O(e<=P)})(R(e))};return l().createElement(Zo,null,l().createElement(ti,{id:b.properties.id,productName:m,maxQty:h,maxDropdownQty:P,quantity:b.value,onChange:e}))}return l().createElement(Zo,null,l().createElement(Xo,{id:b.properties.id,ref:x,classes:{input:"rs-quantity-textbox form-textbox-entered"},label:a.quantityLabel,type:"tel",value:L,maxLength:b.properties.maxLen,onChange:e=>{const t=e.target.value.replace(/^0+|\D/g,"");k(t)},onFocus:e=>{setTimeout((()=>{e.target.select()}),1)},onBlur:e=>{E||R(e)},onKeyDown:e=>{e.keyCode===c.Return&&R(e)}}))},ri=l().memo(ai),ni=({totalPrice:e,totalPriceA11y:t,unitPrice:a,message:r,isRecommendedSystems:n,recSysSubTotal:s,recSysSavings:o,segmentSavingsMessage:i})=>{const{assets:c}=z();return l().createElement(l().Fragment,null,t?l().createElement(l().Fragment,null,l().createElement("span",mr({className:"visuallyhidden"},qa(t))),l().createElement("span",mr({"aria-hidden":"true"},qa(e)))):l().createElement(l().Fragment,null,n&&l().createElement("div",{className:"rs-iteminfo-recommendedsystemstotal"},c.systemstotal),l().createElement("p",qa(e||a))),n&&l().createElement(l().Fragment,null,s&&l().createElement("div",{className:"rs-recommended-systems-price-row"},l().createElement("span",{className:"rs-iteminfo-label"},c.subtotal),l().createElement("span",mr({className:"rs-iteminfo-value"},qa(s)))),o&&l().createElement("div",{className:"rs-recommended-systems-price-row"},l().createElement("span",{className:"rs-iteminfo-label"},c.savingsLabel),l().createElement("span",mr({className:"rs-iteminfo-value"},qa(o))))),i&&l().createElement("div",{className:"rs-iteminfo-segmentsavings"},i),r&&l().createElement("div",mr({className:"rs-iteminfo-pricemessage"},qa(r))))},si=()=>{const{assets:e,viewport:t}=z(),a="small"===t?"16":"18",r=Wa()("waitindicator","waitindicator-inline",`waitindicator${a}-gray`);return l().createElement("div",{role:"img",className:r,"aria-label":e.processing})},li=({itemData:e})=>{const{priceMessage:t,hasCarrierFinancedPromo:a,billedByCarrier:r,promoMessage:n}=e;return t||(a&&r?r:n||"")},oi=({showPriceMessage:e=!0})=>{const{modKey:t}=ll(),[a]=Fa(t),r=xa(`${t}.itemQuantity`),{isLoadingSubmit:n}=r.properties,{totalPrice:s,totalPriceAlly:o,unitPrice:i,purchaseOptionDescription:c,segmentSavingsMessage:d,isRecommendedSystems:m,subTotal:u,savings:p,isValidSystem:g}=a;return m&&!g?null:n?l().createElement(si,null):l().createElement(ni,{totalPrice:s,totalPriceA11y:o,unitPrice:i,purchaseOptionDescription:c,message:e&&li({itemData:a}),isRecommendedSystems:m,recSysSubTotal:u,recSysSavings:p,segmentSavingsMessage:d})},ii=l().memo(oi),ci=({fees:e})=>l().createElement("div",{className:"rs-iteminfo-inlinefee-container"},e.map((({label:e,value:t})=>l().createElement("p",{key:`inline-fee-${e}-${t}`,className:"rs-iteminfo-inlinefee-wrapper"},l().createElement("span",null,e," "),l().createElement("span",{className:"rs-iteminfo-inlinefee-price"},t))))),di=()=>{const{modKey:e}=ll(),[t]=Fa(e),{inlineCopyrightFee:a,inlineRecycleFee:r}=t,{assets:n}=z(),s=[];a&&s.push({label:n.inlineCopyrightFee.trim(),value:a}),r&&s.push({label:n.inlineRecycleFee.trim(),value:r});return Boolean(s.length)&&l().createElement(ci,{fees:s})},mi=l().memo(di),ui=({content:e})=>l().createElement("div",{className:"as-chat rs-chat"},l().createElement("div",mr({className:"as-l-container rs-chat-content"},qa(e)))),pi=(e={})=>{const{chatConfig:t}=window,{fragments:a}=z();let r;return e.acmiChat&&t&&t.chat?r=e.acmiChat:a.chatNow&&t&&t.chat?r=a.chatNow:a.chatNowText&&!t&&(r=a.chatNowText),r?l().createElement(ui,{content:r}):null},gi=l().memo(pi),hi=({content:e,removeButtonLabel:t,cancelButtonLabel:a,overlayControls:r,removeButtonProps:n})=>{const{isVisible:s,close:o}=r;return l().createElement(ss,{className:"rs-item-remove-overlay",footerContent:l().createElement(gi,null),ariaLabel:"item-remove-overlay-header",visible:s,onClose:o,fixedWidth:!0},l().createElement("div",mr({className:"rs-item-remove-overlay-content"},qa(e))),l().createElement("div",{className:"rs-item-remove-overlay-actions"},l().createElement(os,mr({type:"button",className:"rs-item-overlay-button"},n),t),l().createElement("button",{type:"button",className:"as-buttonlink",onClick:()=>{yl({name:"metrics",data:{[gl]:'D=pageName+"||Cart|NoKeep"'}}),o()}},a)))},yi=({index:e,removedItemIndex:t})=>{const{assets:a,fragments:r}=z(),{modKey:n,announceMessage:s}=ll(),[o]=Fa(n),{name:i,isRemovable:c=!0}=o,d=xa(`${n}.phoneDetails`),m=d.modExists,{model:u,capacity:p,finish:g}=d.data,h=xa(`${n}.cartItemDeleteOverlay`),{contentType:y,removeButtonLabel:E,cancelButtonLabel:v,eVar6Metrics:b}=h.data,f=h.modExists,w=il(!1),N=ln(r[`content${y}`]||"",h.data),S=Ha(n,"delete",{deferLoadWithDelete:!0}),{isLoadingSubmit:C}=S.binding.properties,T=m?`${u} ${p} ${g}`:i,L=Ha(`${n}.cartItemDeleteOverlay`,"remove-button"),{isLoadingSubmit:k}=L.binding.properties;return c&&l().createElement(l().Fragment,null,l().createElement(Zl,mr({},!f&&S.props,{onClick:f?()=>{yl({name:"metrics",data:{[ul]:b}}),w.open()}:r=>{s(a.processing),S.props.onClick(r),t.current=e},className:"rs-iteminfo-remove",a11yLabel:T,isLoading:C,"data-autom":"bag-item-remove-button"})),f&&l().createElement(hi,{content:N,removeButtonLabel:E||a.removeCartItem,cancelButtonLabel:v||a.keepCartItem,removeButtonProps:{...L.props,disabled:k,isLoading:k,onClick:r=>{s(a.processing),L.props.onClick(r),t.current=e}},overlayControls:w}))},Ei=l().memo(yi),vi=({a11yLabel:e,isSaving:t,...a})=>{const{assets:r}=z();return t?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray","aria-label":r.processing}):l().createElement("button",mr({type:"button",className:"rs-iteminfo-savelater as-buttonlink"},a),r.saveLaterLabel,l().createElement("span",mr({className:"visuallyhidden"},qa(e))))},bi=({overlayContent:e,overlayControls:t,saveConfirmButtonProps:a,dontSaveButtonProps:r,handleOverlayExited:n})=>{const{isVisible:s,close:o}=t,{assets:i}=z();return l().createElement(ss,{className:"rs-item-saveforlater-overlay",footerContent:l().createElement(gi,null),ariaLabel:"item-saveforlater-overlay-header",visible:s,onClose:o,onExited:n,fixedWidth:!0},l().createElement("h2",{className:"rs-item-saveforlater-overlay-header",id:"item-saveforlater-overlay-header"},i.saveLaterOverlayHeader),l().createElement("div",mr({className:"rs-item-saveforlater-overlay-content"},qa(e))),l().createElement("div",{className:"rs-item-saveforlater-overlay-actions"},l().createElement(os,mr({type:"button",className:"rs-item-overlay-button"},a),i.saveItemsButtonLabel),l().createElement("button",mr({type:"button",className:"as-buttonlink"},r),i.dontSaveButtonLabel)))},fi=()=>{const{modKey:e}=ll(),[t]=Fa(e),{sku:a}=t,r=V().get(window,"asMetrics.takeaway.onProductSaved",V().noop),n=xa(`${e}.savedItemOverlay`),{content:o,dontSaveMetric:i,saveForLaterMetric:c}=n.data,d=n.modExists,m=il(!1),u=Ha(`${e}.savedItemOverlay`,"saveForLaterButton"),p=Ha(e,"saveForLater"),[g,h]=(0,s.useState)(!1),[y,E]=_a(ws),v=Boolean(y.length);(0,s.useEffect)((()=>{v&&m.isVisible&&(h(!0),m.close())}),[v,E]);const{properties:{isLoadingSubmit:b},bindExists:f}=p.binding,w={onClick:()=>{(e=>{yl({name:"metrics",data:{prop3:e}})})(i),m.close()}};return f&&l().createElement(l().Fragment,null,l().createElement(vi,mr({},p.props,{onClick:d?()=>{(e=>{yl({name:"metrics",data:{prop3:e}})})(c),m.open()}:e=>{p.props.onClick(e),r({sku:a})},a11yLabel:t&&t.name,isSaving:b,"data-autom":"bag-item-savelater-button"})),d&&l().createElement(bi,{overlayContent:o,saveConfirmButtonProps:{...u.props,disabled:u?.binding?.properties?.isLoadingSubmit,isLoading:u?.binding?.properties?.isLoadingSubmit},dontSaveButtonProps:w,overlayControls:m,handleOverlayExited:g&&(()=>{h(!1),window.scrollTo(window.pageXOffset,0)})}))},wi=l().memo(fi),Ni=({amount:e})=>{const{assets:t}=z();return l().createElement("div",{className:"row rs-iteminfo-child"},l().createElement("div",{className:"column large-9 small-8 rs-iteminfo-child-details"},l().createElement("h3",{className:"as-icondetails-detail rs-iteminfo-child-title"},t.copyRightFeeLabel)),l().createElement("div",{className:"column large-3 small-4 rs-iteminfo-child-actions"},l().createElement("p",{className:"rs-iteminfo-child-price"},e)))},Si=()=>{const{modKey:e}=ll(),[t]=Ma(e,"exclusiveCopyrightFee");return Boolean(t)&&l().createElement(Ni,{amount:t})},Ci=l().memo(Si),Ti=({promos:e=[],priceDetails:t=[]})=>{const a=Boolean(t.length),r=Boolean(e.length);return l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-savings"},e.map((({label:e,amount:t})=>l().createElement("div",{key:`promo-${e}`,className:"rs-iteminfo-savings-line large-12 small-12 row"},l().createElement("div",{className:"column large-9 small-8 rs-iteminfo-child-details"},l().createElement("div",{className:"rs-iteminfo-savings-title"},e)),l().createElement("div",{className:"column large-3 small-4 rs-iteminfo-child-actions"},l().createElement("p",{className:"rs-iteminfo-savings-price"},t)))))),a&&r&&l().createElement("div",{className:"rs-iteminfo-pricelineitem"},t.map((({label:e,name:t,value:a})=>l().createElement(ol,{key:`price-detail-${e}`,name:t||"itempricedetail",label:e,value:a})))))},Li=()=>{const{modKey:e}=ll(),{assets:t}=z(),[a]=Fa(e),{promos:r,priceDetails:n=[]}=a;if(!r)return null;const s=(({list:e,taxInclusive:t},a)=>e.map((e=>{const{showPrefix:r}=e;let{label:n,amount:s}=e;return r&&(n=t?a.totalSavings:a.savingsLabel),s&&(s=`-${s}`),{label:n,amount:s}})))(r,t);return l().createElement(Ti,{promos:s,priceDetails:n})},ki=l().memo(Li),Ii=({title:e,products:t})=>l().createElement("div",{className:"rs-iteminfo-recommendedsystemschild-wrapper large-7 small-12"},l().createElement("div",{className:"rs-iteminfo-recommendedsystemschild-title"},l().createElement("span",qa(e))),l().createElement("div",{className:"rs-iteminfo-recommendedsystemschild-items"},t.map((({name:e,quantity:t})=>l().createElement("div",{key:e},e," ",t>1?`(${t})`:t))))),Ai=()=>{const{modKey:e}=ll(),[t]=Fa(`${e}.recommendedSystemCartMoreProducts`),{name:a,productsInSystem:r=[]}=t;return Boolean(r.length)&&l().createElement(Ii,{title:a,products:r})},Pi=l().memo(Ai),Di=({isStandardGiftCard:e,showEditBtn:t,editBtnProps:a,editBtnA11y:r,isPhysicalGiftCard:n,fromName:s,fromEmail:o,toName:i,toEmail:c,showMessageHeader:d,messageHeader:m,messageLines:u=[]})=>{const{assets:p}=z();let g=p.giftMsgOnCard;e&&(g=n?p.giftPhysicalMsgOnCard:p.giftEgcMsgOnCard);const h=Boolean(u.length);return l().createElement("div",{className:"rs-item-gift-card-details rs-iteminfo-child"},l().createElement("div",{className:"row rs-iteminfo-child-content"},l().createElement("div",{className:"column as-icondetails large-12 small-12"},l().createElement("div",mr({className:"as-icondetails-icon as-svgicon-container"},qa('<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-giftcard as-svgicon-reduced as-svgicon-giftcardreduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h25v25H0z"/><path d="M19.5 20h-14A2.475 2.475 0 0 1 3 17.5v-10A2.476 2.476 0 0 1 5.5 5h14A2.476 2.476 0 0 1 22 7.5v10a2.475 2.475 0 0 1-2.5 2.5ZM5.5 6A1.532 1.532 0 0 0 4 7.5v10A1.531 1.531 0 0 0 5.5 19h14a1.531 1.531 0 0 0 1.5-1.5v-10A1.532 1.532 0 0 0 19.5 6Z"/><path d="M15.135 10.62a1.592 1.592 0 0 0-.738 1.328 1.516 1.516 0 0 0 .926 1.4 3.24 3.24 0 0 1-.474.989c-.294.423-.617.853-1.084.853s-.587-.279-1.137-.279c-.527 0-.715.287-1.144.287s-.738-.392-1.084-.883a4.32 4.32 0 0 1-.723-2.3 1.861 1.861 0 0 1 1.739-2.068c.467 0 .843.3 1.129.3s.7-.317 1.22-.317a1.607 1.607 0 0 1 1.37.69Zm-2.552-.762c-.038 0-.068-.008-.1-.008 0-.023-.008-.075-.008-.128a1.547 1.547 0 0 1 .384-.943 1.5 1.5 0 0 1 1.016-.528.735.735 0 0 1 .008.136 1.594 1.594 0 0 1-.361.973 1.346 1.346 0 0 1-.939.497Z"/></svg>'))),l().createElement("div",{className:"as-icondetails-detail rs-iteminfo-child-details"},l().createElement("div",{className:"rs-iteminfo-child-title"},l().createElement("span",{className:"rs-iteminfo-child-titletext"},g),t&&l().createElement("div",{className:"rs-iteminfo-child-divider"},l().createElement("button",mr({},a,{type:"button",className:"as-buttonlink","data-autom":"bag-egcdetails-edit"}),l().createElement("span",{"aria-hidden":"true"},p.edit),l().createElement("span",mr({className:"visuallyhidden"},qa(r)))))),n?l().createElement("div",{className:"rs-iteminfo-child-tagline"},!e&&l().createElement("div",{className:"rs-iteminfo-label"},p.egcMessageLabel,":"),e&&h?u.map(((e,t)=>l().createElement("div",{key:`${e}-${t}`},e))):l().createElement("div",{className:"rs-iteminfo-greytext"},p.noneLabel)):l().createElement("div",{className:"rs-iteminfo-egcdetails"},l().createElement("div",{className:"rs-iteminfo-child-tagline"},l().createElement("div",{className:"rs-iteminfo-label"},p.egcToLabel,":"),l().createElement("div",{className:"rs-iteminfo-egcemail"},i," (",c,")")),l().createElement("div",{className:"rs-iteminfo-child-tagline"},l().createElement("div",{className:"rs-iteminfo-label"},p.egcFromLabel,":"),l().createElement("div",{className:"rs-iteminfo-egcemail"},s," (",o,")")),l().createElement("div",{className:"rs-iteminfo-child-tagline"},l().createElement("div",{className:"rs-iteminfo-label"},p.egcMessageLabel,":"),d&&l().createElement("div",{className:"rs-gift-card-msg-header"},m),u.map(((e,t)=>l().createElement("div",{key:`${e}-${t}`,className:"rs-gift-card-msg-line"},e))),e&&!h&&l().createElement("div",{className:"rs-iteminfo-greytext"},p.noneLabel),!e&&!h&&l().createElement("div",{className:"rs-iteminfo-greytext"},p.noneLabel)))))))},Oi=i("hooks/use-forked-ref"),xi=e=>l().useMemo((()=>t=>{e.forEach((e=>{if(e)if(V().isFunction(e))e(t);else try{e.current=t}catch(e){Oi.error(e)}}))}),e),Ri=({id:e,name:t,value:a,label:r,classes:n={},error:s,errorA11y:o,errorAttrs:i={},characterCounter:c,characterCounterA11y:d,children:m,onFocus:u=(()=>{}),onBlur:p=(()=>{}),placeholder:g,autoGrow:h,onChange:y=(()=>{}),"aria-describedby":E="",...v},b)=>{const[f,w]=l().useState(!1),N=Wa()(["form-textbox",n.root,{"is-error":s,"form-textbox-with-counter":c}]),S=Wa()(["form-textarea",n.wrapper,{"form-textbox-entered":Boolean(a),"form-textarea-with-placeholder":g,"form-textarea-autogrow":h,focused:f}]),C=l().useRef(null),T=xi([b,C]),L=l().useId(),k=e||L;return l().createElement("div",{className:N},l().createElement("div",{className:S,onClick:()=>{C.current&&C.current.focus()}},l().createElement("textarea",mr({id:k,name:t,value:a,className:n.input,onFocus:e=>{w(!0),u(e)},onBlur:e=>{w(!1),p(e)},onChange:e=>{y(e),C.current&&h&&(C.current.style.height=`${C.current.scrollHeight}px`)},placeholder:g,"aria-labelledby":`${k}_label`,"aria-describedby":`${k}_error ${E}`,ref:T},v))),l().createElement("span",{id:`${k}_label`,className:Wa()("form-textbox-label",n.label),"aria-hidden":"true"},r),s&&l().createElement(so,{id:`${k}_error`,className:n.error,error:s,errorA11y:o,errorAttrs:i}),c&&l().createElement("div",{className:Wa()("form-textbox-counter-wrapper",n.characterCounter,{"is-error":s})},d&&l().createElement("span",{className:"visuallyhidden"},d),l().createElement("span",{className:"form-textbox-counter"},c)),m)},Fi=l().forwardRef(Ri),Mi=({visible:e,setVisible:t,onEntered:a,onExited:r,id:n,messages:s,isStandardGiftCard:o,isPhysicalGiftCard:i,emailFields:c,showMessageHeader:d,msgHeaderProps:m,msgBodyProps:u,msgBodyA11y:p,giftCardImage:g,saveBtnProps:h})=>{const{viewport:y,assets:E}=z(),v="small"===y;let b=E.egcOverlayHeader;o&&(b=i?E.physicalOverlayHeader:E.giftEgcMsgOnCard);const f=E.egcMessageSubject,w=i?E.giftPhysicalOverlayMsgOptional:E.overlayYourMessageOptional;return l().createElement(ss,{contentAttrs:{className:"rs-gift-card-overlay"},ariaLabel:`${n}-overlayHeading`,visible:e,onClose:()=>t(!1),isFullscreen:v,onEntered:a,onExited:r,disableFocusOut:!0,doublePadding:!0,fixedWidth:!0,mountOnEnter:!0,unmountOnExit:!0},l().createElement("h2",{id:`${n}-overlayHeading`,className:"rs-gift-card-overlay-header"},b),s,l().createElement("div",{className:"rs-gift-card-overlay-section"},c,!o&&d&&l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(Xo,mr({},m,{label:f,"data-autom":"bag-egcoverlay-editMessageHeader","aria-required":!1,required:!1}))),i&&g,l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(Fi,mr({},u,{"data-autom":"bag-egcoverlay-editMessageBody","aria-required":!1,required:!1,label:w,"aria-describedby":`${n}-messagebody`})),l().createElement("span",{"aria-hidden":"true",className:"visuallyhidden",id:`${n}-messagebody`},p)),o&&!i&&g,l().createElement("div",{className:"rs-gift-card-overlay-buttoncontainer"},l().createElement(os,mr({},h,{"aria-label":E.giftCardDetailsA11y,"data-autom":"giftcard-save"}),E.save),l().createElement("div",{className:"rs-gift-card-overlay-cancel"},l().createElement("button",{type:"button",className:"as-buttonlink","data-autom":"giftcard-cancel",onClick:()=>t(!1)},E.cancel)))))},_i=({messageLines:e=[],data:t})=>l().createElement("div",{className:"row rs-gift-card-overlay-imgbox"},l().createElement("div",{className:"rs-gift-card-overlay-msgcontainer large-10 large-centered"},e.map(((e,t)=>l().createElement("div",{key:`${e}-${t}`,className:"rs-gift-card-overlay-msgline"},e)))),l().createElement("div",{className:"rs-gift-card-overlay-imgcontainer large-12"},l().createElement(Il,{className:"rs-gift-card-overlay-img",data:t}))),Bi=({isStandardGiftCard:e,toNameProps:t,toEmailProps:a,fromNameProps:r,fromEmailProps:n})=>{const{assets:s}=z(),o=e?s.egcRecipientName:s.egcRecipient,i=s.egcRecipientEmail,c=e?s.egcSenderName:s.egcYourName,d=e?s.egcSenderEmail:s.egcYourEmail;return l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(Xo,mr({},t,{label:o,"data-autom":"bag-egcoverlay-editToName"}))),l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(Xo,mr({},a,{label:i,"data-autom":"bag-egcoverlay-editToEmail"}))),l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(Xo,mr({},r,{label:c,"data-autom":"bag-egcoverlay-editFromName"}))),l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(Xo,mr({},n,{label:d,"data-autom":"bag-egcoverlay-editFromEmail"}))))},$i=i("rs-checkout/giftcard"),Ui=({showOverlayBtnRef:e})=>{const{assets:t}=z(),{modKey:a,announceMessage:r}=ll(),n=`${a}.egc`,o=Ra(n)?n:`${a}.giftCard`,i=xa(o),[c,d]=Ma(o,Xs,!1),{id:m,isPhysicalGiftCard:u,showProductImage:p,imageData:g={},nameMaxLength:h,emailAddressMaxLength:y,showMessageHeader:E,headerMaxLength:v,messageLines:b=[],wrapMessageUrl:f,giftCardPartNumber:w}=i.data,N=Boolean(p&&g),S={...rr(o,"editToName").props,maxLength:h},C={...rr(o,"editToEmail").props,maxLength:y},T={...rr(o,"editFromName").props,maxLength:h},L={...rr(o,"editFromEmail").props,maxLength:y},k=!u&&l().createElement(Bi,{isStandardGiftCard:N,toNameProps:S,toEmailProps:C,fromNameProps:T,fromEmailProps:L}),I={...rr(o,"editMessageHeader").props,maxLength:v},A=rr(o,"editMessageBody",{debounce:500}),P=N&&i.data.showCharCount,D=A.props.value.length,O=A.props.maxLength,x=O-D,R=ln(t.messageCountA11y,{max:O}),[F,M]=(0,s.useState)([]),_=Aa(),B=H(((e,t)=>{const a=new URLSearchParams(t);ft(e,{method:"POST",headers:_,body:a}).then((e=>{const t=V().get(e,"body.lines",[]);M(t)})).catch((e=>{$i.error(`Network ERROR: ${e}`)}))}),700),$={...A.props,onChange:e=>{A.props.onChange(e),B(f,{input:e.target.value,product:w})},characterCounter:P?`${D}/${O}`:""},[U,K]=(0,s.useState)(""),j=H((e=>K(e)),500);(0,s.useEffect)((()=>{if(P&&x<30){const e=ln(t.remainingLengthLabel,{remainingLength:x});j(e)}}),[P,j,x]),(0,s.useEffect)((()=>{c&&M(b)}),[c]);const G=p&&l().createElement(_i,{messageLines:F,data:{width:g.width,height:g.height,srcSet:{src:g.src,scaleParams1:g.dataScaleParams1}}}),W=Ha(o,"save-button"),{isLoadingSubmit:q}=W.binding.properties,Y={...W.props,disabled:W.props.disabled||q,isLoading:q,onClick:e=>{W.props.onClick(e),r(t.processing)}},[X,J]=_a(o),Q=(0,s.useRef)(),Z=l().createElement(qs,{messages:X,lastUpdated:J,ref:Q});return l().createElement(l().Fragment,null,l().createElement(Mi,{visible:c,setVisible:d,onEntered:()=>{X.length&&Q.current&&Q.current.focus()},onExited:()=>{e.current&&e.current.focus()},id:m,messages:Z,isPhysicalGiftCard:u,isStandardGiftCard:N,emailFields:k,showMessageHeader:E,msgHeaderProps:I,msgBodyProps:$,msgBodyA11y:R,giftCardImage:G,saveBtnProps:Y}),P&&l().createElement(gr,{message:U}))},Ki=l().memo(Ui),Vi=()=>{const{modKey:e,isEditable:t}=ll(),{fragments:a}=z(),[r]=Ma(e,"name"),n=`${e}.egc`,s=Ra(n)?n:`${e}.giftCard`,o=xa(s),{canEdit:i,isPhysicalGiftCard:c,showProductImage:d,imageData:m,fromName:u,fromEmail:p,toName:g,toEmail:h,showMessageHeader:y,messageHeader:E,messageLines:v}=o.data,b=Boolean(d&&m),[,f]=Ma(s,Xs,!1),w=ln(a.editEgcGiftMsgOnCardA11y,{name:r}),N=Ha(s,"show-edit"),S={...N.props,onClick:e=>{N.props.onClick(e),f(!0)}};return l().createElement(l().Fragment,null,l().createElement(Di,{isStandardGiftCard:b,showEditBtn:t&&i,editBtnProps:S,editBtnA11y:w,isPhysicalGiftCard:c,fromName:u,fromEmail:p,toName:g,toEmail:h,showMessageHeader:y,messageHeader:E,messageLines:v}),l().createElement(Ki,{showOverlayBtnRef:S.ref}))},Hi=l().memo(Vi),ji=(0,s.forwardRef)((({sources:e=[],tracks:t=[],fallback:a=l().createElement("p",null,"Video is not supported"),className:r,...n},s)=>l().createElement("video",mr({ref:s,className:Wa()("rc-video",r)},n),e.map((e=>l().createElement("source",{key:e.src,src:e.src,type:e.type}))),t.map((e=>l().createElement("track",{key:e.label,src:e.src,label:e.label,srcLang:e.srclang,default:e.default}))),a)));ji.displayName="Video";const Gi=ji,Wi=e=>e?Math.floor(10*e.volume):0,qi=e=>{const t=Math.floor(e,10),a=Math.floor(t/60/60);return(a>0?`${a.toString().padStart(2,"0")}:`:"")+`${(Math.floor(t/60)-60*a).toString().padStart(2,"0")}:`+(t%60).toString().padStart(2,"0")},Yi=({withTimeUpdate:e}={})=>{const t=(0,s.useRef)(null),[a,r]=(0,s.useState)(!1),[n,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),[g,h]=(0,s.useState)(!1),[y,E]=(0,s.useState)(!1),[v,b]=(0,s.useState)(0),f=(0,s.useRef)(0),[w,N]=(0,s.useState)(!1),[S,C]=(0,s.useState)(!1),[T,L]=(0,s.useState)([]),[k,I]=(0,s.useState)(!1),[A,P]=(0,s.useState)(0),[D,O]=(0,s.useState)(0),[x,R]=(0,s.useState)(!1),[F,M]=(0,s.useState)(!1),[_,B]=(0,s.useState)(!1),$=(0,s.useRef)(!1);async function U(){const e=i("use-video/useVideo/play"),a=t.current;if(a&&(a.paused||a.ended))try{await a.play(),p(!0),N(!0),h(!1)}catch(t){p(!1),e.error(t)}}const K=()=>{const e=t.current;e&&(e.pause(),p(!1))},V=e=>{const a=t.current;if(a){const t=za(e,0,10);0===t?(a.muted=!0,E(!0)):(a.muted=!1,E(!1)),a.volume=t/10,b(t)}},H=()=>{const e=t.current;e&&!y&&(f.current=v,V(0),e.muted=!0,E(!0))},j=()=>{const e=t.current;e&&y&&(V(f.current),e.muted=!1,E(!1))},G=e=>{const a=t.current;a&&e>=0&&e<A&&(a.currentTime=e,O(e))},W=e=>{const a=t.current;if(a){let t=!1;const r=T.map(((r,n)=>{const s=n===e;return a.textTracks[n]&&(a.textTracks[n].mode=s?"showing":"hidden",s&&(t=!0)),r.selected=s,r}));I(t),L(r)}};return(0,s.useEffect)((()=>{const e=t.current;if(e){if(b(Wi(e)),R(e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode),e.textTracks.length>0){const t=[];for(let a=0;a<e.textTracks.length;a+=1)t.push({label:e.textTracks[a].label,language:e.textTracks[a].language,selected:!1});e.textTracks.length>1&&t.push({label:"Off",language:null,selected:!0}),L(t)}const t=e=>M(e&&"available"===e.availability);window.WebKitPlaybackTargetAvailabilityEvent&&(e.addEventListener("webkitplaybacktargetavailabilitychanged",t),setTimeout((()=>{e.removeEventListener("webkitplaybacktargetavailabilitychanged",t)}),1e4))}}),[]),(0,s.useEffect)((()=>{const a=t.current;if(a){const t=()=>{l(!1),r(!0),P(a.duration)},n=()=>{l(!1),r(!0)},s=()=>{$.current=!1,setTimeout((()=>{$.current||l(!0)}),400)},o=()=>{$.current=!0,l(!1)},i=()=>c(!0),d=()=>{h(!0),p(!1)},m=()=>O(a.currentTime),u=()=>C(!!document.fullscreenElement),g=()=>C(!!document.webkitIsFullScreen),y=()=>C(!!document.mozFullScreen),v=()=>C(!!document.msFullscreenElement),f=()=>p(!1),w=()=>p(!0),N=()=>{b(Wi(a)),E(a.muted)},S=()=>B(!0),T=()=>B(!1);return a.addEventListener("loadedmetadata",t),a.addEventListener("loadeddata",n),a.addEventListener("waiting",s),a.addEventListener("playing",o),a.addEventListener("canplay",o),a.addEventListener("canplaythrough",o),a.addEventListener("stalled",i),a.addEventListener("ended",d),e&&a.addEventListener("timeupdate",m),document.addEventListener("fullscreenchange",u),document.addEventListener("webkitfullscreenchange",g),document.addEventListener("mozfullscreenchange",y),document.addEventListener("msfullscreenchange",v),a.addEventListener("pause",f),a.addEventListener("play",w),a.addEventListener("volumechange",N),a.addEventListener("webkitbeginfullscreen",S),a.addEventListener("webkitendfullscreen",T),()=>{a.removeEventListener("loadedmetadata",t),a.removeEventListener("loadeddata",n),a.removeEventListener("waiting",s),a.removeEventListener("playing",o),a.removeEventListener("canplay",o),a.removeEventListener("canplaythrough",o),a.removeEventListener("stalled",i),a.removeEventListener("ended",d),e&&a.removeEventListener("timeupdate",m),document.removeEventListener("fullscreenchange",u),document.removeEventListener("webkitfullscreenchange",g),document.removeEventListener("mozfullscreenchange",y),document.removeEventListener("msfullscreenchange",v),a.removeEventListener("pause",f),a.removeEventListener("play",w),a.removeEventListener("volumechange",N),a.removeEventListener("webkitbeginfullscreen",S),a.removeEventListener("webkitendfullscreen",T)}}}),[e]),(0,s.useEffect)((()=>{!S&&T.length>0&&(()=>{const e=t.current;if(e){let t=-1;[...e.textTracks].forEach(((e,a)=>{"showing"===e.mode&&(t=a)})),W(t)}})()}),[S]),{ref:t,state:{isLoaded:a,isWaiting:n,isStalled:o,isError:d,isPlaying:u,isEnded:g,isMuted:y,volume:v,isTouched:w,isFullscreen:S,duration:A,currentTime:D,durationString:qi(A),currentTimeString:qi(D),currentTimePercent:za(D/A*100,0,100)||0,timeRemainingString:qi(A-D),captions:T,isCaptionsOn:k,isPIPSupported:x,isAirPlaySupported:F,iosFullScreen:_},controls:{handleError:()=>{m(!0)},play:U,pause:K,togglePlay:()=>{u?K():U()},stop:(e=!0)=>{const a=t.current;a&&(K(),a.currentTime=0,e&&h(!1))},mute:H,unmute:j,toggleMute:()=>{t.current&&(y?j():H())},volumeUp:()=>{const e=t.current;e&&v<10&&(e.muted=!1,E(!1),V(v+1))},volumeDown:()=>{t.current&&v>0&&V(v-1)},setVolume:V,toggleFullscreen:()=>{const e=t.current;e&&(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),C(!1)):(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),C(!0)))},setCurrentTime:G,setCurrentTimePercent:e=>{const a=t.current;if(a){const t=e*a.duration/100;G(t)}},setCaption:W,toggleAirPlay:()=>{const e=t.current;e&&F&&window.WebKitPlaybackTargetAvailabilityEvent&&e.webkitShowPlaybackTargetPicker()},togglePIP:()=>{const e=t.current;e&&x&&e.webkitSetPresentationMode&&e.webkitSetPresentationMode("picture-in-picture"===e.webkitPresentationMode?"inline":"picture-in-picture")}}}},zi=Object.freeze({OPEN_OVERLAY:"OPEN_OVERLAY",CLOSE_OVERLAY:"CLOSE_OVERLAY",SET_PART:"SET_PART",SET_DATA:"SET_DATA",FETCH_META_START:"FETCH_META_START",FETCH_META_SUCCESS:"FETCH_META_SUCCESS",FETCH_META_ERROR:"FETCH_META_ERROR",CLEAR_META_DATA:"CLEAR_META_DATA",UPDATE_SELECTION_DATA:"UPDATE_SELECTION_DATA",SAVE_SELECTION:"SAVE_SELECTION",CLEAR_SELECTION:"CLEAR_SELECTION",UPDATE_SELECTION_INBUNDLE:"UPDATE_SELECTION_INBUNDLE",HIDE_CONTENT:"HIDE_CONTENT",HIDE_VIDEO:"HIDE_VIDEO",UPDATE_VIDEO_STATE:"UPDATE_VIDEO_STATE"}),Xi=(Object.freeze({INLINE:"inline",TILE:"tile",SHOW_ONPAGE:"showonpage"}),Object.freeze({line1Key:"line1",line2Key:"line2",message1Key:"msg.0",message2Key:"msg.1",message3Key:"msg.2",message4Key:"msg.3",fontKey:"f"})),Ji=Object.freeze({TEXT:"text",EMOJI:"select",EMOJI_TEXT:"text+select",MULTI_SELECT:"multiselect"}),Qi=e=>"emoji"===e||"char1"===e,Zi=e=>(e?e.filter((e=>!V().isEmpty(e)&&e.messages&&e.messages.length>0)):[]).length>0,ec=(e,t)=>V().isEmpty(t)?e:e.map((e=>e?[...e].map((e=>{const a=t.find((t=>t.value===e));return a?` ${a.a11yText} `:e})).join(""):e)),tc=e=>e.every((e=>e?.engravedLines?.every((e=>!e.value&&!e.font)))),ac=(e,t="default",a,r=[])=>{const n={...e},{engravingDetails:s,slotName:l}=n,o=V().get(l,"engravingData.fonts.items",[]),{engravingPageData:i,engravingVideo:c,baseProduct:d}=s,m=V().get(c,"src");if(!i||!i.engravingMessageBox)return{};const{bundleQuantity:u=0,engravingMessageBox:p}=i;n.isBundleEngraving=u>0,n.isMultiFontEngraving=o.length>0;const g=(({bundleQuantity:e=1,bundles:t=[]})=>Array(e).fill({}).map(((e,a)=>({...e,...t[a]?t[a]:{},key:a}))))(i),h=[];r.forEach((e=>{const{key:t,messages:a=[],font:r=""}=e;u>0?a.forEach(((e,a)=>{V().set(h,`${a}.engravedLines.${t}`,{value:e||"",font:r})})):a.forEach(((e,t)=>{V().set(h,`0.engravedLines.${t}`,{value:e||"",font:r})}))})),h.length>0&&(i.engravedItems=h),n.savedSelection=[],i.bundles=g.map((e=>{const{key:a,bundleDisplayValue:r}=e,s=V().cloneDeep(p),l=((e,t)=>V().get(e,`${t}.engravedLines`,[]).map((({value:e})=>e)))(i.engravedItems,a);let c=[...l];const d=((e=[],t)=>{const a=V().uniqBy(V().get(e,`${t}.engravedLines`,[]),"font"),{font:r=""}=a[0]||{};return r})(i.engravedItems,a),m=((e,t)=>{const a=V().find(e,(e=>e.value.fontName===t));return V().get(a,"value.fontFamily")||""})(o,d),u=V().get(s,"inputTypes.sections[0].fields",[]);n.savedSelection[a]={key:a,bundleDisplayValue:r,messages:l,font:d,fontFamily:m,messageLines:u.length,errors:null},s.lines=u.map(((e,t)=>(V().set(e,"0.value",Qi(d)?"":l[t]),{...e[0]}))),s.selectedEmoji=Qi(d)?l[0]:"";const g=((e,t)=>e.map(((e,a)=>({fontIdx:a,open:t?e.value.fontName===t:0===a,...e.value}))))(o,d),h=A().isHandheldPhone?35:40;return s.emojis={},g.forEach((e=>{const{fontDisplayType:a,fontLabel:r="Emoji",defaultValue:n}=e,o=r,i="text"!==a?[...n]:[],d=Math.ceil(i.length/h),m=Array(d).fill({}).map(((e,a)=>({legend:d>1?`${o} ${a+1}`:o,key:`${t}_selectedEmoji`,group:a,options:i.slice(a*h,a*h+h)})));s.emojis[e.fontName]=m,"text"!==a&&(c=ec(l,n))})),n.savedSelection[a].messagesA11y=c,s.groupKey=t,i[`engravingMessageBox${a}`]={...s},i[`fonts${a}`]=g,e})),n.selection=Object.assign([],n.savedSelection);const y=V().get(l,"engravingData.additionalData.namedAssets",V().get(l,"data.map.namedAssets",{}));return n.slotName={...y},{data:n,showVideo:!!m&&(V().isEmpty(i.engravedItems)||tc(i.engravedItems)),metricsConfig:{...a,baseProduct:d}}},rc=(e,t)=>{switch(t.type){case zi.SET_PART:return{...e,overlayPart:t.payload};case zi.SET_DATA:{const{engravingData:a,id:r,metricsConfig:n}=t.payload;return{...e,...ac(a,r,n)}}case zi.OPEN_OVERLAY:return{...e,overlayVisible:!0,showContent:!0,loadOverlay:!0};case zi.CLOSE_OVERLAY:return{...e,overlayVisible:!1};case zi.FETCH_META_START:return{...e,isFetching:!0,isFetched:!1,error:null};case zi.FETCH_META_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:{}};case zi.FETCH_META_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,...t.payload};case zi.UPDATE_SELECTION_DATA:{const{key:a,...r}=t.payload,n=((e,{key:t,isEmojiFont:a,fieldVals:r})=>{const n=V().cloneDeep(e);return a?V().set(n,`engravingPageData.engravingMessageBox${t}.selectedEmoji`,r):Object.keys(r).forEach(((e,a)=>{V().set(n,`engravingPageData.engravingMessageBox${t}.lines[${a}].value`,r[e])})),n})(e.data.engravingDetails,t.payload),s=V().get(e,"data.selection",[]).map((e=>e.key===a?{...e,...V().omit(r,["fieldVals","isEmojiFont"])}:{...e}));return{...e,data:{...e.data,selection:s,engravingDetails:n}}}case zi.UPDATE_SELECTION_INBUNDLE:{const t=(({engravingDetails:e,savedSelection:t=[]})=>{if(V().isEmpty(e))return{};const a=V().cloneDeep(e);return a.engravingPageData.bundles.forEach((({key:e})=>{const r=V().get(a,`engravingPageData.engravingMessageBox${e}.lines`,[]);if(V().isEmpty(t))V().set(a,`engravingPageData.engravingMessageBox${e}.selectedEmoji`,""),r.forEach(((t,r)=>{V().set(a,`engravingPageData.engravingMessageBox${e}.lines[${r}].value`,"")}));else{const n=V().get(t,`${e}.font`,""),s=V().get(t,`${e}.messages`,[]);Qi(n)?(V().set(a,`engravingPageData.engravingMessageBox${e}.selectedEmoji`,s[0]),r.forEach(((t,r)=>{V().set(a,`engravingPageData.engravingMessageBox${e}.lines[${r}].value`,"")}))):(r.forEach(((t,r)=>{V().set(a,`engravingPageData.engravingMessageBox${e}.lines[${r}].value`,s[r])})),V().set(a,`engravingPageData.engravingMessageBox${e}.selectedEmoji`,""))}})),a})(e.data);return{...e,data:{...e.data,engravingDetails:t}}}case zi.SAVE_SELECTION:return{...e,data:{...e.data,savedSelection:t.payload}};case zi.CLEAR_SELECTION:{const t=V().cloneDeep(V().get(e,"data.savedSelection",[]));return{...e,data:{...e.data,selection:t}}}case zi.REMOVE_SELECTION:return{...e,data:{...e.data,selection:t.payload,savedSelection:t.payload}};case zi.HIDE_CONTENT:return{...e,showContent:!1};case zi.HIDE_VIDEO:return{...e,showVideo:!1};case zi.UPDATE_VIDEO_STATE:{const a=V().get(e,"data.engravingDetails.engravingVideo.src");return{...e,showVideo:!!a&&!t.payload}}default:return e}};const nc=class{constructor({session:e=!1,expires:t,expiryInMs:a}){this.wantSession=e,this.expires=t,this.expiryInMs=a,this.isSupported=this.isSupported()}isSupported(){try{const e=this.wantSession?window.sessionStorage:window.localStorage;if(!e)return!1;e.setItem("T3sT3iNg","123"),e.removeItem("T3sT3iNg")}catch(e){return!1}return!0}getFutureDate(){const e=new Date,t=this.expiryInMs?1:864e5,a="number"==typeof this.expires?this.expires:parseInt(this.expires,10);return e.getTime()+a*t}keys(){return this.wantSession?Object.keys(sessionStorage):Object.keys(localStorage)}get(e){if(!this.isSupported)return null;if(this.wantSession){try{const t=new Date,a=JSON.parse(sessionStorage.getItem(e));if(a.timestamp>t.getTime())return a.value;sessionStorage.removeItem(e)}catch(t){sessionStorage.removeItem(e)}return null}return localStorage.getItem(e)}set(e,t){if(this.isSupported)if(this.wantSession){const a=JSON.stringify({value:t,timestamp:this.getFutureDate()});sessionStorage.setItem(e,a)}else localStorage.setItem(e,t)}remove(e){this.isSupported&&(this.wantSession?sessionStorage.removeItem(e):localStorage.removeItem(e))}};window.apple=window.apple||{};const sc=["product","step","add","remove","msg.0","msg.1","msg.2","msg.3","f.0","f.1","f.2","f.3","acc_msg.0","acc_msg.1","not-engraved","acc-not-engraved","msg","skipAttach","cppart","purchaseOption"];const lc=class{constructor(e,t={}){this.defaultOptions=t,this.keyData={version:this.defaultOptions.version||V().get(window,"apple.buyFlowVersionId","v9"),path:this.defaultOptions.path||V().get(window,"apple.buyFlowPath",window.location.pathname),step:this.defaultOptions.step||this.getStep(),input:""},this.createKey=(({version:e,path:t,step:a})=>r=>`${e}--${t}--${a}--${r}`)(this.keyData),this.createKeyWithStep=(({version:e,path:t})=>(a,r)=>`${e}--${t}--${a}--${r}`)(this.keyData),this.sessionKey=(({version:e,path:t})=>`${e}--${t}`)(this.keyData),this.storage=new nc(e)}set(e,t){this.storage.set(this.createKey(e),t)}get(e){return this.storage.get(this.createKey(e))}remove(e){this.storage.remove(this.createKey(e))}setEntryForStep(e,t,a){this.storage.set(this.createKeyWithStep(e,t),a)}getEntryForStep(e,t){return this.storage.get(this.createKeyWithStep(e,t))}removeEntryForStep(e,t){this.storage.remove(this.createKeyWithStep(e,t))}getEntries({pathSelector:e,excludePath:t}){const a=new RegExp(`${this.keyData.path}--`),r=new RegExp(e),n=a.test(e);return this.storage.keys().reduce(((e,s)=>{const l=r.test(s),o=a.test(s);if(n?l:l&&o){e[t?s.slice(s.lastIndexOf("--")+2):s]=this.storage.get(s)}return e}),{})}removeEntries({pathSelector:e=this.getStep()}){Object.keys(this.getEntries({pathSelector:e,excludePath:!1})).forEach((e=>this.storage.remove(e)))}getEntriesForStep({step:e=this.getStep(),excludePath:t}){return this.getEntries({pathSelector:e,excludePath:t})}removeEntriesForStep({step:e=this.getStep()}){this.removeEntries({pathSelector:e})}getEntriesForSession({excludePath:e}){return this.getEntries({pathSelector:this.sessionKey,excludePath:e})}removeEntriesForSession(){this.removeEntries({pathSelector:this.sessionKey})}setValues(e,t=(()=>!0)){Object.keys(e).forEach((a=>{t(a)&&this.set(a,e[a])}))}getStep(e="select"){if(this.defaultOptions.step)return this.defaultOptions.step;const t=new URLSearchParams(window.location.search.slice(1)).get("step")||e,a=document.querySelector('input[name="step"]');return a&&a.value||t}setBuyflowComplete(e){this.storage.set(this.createKeyWithStep("buyFlow","complete"),e)}getBuyflowComplete(){return this.storage.get(this.createKeyWithStep("buyFlow","complete"))}removeBuyflowComplete(){this.storage.remove(this.createKeyWithStep("buyFlow","complete"))}removeAllFromSessionComplete(e){const t=V().get(window,"apple.buyFlowFirstStep"),a=V().get(window,"apple.buyFlowIndependentStep"),r=this.getStep(),n=document.querySelector('input[name="bfe"]');!t&&!a&&r!==e||n||this.removeEntriesForSession()}getHiddenInputsFromQueryString(){const e={};return new URLSearchParams(window.location.search.slice(1)).forEach(((t,a)=>{"none"!==t&&"true"!==t&&(e[a]=t)})),e}getHiddenInputs(e={}){const{allowlist:t=[],appendToDefaultList:a=!1,noFilter:r=!1}=e;let n={};if(this.storage.isSupported||(n={...n,lsd:!0,...this.getHiddenInputsFromQueryString()}),n={...n,...this.getEntriesForSession({excludePath:!0})},r)return n;const s=a?V().union(sc,t):sc;return V().pickBy(n,((e,t)=>s.includes(t)))}persist(e,t,a){e&&t&&Object.keys(t).forEach((r=>this.addHiddenInput(e,r,t[r],a)))}setSubmitButtonValue(e){const t=e.querySelector('button[type="submit"]');t&&this.addHiddenInput(e,t.getAttribute("name"),t.getAttribute("value"))}addHiddenInput(e,t,a,r){const n=e.querySelector(`input[name="${t}"]`);if(n)r&&n.setAttribute("value",a);else{const r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",t),r.setAttribute("value",a),e.appendChild(r)}}},oc=V().get(window,"asBuyFlow.storageConfig.genericPath",""),ic=`${V().get(window,"apple.buyFlowPath",window.location.pathname)}/generic`,cc=V().get(window,"apple.version",""),dc=V().get(window,"apple.storageConfig.path",""),mc=(new lc({session:!0,expires:window.apple.buyFlowExpiry||36e5,expiryInMs:!0,hash:!0},{version:cc,path:dc||oc||ic,step:"generic"}),new lc({session:!0,expires:V().get(window,"apple.buyFlowExpiry",36e5),expiryInMs:!0})),uc=e=>{const t=e||mc.getEntriesForStep({excludePath:!0}),{engravedPart:a,engravingOption:r}=t;r&&(mc.remove("engravingOption"),mc.remove("productToEngrave"),a&&(mc.remove("engravedPart"),Object.keys(t).filter((e=>0===e.indexOf("msg.")||0===e.indexOf("f."))).forEach((e=>{mc.remove(e)}))))},pc=(e=[],t)=>{e.forEach((({key:e=0,font:a="",messages:r=[],messageLines:n=0})=>{if(!t&&r.length)a&&mc.set(`f.${e}`,a),r.forEach(((t,a)=>{mc.set(`msg.${e+a}`,t)}));else{mc.remove(`f.${e}`);for(let t=0;t<n;t+=1)mc.remove(`msg.${e+t}`)}}))},gc=({engravedData:e,engravingOption:t})=>{const{isEngraved:a,part:r,engravedPart:n,selection:s}=e;a?(mc.set("engravedPart",n),mc.set("productToEngrave",r),pc(s)):(mc.remove("engravedPart"),mc.remove("productToEngrave"),pc(s,!0)),mc.set("engravingOption",t)},hc=(e={},t,a,r)=>{if(window.asMetrics){const{baseProduct:n,pageName:s,disableFireMetrics:l=!1}=e,o=V().get(window,"s.pageName",""),i=" engraving ",c=` ${s} - ${n}`;let d=null;const m={eVar5:[o," ",c,i," finish engraving"].join("|")};if(t)d="typeface | bundle";else{const e=V().get(a,"0.font");if(e)if("mixed"===e){const{hasEmoji:e,hasText:t}=((e,t)=>{let a=!1,r=!1;const n=V().get(e,"fonts0",[]).find((e=>"mixed"===e.fontName)),s=V().get(n,"defaultValue",[]).reduce(((e,t)=>e+t.value),""),l=V().get(t,"0.messages",[]).join("");return V().some(l,(e=>(s.includes(e)?a=!0:r=!0,a&&r))),{hasEmoji:a,hasText:r}})(r,a);d=e&&t?"typeface | mixed":e?"typeface | emoji":t?"typeface | text":""}else d=Qi(e)?"typeface | emoji":"typeface | text";else d="text"}if(!l){const e=V().get(window.asMetrics,"sendUserInteraction",(()=>""));d&&(m.eVar6=[o," ",c,i,` ${d}`].join("|")),e({name:"metrics",data:m})}return{engravedType:d}}return{}},yc=(e={},t)=>{const a=V().get(e,"disableFireMetrics",!1);if(window.asMetrics&&t&&("no engraving"!==t||!a)){const a=V().get(window,"s.pageName",""),{baseProduct:r,pageName:n}=e;window.asMetrics.fireMicroEvent({eVar:"eVar5",page:a,part:"engraving",feature:`${n} - ${r}`,action:t})}},Ec=({bootstrap:e,part:t,id:a,defaultEngravingOption:r,disableStorage:n,engravingData:s,storageData:o,removeEngraving:d,onCancel:m=(()=>{}),onChange:u=(()=>{})})=>{if(!e)return{};const{metaUrl:p,assets:g,additionalParam:h,engravingSelectorKey:y,metricsConfig:E={},collapseAddEngraving:v=!0}=e,[b,f]=l().useReducer(rc,{overlayVisible:!1,loadOverlay:!1,showContent:!1,showVideo:!1,overlayPart:"",data:{},assets:g}),[w,N]=l().useState(!!r),[S,C]=l().useState(r),[T,L]=l().useState(0),k=l().useRef(null),I=l().useRef(null),A=l().useRef(!1),P=l().useRef(!!r),D=l().useRef(!1),{ref:O}=Yi(),x=js(t);l().useEffect((()=>{if(t){const e=o||(n?{}:(()=>{const e=mc.getEntriesForStep({excludePath:!0}),t=[],{productToEngrave:a,engravedPart:r,engravingOption:n}=e;if(r){const a=[],r={key:0};Object.keys(e).filter((e=>0===e.indexOf("msg.")||0===e.indexOf("f."))).forEach((t=>{const[n,s]=t.split("."),l=e[t],o=Number(s);"msg"===n?a[o]=l:r.font=l})),t.push({...r,messages:a,messageLines:a.length})}return{selection:t,engravedPart:r,engravingOption:n,productToEngrave:a}})());f({type:zi.SET_PART,payload:t}),(({metaUrl:e,part:t,additionalParam:a,id:r,storageValue:n,assets:s,metricsConfig:l})=>o=>{const c=i("reducer/loadEngravingData"),d=nn(e,{product:t,...a}),m=V().get(s,"errorMessage","");o({type:zi.FETCH_META_START});const u=ft(d);return u.then((e=>{const{engravingDetails:a,errorMessage:s}=V().get(e,"body",{});if(a&&!s){const s=a.variantEngravable||n.productToEngrave===t?n.selection:[];o({type:zi.FETCH_META_SUCCESS,payload:ac(e.body,r,l,s)})}else o({type:zi.FETCH_META_ERROR,error:{isResponseError:!0,message:s||m}})})).catch((e=>{c.error(e),o({type:zi.FETCH_META_ERROR,error:{isNetworkError:!0,errorInfo:e,message:m}})})),u})({metaUrl:p,part:t,additionalParam:h,id:a,storageValue:e,assets:g,metricsConfig:E})(f).then((a=>{n&&V().isEmpty(e)?(N(!1),C(null),P.current=!1):((e,a)=>{const r=V().get(e,"body.engravingDetails",{}),s=V().get(r,"engravingPageData.bundleQuantity",0),l=!V().isEmpty(a.selection),o=r.variantEngravable&&(l||"noEngraving"===S);if(a.productToEngrave===t||o){if(N(!!a.engravingOption),C(a.engravingOption),P.current=l,r.variantEngravable){const e={engravedData:{selection:a.selection,isEngraved:l,isBundleEngraving:s>0,part:t,engravedPart:l?r.productEngrave:null,variantEngravable:r.variantEngravable},engravingOption:a.engravingOption,param:y?{[y]:!0}:{},partChange:!0};n||gc(e),u(e)}}else x&&x!==t?(uc(),N(!1),C(null),P.current=!1):a.engravingOption&&C(a.engravingOption)})(a,e)}))}}),[t]),l().useEffect((()=>{s&&f({type:zi.SET_DATA,payload:{engravingData:s,id:a,metricsConfig:E}})}),[s]),l().useEffect((()=>{Zi(b.data.savedSelection)&&(N(!0),C("addEngraving"))}),[b.data.savedSelection]),l().useEffect((()=>{if(d){const e=V().get(window,"asMetrics.isBFEMetricsEnabled",!1);N(!!r),C(r);const t=V().cloneDeep(V().get(b,"data.selection",[])),a=V().get(b,"data.engravingDetails.product"),s=V().get(b,"data.isBundleEngraving",!1),l=t.map((e=>V().omit(e,["messages","font","fontFamily"])));P.current&&!e&&yc(b.metricsConfig,"remove engraving"),P.current=!!r,f({type:zi.REMOVE_SELECTION,payload:l}),f({type:zi.UPDATE_VIDEO_STATE,payload:!!r});const o={engravedData:{selection:l,isEngraved:!1,isBundleEngraving:s,part:a,engravedPart:null},engravingOption:r,param:{}};n||uc(),u(o)}}),[d,r]);const R=()=>{f({type:zi.HIDE_CONTENT}),f({type:zi.UPDATE_VIDEO_STATE,payload:P.current}),A.current&&f({type:zi.CLEAR_SELECTION})},F=e=>{const t=i("useEngraving/validateEngravingMsg"),{bundleKey:a,bundleDisplayValue:r="",fields:n=[],fieldVals:s,font:l="",fontIdx:o=0,fontFamily:c="",emojiRemoved:d}=e,{engravingValidationUrl:m,product:u}=V().get(b,"data.engravingDetails",{}),p={};let g={};const y=l?{[Xi.fontKey]:l}:{},E=Qi(l),v={key:a,bundleDisplayValue:r,font:l,fontFamily:c,fieldVals:s,isEmojiFont:E};if(E){const e=V().get(Xi,"message1Key","");g[e]=s}else g=n.reduce(((e,t,a)=>{const r=V().get(Xi,`message${a+1}Key`,""),n=V().trim(s[t.name]);return e[r]=n,e}),{});const w=Object.keys(g).map((e=>g[e]));if(w.filter((e=>e&&""!==e)).length>0){const e=nn(m,{product:u,...g,...y,...h});ft(e).then((e=>{const{content:t}=e.body;if(t.hasErrors)Object.keys(t.errors).forEach((e=>{p[Xi[`line${parseInt(e,10)+1}Key`]]=t.errors[e]})),f({type:zi.UPDATE_SELECTION_DATA,payload:{...v,errors:p}});else{const e=V().get(b,`data.engravingDetails.engravingPageData.fonts${a}.${o}.defaultValue`,[]),t=ec(w,e);f({type:zi.UPDATE_SELECTION_DATA,payload:{...v,messages:w,messagesA11y:t,errors:null}})}})).catch((e=>{t.error(e),f({type:zi.UPDATE_SELECTION_DATA,payload:{...v,errors:null,hasError:!0}})}))}else f({type:zi.UPDATE_SELECTION_DATA,payload:{...v,font:l,fontFamily:c,messages:[],messagesA11y:[],errors:null}});d&&I.current&&setTimeout((()=>I.current.focus()),200)},M=V().debounce((e=>{F(e)}),200);return{...b,focusRef:k,videoRef:O,saveButtonRef:I,selectedOpt:S,completed:w,handleAddEngravingKeyDown:()=>{D.current=!0},handleEngravingChange:e=>{const t=V().cloneDeep(V().get(b,"data.selection",[])),{product:a,productEngrave:r,engravingPageData:s,variantEngravable:l}=V().get(b,"data.engravingDetails",{}),o=V().get(b,"data.isBundleEngraving",!1);let i={},c=!1;if(e)c=Zi(t),c?i=hc(b.metricsConfig,o,t,s):yc(b.metricsConfig,"no engraving"),f({type:zi.SAVE_SELECTION,payload:t}),f({type:zi.CLOSE_OVERLAY,payload:!1}),setTimeout((()=>R()),400);else{if(!v){const e=t.map((e=>V().omit(e,["messages","font","fontFamily"])));f({type:zi.REMOVE_SELECTION,payload:e})}yc(b.metricsConfig,"no engraving")}const d=c?"addEngraving":"noEngraving";N(!0),C(d),P.current=c;const m={engravedData:{selection:t,isEngraved:c,isBundleEngraving:o,part:a,engravedPart:c?r:null,variantEngravable:l,metricsData:i},engravingOption:d,param:y?{[y]:!0}:{}};n||gc(m),u(m),k.current&&v&&setTimeout((()=>k.current.focus()),200)},handleOpenOverlay:(e,t=0,a)=>{(!a||D.current||a.keyCode!==c.Return&&a.keyCode!==c.Space)&&(D.current=!1,yc(b.metricsConfig,e),A.current=!1,L(t),f({type:zi.UPDATE_SELECTION_INBUNDLE}),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&f({type:zi.HIDE_VIDEO}),f({type:zi.OPEN_OVERLAY}))},handleCloseOverlay:()=>{yc(b.metricsConfig,"close engraving"),A.current=!0,f({type:zi.CLOSE_OVERLAY}),setTimeout((()=>R()),400)},removeEngrave:e=>{const t=V().cloneDeep(V().get(b,"data.selection",[])),{product:a,productEngrave:r}=V().get(b,"data.engravingDetails",{}),s=V().get(b,"data.isBundleEngraving",!1),l=t.map((t=>t.key===e?V().omit(t,["messages","font","fontFamily"]):t)),o=Zi(l),i=o?"addEngraving":"noEngraving";s&&(N(!0),C(i)),P.current=o;V().get(window,"asMetrics.isBFEMetricsEnabled",!1)||yc(b.metricsConfig,"remove engraving"),f({type:zi.REMOVE_SELECTION,payload:l});const c={engravedData:{selection:l,isEngraved:o,isBundleEngraving:s,part:a,engravedPart:o?r:null},engravingOption:i,param:y?{[y]:!0}:{}};n||gc(c),u(c),k.current&&setTimeout((()=>k.current.focus()),200)},cancelEngrave:()=>{yc(b.metricsConfig,"cancel engraving"),A.current=!0,f({type:zi.CLOSE_OVERLAY}),setTimeout((()=>R()),400),m()},onOverlayHidden:R,validateEngravingMsg:F,onAddingMessage:M,selectedBundleKey:T,onVideoEnded:()=>{f({type:zi.HIDE_VIDEO})}}},vc=l().createContext({}),bc=()=>{const e=l().useContext(vc);if(!e)throw new Error("Gallery compound components cannot be rendered outside the Gallery component");return e},fc=({onClick:e=(()=>{}),children:t,disabled:a,passFocusOnDisabled:r=!0,hideFromVOWhenDisabled:n=!0,classes:s={},...o})=>{const{target:i,handlePrev:c,hasPrev:d,distFromStart:m,isMoving:u,nextButtonRef:p,prevButtonRef:g,a11y:h}=bc(),y=l().useRef(!1),E=a||!d;return l().useEffect((()=>{!d&&y.current&&r&&p.current&&p.current.focus(),y.current=!1}),[d]),l().createElement("button",mr({type:"button",className:Wa()(s.root,{[s.disabled||""]:E}),ref:g,onClick:u?void 0:t=>{c(),e(t,i-1),m<=1&&(y.current=!0)},disabled:E,"aria-hidden":n&&E,"aria-label":V().get(h,"previous","Previous")},o),t)},wc=({onClick:e=(()=>{}),children:t,disabled:a,passFocusOnDisabled:r=!0,hideFromVOWhenDisabled:n=!0,classes:s={},...o})=>{const{target:i,handleNext:c,hasNext:d,distFromEnd:m,isMoving:u,nextButtonRef:p,prevButtonRef:g,a11y:h}=bc(),y=l().useRef(!1),E=a||!d;return l().useEffect((()=>{!d&&y.current&&r&&g.current&&g.current.focus(),y.current=!1}),[d]),l().createElement("button",mr({type:"button",className:Wa()(s.root,{[s.disabled||""]:E}),ref:p,onClick:u?void 0:t=>{c(),e(t,i+1),m<=1&&(y.current=!0)},disabled:E,"aria-hidden":n&&E,"aria-label":V().get(h,"next","Next")},o),t)},Nc=({items:e,renderDot:t=(e=>e),getButtonProps:a=(()=>({})),classes:r={},children:n,...s})=>{const{id:o,target:i,handleChange:d,handleNext:m,handlePrev:u,hasNext:p,hasPrev:g,isRTL:h,isMoving:y,registerTabList:E,a11y:v}=bc();l().useLayoutEffect((()=>(E(!0),()=>{E(!1)})),[]);const b=l().useRef([]),f=e=>t=>{b.current&&(b.current[e]=t)},w=e=>{const t=b.current?b.current[e]:null;t&&t.focus()};return l().createElement("ul",mr({className:Wa()(r.root),role:"tablist"},s),e.map(((n,s)=>{const E=t=>{t.preventDefault(),g&&!y&&(u(),w((s-1)%e.length))},b=t=>{t.preventDefault(),p&&!y&&(m(),w((s+1)%e.length))},N=i===s,S=V().get(v,`items[${s}]`,`Item ${s+1}`);return l().createElement("li",{key:s,role:"presentation",className:Wa()(r.item)},l().createElement("button",mr({id:`${o}-tab-item-${s}`,ref:f(s),type:"button",role:"tab","aria-controls":`${o}-gallery-item-${s}`,"aria-selected":N,"aria-label":S,tabIndex:N?0:-1,onClick:()=>{y||d(s)},onKeyDown:e=>{switch(e.keyCode){case c.ArrowUp:E(e);break;case c.ArrowLeft:h?b(e):E(e);break;case c.ArrowDown:b(e);break;case c.ArrowRight:h?E(e):b(e)}},className:Wa()(r.button,{[r.active||""]:N})},a(n,s)),t(n,s)))})),n)},Sc="Left",Cc="Right",Tc="Up",Lc="Down",kc={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Ic={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Ac="mousemove",Pc="mouseup",Dc="touchend",Oc="touchmove",xc="touchstart";function Rc(e,t){if(0===t)return e;const a=Math.PI/180*t;return[e[0]*Math.cos(a)+e[1]*Math.sin(a),e[1]*Math.cos(a)-e[0]*Math.sin(a)]}function Fc(e,t){const a=t=>{const a="touches"in t;a&&t.touches.length>1||e(((e,n)=>{n.trackMouse&&!a&&(document.addEventListener(Ac,r),document.addEventListener(Pc,s));const{clientX:l,clientY:o}=a?t.touches[0]:t,i=Rc([l,o],n.rotationAngle);return n.onTouchStartOrOnMouseDown&&n.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),Ic),{initial:i.slice(),xy:i,start:t.timeStamp||0})}))},r=t=>{e(((e,a)=>{const r="touches"in t;if(r&&t.touches.length>1)return e;if(t.timeStamp-e.start>a.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;const{clientX:n,clientY:s}=r?t.touches[0]:t,[l,o]=Rc([n,s],a.rotationAngle),i=l-e.xy[0],c=o-e.xy[1],d=Math.abs(i),m=Math.abs(c),u=(t.timeStamp||0)-e.start,p=Math.sqrt(d*d+m*m)/(u||1),g=[i/(u||1),c/(u||1)],h=function(e,t,a,r){return e>t?a>0?Cc:Sc:r>0?Lc:Tc}(d,m,i,c),y="number"==typeof a.delta?a.delta:a.delta[h.toLowerCase()]||kc.delta;if(d<y&&m<y&&!e.swiping)return e;const E={absX:d,absY:m,deltaX:i,deltaY:c,dir:h,event:t,first:e.first,initial:e.initial,velocity:p,vxvy:g};E.first&&a.onSwipeStart&&a.onSwipeStart(E),a.onSwiping&&a.onSwiping(E);let v=!1;return(a.onSwiping||a.onSwiped||a[`onSwiped${h}`])&&(v=!0),v&&a.preventScrollOnSwipe&&a.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:E,swiping:!0})}))},n=t=>{e(((e,a)=>{let r;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<a.swipeDuration){r=Object.assign(Object.assign({},e.eventData),{event:t}),a.onSwiped&&a.onSwiped(r);const n=a[`onSwiped${r.dir}`];n&&n(r)}}else a.onTap&&a.onTap({event:t});return a.onTouchEndOrOnMouseUp&&a.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),Ic),{eventData:r})}))},s=e=>{document.removeEventListener(Ac,r),document.removeEventListener(Pc,s),n(e)},l=(e,t)=>{let s=()=>{};if(e&&e.addEventListener){const l=Object.assign(Object.assign({},kc.touchEventOptions),t.touchEventOptions),o=[[xc,a,l],[Oc,r,Object.assign(Object.assign({},l),t.preventScrollOnSwipe?{passive:!1}:{})],[Dc,n,l]];o.forEach((([t,a,r])=>e.addEventListener(t,a,r))),s=()=>o.forEach((([t,a])=>e.removeEventListener(t,a)))}return s},o={ref:t=>{null!==t&&e(((e,a)=>{if(e.el===t)return e;const r={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),r.cleanUpTouch=void 0),a.trackTouch&&t&&(r.cleanUpTouch=l(t,a)),Object.assign(Object.assign(Object.assign({},e),{el:t}),r)}))}};return t.trackMouse&&(o.onMouseDown=a),[o,l]}function Mc(e){const{trackMouse:t}=e,a=s.useRef(Object.assign({},Ic)),r=s.useRef(Object.assign({},kc)),n=s.useRef(Object.assign({},r.current));let l;for(l in n.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},kc),e),kc)void 0===r.current[l]&&(r.current[l]=kc[l]);const[o,i]=s.useMemo((()=>Fc((e=>a.current=e(a.current,r.current)),{trackMouse:t})),[t]);return a.current=function(e,t,a,r){return t.trackTouch&&e.el?e.cleanUpTouch?t.preventScrollOnSwipe!==a.preventScrollOnSwipe||t.touchEventOptions.passive!==a.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)}):(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0}))}(a.current,r.current,n.current,i),o}const _c=(e,t)=>{const[a,r]=l().useState(Boolean(e)),n=l().useRef(null),s=l().useRef(null),o=()=>{n.current&&(window.clearInterval(n.current),n.current=null)},i=()=>{s.current&&(window.clearTimeout(s.current),s.current=null)},c=l().useRef(t);c.current=t,l().useEffect((()=>{r(Boolean(e))}),[e]),l().useEffect((()=>{if(e&&a&&!n.current){const t=V().get(e,"transitionDelay",5e3),a=V().get(e,"step",1);n.current=window.setInterval((()=>{c.current(a)}),t)}return e&&a||o(),()=>{o(),i()}}),[e,a]);const d=()=>{a&&e&&(i(),r(!1))},m=()=>{if(!a&&e){const t=V().get(e,"restartDelay",5e3);s.current||(s.current=window.setTimeout((()=>{r(!0),s.current=null}),t))}};return{pauseAutoScroll:d,resumeAutoScroll:m,autoScrollHandlers:e?{onMouseEnter:d,onMouseLeave:e=>{e.currentTarget.contains(document.activeElement)||m()},onFocus:d,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||m()}}:{}}},Bc=Object.freeze({GOTO:"goto",COMPLETED:"completed",SWIPED:"swiped",DRAG:"drag"}),$c=(e,t)=>{switch(t.type){case Bc.GOTO:return{...e,target:t.payload.target};case Bc.COMPLETED:return{...e,swiped:void 0,active:t.payload.active};case Bc.DRAG:return{...e,isDragging:t.payload};case Bc.SWIPED:return{...e,swiped:!0};default:return e}},Uc=(e,t,a,r)=>{const n=(s=t.current)?s.offsetWidth/3:0;var s;Math.abs(e.deltaX)>=n&&r(a)},Kc=(e,t)=>{const a=e%t;return a<0?t+a:a},Vc=(e,t)=>"smooth"===t?`transform ${e}ms ease`:`transform ${e}ms cubic-bezier(0.68, -0.55, 0.265, 1.55)`,Hc=(e,t,a,r,n,s,l,o)=>{const i=Math.random()/100,c={transform:"translateX(0px)",width:100*Math.floor(t.length/a)+"%",insetInlineStart:`-${100*n/a}%`,transition:"none"};if(r){const e=Math.abs(s-n),r=100/a*((e>t.length?1:-1)*Math.sign(s-n))*e/Math.floor(t.length/a);return{...c,transition:Vc(l,"smooth"),transform:`translateX(calc(${o?-1:1} * ${r+i}%))`}}return c},jc=({id:e,items:t,index:a,defaultIndex:r=0,onChange:n=(()=>{}),infinite:s,radius:o,fade:i=!1,itemsInView:c=1,transitionDuration:d=400,autoScroll:m,swipableProps:u={},onSwiped:p=(()=>{}),a11y:g={label:"Gallery",previous:"Previous",next:"Next",items:[]},dir:h,...y})=>{const E=l().useId(),v=e||E,b=l().useMemo((()=>"rtl"===h||"rtl"===Xa()),[h]),{current:f}=l().useRef("number"==typeof a),w=l().useRef(null),N=l().useRef(null),S=l().useRef(null),C=l().useRef(null),[T,L]=l().useState(!1),[k,I]=l().useReducer($c,{isDragging:!1,target:f?a:r,active:f?a:r}),A=l().useRef(f?a:r),P=l().useRef(f?a:r),[D,O]=[k.active,f?a:k.target];l().useEffect((()=>{const e=setTimeout((()=>{I({type:Bc.COMPLETED,payload:{active:O}}),A.current=O}),d);return()=>clearTimeout(e)}),[f,O,d]);const x=(e={})=>{const a=(r=t.length,(k.active-1+r)%r);var r;P.current=k.active-1,f||I({type:Bc.GOTO,payload:{target:a}}),e.swiped&&I({type:Bc.SWIPED}),n(a)},R=(e={})=>{const a=(r=t.length,(k.active+1)%r);var r;P.current=k.active+1,f||I({type:Bc.GOTO,payload:{target:a}}),e.swiped&&I({type:Bc.SWIPED}),n(a)},F=e=>{e>0?R({swiped:!0}):x({swiped:!0})},{pauseAutoScroll:M,resumeAutoScroll:_,autoScrollHandlers:B}=_c(m,(e=>{const a=s?D+e:Kc(D+e,t.length);P.current=a,f||I({type:Bc.GOTO,payload:{target:a}}),n(a,"autoScroll")})),$=s||O<t.length-1,U=s||O>0,K=s?1/0:O-0,V=s?1/0:t.length-1-O,H=l().useRef(),j=e=>{$&&(Uc(e,w,1,F),p("left",Kc(O+1,t.length)))},G=e=>{U&&(Uc(e,w,-1,F),p("right",Kc(O-1,t.length)))},W=Mc({onSwiping(e){if(D===O&&("Left"===e.dir||"Right"===e.dir)){e.event.preventDefault();let t=e.deltaX;if("Left"===e.dir&&!$||"Right"===e.dir&&!U){const a=Math.abs(e.deltaX),r=a-a*a/(2*w.current.offsetWidth);t=Math.sign(e.deltaX)*r}N.current&&(N.current.style.transform=`translateX(${t}px)`,N.current.style.transition="none",k.isDragging||(I({type:Bc.DRAG,payload:!0}),M()))}},onSwiped(){N.current&&(N.current.style.transform="translateX(0px)",N.current.style.transition=Vc(d,"elastic"),window.clearTimeout(H.current),H.current=window.setTimeout((()=>{I({type:Bc.DRAG,payload:!1}),_()}),d))},onSwipedLeft:b?G:j,onSwipedRight:b?j:G,offset:0,touchEventOptions:{passive:!1},...u}),{isMoving:q,pageStart:Y,pageEnd:z,activeOffset:X,targetOffset:J}=(({active:e,target:t,items:a,radius:r,infinite:n,actualActiveIndex:s,actualTargetIndex:l})=>{const o=e!==t,i=a.length,c=Math.floor(i/2),d=Math.min(r||i,n?c:i),m=e-d,u=e+d,p=n?m:Math.max(m,0),g=n?u:Math.min(u,i-1),h=n?Kc(e-t,i):0,y=n?Kc(t-e,i):0;let E=h<y?-h:y;return h===y&&(E=Math.sign(l-s)*h),{isMoving:o,pageStart:p,pageEnd:g,activeOffset:n?d:e-p,targetOffset:n?d+E:t-p}})({active:D,target:O,items:t,radius:o,infinite:s,actualActiveIndex:A.current,actualTargetIndex:P.current}),Q=i&&!k.swiped||o&&Math.abs(O-D)>o,Z=q&&Q,ee=Z?[{content:t[Kc(D,t.length)],index:Kc(D,t.length)},{content:t[Kc(O,t.length)],index:Kc(O,t.length)}]:((e,t,a)=>{const r=[];for(let n=t;n<=a;n+=1){const t=Kc(n,e.length);r.push({content:e[t],index:t})}return r})(t,Y,z);return{id:v,pages:ee,active:Kc(D,t.length),target:Kc(O,t.length),swipeableHandlers:W,autoScrollHandlers:B,style:Z?{width:"200%"}:Hc(0,ee,c,q,X,J,d,b),hasNext:$,hasPrev:U,distFromStart:K,distFromEnd:V,isMoving:q,isFading:Z,isDragging:k.isDragging,handleChange:e=>{P.current=e,f||I({type:Bc.GOTO,payload:{target:e}}),n(e)},handlePrev:x,handleNext:R,isRTL:b,isTabList:T,registerTabList:L,rootRef:w,scrollerRef:e=>{W.ref(e),N.current=e},prevButtonRef:S,nextButtonRef:C,a11y:g,wrapperAttrs:y}},Gc=({renderItem:e=(e=>e),classes:t={},childrenBefore:a,children:r,...n})=>{const s=jc(n),{id:o,active:i,target:c,pages:d,swipeableHandlers:m,autoScrollHandlers:u,style:p,isMoving:g,isFading:h,isDragging:y,rootRef:E,scrollerRef:v,a11y:b,wrapperAttrs:f}=s,w=d.length>1?{role:"group","aria-label":V().get(b,"label","Gallery")}:{};return l().createElement("div",mr({className:t.root},w,f,u),l().createElement(vc.Provider,{value:s},a,l().createElement("div",{id:o,className:t.gallery,"data-core-gallery":!0,"data-core-gallery-fade":h,ref:E},l().createElement("div",mr({"data-core-gallery-scroller":!0,className:t.scroller,style:p},m,{ref:v}),d.map((({content:t,index:a})=>e(t,a,{isActive:a===i,isTarget:a===c,isMoving:g,isDragging:y}))))),r))},Wc=({index:e,children:t,addDisabled:a=!0,...r})=>{const{id:n,target:s,isTabList:o,a11y:i}=bc(),c=ds(a&&s!==e),d=`${n}-gallery-item-${e}`,m={role:"tabpanel","aria-label":V().get(i,`items[${e}]`,`Item ${e+1}`)};return l().createElement("div",mr({id:d,"data-core-gallery-item":!0,"aria-hidden":s!==e,ref:c},o?m:{},r),t)},qc=({className:e,...t})=>l().createElement(Wc,mr({className:Wa()(e,"rc-inline-gallery-item")},t)),Yc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">\n<path d="M21.559,12.062 L15.618,17.984 L21.5221,23.944 C22.105,24.533 22.1021,25.482 21.5131,26.065 C21.2211,26.355 20.8391,26.4999987 20.4571,26.4999987 C20.0711,26.4999987 19.6851,26.352 19.3921,26.056 L12.4351,19.034 C11.8531,18.446 11.8551,17.4999987 12.4411,16.916 L19.4411,9.938 C20.0261,9.353 20.9781,9.354 21.5621,9.941 C22.1471,10.528 22.1451,11.478 21.5591,12.062 L21.559,12.062 Z" />\n</svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">\n<path d="M23.5587,16.916 C24.1447,17.4999987 24.1467,18.446 23.5647,19.034 L16.6077,26.056 C16.3147,26.352 15.9287,26.4999987 15.5427,26.4999987 C15.1607,26.4999987 14.7787,26.355 14.4867,26.065 C13.8977,25.482 13.8947,24.533 14.4777,23.944 L20.3818,17.984 L14.4408,12.062 C13.8548,11.478 13.8528,10.5279 14.4378,9.941 C15.0218,9.354 15.9738,9.353 16.5588,9.938 L23.5588,16.916 L23.5587,16.916 Z" />\n</svg>',Xc=({elevated:e,hover:t,supernav:a,dir:r,visuallyHidden:n,hideWhenDisabled:s=!1,previousProps:o={},nextProps:i={},classes:c={}})=>{const d=l().useMemo((()=>"rtl"===r||"rtl"===document?.documentElement?.getAttribute("dir")),[r]);return l().createElement("div",{className:Wa()(c.root,"rc-gallery-paddlenav","paddlenav","paddlenav-alpha",{"paddlenav-elevated":e,"paddlenav-super":a,"with-paddlenav-onhover":t,"with-paddlenav-visuallyhidden":n})},l().createElement(fc,mr({classes:{root:Wa()(c.previous,"paddlenav-arrow","paddlenav-arrow-previous"),disabled:Wa()({visuallyhidden:s})},"data-autom":"paddlenav-previous"},qa(d?zc:Yc),o)),l().createElement(wc,mr({classes:{root:Wa()(c.next,"paddlenav-arrow","paddlenav-arrow-next"),disabled:Wa()({visuallyhidden:s})},"data-autom":"paddlenav-next"},qa(d?Yc:zc),i)))},Jc={HEADLINE_STANDALONE:"typography-headline-standalone",HEADLINE_SUPER:"typography-headline-super",HEADLINE_ELEVATED:"typography-headline-elevated",HEADLINE:"typography-headline",HEADLINE_REDUCED:"typography-headline-reduced",QUOTE:"typography-quote",QUOTE_REDUCED:"typography-quote-reduced",CALLOUT:"typography-callout",MANIFESTO:"typography-manifesto",EYEBROW_SUPER:"typography-eyebrow-super",EYEBROW_ELEVATED:"typography-eyebrow-elevated",EYEBROW:"typography-eyebrow",EYEBROW_REDUCED:"typography-eyebrow-reduced",LABEL:"typography-label",INTRO_ELEVATED:"typography-intro-elevated",INTRO:"typography-intro",TOUT:"typography-tout",BODY:"typography-body",BODY_TIGHT:"typography-body-tight",BODY_REDUCED:"typography-body-reduced",BODY_REDUCED_TIGHT:"typography-body-reduced-tight",CAPTION:"typography-caption"},Qc=({renderDot:e=(()=>{}),classes:t={},...a},r)=>l().createElement("div",{className:Wa()(t.root,"rc-gallery-dotnav","dotnav"),ref:r},l().createElement(Nc,mr({classes:{root:Wa()("dotnav-items"),item:Wa()(t.dot,"dotnav-item"),button:Wa()("rc-gallery-dotnav-button","dotnav-link",Jc.BODY),active:Wa()(t.active,"current")},renderDot:e},a))),Zc=l().forwardRef(Qc),ed=window.asMetrics,td=(e,t)=>({items:e.map(((e,a)=>`${t.item} ${a+1}`)),previous:t.previous,next:t.next}),ad=({items:e,dotnav:t,dotnavProps:a={},paddlenav:r,paddlenavProps:n={},metrics:s,peek:o,onChange:i=(()=>{}),classes:c={},a11y:d,dir:m,...u})=>{const{viewport:p,assets:g}=z(),h={...td(e,g),...d},y=r||"small"!==p&&!1!==r&&e.length>1,E=t||!1!==t,{root:v,image:b,...f}=c;return l().createElement(Gc,mr({items:e,classes:{root:Wa()("rc-inline-gallery",v,{"rc-inline-gallery-peek":o,"rc-inline-gallery-autoscroll":u.autoScroll}),...f},onChange:(t,a)=>{i(t),s&&"autoScroll"!==a&&((e,t,a)=>{ed&&ed.gallery&&ed.gallery.view&&window.asMetrics.gallery.view({area:e.slot||"",name:e.part||"",current:t+1,total:a,legacy:!0})})(s,t,e.length)},renderItem:(e,t)=>l().createElement(qc,{key:t,index:t},l().createElement(Il,{className:Wa()("rc-inline-gallery-image",b),data:e})),childrenBefore:E&&l().createElement(Zc,mr({items:e,getButtonProps:(e,t)=>({"data-autom":`gallery-dot-nav-${t}`})},a)),a11y:h,dir:m},u),y&&l().createElement(Xc,mr({elevated:!0,dir:m},n)))},rd=l().createContext({}),nd=()=>{const e=l().useContext(rd);if(!e)throw new Error("Tabs compound components cannot be rendered outside the Tabs component");return e},sd=({rootTag:e="div",index:t,defaultIndex:a=0,handleChange:r=(()=>{}),count:n=1,id:o,children:i,...c})=>{const d=l().useId(),m=o||d,u=(0,s.useRef)(!1),{current:p}=(0,s.useRef)(void 0!==t),[g,h]=(0,s.useState)(a),[y,E]=(0,s.useState)(!1),[v,b]=(0,s.useState)(""),f={isControlled:p,uid:m,doFocus:u,count:n,selectedIndex:p?t:g,handleSelect:e=>{u.current=!0,p||h(e),r(e)},height:v,adjustHeight:(e,t)=>{const a=e?e.getBoundingClientRect().height:"";"onEnter"===t?E(!0):"onEntering"===t?b(`${a}px`):"onEntered"===t&&setTimeout((()=>E(!1)),50)}};return l().createElement(e,mr({"data-core-tabs":"","data-core-tabs-transition-done":y?void 0:"",id:m},c),l().createElement(rd.Provider,{value:f},i))},ld=({rootTag:e="div",children:t,...a})=>l().createElement(e,mr({"data-core-tabs-tablist":"",role:"tablist"},a),t),od=l().forwardRef((({index:e,onClick:t=(()=>{}),onKeyDown:a=(()=>{}),children:r,...n},o)=>{const{selectedIndex:i,uid:d,doFocus:m,handleSelect:u,count:p}=nd(),g=(0,s.useRef)(null),h=Ya(g,o),y=i===e;(0,s.useEffect)((()=>{y&&g.current&&m.current&&(m.current=!1,g.current.focus())}),[y,m]);return l().createElement("button",mr({type:"button","data-core-tabs-tab":"","data-core-tabs-tab-selected":y?"":void 0,role:"tab",id:`tab-${d}-${e}`,tabIndex:y?0:-1,"aria-selected":y,"aria-controls":`panel-${d}-${e}`,onClick:a=>{u(e),t(a)},onKeyDown:t=>{((e,t,a,r)=>{let n;const s=a-1;switch(e.keyCode){case c.ArrowRight:return e.preventDefault(),n=t<s?t+1:0,r(n);case c.ArrowLeft:return e.preventDefault(),n=t>0?t-1:s,r(n);default:;}})(t,e,p,u),a(t)},ref:h},n),r)}));od.displayName="Tab";const id=({rootTag:e="div",children:t,...a})=>{const{height:r}=nd();return l().createElement(e,mr({"data-core-tabs-panels":"",style:{height:r}},a),t)},cd=({index:e,onEnter:t=V().noop,onEntering:a=V().noop,onEntered:r=V().noop,children:n,...s})=>{const{uid:o,selectedIndex:i,adjustHeight:c}=nd(),d=i===e;return l().createElement(Gr,mr({"data-core-tabs-panel":"","data-core-tabs-panel-selected":d?"":void 0,in:d,id:`panel-${o}-${e}`,role:"tabpanel","aria-labelledby":`tab-${o}-${e}`,onEnter:e=>{c(e,"onEnter"),t(e)},onEntering:e=>{c(e,"onEntering"),a(e)},onEntered:e=>{c(e,"onEntered"),r(e)},appear:!0},s),n)},dd=({items:e,keys:t=[],attrs:a=[],classes:r={root:"",items:"",item:"",link:""},className:n,...s})=>{const{selectedIndex:o}=nd();return l().createElement("div",{className:Wa()("tabnav",n,r.root)},l().createElement(ld,mr({rootTag:"ul",className:Wa()("tabnav-items",r.items)},s),e.map(((e,n)=>{const s=V().get(a,`[${n}]`,{});return l().createElement("li",{className:Wa()("tabnav-item",r.item),role:"none",key:t[n]||e},l().createElement(od,mr({index:n,className:Wa()("tabnav-link",r.link,{current:o===n})},s),e))}))))},md=({items:e,attrs:t=[],compact:a,classes:r={root:"",item:"",button:""},className:n,prevChildItems:s,nextChildItems:o,...i})=>{const{selectedIndex:c}=nd();return l().createElement(ld,mr({rootTag:"ul",className:Wa()("as-buttongroup",n,r.root,{"as-buttongroup-compact":a})},i),e.map(((e,a)=>{const n=V().get(t,`[${a}]`,{});return l().createElement("li",{className:Wa()("as-buttongroup-item",r.item),role:"presentation",key:e},s&&V().get(s,`[${a}]`),l().createElement(od,mr({index:a,className:Wa()("as-buttongroup-button",r.button,{"as-buttongroup-selected":c===a})},n),e),o&&V().get(o,`[${a}]`))})))},ud=sd,pd=l().createContext({}),gd=()=>{const e=l().useContext(pd);if(!e)throw new Error("Scroller compound components cannot be rendered outside the Scroller component");return e},hd=(e,t,a,r)=>{if(!e.current)return{};const n=e.current,s=n.scrollLeft,l=n.offsetWidth,o=n.scrollWidth-l,i=n.children[0],c=Array.from(i.children).map((e=>{const t=((e,t)=>{if(t&&e._cachedComputedStyle)return e._cachedComputedStyle;const a=window.getComputedStyle(e);return e._cachedComputedStyle=a,a})(e,a),n=t.scrollSnapAlign||"",s=t.scrollSnapCoordinate||"",o=e.offsetLeft+e.offsetWidth-l;return 0===n.indexOf("end")||0===s.indexOf("100%")?r?-1*e.offsetLeft:o:0===n.indexOf("center")||0===s.indexOf("50%")?(r?-1:1)*(e.offsetLeft+e.offsetWidth/2-l/2):r?-1*o:e.offsetLeft})).filter((e=>e<o));c.push(o);const d=c.map(((e,t)=>({x:e,i:t,d:Math.abs(e-(r?-1:1)*s)}))),m=d.reduce(((e,t)=>t.d<e.d?t:e),d[0]),u=d.length,p=void 0!==t?t:m.i,g=Math.min(Math.max(p,0),u-1),h=d[g].x>0?d[g].x:0;return{index:g,newX:(r?-1:1)*h,count:u,deltaX:(r?-1:1)*s-h,scrollX:s,maxX:o}},yd=(e,t)=>{let a,r;switch(t.type){case"SCROLL_INDEX":return a=hd(t.scrollerRef,t.targetIndex,t.cacheComputedStyle,t.isRTL),t.handleChange&&e.index!==a.index&&t.handleChange(a.index),{...e,index:a.index};case"SCROLL_TO":return a=hd(t.scrollerRef,t.targetIndex,t.cacheComputedStyle,t.isRTL),t.handleChange&&e.index!==a.index&&t.handleChange(a.index),{...e,...a};case"SCROLL_UPDATE":return a=hd(t.scrollerRef,e.index,t.cacheComputedStyle,t.isRTL),r=t.scrollerRef.current,r&&(r.style.overflowX="hidden",r.scrollLeft=a.newX,r.style.overflowX="scroll"),{...e,...a,deltaX:null};case"SCROLL_END":return e.deltaX||e.fixScroll?(r=t.scrollerRef.current,r&&(r.scrollLeft=e.newX),{...e,fixScroll:/transitionEnd$/i.test(t.eventType),deltaX:null}):e;case"MOUSE_DOWN":return{...e,mouseDown:!0};case"MOUSE_UP":return{...e,mouseDown:!1};default:return e}},Ed=({index:e=0,handleChange:t,updateIndexWhileScrolling:a=!0,cacheComputedStyle:r=!0,dir:n})=>{const{touch:l}=A(),[o,i]=(0,s.useReducer)(yd,{mouseDown:!1}),{count:c,fixScroll:d}=o,m=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)(!1),g=(0,s.useRef)(0),h=(0,s.useRef)(0),y=(0,s.useRef)(0),E=(0,s.useMemo)((()=>"rtl"===n||"rtl"===Xa()),[n]);(0,s.useLayoutEffect)((()=>{c||i({type:"SCROLL_TO",scrollerRef:m,handleChange:t,targetIndex:e,cacheComputedStyle:r,isRTL:E})}),[]),(0,s.useLayoutEffect)((()=>{d&&i({type:"SCROLL_END",scrollerRef:m})}),[d]),(0,s.useEffect)((()=>{e!==o.index&&i({type:"SCROLL_TO",scrollerRef:m,handleChange:null,targetIndex:e,cacheComputedStyle:r,isRTL:E})}),[e]),(0,s.useEffect)((()=>{h.current=o.maxX}),[o.maxX]);const v=()=>{p.current=!0,setTimeout((()=>{i({type:"SCROLL_UPDATE",scrollerRef:m}),p.current=!1}),100)},b=H(v,300);U("orientationchange",v),U("resize",(()=>{l||b()}));const f=()=>{p.current||i({type:"SCROLL_INDEX",scrollerRef:m,handleChange:t,cacheComputedStyle:r,isRTL:E})},w=H(f,100);return{state:o,scrollerRef:m,scrollerPlatterRef:u,handleScroll:a?f:w,handleScrollUpdate:v,handleTransition:e=>{e.target===u.current&&i({type:"SCROLL_END",scrollerRef:m,eventType:e&&e.type})},slideTo:e=>{o.deltaX||i({type:"SCROLL_TO",scrollerRef:m,handleChange:t,targetIndex:e,cacheComputedStyle:r,isRTL:E})},handleMouseDown:e=>{const t=m.current;o.deltaX||p.current||!t||(i({type:"MOUSE_DOWN"}),g.current=e.pageX-t.offsetLeft,y.current=t.scrollLeft)},handleMouseUp:()=>{p.current||(i({type:"SCROLL_TO",scrollerRef:m,handleChange:t,cacheComputedStyle:r,isRTL:E}),setTimeout((()=>{i({type:"MOUSE_UP"})}),500))},handleMouseMove:e=>{const t=m.current;if(!p.current&&!o.deltaX&&o.mouseDown&&t){e.preventDefault();const a=1.25*(e.pageX-t.offsetLeft-g.current);t.scrollLeft=y.current-a}},handleMouseWheel:e=>{const t=m.current;if(!t)return;const a=t.scrollLeft,{deltaX:r}=e,n=(a+r)*(E?-1:1);("hidden"===t.style.overflowX||n<0||n>h.current)&&e.preventDefault()},isRTL:E}},vd=({index:e,defaultIndex:t=0,dragEnabled:a=!1,preventNavigation:r=!1,customSnap:n=!1,snapDelay:o=150,updateIndexWhileScrolling:i,cacheComputedStyle:c,handleChange:d=(()=>{}),dir:m,children:u})=>{const{current:p}=(0,s.useRef)(void 0!==e),[g,h]=(0,s.useState)(t),y=Ed({index:p?e:g,handleChange:e=>p?setTimeout((()=>d(e)),10):h(e),updateIndexWhileScrolling:i,cacheComputedStyle:c,dir:m});return l().createElement(pd.Provider,{value:{...y,preventNavigation:r,customSnap:n,snapDelay:o,dragEnabled:a}},u)},bd=({platterAttrs:e={},scrollerItemAttrs:t,children:a,updateOnWidthChange:r,...n})=>{const{state:o,scrollerRef:i,scrollerPlatterRef:c,handleScroll:d,handleScrollUpdate:m,handleTransition:u,preventNavigation:p,customSnap:g,snapDelay:h,slideTo:y,dragEnabled:E,handleMouseDown:v,handleMouseUp:b,handleMouseMove:f,handleMouseWheel:w,isRTL:N}=gd(),S=(0,s.useRef)(0),C=H((()=>y()),h),{touch:T,os:L}=A(),k={"data-core-scroller":"","data-core-scroller-customsnap":g||o.mouseDown?"":void 0,onScroll:o.deltaX?void 0:()=>{d(),g&&C()},onTransitionEnd:u,style:{overflowX:o.deltaX&&!o.mouseDown?"hidden":"scroll"},onMouseDown:E?v:void 0,onMouseUp:E?b:void 0,onMouseLeave:E?b:void 0,onMouseMove:E?f:void 0},I=Math.random()/10,P={ref:c,"data-core-scroller-platter":"","data-core-scroller-transition":o.deltaX?"":void 0,style:o.deltaX?{transform:`translate(${(N?-1*o.deltaX:o.deltaX)+I}px)`}:{},...e};return(0,s.useEffect)((()=>{const e=e=>w(e),{current:t}=i,a=p&&"macosx"===L&&!T;return t&&a&&t.addEventListener("wheel",e,{passive:!1}),()=>{t&&a&&t.removeEventListener("wheel",e)}}),[]),(0,s.useEffect)((()=>{if(r&&i.current){const{scrollWidth:e}=i.current;S.current&&S.current!==e&&m(),S.current=e}}),[a]),l().createElement("div",mr({ref:i},k,n),l().createElement("div",P,l().Children.map(a,(e=>l().createElement("div",mr({"data-core-scroller-item":""},t),e)))))},fd=({inputId:e,classes:t={},children:a,...r})=>l().createElement("label",mr({htmlFor:e,className:Wa()("form-selector-label",t.root)},r),a),wd=({id:e,name:t,value:a,className:r,classes:n={},children:s,render:o,circle:i,tall:c,tag:d="li",tagAttrs:m,withAriaLabeledBy:u=!1,disabled:p,nonEditable:g,...h},y)=>{const E=l().useId(),v=e||E,b=u?`${v}_label`:void 0;return l().createElement(d,mr({className:Wa()(r,"form-selector",n.root,{"form-selector-circle":i,"form-selector-tall":c,"form-selector-non-editable":g})},m),l().createElement("input",mr({className:Wa()("form-selector-input",n.input),name:t,id:v,type:"radio",value:a,"aria-labelledby":b,ref:y,disabled:p||g},h)),"function"==typeof o?o({inputId:v,SelectorLabel:e=>l().createElement(fd,mr({inputId:v,id:b},e))}):l().createElement(fd,{id:b,classes:{root:n.label},inputId:v},s))},Nd=l().forwardRef(wd),Sd=({id:e,className:t,children:a,withGutters:r=!1,tag:n="ul",...s})=>l().createElement(n,mr({id:e,className:Wa()(t,r?"form-selector-group-withgutters":"form-selector-group")},s),a),Cd=(e,t)=>({onChange:a=>{t||e(a.target.value,a)},onClick:a=>{const r=document.documentElement.classList.contains(P);t&&!r&&e(a.target.value,a)},onKeyUp:a=>{const r=a.keyCode===c.Return||a.keyCode===c.Space;t&&r&&e(a.target.value,a)}}),Td=({items:e,groupKey:t,groupLabel:a,id:r,dotNavFocus:n})=>{const{state:s,slideTo:o}=gd(),i=l().useRef([]),d=e=>t=>{i.current&&(i.current[e]=t)},m=e=>{const t=i.current?i.current[e]:null;t&&t.focus()};return l().useEffect((()=>{if(n){const e=i.current?i.current[s.index]:null;e&&e.focus()}}),[n]),e.length>1?l().createElement("div",{className:"rf-engraving-dotnav dotnav"},l().createElement("ul",{role:"tablist",className:"dotnav-items"},e.map(((e,n)=>{const i=s.index===n;return l().createElement("li",{className:"dotnav-item",role:"presentation",key:`dotnav_${t}_${e.group}`},l().createElement("button",{ref:d(n),type:"button",role:"tab","data-core-scroller-current":i?"":void 0,className:Wa()("dotnav-link",{current:i}),"aria-controls":`${r}-tab-item-${n}`,"aria-label":`${a} ${n+1}`,"aria-selected":i,tabIndex:i?0:-1,"data-autom":`scrollerButton${n}`,"data-trigger-id":`engraving-emoji-scroller-${n}`,onClick:()=>{o(n)},onKeyDown:e=>{switch(e.keyCode){case c.ArrowUp:case c.ArrowLeft:e.preventDefault(),s.deltaX||(o(n-1),m(n-1));break;case c.ArrowDown:case c.ArrowRight:e.preventDefault(),s.deltaX||(o(n+1),m(n+1))}}}))})))):""},Ld=({bundleKey:e,groupKey:t,items:a,defaultIndex:r=0,fontIdx:n=0,selected:s="",groupLabel:o,dotNavFocus:i=!1,onHandleChange:c=(()=>{})})=>{const d=l().useId(),[m,u]=l().useState(r);return l().createElement("div",{className:"rf-engraving-scroller"},l().createElement(vd,{index:m,"aria-label":o,handleChange:u},l().createElement(Td,{items:a,groupKey:t,groupLabel:o,id:d,dotNavFocus:i}),l().createElement("div",{className:"rf-engraving-scroller-crop"},l().createElement(bd,{className:"rf-engraving-scroller-item",platterAttrs:{className:"rf-engraving-scroller-platter"}},a.map(((a,r)=>{const{group:i,options:u=[]}=a,p=r===m;return l().createElement("div",{key:`${t}_${i}`,id:`${d}-tab-item-${r}`,className:"rf-engraving-scroller-itemcontent",role:"tabpanel","data-autom":`engravingEmojis${i}`,"aria-label":p?`${o} ${r+1}`:void 0,"aria-hidden":!p||void 0},l().createElement(Sd,{withGutters:!0,className:"row row-logical",role:"list"},u.map((({value:a,a11yText:r})=>l().createElement(Nd,mr({name:`${t}_${e}_${n}_${i}`,value:a,key:`${t}_${e}_${n}_${i}_${a}`,checked:s===a,tagAttrs:{role:"listitem"},className:"form-selector-singlecolumn column",role:"button"},Cd((e=>c(e)),!0),{tabIndex:p?0:-1,"aria-hidden":!p||void 0,"aria-label":r,"data-trigger-id":`engraving-emoji-${a}`}),l().createElement("span",{"aria-hidden":"true"},a))))))}))))))},kd=({bundleKey:e,bundleDisplayValue:t,engravingPageData:a,slotName:r,selection:n,font:s,fontIdx:o,fontDisplayType:i,onAddingMessage:c})=>{const{errors:d,hasError:m=!1}=n,{removeEmojiButton:u,emojiDisclaimer:p,emojiGroupLabel:g,loremLabel:h,errorMsg:y}=r,E=V().get(a,`engravingMessageBox${e}`,{}),{emojis:v={},selectedEmoji:b="",groupKey:f}=E,w=V().get(v,s,[]),[N,S]=l().useState(b),C=i===Ji.MULTI_SELECT,T=V().get(d,"line1",""),L=d?T:m?y:"",{group:k=0}=i===Ji.EMOJI&&V().find(w,(e=>e.options.filter((e=>e.value===N)).length>0))||{};return l().createElement("div",{className:"form-element"},l().createElement("div",{className:Wa()(`rf-engraving-${s}`,{"rf-engraving-emoji-multiselect":C}),id:`rf-engraving-emoji-${f}`},l().createElement(Ld,{bundleKey:e,groupKey:f,items:w,defaultIndex:k,fontIdx:o,selected:C?"":N,groupLabel:C?h:g,onHandleChange:a=>{const r=C?N.concat(a):a;S(r),c({bundleKey:e,bundleDisplayValue:t,font:s,fontIdx:o,fields:w,fieldVals:r})}}),l().createElement("div",{className:`rf-engraving-remove ${Jc.BODY}`},l().createElement(Gr,{in:!!N,role:"tabpanel"},l().createElement("button",{type:"button",onClick:()=>(S(""),void c({bundleKey:e,bundleDisplayValue:t,font:s,fontIdx:o,fields:w,fieldVals:"",emojiRemoved:!0})),className:"as-buttonlink"},u))),l().createElement("div",{className:Wa()({"is-error":!!L})},l().createElement(so,{error:L,errorAttrs:{"data-autom":"engraveValidationMsg"},"aria-live":"polite"})),p&&l().createElement("div",{className:"rf-engraving-emojidisclaimer"},l().createElement("p",qa(p)))))},Id=Object.freeze({SET_FIELD_VALUE:"SET_FIELD_VALUE",SET_FIELD_TOUCHED:"SET_FIELD_TOUCHED",SET_FIELD_ERROR:"SET_FIELD_ERROR",SET_ERRORS:"SET_ERRORS",SET_TOUCHED:"SET_TOUCHED",SET_VALUES:"SET_VALUES",SET_STATUS:"SET_STATUS",SET_ISSUBMITTING:"SET_ISSUBMITTING",SET_ISVALIDATING:"SET_ISVALIDATING",SUBMIT_ATTEMPT:"SUBMIT_ATTEMPT",SUBMIT_FAILURE:"SUBMIT_FAILURE",SUBMIT_SUCCESS:"SUBMIT_SUCCESS",RESET:"RESET",RESET_FIELD:"RESET_FIELD"}),Ad=(e,t)=>V().get(e,t),Pd=(e,t,a)=>{const r=V().clone(e);return V().set(r,t,a),r},Dd=(e,t)=>{const a=V().clone(e);return V().unset(a,t),a},Od=e=>{const t=l().useRef(e);return l().useLayoutEffect((()=>{t.current=e})),l().useCallback(((...e)=>t.current.apply(void 0,e)),[])},xd=(e,t)=>{let a={};return Object.keys(e).forEach((r=>{const n=e[r];if(Array.isArray(n))if(!Array.isArray(n)||(s=n)&&Array.isArray(s)&&s.reduce(((e,t)=>e&&"type"in t),!0)){const e=Ad(t,r),s=n?((e,t)=>t.reduce(((t,a)=>{if(t)return t;if("required"===a.type.toLowerCase())return e?t:a.message;if("regex"===a.type.toLowerCase())return a.regEx&&e?a.regEx.reduce(((t,a)=>Boolean(e.match(a))||t),!1)?t:a.message:t;if("invalid-regex"===a.type.toLowerCase())return a.regEx&&e?a.regEx.reduce(((t,a)=>!e.match(a)&&t),!0)?t:a.message:t;if("maxlength"===a.type.toLowerCase()){const r=V().get(a,"restrictions.maxLength");return r&&e?e.length<=r?t:a.message:t}if("maxlines"===a.type.toLowerCase()){const r=V().get(a,"restrictions.maxLines");return r&&e?e.split("\n").length<=r?t:a.message:t}if("range"===a.type.toLowerCase()){const r=V().get(a,"restrictions.maxVal"),n=V().get(a,"restrictions.minVal");if(!r||!n||!e)return t;const s=parseFloat(e.replace(/,/g,""));return s>=n&&s<=r?t:a.message}return console.warn(`WARNING: useForm validation rule type '${a.type}' is not supported`),t}),""))(e,n):"";s&&(a=Pd(a,r,s))}else{const e=[];n.forEach(((a,n)=>{const s=xd({field:a},{field:t[r]&&t[r][n]});s.field&&(e[n]=s.field)})),Object.keys(e).length>0&&(a=Pd(a,r,e))}else{const e=xd(n,t[r]);Object.keys(e).length>0&&(a=Pd(a,r,e))}var s})),a},Rd=function(e,t){switch(t.type){case Id.SET_FIELD_VALUE:return{...e,values:Pd(e.values,t.payload.field,t.payload.value)};case Id.SET_FIELD_TOUCHED:return{...e,touched:Pd(e.touched,t.payload.field,t.payload.value)};case Id.SET_FIELD_ERROR:return{...e,errors:Pd(e.errors,t.payload.field,t.payload.value)};case Id.SET_VALUES:return{...e,values:t.payload};case Id.SET_TOUCHED:return{...e,touched:t.payload};case Id.SET_ERRORS:return{...e,errors:t.payload};case Id.SUBMIT_ATTEMPT:return{...e,isSubmitting:!0,touched:Object.keys(e.values).reduce(((e,t)=>(e[t]=!0,e)),{})};case Id.SUBMIT_FAILURE:return{...e,isSubmitting:!1,submitError:t.payload};case Id.SUBMIT_SUCCESS:return{...e,isSubmitting:!1};case Id.RESET:return{values:t.payload,errors:{},touched:{}};case Id.RESET_FIELD:return{...e,values:Pd(e.values,t.payload.field,t.payload.value),errors:Dd(e.errors,t.payload.field),touched:Dd(e.touched,t.payload.field)};case Id.SET_ISSUBMITTING:return{...e,isSubmitting:t.payload};case Id.SET_ISVALIDATING:return{...e,isValidating:t.payload};case Id.SET_STATUS:return{...e,status:t.payload};default:return e}},Fd=function({initialStatus:e,initialValues:t={},initialErrors:a={},initialTouched:r={},validate:n,validationSchema:s,validateOnChange:o=!0,validateOnBlur:i=!0,focusOnFailedSubmit:c=!0,onSubmit:d=(()=>{})}){const[m,u]=l().useReducer(Rd,{status:e,values:t,errors:a,touched:r}),p=l().useRef({}),g=l().useCallback((e=>new Promise(((t,a)=>{const r=n?n(e):{};var s;r?null!==(s=r)&&"object"==typeof s&&"function"==typeof s.then?r.then((e=>t(e||{}))).catch((e=>a(e))):t(r):t({})}))),[n]),h=l().useCallback((e=>new Promise((t=>{const a=s?xd(s,e):{};t(a||{})}))),[s]),y=l().useCallback((e=>Promise.all([g(e),h(e)]).then((([e,t])=>V().merge(e,t)))),[g,h]),E=l().useCallback((e=>{u({type:Id.SET_ISVALIDATING,payload:!0}),y(e).then((e=>{u({type:Id.SET_ERRORS,payload:e}),u({type:Id.SET_ISVALIDATING,payload:!1})}))}),[y]),v=l().useCallback((e=>{u({type:Id.SET_VALUES,payload:e})}),[]),b=l().useCallback((e=>{u({type:Id.SET_TOUCHED,payload:e})}),[]),f=l().useCallback((e=>{u({type:Id.SET_ERRORS,payload:e})}),[]),w=Od(((e,t)=>{o&&E(Pd(m.values,e,t)),u({type:Id.SET_FIELD_VALUE,payload:{field:e,value:t}})})),N=Od(((e,t)=>{u({type:Id.SET_FIELD_TOUCHED,payload:{field:e,value:t}}),i&&E(m.values)})),S=l().useCallback(((e,t)=>{u({type:Id.SET_FIELD_ERROR,payload:{field:e,value:t}})}),[]),C=Od((e=>{u({type:Id.SET_ISVALIDATING,payload:!0}),y(m.values).then((t=>{u({type:Id.SET_FIELD_ERROR,payload:{field:e,error:t[e]}}),u({type:Id.SET_ISVALIDATING,payload:!1})}))})),T=Od((()=>{u({type:Id.SET_ISVALIDATING,payload:!0}),y(m.values).then((e=>{u({type:Id.SET_ERRORS,payload:e}),u({type:Id.SET_ISVALIDATING,payload:!1})}))})),L=l().useCallback((e=>{u({type:Id.RESET_FIELD,payload:{field:e,value:Ad(t,e)}})}),[t]),k=l().useCallback((()=>{u({type:Id.RESET,payload:t})}),[t]),I=l().useCallback((e=>{u({type:Id.SET_ISSUBMITTING,payload:e})}),[]),A=l().useCallback((e=>{u({type:Id.SET_ISVALIDATING,payload:e})}),[]),P=l().useCallback((e=>{u({type:Id.SET_STATUS,payload:e})}),[]),D={setValues:v,setTouched:b,setErrors:f,setFieldValue:w,setFieldError:S,setFieldTouched:N,setIsSubmitting:I,setIsValidating:A,setStatus:P,resetField:L,resetForm:k},O=Od((()=>{u({type:Id.SUBMIT_ATTEMPT}),y(m.values).then((e=>{if(Object.keys(e).length)u({type:Id.SET_ERRORS,payload:e}),u({type:Id.SUBMIT_FAILURE}),c&&(e=>{const t=Object.keys(e)[0];if(!t||!p.current)return;const a=p.current[t];a&&a.focus()})(e);else try{d(m.values,D),u({type:Id.SUBMIT_SUCCESS})}catch(e){u({type:Id.SUBMIT_FAILURE,payload:e})}}))})),x=l().useCallback((e=>{e.persist();const t=e.target,a="checkbox"===t.type?t.checked:t.value;w(t.name,a)}),[w]),R=l().useCallback((e=>{const t=e.target;N(t.name,!0)}),[N]),F=Od((e=>{e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),O()})),M=l().useMemo((()=>!V().isEqual(m.values,t)),[m.values,t]),_=0===Object.keys(m.errors).length;return{values:m.values,errors:m.errors,touched:m.touched,isSubmitting:m.isSubmitting,isValidating:m.isValidating,status:m.status,submitError:m.submitError,isValid:_,isDirty:M,handleChange:x,handleBlur:R,handleSubmit:F,fieldProps:e=>({name:e,value:m.values[e],onChange:x,onBlur:R}),setValues:v,setErrors:f,setTouched:b,setFieldValue:w,setFieldError:S,setFieldTouched:N,validateField:C,validateForm:T,resetField:L,resetForm:k,submitForm:O,setIsSubmitting:I,setIsValidating:A,setStatus:P,fieldRegistryRef:p,registerFieldRef:e=>{e&&e.name&&p.current&&(p.current[e.name]=e)}}},Md=document.documentElement.lang||"en-US",_d=({bundleKey:e,bundleDisplayValue:t,engravingPageData:a,slotName:r,selection:n,font:s,fontIdx:o=0,fontFamily:i,showEmojiPicker:c=!1,onAddingMessage:d,disabled:m=!1,disclaimerId:u="",clearField:p})=>{const{errors:g,hasError:h=!1}=n,{assets:y}=z(),E=Qi(n.font)?[]:n.messages,v=V().get(n,"messagesA11y",[]),{errorMsg:b,textEmojiGroupLabel:f,regionalLangMessage:w="",addedA11yText:N="",skipUpperCaseGEOS:S="th-TH,zh-CN,ko-KR,ja-JP,en-IN"}=r,C=S.split(","),T=V().get(r,"labelArray.items"),L=V().get(a,"bundles",[]),k=V().get(a,`engravingMessageBox${e}.lines`,[]),I=V().get(k,"0.name",""),A=V().get(a,`engravingMessageBox${e}.groupKey`),P=V().get(a,`engravingMessageBox${e}.emojis.${s}`,[]),D=V().get(a,`fonts${e}.${o}.defaultValue`,[]),O=w?"engraving-regionallang-disclaimer":"",{initialValues:x}=l().useMemo((()=>(e=>({initialValues:V().reduce(e,((e,t,a)=>(e[`line${a+1}`]=t,e)),{})}))(E)),[E]),{values:R,setFieldValue:F}=Fd({initialValues:x}),M=l().useRef({}),[_,B]=hr({resetDelay:4e3}),[$,U]=l().useState(I),K=k.length>1,H=V().get(a,"engravingMessageBox.engravingInUpperCaseOnly"),j=K&&c,[G,W]=l().useState(!1),q=a=>{a.persist();const r=a.target,{name:n,value:l}=r;let c=l;H?C.indexOf(Md)<0?c=((e,t)=>{const a=e.selectionStart,r=e.selectionEnd,n=e.value.toLocaleUpperCase(Md);if(t(e.name,n),n){const t=n.length;window.setTimeout((()=>{e.setSelectionRange(a+t,r)}),0)}return n})(r,F):(F(n,l),c=l.toLocaleUpperCase(Md)):F(n,l);const m={...R,[n]:c};d({bundleKey:e,bundleDisplayValue:t,font:s,fontIdx:o,fontFamily:i,fields:k,fieldVals:m})},Y=e=>{const{name:t,value:a}=e.target,r=V().get(M,`current.${t}`);if(13===e.keyCode&&(e.preventDefault(),U(t),W(!0),a)){const e=a.length;r.setSelectionRange(e,e)}};return l().useEffect((()=>{p&&k.forEach((e=>F(e.name,"")))}),[p]),l().createElement("div",{className:"rf-engraving-messagebox"},l().createElement("div",{className:Wa()({"rf-engraving-singleline":!K&&!c,"rf-engraving-multilines":K,"rf-engraving-mixedtext":c,"rf-engraving-form-error":g,[`rf-engraving-${i}`]:!!i})},k.map(((a,r)=>{const{name:n,label:p}=a,h=L.length>1?V().get(T,`${e}.value`,p):p,E=R[n]?"":`${u} ${O}`;return l().createElement("div",{className:"field-wrapper",key:`${n}_${o}`,"data-autom":`Engrave-labelLine${r+1}`},l().createElement(Xo,{name:n,label:h,autoComplete:"off",error:g?g[n]:"",value:R[n]||"",onChange:q,onFocus:()=>{j&&G?W(!1):U(n)},onKeyDown:j?Y:void 0,onReset:()=>(a=>{F(a,"");const r={...R,[a]:""},n=V().get(M,`current.${a}`);d({bundleKey:e,bundleDisplayValue:t,font:s,fontIdx:o,fontFamily:i,fields:k,fieldVals:r}),n&&n.focus()})(n),resetAttrs:{"aria-label":K?`${y.reset} ${p}`:y.reset,"data-autom":K?`removeEngrave${r+1}`:"removeEngrave","data-trigger-id":K?`remove-engrave${r+1}`:"remove-engrave"},errorAttrs:{"data-autom":K?`engraveValidationMsg${r+1}`:"engraveValidationMsg"},"aria-describedby":`${E} engraving-message-${n}`,"data-autom":`Engrave${n}`,disabled:m,ref:e=>{M.current[n]=e}}),$===n&&_?l().createElement(gr,{message:`${h} ${_} ${N}`}):null,c&&l().createElement("div",{id:`engraving-message-${n}`,className:"visuallyhidden","aria-hidden":"true"},v[r]?l().createElement("span",null,h):null,l().createElement("span",null,v[r]||"")))})),l().createElement("div",{className:Wa()({"is-error":h})},l().createElement(so,{error:h?b:"",errorAttrs:{"data-autom":"engraveValidationMsg"},"aria-live":"polite"})),c&&l().createElement("div",{className:`rf-engraving-${s}`},l().createElement(Ld,{bundleKey:e,groupKey:A,items:P,groupLabel:f,fontIdx:o,dotNavFocus:G,onHandleChange:a=>{const r=$,n=V().get(R,r,""),l=V().get(M,`current.${r}`),c=l.selectionStart;let m=n?n.substring(0,c)+a+n.substring(c):a;if(a&&!G){const e=a.length;window.setTimeout((()=>{l.setSelectionRange(c+e,c+e),l.focus()}),0)}F(r,m),H&&C.indexOf(Md)>=0&&(m=m.toLocaleUpperCase(Md));const u={...R,[r]:m};d({bundleKey:e,bundleDisplayValue:t,font:s,fontIdx:o,fontFamily:i,fields:k,fieldVals:u}),B(((e,t)=>{if(!V().isEmpty(t)){const a=t.find((t=>t.value===e));return a?a.a11yText:e}return e})(a,D))}}))))},Bd=({bundleKey:e,bundleDisplayValue:t="",engravingPageData:a,slotName:r={},selection:n,selectedTab:s,onTabChange:o,validateEngravingMsg:i,onAddingMessage:c,disabled:d=!1,disclaimerId:m=""})=>{const{fontChoiceLegendA11yText:u,fontChoiceA11yText:p,emojiChoiceA11yText:g,regionalLangMessage:h="",engravingFooterDisclaimer:y=""}=r,E=V().get(a,`fonts${e}`,[]),v=V().get(a,`engravingMessageBox${e}`,{}),{lines:b=[],selectedEmoji:f="",emojis:w={}}=v,N=E.length>1,S=`${u} ${tn(t)}`,{font:C=""}=n,{fontIdx:T=0,fontName:L="",fontDisplayType:k,fontFamily:I=""}=E[s]||{},A=!!E.find((e=>e.fontDisplayType===Ji.EMOJI_TEXT)),P=!(!N&&!A)&&Object.keys(w).some((e=>w[e].length>1)),D={bundleKey:e,bundleDisplayValue:t,engravingPageData:a,slotName:r,selection:n,onAddingMessage:c,font:C,disabled:d,disclaimerId:m};return l().createElement(l().Fragment,null,l().createElement("div",{className:Wa()("rf-engraving-form",{"rf-engraving-form-withtab":N,"rf-engraving-form-textandemoji":A,"rf-engraving-form-withdots":P})},N&&l().createElement(l().Fragment,null,l().createElement("fieldset",{disabled:d},l().createElement("legend",{className:"visuallyhidden"},S),l().createElement(ud,{className:"rf-engraving-tabs",handleChange:a=>(({fontName:a,fontFamily:r},n)=>{let s="";o(n),s=Qi(a)?f:b.reduce(((e,t)=>(e[t.name]=t.value,e)),{}),i({bundleKey:e,bundleDisplayValue:t,fields:b,font:a,fontIdx:T,fontFamily:r,fieldVals:s})})(E[a],a),defaultIndex:T,count:E.length},l().createElement(dd,{classes:{root:"rf-engraving-tabnav",item:"rf-engraving-tabnav-item",link:"rf-engraving-tabnav-link"},keys:E.map((e=>e.fontName)),items:E.map((e=>l().createElement(l().Fragment,null,e.fontLabel,l().createElement("span",{className:"visuallyhidden"},Qi(e.fontName)?g:p))))}),l().createElement(id,{className:Wa()("rf-engraving-tabpanels")},E.map((e=>l().createElement(cd,{index:e.fontIdx,key:e.fontName,className:"rf-engraving-tabpanel"},e.fontDisplayType===Ji.EMOJI||e.fontDisplayType===Ji.MULTI_SELECT?l().createElement(kd,mr({},D,{font:e.fontName,fontIdx:e.fontIdx,fontFamily:e.fontFamily,fontDisplayType:e.fontDisplayType})):l().createElement(_d,mr({},D,{font:e.fontName,fontIdx:e.fontIdx,fontFamily:e.fontFamily,showEmojiPicker:e.fontDisplayType===Ji.EMOJI_TEXT}))))))))),!N&&l().createElement(_d,mr({},D,{font:L,fontFamily:I,fontIdx:T,showEmojiPicker:k===Ji.EMOJI_TEXT}))),h&&l().createElement("div",mr({id:"engraving-regionallang-disclaimer",className:`rf-engraving-regionallang-disclaimer ${Jc.CAPTION}`},qa(h))),y&&l().createElement("div",mr({className:`rf-engraving-footer-disclaimer ${Jc.CAPTION}`},qa(y))))},$d=l().forwardRef((({bundleKey:e,bundleDisplayValue:t,engravingPageData:a,slotName:r,selection:n={},selectedTab:s,showVideo:o,additionalParam:i},c)=>{const{retina:d}=z(),m={},u=V().get(a,"dynamicImage",{}),p=V().get(a,`fonts${e}`,[]),g=p.length?p[s]:"",h=V().cloneDeep(u),y=V().get(h,"srcSet.src"),E={},v=V().get(h,"alt"),b=V().get(h,"defaultAXMessagePartial","");h.alt=ln(v,{message:b});let f=n.messages&&n.messages[0]||"",w=n.messages&&n.messages[1]||"";const N=n.messagesA11y&&n.messagesA11y[0]||"",S=n.messagesA11y&&n.messagesA11y[1]||"";m.th=f,m.tl=w;const C=V().get(r,"defaultValueArray.items"),T=V().get(r,"defaultValue",""),L=Qi(g.fontName),k=V().get(r,"transparentBg",!1);""===f&&""===w?(f=V().get(C,"0.value")||T,w=V().get(C,"1.value")||"",L||(m.th=f,m.tl=w)):h.alt=ln(v,{message:`${N} ${S}`});const I=n.font?n.font:g.fontName,A=I?{f:I,...i}:{...i};if(y&&h){const e=nn(y,{...m,...A});E.src=e}const{scaleParams1x:P,scaleParams2x:D}=((e={},t,a)=>{const{scaleParams1:r,scaleParams2:n}=e;return{scaleParams1x:r?an({...rn(r),...t,...a}):null,scaleParams2x:n?an({...rn(n),...t,...a}):null}})(h.srcSet,m,A);P&&(E.scaleParams1=P),D&&(E.scaleParams2=D);const O=V().get(E,"src",""),{src1x:x,src2x:R}=l().useMemo((()=>(e=>{if(!e||!e.src)return{};const[t,a]=e.src.split("?"),r=a?rn(a):{};return{src1x:e.scaleParams2?nn(t,r):nn(t,rn(e.scaleParams1||"")),src2x:e.scaleParams1?nn(t,r):nn(t,rn(e.scaleParams2||""))}})(E)),[O]),F=d?R:x;return l().createElement("div",{className:Wa()("rf-engraving-image-wrapper",{"rf-engraving-transparent-wrapper":k}),ref:c},l().createElement("div",mr({className:"rf-engraving-displayvalue"},qa(t))),h&&F&&l().createElement("img",{width:h.width,height:h.height,alt:h.alt||"",src:F,className:Wa()("rf-engraving-image",{"rf-engraving-image-hidden":o}),"data-autom":"preview-image"}))}));$d.displayName="ImageView";const Ud=({data:e,onVideoEnded:t,showVideo:a,videoRef:r,slotName:n})=>{const{alt:s,...o}=e,i={autoPlay:!0,muted:!0,playsInline:!0,"aria-hidden":!0,title:s,...V().omit(o,["poster","format"])},c=V().get(n,"transitionDuration",700);return l().createElement(Gr,{in:a,timeout:c,className:"rf-engraving-media-wrapper"},l().createElement(Gi,mr({ref:r,className:"rf-engraving-media"},i,{onEnded:t,onStalled:t,onError:t,onContextMenu:e=>e.preventDefault()})))},Kd=({isSaving:e,showVideo:t,saveButtonRef:a,slotName:r,saveEngrave:n,cancelEngrave:s,selection:o})=>{const i=V().get(r,"saveButton","Save"),c=V().get(r,"cancelButton","Cancel"),d=(o?o.filter((e=>!!e.errors||e.hasError)):[]).length>0;return l().createElement("div",{className:"rf-engraving-actions"},l().createElement("div",{className:"rf-engraving-save"},l().createElement("button",mr({type:"button",className:Wa()("button","button-super","button-block",{"as-button-isloading":e}),ref:a,disabled:d||e||t,"data-autom":"engraving-save","data-trigger-id":"engraving-save",onClick:()=>n(!0)},qa(i)))),l().createElement("div",{className:"rf-engraving-cancel"},l().createElement("button",mr({type:"button",className:"as-buttonlink",disabled:e,"data-autom":"engraving-cancel","data-trigger-id":"engraving-cancel",onClick:()=>s()},qa(c)))))},Vd=({ariaLabel:e})=>{const t=l().useRef(null),a=l().useRef(null);return l().useEffect((()=>(a.current=document.activeElement,t.current&&t.current.focus(),()=>{a.current&&a.current.focus()})),[]),l().createElement("div",{className:"column large-12 small-12 rf-engraving-overlay-spinner"},l().createElement("div",{ref:t,role:"img",tabIndex:-1,className:"waitindicator waitindicator40-blue","aria-label":e}))},Hd=({bundleProps:e,videoProps:t={}})=>{const{data:a,showVideo:r}=t,n=V().get(a,"src"),s=V().get(e,"selection.font",""),o=V().get(e,`engravingPageData.fonts${e.bundleKey}`,[]),i=s?V().findIndex(o,{fontName:s}):0;return l().createElement("div",{className:Wa()({"rf-engraving-media-content":!!n})},l().createElement($d,mr({},e,{selectedTab:i,showVideo:r})),n&&l().createElement(Ud,t))},jd=({bundleProps:e,bundleItem:t=!1,videoProps:a={},validateEngravingMsg:r,onAddingMessage:n,disabled:s=!1,disclaimerId:o=""})=>{const{showVideo:i}=a,c=V().get(e,"selection.font",""),d=V().get(e,`engravingPageData.fonts${e.bundleKey}`,[]),m=c?V().findIndex(d,{fontName:c}):0,[u,p]=l().useState(m),g=V().get(d,`${u}.fontDisplayType`,"");return l().createElement(ms,{disabled:i,className:Wa()("rf-engraving-content",{"rf-engraving-content-disabled":i,"rf-engraving-content-emojitext":g===Ji.EMOJI_TEXT,"rf-engraving-content-hide":t&&s})},l().createElement(Bd,mr({},e,{validateEngravingMsg:r,onAddingMessage:n,selectedTab:u,onTabChange:p,disabled:s||i,disclaimerId:o})))},Gd=({bundleProps:e,videoProps:t={},validateEngravingMsg:a,onAddingMessage:r,disabled:n=!1,disclaimerId:s=""})=>l().createElement(l().Fragment,null,l().createElement(Hd,{bundleProps:e,videoProps:t}),l().createElement(jd,{bundleProps:e,videoProps:t,validateEngravingMsg:a,onAddingMessage:r,disabled:n,disclaimerId:s})),Wd=({engravingPageData:e,slotName:t,selection:a,validateEngravingMsg:r,onAddingMessage:n,selectedBundleKey:s,disclaimerId:o=""})=>{const i=V().get(e,"bundles",[]),[c,d]=l().useState(s),{viewport:m}=z(),u="small"===m,[p,g]=hr();return l().createElement(l().Fragment,null,l().createElement("div",{className:Wa()("with-paddlenav",{"rf-engraving-bundle-oneitem":1===i.length})},l().createElement(gr,{message:p}),l().createElement(ad,{items:i,dotnav:!1,defaultIndex:c,onChange:e=>{d(e),g(V().get(i,`${e}.overlayBundleDisplayValue`,""))},paddlenav:!u,paddlenavProps:{compact:!1},swipableProps:{trackTouch:!0},classes:{root:"rf-engraving-bundle-gallery",gallery:"rf-engraving-bundle",scroller:"rf-engraving-bundle-scroller"},renderItem:(s,o)=>{const{key:i=0,overlayBundleDisplayValue:d=""}=s,m=i===c,u={bundleKey:i,bundleDisplayValue:d,selection:a[i],engravingPageData:e,slotName:t};return l().createElement(qc,{key:o,index:o,className:Wa()("rf-engraving-bundle-item",{"rf-engraving-bundle-selecteditem":m,"rf-engraving-bundle-nonselecteditem":!m})},l().createElement("div",{className:"rf-engraving-bundle-box"},l().createElement(Hd,{bundleProps:u,validateEngravingMsg:r,onAddingMessage:n,disabled:!m})))},a11y:{label:t.engravingA11yText,items:i.map((e=>e.bundleDisplayValue))}})),i.map((s=>{const{key:i=0,bundleDisplayValue:d}=s,m=i===c,u={bundleKey:i,bundleDisplayValue:d,selection:a[i],engravingPageData:e,slotName:t};return l().createElement(jd,{key:i,bundleProps:u,validateEngravingMsg:r,onAddingMessage:n,disabled:!m,disclaimerId:o,bundleItem:!0})})))},qd=e=>{const{visible:t,showContent:a,showVideo:r,videoRef:n,saveButtonRef:s,onClose:o,data:i,isFetching:c,error:d,saveEngrave:m,cancelEngrave:u,validateEngravingMsg:p,onAddingMessage:g,onVideoEnded:h,selectedBundleKey:y,additionalParam:E}=e,v=l().useId(),{isSaving:b,slotName:f,selection:w,isBundleEngraving:N}=i,{engravingPageData:S,engravingVideo:C}=V().get(i,"engravingDetails",{}),T=V().get(S,"bundles",[]),{engravingHeader:L,engravingDisclaimer:k="",keyboardHintText:I=""}=f||{},{key:A=0,bundleDisplayValue:D=""}=T[0]||{},O=V().get(S,`engravingMessageBox${A}.lines`,{}),x=!!V().get(S,`fonts${A}`,[]).find((e=>e.fontDisplayType===Ji.EMOJI_TEXT)),R=document.documentElement.classList.contains(P),F=O.length>1&&x,M={bundleKey:A,bundleDisplayValue:D,selection:w?w[A]:{},engravingPageData:S,slotName:f,additionalParam:E},_={data:C,videoRef:n,showVideo:r,onVideoEnded:h,slotName:f},B=l().useRef(null);return l().createElement(ss,{visible:t,classes:{root:Wa()("rf-engraving-overlay",{"rf-engraving-overlay-bundle":N}),content:"rf-engraving-overlay-content"},noPadding:!0,fixedWidth:!0,ariaLabel:"rf-engraving-overlay-label","data-autom":"Engrave-overlay",onClose:()=>o(),onEntered:()=>{B.current.scrollTop>0&&(B.current.scrollTop=0)},ref:B,appear:!0},V().isEmpty(d)?l().createElement("div",{className:"rf-engraving-overlay-contentsection"},c?l().createElement(Vd,{ariaLabel:"loading"}):l().createElement(l().Fragment,null,l().createElement("h2",mr({className:`rf-engraving-overlay-header ${Jc.HEADLINE}`,id:"rf-engraving-overlay-label","data-autom":"engraving-overlay-header"},qa(L))),k&&l().createElement("div",{className:"rf-engraving-textdisclaimer"},l().createElement("p",{id:`${v}-engraving-disclaimer`,className:`rf-engraving-disclaimer ${Jc.BODY}`,"data-autom":"engraving-disclaimer"},l().createElement("span",qa(k)),F?l().createElement("span",mr({className:Wa()({visuallyhidden:!R})},qa(I))):null)),a&&l().createElement("div",{className:"rf-engraving-selecteditem"},N?l().createElement(Wd,{engravingPageData:S,slotName:f,selection:w,validateEngravingMsg:p,onAddingMessage:g,selectedBundleKey:y,disclaimerId:`${v}-engraving-disclaimer`}):l().createElement(Gd,{bundleProps:M,videoProps:_,validateEngravingMsg:p,onAddingMessage:g,disclaimerId:`${v}-engraving-disclaimer`})),l().createElement(Kd,{isSaving:b,showVideo:r,saveButtonRef:s,slotName:f,selection:w,saveEngrave:m,cancelEngrave:u}))):l().createElement("div",{className:"rf-engraving-overlay-contentsection"},l().createElement("div",mr({className:`rf-engraving-overlay-error ${Jc.HEADLINE}`},qa(d.message)))))},Yd=({isEngraved:e,isBundle:t,engravingSubtitle:a,engravingEditMessage:r,engravingPrice:n,engravingLines:s,isEditable:o,addButton:i,editButton:c,removeButton:d})=>{const m=!t&&o&&e,u=o&&!e,p=!t&&d,{assets:g,viewport:h}=z(),y=e?g.yourEngraving:g.engraving,E="small"===h;return l().createElement("div",{className:"rs-iteminfo-child"},l().createElement("div",{className:"row rs-iteminfo-child-content rs-iteminfo-child-engraving"},l().createElement("div",{className:"column large-12 as-icondetails"},l().createElement("div",mr({className:"as-icondetails-icon as-svgicon-container"},qa('<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-engraving as-svgicon-reduced as-svgicon-engravingreduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h25v25H0z"/><path d="M12.5 22.05a9.55 9.55 0 1 1 9.55-9.55 9.561 9.561 0 0 1-9.55 9.55Zm0-18a8.45 8.45 0 1 0 8.45 8.45 8.46 8.46 0 0 0-8.45-8.45Z"/><path d="M16.5 15h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 0 1ZM18 11H7a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1Z"/></svg>'))),l().createElement("div",{className:"as-icondetails-detail rs-iteminfo-icondetails-detail"},l().createElement("div",{className:"rs-iteminfo-child-wrapper"},l().createElement("p",{className:"rs-iteminfo-child-title"},l().createElement("span",{className:"rs-iteminfo-child-titletext"},y)),!e&&a&&l().createElement("p",mr({className:"rs-iteminfo-child-tagline"},qa(a))),e&&l().createElement("div",{className:Wa()("rs-iteminfo-child-tagline",{"rs-iteminfo-engraving-with-message":!t&&r})},s),m&&l().createElement("div",{className:"rs-iteminfo-child-divider"},c),e&&r&&l().createElement("div",{className:Wa()({"rs-iteminfo-child-tagline":E},{"rs-iteminfo-child-divider":!E})},l().createElement("div",mr({className:"rs-iteminfo-engraving-edit-message"},qa(r))),!E&&p&&l().createElement("div",{className:"rs-engraving-removebutton"},d)),E&&p&&l().createElement("div",{className:"rs-iteminfo-child-divider"},d),l().createElement("div",{className:"rs-iteminfo-child-actions"},e&&l().createElement("p",{className:"rs-iteminfo-child-price"},n),u&&i))))))},zd=()=>{const{assets:e}=z();return(0,ur.createPortal)(l().createElement("div",{className:"rs-engravingedit-spinner"},l().createElement("div",{role:"img",className:"waitindicator waitindicator40-gray","aria-label":e.processing})),document.getElementById("portal")||document.body)},Xd=({label:e,allyText:t,url:a,onClick:r=V().noop,sendOmniEvent:n=V().noop,className:s,...o})=>{const i=Wa()("as-buttonlink",s);if(a)return l().createElement("a",mr({className:i,href:a},o),l().createElement("span",{"aria-hidden":"true"},e),l().createElement("span",{className:"visuallyhidden"},t));return l().createElement("button",mr({type:"button",className:i,"aria-label":t,onClick:()=>{r(),n()}},o),e)},Jd=({isBundle:e,isEditable:t,isRemovableOnly:a,isEngravingImage:r,lines:n=[],addActionProps:s,editActionProps:o,removeActionProps:i,handleOpenOverlay:c,removeEngrave:d,messagesA11yText:m})=>{const u=Boolean(n.length),p=Boolean(m.length),{assets:g}=z();return u?e?l().createElement("div",{className:"rs-iteminfo-child-tagline"},n.map((({product:e,font:n,value:u,alt:h,accessibilityText:y,type:E},v)=>{const b=Wa()("row","small-12","rs-engraving-container-bundle",{"large-6":t,"large-12":!t}),f=Wa()({"rs-engraving-font-mixed":Boolean(n&&u),[`rs-engraving-font-${n}`]:Boolean(n&&u)}),w=()=>d(v),N=E&&-1!==E.indexOf("image"),S={...s,allyText:`${g.addEngravingA11y} ${e}`};return l().createElement("div",{key:`engraving-line-${e}-${u}-${n}`,className:b},l().createElement("div",{className:Wa()("column",{"large-6 small-7 rs-engraving-message":!r},{"rs-engraving-image-container":r})},e,u&&(N?l().createElement("img",{className:"rs-engraving-image",src:u,alt:y||h}):l().createElement("span",{className:f,"aria-label":m[v],role:p?"img":null},u))),t&&l().createElement("div",{className:"column large-6 small-5 rs-engraving-addbutton"},u?l().createElement(l().Fragment,null,l().createElement(Xd,mr({},o,{onClick:()=>c("edit engraving",v)})),l().createElement("span",{className:"rs-iteminfo-child-divider"}),l().createElement(Xd,mr({},i,{onClick:w}))):l().createElement(Xd,mr({},S,{onClick:()=>c("add free engraving",v)}))),a&&u&&l().createElement("div",{className:"rs-engraving-removebutton"},l().createElement(Xd,mr({},i,{onClick:w}))))}))):l().createElement("div",{className:"rs-iteminfo-child-tagline"},l().createElement("div",{className:"row"},l().createElement("div",{className:"column"},n.map((({font:e,value:t,alt:a,accessibilityText:n,type:s},o)=>{const i=Wa()({"rs-engraving-font-mixed":Boolean(e&&t)}),c=s&&-1!==s.indexOf("image");return t&&l().createElement("div",{key:`engraving-line-${t}-${e}-${o}`,className:Wa()({"rs-engraving-message":!r},{"rs-engraving-image-container":r})},c?l().createElement("img",{className:"rs-engraving-image",src:t,alt:n||a}):l().createElement("span",{className:i,"data-autom":"bag-engraving-text-message","aria-label":m[o],role:p?"img":null},t))}))))):null},Qd=i("rs-checkout/engraving"),Zd=()=>{const{viewReady:e,acShowInstallment:t}=Hs(),a=e&&t,{modKey:r,isEditable:n,isFulfillment:o}=ll(),[i]=Ma(r,"name"),c=xa(`${r}.engraving`),{lines:d=[],isBundle:m,price:u,isOverlay:p,isEngravingImage:g,engravingSubtitle:h,engravingEditMessage:y}=c.data,{editable:E}=c.properties,v=Boolean(d.length),b=n||v,f=n&&!1!==p,w=!p&&n&&g&&!1!==E,N=`${r}.engraving.cartItemEngravingOverlay`,S=xa(N),{isLoadingSubmit:C,isLoadingFault:T}=S.properties,L=Ua(N,"successResponse"),k=Ua(N,"invalidItemResponse"),I=$a(),A=e=>{I({type:De,modKey:N,key:"isLoadingSubmit",value:e})},P={...S.data.bootstrap,metricsConfig:{pageName:"Bag"}},[D,O]=(0,s.useState)(null);(0,s.useEffect)((()=>{!T&&S.data.engravingDetails&&O({engravingDetails:S.data.engravingDetails,slotName:S.data.slotName})}),[T]);const x=Ec({id:c.data.id,bootstrap:P,engravingData:D,onChange:e=>{A(!0);const t=V().get(S.data,"bootstrap.saveEngravingUrl",""),a=V().get(e,"engravedData",{}),r=V().get(e,"engravedData.selection",[]).reduce(((e,t,r)=>{const n=V().get(t,"font",""),s=V().get(t,"messages",[]),l=a.isBundleEngraving||n;if(a.isBundleEngraving)e[`msg.${r}`]=s;else for(let a=0;a<t.messageLines;a+=1)e[`msg.${a}`]=V().trim(s[a]);return l&&(e[`f.${r}`]=n),e}),{}),n=nn(t,{...r});ft(n).then((e=>{e.body.success?(L.setValue(!0),L.runSetEvents()):(k.setValue(!0),k.runSetEvents())})).catch((e=>{Qd.error(e),A(!1)}))}}),{overlayVisible:R,loadOverlay:F,showContent:M,showVideo:_,saveButtonRef:B,videoRef:$,data:U,error:K,handleCloseOverlay:H,validateEngravingMsg:j,onAddingMessage:G,handleEngravingChange:W,cancelEngrave:q,onOverlayHidden:Y,selectedBundleKey:X,onVideoEnded:J,handleOpenOverlay:Q,removeEngrave:Z}=x,{assets:ee}=z(),{savedSelection:te=[]}=U;let ae=[];ae=te.map((({messagesA11y:e})=>e)).reduce(((e,t)=>e.concat(t)),[]);const re={label:m&&d.length?ee.addEngraving:ee.add,url:p?c.data.url:"",sendOmniEvent:a?()=>fl("add"):V().noop,"data-value":"add","data-autom":"bag-engraving-add","data-prop37":c.data.addProp37},ne={label:ee.edit,allyText:`${ee.engravingEditA11y} ${i}`,url:p?c.data.url:"",sendOmniEvent:a?()=>fl("edit"):V().noop,"data-value":"edit","data-autom":"bag-engraving-edit","data-prop37":c.data.editProp37},se={label:ee.remove,allyText:ln(ee.removeEngravingA11y,{productName:i}),"data-value":"remove","data-autom":"bag-engraving-remove","data-prop37":c.data.removeProp37},le=`${ee.addEngravingA11y} ${i}`;return l().createElement(l().Fragment,null,C&&l().createElement(zd,null),b&&l().createElement(Yd,{isEngraved:v,isBundle:m,engravingSubtitle:h,engravingEditMessage:y,engravingPrice:!o&&u,isEditable:f,addButton:l().createElement(Xd,mr({},re,{className:"rs-iteminfo-child-actions-button",onClick:()=>Q("add free engraving"),allyText:le})),editButton:l().createElement(Xd,mr({},ne,{onClick:()=>Q("edit engraving")})),removeButton:w&&l().createElement(Xd,mr({},se,{onClick:()=>{Z(0)}})),engravingLines:l().createElement(Jd,{isBundle:m,isEditable:f,isRemovableOnly:w,isEngravingImage:g,lines:d,addActionProps:re,editActionProps:ne,removeActionProps:se,handleOpenOverlay:Q,removeEngrave:Z,messagesA11yText:ae})}),F&&l().createElement(qd,{visible:R,showContent:M,data:U,error:K,videoRef:$,showVideo:!v&&_,saveButtonRef:B,onClose:H,validateEngravingMsg:j,onAddingMessage:G,onVideoEnded:J,saveEngrave:W,cancelEngrave:q,onOverlayHidden:Y,selectedBundleKey:X}))},em=l().memo(Zd),tm=({id:e,name:t,error:a,errorA11y:r,errorAttrs:n={},classes:s={},checked:o,className:i,label:c,children:d,"aria-describedby":m="",...u},p)=>{const g=Wa()([s.root,{"is-error":a}]),h=Wa()(["form-checkbox",s.wrapper]),y=l().useId(),E=e||y;return l().createElement("div",{className:g},l().createElement("div",{className:h},l().createElement("input",mr({type:"checkbox",id:E,name:t,checked:o,className:Wa()(["form-checkbox-input",i]),"aria-labelledby":`${E}_label`,"aria-describedby":a?`${E}_error ${m}`:m||void 0,"aria-invalid":Boolean(a),ref:p},u)),l().createElement("label",{className:"form-label",htmlFor:E,id:`${E}_label`},l().createElement("span",{"aria-hidden":"true",className:"form-checkbox-indicator"}),d||c),a&&l().createElement(so,{id:`${E}_error`,className:s.error,error:a,errorA11y:r,errorAttrs:n})))},am=l().forwardRef(tm),rm=({label:e,labelA11y:t,checkboxProps:a,description:r})=>l().createElement("div",{className:"rs-iteminfo-child rs-iteminfo-isgiftitem"},l().createElement("div",{className:"rs-iteminfo-child-content"},l().createElement(am,a,l().createElement("span",{"aria-hidden":"true",className:"rs-iteminfo-isgiftitem-label"},e),l().createElement("span",{className:"visuallyhidden"},t)),r&&l().createElement("p",mr({className:"rs-iteminfo-isgiftitem-content as-icondetails-detail"},qa(r))))),nm=()=>{const{modKey:e}=ll(),[t]=Fa(e),{showIntentToGift:a,intentToGiftText:r,name:n,intentToGiftDesc:s}=t,{assets:o}=z(),i=r||o.giftItemLabel,c=ln(o.isIntentToGiftA11y,{name:n}),d=ja(e,"isIntentToGift");return a&&l().createElement(rm,{label:i,labelA11y:c,checkboxProps:d.props,description:s})},sm=l().memo(nm),lm="_editing",om="add",im="remove",cm="edit";var dm,mm=new Uint8Array(16);function um(){if(!dm&&!(dm="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dm(mm)}const pm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const gm=function(e){return"string"==typeof e&&pm.test(e)};for(var hm=[],ym=0;ym<256;++ym)hm.push((ym+256).toString(16).substr(1));const Em=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(hm[e[t+0]]+hm[e[t+1]]+hm[e[t+2]]+hm[e[t+3]]+"-"+hm[e[t+4]]+hm[e[t+5]]+"-"+hm[e[t+6]]+hm[e[t+7]]+"-"+hm[e[t+8]]+hm[e[t+9]]+"-"+hm[e[t+10]]+hm[e[t+11]]+hm[e[t+12]]+hm[e[t+13]]+hm[e[t+14]]+hm[e[t+15]]).toLowerCase();if(!gm(a))throw TypeError("Stringified UUID is invalid");return a};var vm,bm,fm=0,wm=0;const Nm=function(e,t,a){var r=t&&a||0,n=t||new Array(16),s=(e=e||{}).node||vm,l=void 0!==e.clockseq?e.clockseq:bm;if(null==s||null==l){var o=e.random||(e.rng||um)();null==s&&(s=vm=[1|o[0],o[1],o[2],o[3],o[4],o[5]]),null==l&&(l=bm=16383&(o[6]<<8|o[7]))}var i=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:wm+1,d=i-fm+(c-wm)/1e4;if(d<0&&void 0===e.clockseq&&(l=l+1&16383),(d<0||i>fm)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");fm=i,wm=c,bm=l;var m=(1e4*(268435455&(i+=122192928e5))+c)%4294967296;n[r++]=m>>>24&255,n[r++]=m>>>16&255,n[r++]=m>>>8&255,n[r++]=255&m;var u=i/4294967296*1e4&268435455;n[r++]=u>>>8&255,n[r++]=255&u,n[r++]=u>>>24&15|16,n[r++]=u>>>16&255,n[r++]=l>>>8|128,n[r++]=255&l;for(var p=0;p<6;++p)n[r+p]=s[p];return t||Em(n)},Sm=({title:e,price:t,messages:a=[],actionType:r,actionLabel:n,actionA11y:s,actionBtnProps:o,installmentDetails:i})=>{const c=Boolean(a.length),d=Array.isArray(i)&&t,m=!d&&t,u=r===cm,p=r===om||r===im;return l().createElement("div",{className:"rs-iteminfo-child"},l().createElement("div",{className:"row rs-iteminfo-child-content"},l().createElement("div",{className:"column as-icondetails large-12"},l().createElement("div",mr({className:"as-icondetails-icon as-svgicon-container"},qa('<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-gift as-svgicon-reduced as-svgicon-giftreduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h25v25H0z"/><path d="M17.5 4h-10A3.5 3.5 0 0 0 4 7.5v10A3.5 3.5 0 0 0 7.5 21h10a3.5 3.5 0 0 0 3.5-3.5v-10A3.5 3.5 0 0 0 17.5 4Zm-10 1H12v4.414A5.537 5.537 0 0 0 10.973 7.6 2.556 2.556 0 0 0 9.1 6.869a2.5 2.5 0 0 0-1.814.794 2.614 2.614 0 0 0 .2 3.684A3.954 3.954 0 0 0 8.671 12H5V7.5A2.5 2.5 0 0 1 7.5 5Zm4.271 6.846a11.361 11.361 0 0 1-3.6-1.231 1.613 1.613 0 0 1-.146-2.271 1.5 1.5 0 0 1 1.094-.476h.021a1.7 1.7 0 0 1 1.158.464 11.4 11.4 0 0 1 1.472 3.514ZM5 17.5V13h6.64c-.653 1.149-2.117 3.2-4.4 3.568a.5.5 0 1 0 .158.987A7.165 7.165 0 0 0 12 14.318V20H7.5A2.5 2.5 0 0 1 5 17.5ZM17.5 20H13v-5.7a7.053 7.053 0 0 0 4.6 3.259.542.542 0 0 0 .074.005.5.5 0 0 0 .072-.995c-2.194-.325-3.632-2.253-4.377-3.567H20v4.5A2.5 2.5 0 0 1 17.5 20Zm2.5-8h-3.735a4.1 4.1 0 0 0 1.251-.678 2.614 2.614 0 0 0 .2-3.684 2.5 2.5 0 0 0-1.816-.793 2.634 2.634 0 0 0-1.872.732A5.537 5.537 0 0 0 13 9.389V5h4.5A2.5 2.5 0 0 1 20 7.5Zm-6.77-.179a11.405 11.405 0 0 1 1.479-3.513 1.694 1.694 0 0 1 1.158-.464h.021a1.5 1.5 0 0 1 1.094.476 1.613 1.613 0 0 1-.146 2.271 11.366 11.366 0 0 1-3.606 1.23Z"/></svg>'))),l().createElement("div",{className:"as-icondetails-detail rs-iteminfo-child-details"},l().createElement("div",null,l().createElement("div",{className:"rs-iteminfo-child-title small-12 large-9"},l().createElement("span",{className:"rs-iteminfo-child-titletext"},e),u&&l().createElement("div",{className:"rs-iteminfo-child-divider"},l().createElement("button",mr({type:"button",className:"as-buttonlink","aria-label":s},o),n))),l().createElement("div",{className:Wa()("rs-iteminfo-child-actions",{"column small-4 large-3":!m})},t&&l().createElement("p",{className:"rs-iteminfo-child-price"},t),m&&l().createElement("div",mr({className:"rs-iteminfo-price-details"},qa(i))),p&&l().createElement("button",mr({type:"button",className:"rs-iteminfo-child-actions-button as-buttonlink","aria-label":s},o),n)),c&&l().createElement("p",{className:"rs-iteminfo-child-tagline rs-iteminfo-gifting-msg"},a.map((e=>l().createElement("span",{key:Nm(),className:"rs-iteminfo-gift-message-line","data-autom":"bag-gift-message-text"},e,l().createElement("br",null))))),d&&l().createElement("div",{className:"rs-iteminfo-installmentdetails"},i.map((({label:e,value:t})=>l().createElement(ol,{key:`giftinginstallments-${e}-${t}`,name:"iteminfochildpricedetails",label:e,value:t})))))))))},Cm=({visible:e,setVisible:t,id:a,messages:r,hasGiftPackageOption:n,saveBtnProps:s,onEntered:o,onExited:i,children:c})=>{const{viewport:d,assets:m,fragments:u}=z(),p="small"===d,g=n?m.giftOverlayPkgHeader:m.giftOverlayMsgHeader;return l().createElement(ss,{className:"rs-gifting-overlay",ariaLabel:`${a}-overlayHeading`,visible:e,onClose:()=>t(!1),isFullscreen:p,onEntered:o,onExited:i,disableFocusOut:!0,fixedWidth:!0,mountOnEnter:!0,unmountOnExit:!0},l().createElement("h2",{id:`${a}-overlayHeading`,className:"rs-gifting-overlay-header"},g),n&&l().createElement("div",null,l().createElement("div",mr({className:"rs-gifting-overlay-image"},qa(u.giftPackageImage))),l().createElement("p",{"aria-hidden":"true",className:"rs-gifting-overlay-image-caption"},m.giftingOverlayImageCaption)),l().createElement("div",{className:"rs-gifting-overlay-section"},r,l().createElement("fieldset",null,l().createElement("legend",{className:"rs-gifting-overlay-option-label"},m.giftOverlayLabel),l().createElement("div",{className:"form-selector-group"},c)),l().createElement("div",{className:"rs-gifting-overlay-save"},l().createElement(os,mr({},s,{"data-autom":"bag-giftoptions-save-button"}),m.save)),l().createElement("div",{className:"rs-gifting-overlay-cancel"},l().createElement("button",{type:"button",className:"as-buttonlink","data-autom":"bag-giftoptions-cancel-button",onClick:()=>t(!1)},m.cancel))))},Tm=({onChange:e,name:t,checked:a,value:r,label:n,price:o,messageInputProps:i,packageInputProps:c})=>{const{assets:d}=z(),m=`bag-giftoptions-${r}`;let u={};"message"===r?(u={...i},u.label=d.giftOverlayYourMessage):"package"===r&&(u={...c},u.label=d.overlayYourMessageOptional);const p="message"===r||"package"===r,g=(0,s.useRef)("");return l().createElement(l().Fragment,null,l().createElement(Nd,{tag:"div",name:t,tagAttrs:{"data-autom":m},"data-autom":`${m}-radio`,onChange:e,value:r,checked:a},l().createElement("span",{className:"row"},l().createElement("span",{className:"form-selector-left-col form-selector-title column large-6"},n),o&&l().createElement("span",{className:"form-selector-right-col column large-6"},o))),p&&l().createElement(qr,{in:a,onExit:()=>{g.current=u.error},onExited:()=>{g.current=""}},l().createElement("div",null,l().createElement("span",{className:"rs-gift-option-input-message"},d.giftOverlayInputLabel),l().createElement("div",null,l().createElement(Fi,mr({},u,{error:g.current||u.error}))))))},Lm=({showOverlayBtnRef:e})=>{const{assets:t}=z(),{modKey:a,announceMessage:r}=ll(),n=`${a}.gifting`,[o]=Fa(n),{id:i,hasGiftMessageOption:c,hasGiftPackageOption:d,was:m={}}=o,[u,p]=Ma(n,lm,!1),g=Ua(n,"gift-options"),h=g.value,y=m["gift-options"],E=rr(n,"editMsgTxt"),v=rr(n,"editPkgTxt"),b=(o.giftOptionsAcc||[]).filter((({value:e})=>"none"===e||"message"===e&&c||"package"===e&&d)),f=e=>{const t=e.target.value;g.setValue(t),"message"===t?E.binding.setValue(v.binding.value):"package"===t&&v.binding.setValue(E.binding.value),E.binding.clearMessages()},w={...E.props,required:!E.binding.properties.optional,"aria-required":!E.binding.properties.optional,"aria-invalid":Boolean(E.props.error),"data-autom":`bag-giftoptions-${h}text`},N={...v.props,required:!v.binding.properties.optional,"aria-required":!v.binding.properties.optional,"aria-invalid":Boolean(v.props.error),"data-autom":`bag-giftoptions-${h}text`},S=(({giftingData:e,assets:t})=>{const{message:a,isMessageOnCard:r}=e,n="none"!==e["gift-options"]&&Boolean(a);return r?n?t.saveGiftCardOptMsgA11y:t.saveGiftCardOptA11y:r?t.saveGiftOptMsgA11y:t.saveGiftOptA11y})({giftingData:o,assets:t}),C=Ha(n,"save"),T=C.binding.properties.isLoadingSubmit,L=js(T),k={...C.props,"aria-label":`${t.save} ${S}`,disabled:T,isLoading:T,onClick:e=>{C.props.onClick(e),r(t.processing),"none"===h&&"none"===y&&p(!1)}},[I,A]=_a(n),P=(0,s.useRef)(),D=Boolean(I.length),O=l().createElement(qs,{messages:I,lastUpdated:A,ref:P});return(0,s.useEffect)((()=>{if(L&&!T){const e=D?"":t.giftMessageUpdateSuccessAlly;r(e)}}),[T,L,D]),l().createElement(Cm,{visible:u,setVisible:p,id:i,messages:O,hasGiftPackageOption:d,saveBtnProps:k,onEntered:()=>{I.length&&P.current&&P.current.focus()},onExited:()=>{e.current&&e.current.focus(),"message"===h&&g.setValue("none")}},b.map((({value:e,label:t,price:a})=>l().createElement(Tm,{key:`gift-option-${e}`,name:`giftOptionsAcc-${n}`,onChange:f,checked:e===h,value:e,label:t,price:a,messageInputProps:w,packageInputProps:N}))))},km=l().memo(Lm),Im=()=>{const{assets:e,fragments:t}=z(),{viewReady:a,acShowInstallment:r}=Hs(),n=a&&r,{modKey:o,isEditable:i,isFulfillment:c}=ll(),d=`${o}.gifting`,[m]=Fa(d),{id:u,hasGiftMessage:p,hasGiftPackage:g,message:h,messageLines:y,installmentDetails:E}=m,[,v]=Ma(d,lm,!1),b=(({giftingData:e,assets:t})=>{const{hasGiftPackageOption:a,hasGiftMessage:r,isMessageOnCard:n,hasGiftPackage:s,message:l}=e;return r?n?t.giftMsgOnCard:t.giftMsgLabel:s?l?t.giftPkgMsgLabel:t.giftPkgLabel:a?t.addGifting:t.addGiftingMsg})({giftingData:m,assets:e}),f=g?m.price:"",w=h?y:[],N=i&&!1!==m._editable,S=()=>(({hasGiftMessage:e,hasGiftPackage:t})=>{let a="add gift message or gift wrap";e?a="edit gift message":t&&(a="edit gift wrap"),yl({name:"metrics",data:{hier1:"aos:bag",channel:"aos:bag",prop3:`modal open|gifting|${a} gifting`}})})({hasGiftPackage:g,hasGiftMessage:p}),C=(0,s.useRef)(),T=(({isGiftingEditable:e,giftingData:t})=>{const{hasGifting:a,hasGiftMessage:r,canEditMsg:n,hasGiftPackage:s,canEditPkg:l}=t;if(e){if(!a)return om;if(r&&!n||s&&!l)return im;if(r&&n||s&&l)return cm}return""})({isGiftingEditable:N,giftingData:m}),L=(({actionType:e,assets:t})=>{switch(e){case om:return t.add;case im:return t.remove;case cm:return t.edit;default:return""}})({actionType:T,assets:e}),k=(({actionType:e,giftingData:t,assets:a,fragments:r})=>{const{hasGiftPackageOption:n,hasGiftMessage:s,isMessageOnCard:l,hasGiftPackage:o,message:i}=t;switch(e){case om:return ln(n?r.addGiftingA11y:r.addGiftingMsgA11y,t);case im:return a.removeGiftingMsgA11y;case cm:return s?ln(l?r.editGiftMsgOnCardA11y:r.editGiftMsgA11y,t):o?ln(i?r.editGiftPkgMsgA11y:r.editGiftPkgA11y,t):"";default:return""}})({actionType:T,giftingData:m,assets:e,fragments:t}),I=(({actionType:e,giftingData:t})=>{const{hasGiftPackage:a}=t;switch(e){case om:return"bag-gifting-add";case cm:return a?"bag-giftpackage-edit":"bag-giftmessage-edit";default:return""}})({actionType:T,giftingData:m}),A=(({actionType:e})=>{switch(e){case om:return"show-giftOptions";case im:return"remove";case cm:return"show-edit";default:return""}})({actionType:T}),P=Ha(d,A),D={...P.props,"data-autom":I};return(T===om||T===cm)&&(D.id=`${u}-show-giftOptions`,D.ref=C,D.onClick=e=>{P.props.onClick(e),v(!0),n&&S()}),l().createElement(l().Fragment,null,l().createElement(Sm,{title:b,price:!c&&f,messages:w,setOverlayVisible:v,actionType:T,actionLabel:L,actionA11y:k,actionBtnProps:D,installmentDetails:E}),l().createElement(km,{showOverlayBtnRef:C}))},Am=l().memo(Im),Pm="postal_code",Dm="province_selector",Om="drawer",xm="overlay",Rm="cold",Fm="warm",Mm=e=>{const[t]=Fa(e),{isDeliveryOptionDrawerEnabled:a=!1,deliveryOptionsRetrieverOverlay:r=!1,isDefaultDeliveryOptionEnabled:n=!1,deliveryOptionsRetriever:s="",deliveryLocationLinkText:l="",showCaseText:o=""}=t;let i=`${e}.address.provinceCityDistrictTabs`;const c=`${e}.address.provinceCityDistrictTabsForCheckout`,d=`${e}.address`,m=`${e}.address.deliveryWarmingSubLayout`,u=`${e}.address.deliveryLocationSelection`,p=Ra(`${e}.address.localitySearchTypeAhead`);Ra(c)&&(i=c);const[g]=Fa(d),[h]=Fa(i),[y]=Fa(m),[E]=Fa(u),{state:v,props:b}=Va(i,"provinceCityDistrict"),f={isDeliveryOptionDrawerEnabled:a,deliveryOptionsRetrieverOverlay:r,isDefaultDeliveryOptionEnabled:n,deliveryOptionsRetriever:s,deliveryLocationLinkText:l,showCaseText:o,hasSearchTypeAhead:p},w={linkText:"",provinceCityDistrict:"",label:"",error:"",ref:null},N=Ra(i);let S=Pm;r?S=xm:a||p?S=Om:N&&(S=Dm);let C="";switch(S){case Pm:C=V().get(g,"was.postalCode","");break;case Dm:{const e=V().get(h,"layout.0.fields",[]).reduce(((e,t)=>{const a=t.find((e=>"provinceCityDistrict"===e.name));return a?a.label:e}),"");w.linkText=h.linkText||"",w.provinceCityDistrict=h.provinceCityDistrict||"",w.label=e,w.error=v.error,w.ref=b.ref,h.provinceCityDistrict&&(C=h.provinceCityDistrict);break}case xm:case Om:l&&(C=l)}let T=!1;switch(S){case Pm:T=g.showGeoLocationDisclaimer||!1;break;case Dm:T=h.showGeoLocationDisclaimer||!1;break;case xm:T=E.showGeoLocationDisclaimer||!1;break;case Om:T=y.showGeoLocationDisclaimer||g.showGeoLocationDisclaimer||!1}const L=C?Fm:Rm;let k=d;S===Dm?k=i:S!==xm&&S!==Om||(k=e);let I=Xs;S===Dm?I="provinceCityDistrictTabs":S!==xm&&S!==Om||(I="deliveryOptionsRetriever");const[A,P]=Ma(k,I,!1);return{parentModKey:e,addressModKey:d,current:C,state:L,type:S,isEditing:A,setIsEditing:P,showGeoLocationDisclaimer:T,deliveryOptions:f,provSelectData:w}},_m=({editLocation:e,deliveryData:t,hasDeliveryOptions:a})=>{if(!a)return!1;const{isElectronic:r}=t,{isDefaultDeliveryOptionEnabled:n}=e.deliveryOptions,s=e.state===Rm;if(r)return!1;const l=e.type===Om,o=e.type===Dm;if(l||o)return!1;if(e.type===Pm&&!s)return!1;return!(e.type===xm&&(!s||n))},Bm=({editLocation:e,assets:t})=>{const{type:a,state:r,deliveryOptions:n,provSelectData:s}=e,{isDefaultDeliveryOptionEnabled:l}=n,o=r===Fm;switch(a){case Pm:return o?t.warmDeliveryLabel:t.coldDeliveryTitle;case Om:return o?t.warmDeliveryOptionsLabel:t.coldDeliveryOptionsLabel;case xm:return o||l?t.warmDeliveryLabel:t.coldDeliveryTitle;case Dm:return s.label;default:return""}},$m=({editLocation:e,assets:t})=>{const{type:a,state:r,current:n,provSelectData:s,deliveryOptions:l}=e,o=r===Fm;switch(a){case Pm:return n||t.taxZipCode;case Om:case xm:return l.deliveryLocationLinkText||l.showCaseText;case Dm:return o?s.provinceCityDistrict:s.linkText;default:return""}},Um=({editLocation:e,assets:t,productName:a})=>{const{type:r,state:n}=e,s=n===Fm;switch(r){case Pm:return s?ln(t.wasPostalCodeA11y,{productName:a}):"";case Om:case xm:return s?t.deliveryLocationLinkTextA11y:t.deliveryOptionCityTownTextA11y;default:return""}},Km=({editLocation:e})=>{const{type:t,state:a}=e,r=a===Fm;switch(t){case Pm:return r?"bag-zipcode-edit":"bag-zipcode-edit-cold";case Dm:return r?"bag-province-edit":"bag-province-edit-cold";case Om:return r?"bag-prefecture-edit":"bag-prefecture-edit-cold";case xm:return r?"bag-location-edit":"bag-location-edit-cold";default:return""}},Vm=({callout:e,hasDelivery:t,hasPickup:a,showPickupFirst:r,children:n})=>{const s=Wa()("rs-item-fulfillment","rs-iteminfo-child",{"rs-has-delivery":t,"rs-has-pickup":a,"rs-show-pickup-first":r});return l().createElement("div",{className:s},e,l().createElement("div",{className:"rs-item-fulfillment-columns"},n))},Hm=({title:e,editBtn:t,children:a})=>l().createElement("div",{className:"rs-item-fulfillment-callout"},l().createElement("div",{className:"rs-fulfillment-callout-title"},l().createElement("span",{className:"rs-fulfillment-callout-title-text"},e)," ",t),a),jm=({showBtn:e,isEditing:t,wasEditing:a=!1,setIsEditing:r,showChevron:n,showDagger:o,label:i,btnRef:c,...d})=>{const{assets:m}=z(),u=(0,s.useRef)(),p=c||u;if((0,s.useEffect)((()=>{e&&p.current&&a&&p.current.focus()}),[p,e,t,a]),!e)return null;const g=Wa()("rs-edit-location-button","as-buttonlink",{icon:n,"icon-after":n,"icon-chevrondown":n&&!t,"icon-chevronup":n&&t});return l().createElement("button",mr({type:"button",className:g,"aria-controls":"rs-edit-location","aria-expanded":n&&t,onClick:()=>r(!t),ref:p},d),i,o&&m.geoLocationDagger)},Gm=({applyButton:e,textField:t,inputRef:a,...r})=>l().createElement(Xo,mr({ref:a},t.props,r),l().createElement("button",mr({type:"button",className:"rf-inlineeditor-apply form-textbox-button"},e.props),e.loading?l().createElement(l().Fragment,null,l().createElement("div",{role:"img",className:"rf-inlineeditor-loading waitindicator waitindicator16-gray"}),l().createElement(fr,{isPending:e.loading,messages:{pending:e.processingText}})):l().createElement("span",null,e.label))),Wm=["bottom","height","left","right","top","width"],qm=new Map;let Ym=0;const zm=()=>{const e=[];qm.forEach(((t,a)=>{const r=a.getBoundingClientRect();((e={},t={})=>Wm.some((a=>e[a]!==t[a])))(r,t.rect)&&e.push({...t,rect:r})})),e.forEach((e=>{e.callbacks.forEach((t=>t(e.rect)))})),Ym=window.requestAnimationFrame(zm)};function Xm(e,t){const a=t?.observe??!0,r=t?.onChange,[n,l]=s.useState(e.current),o=s.useRef(!1),i=s.useRef(!1),[c,d]=s.useState(null),m=s.useRef(r);return s.useLayoutEffect((()=>{m.current=r,e.current!==n&&l(e.current)})),s.useLayoutEffect((()=>{n&&!o.current&&(o.current=!0,d(n.getBoundingClientRect()))}),[n]),s.useLayoutEffect((()=>{if(!a)return()=>{};let t=n;if(i.current||(i.current=!0,t=e.current),!t)return()=>{};const r=(s=t,l=e=>{m.current&&m.current(e),d(e)},{observe(){const e=0===qm.size;if(qm.has(s)){const e=qm.get(s);e&&e.callbacks.push(l)}else qm.set(s,{rect:void 0,hasRectChanged:!1,callbacks:[l]});e&&zm()},unobserve(){const e=qm.get(s);if(e){const t=e.callbacks.indexOf(l);t>=0&&e.callbacks.splice(t,1),e.callbacks.length||qm.delete(s),qm.size||cancelAnimationFrame(Ym)}}});var s,l;return r.observe(),()=>{r.unobserve()}}),[a,n,e]),c}const Jm=(e,t)=>{if(!t.current)return;const a=t.current,r=a?a.querySelector(`[data-option-index="${e}"]`):null;if(a&&r&&a.scrollHeight>a.clientHeight){const e=r,t=a.clientHeight+a.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?a.scrollTop=n-a.clientHeight:e.offsetTop<a.scrollTop&&(a.scrollTop=e.offsetTop)}},Qm=({id:e,className:t,value:a,options:r,onChange:n=(()=>{}),onFocus:s=(()=>{}),onBlur:o=(()=>{}),onKeyDown:i=(()=>{}),onSelection:d=(()=>{}),onHover:m=(()=>{}),getOptionValue:u=(e=>e),getOptionDisabled:p=(()=>!1),getPosition:g,renderInput:h=(e=>l().createElement("input",e)),renderOption:y=(e=>e),selectFirst:E=!1,selectOnHover:v=!1,closeOnSelection:b=!0,classes:f={},optionsHeader:w,wrapperAttrs:N,...S},C)=>{const[T,L]=l().useState(!1),[k,I]=l().useState(-1),A=l().useRef(null),P=l().useRef(null),D=l().useRef(null),O=Xm(D,{observe:T}),x=Ya(D,C),R=()=>{L(!1),I(-1)},F=e=>d(u(r[e]),e),M=e=>{-1!==k&&e.preventDefault();const t=(e=>{if(e===r.length-1)return e;let t=e,a=!1;for(;!a&&t<r.length-1;)t+=1,a=!p(r[t]);return a?t:e})(k);I(t),Jm(t,P),m(u(r[t]),t),T||L(!0),v&&F(t)},_=e=>{-1!==k&&e.preventDefault();const t=(e=>{if(-1===e)return e;if(0===e)return-1;let t=e,a=!1;for(;!a&&t>0;)t-=1,a=!p(r[t]);return a?t:-1})(k);I(t),Jm(t,P),m(u(r[t]),t),T||L(!0),v&&F(t)},B=l().useId(),$=e||B,U=`${$}_listbox`,K=k>=0?`${U}_option_${k}`:void 0,V=Boolean(T&&r.length),H=g?g(O):(e=>{if(!e)return{};const{width:t,right:a}=e;return{width:t,left:`${a-t+window.pageXOffset}px`}})(O);return l().createElement("div",mr({ref:A,"data-core-autocomplete":!0,className:Wa()(t,f.root)},N),h({id:$,value:a,role:"combobox","aria-autocomplete":"list","aria-expanded":V,...S,"aria-owns":U,"aria-activedescendant":K,ref:x,onChange:e=>{T||L(!0),n(e),E&&I(0)},onFocus:e=>{L(!0),I(-1),s(e)},onBlur:e=>{requestAnimationFrame((()=>{document.activeElement!==A.current&&document.activeElement!==D.current&&P.current&&!P.current.contains(document.activeElement)&&(R(),o(e))}))},onKeyDown:e=>{switch(e.keyCode){case c.ArrowUp:_(e);break;case c.ArrowDown:M(e);break;case c.Home:e.preventDefault(),I(0),Jm(0,P),m(u(r[0]),0),T||L(!0),v&&F(0);break;case c.End:e.preventDefault(),(()=>{const e=r.length-1;I(e),Jm(e,P),m(u(r[e]),e),T||L(!0),v&&F(e)})();break;case c.Return:(e=>{const t=r[k],a=p(t);t&&!a&&T&&(e.preventDefault(),F(k),b&&R())})(e);break;case c.Esc:T&&e.stopPropagation(),R()}i(e)}}),l().createElement("div",{"data-core-autocomplete-popover":!0,"data-core-autocomplete-popover-show":V,style:H,ref:P,className:Wa()(f.popoverWrapper,{[f.popoverWrapperShow||""]:V,[f.popoverWrapperHide||""]:!V})},w,l().createElement("ul",{role:"listbox",id:U,"data-core-autocomplete-options-list":!0,className:Wa()(f.optionsList,{[f.optionsListShow||""]:V,[f.optionsListHide||""]:!V}),tabIndex:-1},r.map(((e,t)=>{const a=u(e),r=p(e),n=k===t;return l().createElement("li",{key:a,id:`${U}_option_${t}`,role:"option","data-core-autocomplete-option":!0,className:f.option,"data-option-index":t,onClick:()=>{r||(d(a,t),D.current&&D.current.focus(),b&&R())},onMouseOver:()=>{r||(I(t),m(a,t),v&&d(a,t))},tabIndex:-1,"aria-selected":n,"aria-disabled":r},y(e,n,t))})))))},Zm=l().forwardRef(Qm),eu=({inputRef:e,textField:t,applyButton:a})=>{const[r,n]=l().useState([]),s=i("InlineEditor/InlineEditorAutoComplete");return l().createElement(Zm,{classes:{root:"rf-inlineeditor-autocomplete"},value:t.props.value,options:r,onChange:e=>{t.props.onChange&&t.props.onChange(e),fetch(`${t.autoCompleteUrl}?value=${e.target.value}`).then((e=>e.json())).then((e=>V().get(e,"body.matches",[]))).then((e=>n(e))).catch((e=>s.error(e)))},onSelection:e=>{t.setValue(e)},renderInput:r=>(r.ref.current=e.current,l().createElement(Gm,mr({applyButton:a,inputRef:e,textField:t},r)))})},tu=e=>{const{visible:t,triggerRef:a,isCollapsible:r,className:n,textField:o,applyButton:i,cancelButton:c,children:d}=e,m=(0,s.useRef)(null),u=o.props.ref||m,{viewport:p}=z(),g="small"===p,h=Wa()("rf-inlineeditor",{"rf-inlineeditor-collapsible":r}),y=Wa()("rf-inlineeditor-content row",{"form-textbox-widebutton":g&&i.label&&i.label.length>5});return l().createElement(qr,{in:t,onEntering:()=>{u&&u.current&&(u.current.focus(),u.current.select())},onExited:()=>{a&&a.current&&a.current.focus()},className:n},l().createElement("div",{className:h},l().createElement("div",{className:y},l().createElement("div",{className:"rf-inlineeditor-input column"},o.autoCompleteUrl?l().createElement(eu,{inputRef:u,textField:o,applyButton:i}):l().createElement(Gm,{applyButton:i,inputRef:u,textField:o})),r&&c&&l().createElement("div",{className:"rf-inlineeditor-cancel-wrapper column"},l().createElement("button",mr({type:"button",className:"rf-inlineeditor-cancel form-textbox-sidebutton"},c.props),c.label))),d))},au=({modKey:e,isCollapsible:t=!0,visibleKey:a,className:r,triggerRef:n,textField:s,applyButton:o,cancelButton:i={},children:d,isSubmitting:m=!1,disableErrorOnBlur:u=!0,isVisible:p=!1})=>{const{viewport:g}=z(),[h,y]=Ma(e,a),E=rr(e,s.bindName,{disableErrorOnBlur:u}),{props:v}=E,b=Ha(e,o.bindName),f=Ha(e,i.bindName),{properties:w}=E.binding,N=!w.optional,S="number"===w.subtype&&("small"===g||"medium"===g)?"tel":w.type,{properties:{isLoadingSubmit:C}}=xa(e),T=E.binding.bindExists,L=$a(),k={visible:!a||h||p,className:r,triggerRef:n,isCollapsible:t,textField:{autoCompleteUrl:s.autoCompleteUrl,setValue:e=>{y(e)},props:{...E.props,"data-autom":s["data-autom"],label:s.label,type:S||"text",disabled:s.disabled,required:N,"aria-required":N,errorAttrs:s.errorAttrs,onKeyDown:e=>{T&&s.postalCancelBtnRef&&s.postalCancelBtnRef.current&&e.keyCode===c.Esc&&s.postalCancelBtnRef.current.click(),T&&s.postalApplyBtnRef&&s.postalApplyBtnRef.current&&e.keyCode===c.Return&&s.postalApplyBtnRef.current.click(),v.onKeyDown(e)}}},applyButton:{label:o.label,loading:C||m,processingText:o.processingText,props:{...b.props,disabled:s.disabled||C||!E.props.value,"data-autom":o["data-autom"],"aria-label":o.ally,ref:o.triggerRef,onClick:t=>{L({type:Ee,modKey:e,bindName:s.bindName}),b.props.onClick(t)}}},cancelButton:{label:i.label,props:{...f.props,"data-autom":i["data-autom"],"aria-label":i.ally,ref:i.triggerRef,onClick:()=>{var e;y(!1),i.metrics&&(e=i.metrics,window.asMetrics&&e&&window.asMetrics.fireMicroEvent(e))}}}};return l().createElement(tu,k,d)},ru="checkout",nu=({checkboxProps:e})=>{const{assets:t}=z();return l().createElement("div",{className:"rs-location-consent"},l().createElement(am,e,t.locationConsentMessage))},su=({isBagApp:e=!1,isCheckoutApp:t=!1})=>{let a="";e?a="shoppingCart.locationConsent":t&&(a="checkout.locationConsent");const r=Ra(a),n={...ja(a,"locationConsent",{disableFocusSync:!0}).props,id:Yr()};return r&&l().createElement(nu,{checkboxProps:n})},lu=l().memo(su),ou=({modKey:e,className:t,triggerRef:a,isBagApp:r,isCheckoutApp:n,hideCancel:s,children:o})=>{const{assets:i}=z(),c=l().useRef(),d=l().useRef(),m=n?"checkout-zipcode-input":"bag-zipcode-input",u=n?"checkout-zipcode-apply":"bag-zipcode-apply",p=n?"checkout-zipcode-cancel":"bag-zipcode-cancel",g=n?"checkout-zipcode-error":"bag-zipcode-error",h=Wa()("rs-postal-code-editor",t);return l().createElement(au,{modKey:e,visibleKey:Xs,className:h,triggerRef:a,isCollapsible:!s,textField:{label:i.zipCodeLabel,bindName:"postalCode","data-autom":m,errorAttrs:{"data-autom":g},postalApplyBtnRef:c,postalCancelBtnRef:d,classes:{input:"form-textbox-number-input"}},applyButton:{label:i.apply,triggerRef:c,ally:i.applyZipCodeA11y,processingText:i.processing,bindName:"calculate","data-autom":u},cancelButton:!s&&{label:i.cancel,triggerRef:d,ally:i.cancelZipCodeA11y,"data-autom":p,metrics:{eVar:ul,feature:"Delivery",action:"CancelZipCode"}}},l().createElement(lu,{isBagApp:r,isCheckoutApp:n}),o)},iu=l().memo(ou),cu=()=>{const{assets:e}=z(),{modKey:t,editLocation:a}=ll(),r=`${t}.delivery.lineDeliveryOptions.address`,{type:n,isEditing:s,setIsEditing:o}=a,[i]=Ma(t,"productName"),[c]=Fa(r),{showGeoLocationDisclaimer:d}=c,m=n===xm,u=n===Pm,p=!s,[g]=Fa(`${t}.delivery.lineDeliveryOptions`),h=Bm({editLocation:a,deliveryOptionsData:g,assets:e}),y=$m({editLocation:a,assets:e}),E=Um({editLocation:a,assets:e,productName:i}),v=Km({editLocation:a}),b=js(s),f=l().createElement(jm,{showBtn:p,isEditing:s,wasEditing:b,setIsEditing:o,showDagger:d,label:y,"aria-label":`${y} ${E}`,"data-autom":v,showChevron:!m});return l().createElement(Hm,{title:h,editBtn:f},u&&l().createElement(iu,{modKey:r,isBagApp:!0}))},du=l().memo(cu),mu=({className:e,children:t,...a})=>{const r=Wa()("rf-form-layout-root",e);return l().createElement("div",mr({className:r},a),t)},uu=(e,t,a)=>{if("sublayout"===a.type)return!0;const{visible:r}=e.getBindingProps(t,a.name);return!1!==r},pu=(e,t)=>`${V().get(e.flat(),"[0].name",t)}`,gu=(e,t)=>e.getModuleData(t,"addressLookupSelectorOptions")||[],hu=({isSublayout:e,isFullWidth:t,sections:a,classes:r})=>{const n=e?"":r.layout,s=Wa()("rf-form-layout",n,{"rf-form-layout-sublayout":e,"rf-form-layout--fullwidth":t});return l().createElement("div",{className:s},a)},yu=({header:e,subHeader:t,isSublayout:a,isFullWidth:r,isViewMode:n,headingTag:s})=>{const o=a||r?"large-12":"large-6",i=Wa()("column","small-12",o);return l().createElement(l().Fragment,null,n?l().createElement("div",{className:"row"},l().createElement("div",{className:i},l().createElement(s,{className:"rf-form-layout-section-header typography-label"},e),t&&l().createElement("div",{className:"rf-form-layout-section-subheader typography-body"},t))):l().createElement(l().Fragment,null,l().createElement("legend",null,l().createElement(s,{className:"rf-form-layout-section-header typography-label"},e)),l().createElement("div",{className:i},t&&l().createElement("div",{className:"rf-form-layout-section-subheader typography-body"},t))))},Eu=({section:e,sectionId:t,sectionHeadingTag:a,rows:r,classes:n,isFullWidth:s,isSublayout:o})=>{const{sectionHeader:i,sectionMessage:c,sectionSubHeader:d=""}=e,m=Wa()("rf-form-layout-section",n.section,t);return l().createElement("div",{className:m},i?l().createElement("fieldset",null,l().createElement(yu,{isFullWidth:s,isSublayout:o,header:i,subHeader:d,headingTag:a,isViewMode:!1}),r,c&&l().createElement("div",{className:"rf-form-layout-section-message as-supplementalinfo large-6 small-12"},l().createElement("p",mr({className:"rf-form-layout-section-message-content"},qa(c))))):l().createElement(l().Fragment,null,r,c&&l().createElement("div",{className:"rf-form-layout-section-message as-supplementalinfo large-6 small-12"},l().createElement("p",mr({className:"rf-form-layout-section-message-content"},qa(c))))))},vu=({message:e,isFullWidth:t,messageId:a})=>{const r=t?"large-12":"large-6",n=Wa()("rf-form-layout-row-message column small-12",r);return l().createElement("div",{className:n},l().createElement("div",mr({className:"as-supplementalinfo typography-body-reduced"},qa(e),{id:a})))},bu=({row:e,isFullWidth:t,isSublayout:a,fields:r,fieldCombinationClass:n,classes:s,message:o,messageId:i})=>{const{viewport:c}=z(),d="small"===c,m=a||t?"large-12":"large-6",u=Wa()("rf-form-layout-row",n,s.row),p=Wa()("rf-form-layout-row-fields","column","small-12",m,{"form-textbox-sidebyside":!d&&e.length>1});return l().createElement("div",{className:u},l().createElement("div",{className:p},l().createElement("div",{className:"row"},r)),o&&l().createElement(vu,{isFullWidth:t,message:o,messageId:i}))},fu=({field:e,textFieldProps:t,hasAction:a,actionFieldProps:r,isLoadingAction:n,loadingAriaLabel:s})=>{const o=`${e.actionName}-button-${e.name}`;return l().createElement(Xo,t,a&&(n?l().createElement("div",{role:"img",className:"rf-form-layout-field-spinner waitindicator waitindicator16-gray","aria-label":s}):l().createElement(Qo,mr({"data-autom":o},r),l().createElement("span",{"aria-label":e.actionLabelA11y},e.actionLabel))))},wu=({modKey:e,field:t,tooltip:a=null,messageId:r,showUseManualFieldOption:n=!1,handleTypeAheadField:o=(()=>{})})=>{const i=Ha(e,t.actionName),{assets:d}=z(),{properties:m}=xa(e),u=m.isLoadingSubmit,p=i.binding.bindExists,g=!(!t.attributes||!t.attributes.prefix),{props:h,binding:y}=rr(e,t.name),E=!y.properties.optional,v=y.properties.autofill,b=y.properties.format,f=b&&!V().isEmpty(b),{name:w,label:N,labelA11y:S,autoCapitalization:C}=t,T=`form-field-${w}`,L=p&&"find"===t.actionName,k={...h,name:w,label:N,labelA11y:S,search:L,required:E,onKeyDown:e=>{p&&i.props.ref.current&&e.keyCode===c.Return&&i.props.ref.current.click(),h.onKeyDown(e)},onChange:e=>{e.target.value.length>3&&n&&o(),h.onChange(e),C&&!f&&y.setValue(e.target?.value?.toString?.().toUpperCase?.())},autoComplete:v,"data-autom":T,"aria-required":E,"aria-invalid":!!h.error,errorAttrs:{"data-autom":`${T}-error`},"aria-describedby":r,countryCode:g&&t.attributes?.prefix},I={...i.props,disabled:!k.value},A=$a(),[P,D]=(0,s.useState)("");if(e.includes("loanApplicationAddressesContainer")&&"moveInDate"===w){const t=!y.properties.valid;k.onFocus=e=>{D(e.target.value),h.onFocus(e)},k.onBlur=a=>{const r=a.target.value;t&&P!==r&&A({type:Ee,modKey:e,bindName:"moveInDate"}),h.onBlur(a)}}const O=Wa()({"form-tooltip-textbox-wrapper":!!a});return l().createElement("div",{className:O},l().createElement(fu,{field:t,textFieldProps:k,hasAction:p,actionFieldProps:I,isLoadingAction:u,loadingAriaLabel:d.processing}),a)},Nu=({modKey:e,field:t})=>{const a=Ia(),{props:r,binding:n}=sr(e,t.name),s=!n.properties.optional,o=n.properties.autofill,{name:i,label:c}=t,d=`form-field-${i}`,m=((e,t,a)=>e.getModuleData(t,a.options)||[])(a,e,t),u={...r,name:i,label:c,required:s,autoComplete:o,"data-autom":d,"aria-required":s,"aria-invalid":!!r.error};return l().createElement(oo,u,m.map((e=>l().createElement(co,{key:`${e.value}-${e.label}`,value:e.value},e.label))))},Su=({modKey:e,field:t,tooltip:a})=>{const{props:r,binding:n}=ja(e,t.name),s=!n.properties.optional,{name:o}=t,i=`form-field-${o}`,c={...r,name:o,required:s,"data-autom":i,"aria-required":s,"aria-invalid":!!r.error};return l().createElement(am,c,t.label,a)},Cu=({isOpen:e})=>{const t=e?"icon-chevronup":"icon-chevrondown",a=Wa()("icon icon-after",t);return l().createElement("span",{className:a,"aria-hidden":"true"})},Tu=({modKey:e,field:t,isPostalCodeLayout:a})=>{const r=Ia(),{props:n,binding:s}=Ha(e,t.name),{name:o,labelA11y:i}=t,c={...n,className:"as-buttonlink","data-autom":`form-field-${o}`,"aria-label":i},d=((e,t)=>t&&"enterAddressManually"===e.name)(t,a),m=s.value;d&&(c["aria-expanded"]=m);const u=t.labelDataKey?r.getModuleData(e,t.labelDataKey):t.label;return l().createElement("button",c,u,d&&l().createElement(Cu,{isOpen:m}))},Lu=(e,t)=>{l().useEffect((()=>(e&&t&&window.addEventListener(e,t),()=>{e&&t&&window.removeEventListener(e,t)})),[e,t])},ku=(e={})=>{const{startValue:t=0,min:a,max:r,wrap:n}=e,[s,o]=l().useState(t),i=0===a||Boolean(a),c=0===r||Boolean(r),d=n&&i&&c;return[s,()=>{const e=s+1;o(c&&e>r?d?a:r:e)},()=>{const e=s-1;o(i&&e<a?d?r:a:e)},e=>{let t=e;i&&e<a&&(t=a),c&&e>r&&(t=r),o(t)}]},Iu=(e,t)=>`${`${e}_option`}_${"string"==typeof t?t.trim().toLowerCase().split(" ").join("-"):t}`,Au=(e,t)=>{if(e&&e.children){const a=e.children[t];if(a)return a.querySelector("input")}return null},Pu=({id:e,name:t,value:a,label:r,placeholder:n,error:s,errorA11y:o,errorAttrs:i={},children:c,onChange:d=(()=>{}),onFocus:m=(()=>{}),...u},p)=>{const[g,h]=l().useState(!1),[y,E]=l().useState(!1),[v,b]=l().useState(""),[f,w,N,S]=ku({startValue:0,min:0,max:c?c.length-1:0,wrap:!1}),C=l().useRef(null),T=l().useRef(null),L=l().useRef(null),k=l().useRef(!1);l().useImperativeHandle(p,(()=>({focus:()=>{L.current&&L.current.focus()},focusAndExpand:(e=!0)=>{e&&(k.current=!0),L.current&&L.current.focus(),h(!0)}})));const I=l().useId(),A=e||I,P=e=>{if(C.current&&!C.current.contains(e.target)){if(k.current)return void(k.current=!1);E(!1),h(!1)}};Lu("click",P),Lu("focusin",P),l().useLayoutEffect((()=>{T.current&&L.current&&b(g?`${T.current.offsetHeight+L.current.offsetHeight}px`:"")}),[L,T,g]),l().useEffect((()=>{if(g&&T.current){const e=Au(T.current,f);e&&e.focus()}}),[f,g]);const D=e=>{d(e),h(!1),L.current&&L.current.focus()},O=e=>{const t=Au(T.current,f);if(g)switch(e.key){case"Enter":e.preventDefault(),t&&t.click();break;case"Tab":case"Escape":e.preventDefault(),h(!1),L.current&&L.current.focus();break;case"ArrowDown":case"ArrowRight":e.preventDefault(),w();break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),N()}};return l().createElement("div",{className:Wa()("form-dropdown",{"is-error":s}),ref:C},l().createElement("div",{className:Wa()({"form-dropdown-multiline":!0,"is-expanded":g,focused:y})},l().createElement("button",mr({type:"button",id:A,className:Wa()("form-dropdown-select",{"form-dropdown-selectnone":!a&&!n}),"aria-haspopup":"listbox","aria-controls":"form-dropdown-options-container","aria-expanded":g,"aria-labelledby":`${A}_label`,"aria-describedby":`${A}_error`,onClick:()=>{E(!0),h(!g)},onFocus:e=>{E(!0),m(e)},onKeyDown:e=>{"ArrowDown"!==e.key&&"ArrowUp"!==e.key||(E(!0),h(!0))},style:{height:v},ref:L},u),l().createElement("span",{className:"visuallyhidden"},r),l().createElement("span",{className:"form-dropdown-title"},a||n)),l().createElement("span",{className:"form-dropdown-chevron","aria-hidden":"true"}),l().createElement("span",{className:"form-dropdown-label",id:`${A}_label`,"aria-hidden":"true"},r),l().createElement("div",null,l().createElement("ul",{className:"form-dropdown-options",role:"listbox","aria-label":r,ref:T},c&&l().Children.map(c,((e,r)=>l().cloneElement(e,{name:t,id:Iu(A,e.props.value),key:Iu(A,e.props.value),checked:e.props.value===a,selected:r===f,onChange:D,onKeyDown:O,mouseEnterHandler:()=>S(r)})))))),s&&l().createElement(so,{id:`${A}_error`,error:s,errorA11y:o,errorAttrs:i}))},Du=l().forwardRef(Pu),Ou=({className:e,...t})=>l().createElement("span",mr({className:Wa()("form-dropdown-option-title",e)},t)),xu=({id:e,value:t,checked:a,selected:r,mouseEnterHandler:n,children:s,disabled:o=!1,...i},c)=>{const d=Wa()(["form-dropdown-option",{checked:a,selected:r}]);return l().createElement("li",{className:d,role:"option",tabIndex:-1,"aria-selected":r,"aria-current":a,"aria-disabled":o,onMouseEnter:n},l().createElement("input",mr({ref:c,type:"radio",id:e,value:t,className:"visuallyhidden",checked:a,disabled:o},i)),l().createElement("label",{htmlFor:e},s,a&&l().createElement("span",{className:Wa()(["icon","icon-check"])})))},Ru=l().forwardRef(xu),Fu=({modKey:e,field:t})=>{const a=Ia(),{props:r}=sr(e,t.name,{disableErrorOnBlur:!0}),[n]=Ma(e,"isAutoSelect",!1),{name:s,label:o}=t,i=`form-field-${s}`,c=gu(a,e),[d,m]=Ma(e,"openMultiLineOptions",!1),u=l().useRef(null);l().useEffect((()=>{d&&u.current&&(u.current.focusAndExpand(!0),m(!1))}),[d,m]);const p={...r,name:s,label:o,"data-autom":i,"aria-invalid":!!r.error,ref:u};return n&&1===c.length&&""===r.value&&r.onChange({target:{value:"0"}}),l().createElement(Du,p,c.map((e=>l().createElement(Ru,{key:e.value,value:e.value},l().createElement(Ou,qa(e.label))))))},Mu=({id:e,name:t,value:a,checked:r,className:n,label:s,children:o,withAriaLabeledBy:i=!1,...c},d)=>{const m=l().useId(),u=e||m,p=i?`${u}_label`:void 0;return l().createElement("div",{className:"form-radiobutton"},l().createElement("input",mr({ref:d,type:"radio",id:u,name:t,value:a,checked:r,"aria-labelledby":p,className:Wa()(["form-radiobutton-input",n])},c)),l().createElement("label",{className:"form-label",htmlFor:u,id:p},l().createElement("span",{className:"form-radiobutton-indicator"}),o||s))},_u=l().forwardRef(Mu),Bu=({modKey:e,field:t})=>{const a=Ia(),{props:r,binding:n}=nr(e,t.name),s=n.value,o=((e,t,a)=>{let r=[];if(!a.options)return r;const n=a.options;return r="string"==typeof n?e.getModuleData(t,a.options)||[]:n,r})(a,e,t),{name:i}=t,c={...r,name:i,"data-autom":`form-field-${i}`};return l().createElement("div",{className:"rf-form-layout-radio-fieldset"},l().createElement("fieldset",{className:"form-label"},l().createElement("legend",null,t.label),l().createElement("div",{className:"rf-form-layout-radio-options"},o.map((e=>{const t=`${i}-${e.value}`;return l().createElement(_u,mr({key:e.value,id:t},c,{value:e.value,checked:e.value===s}),e.label)})))))},$u=l().createContext({}),Uu=()=>l().useContext($u),Ku=(e,t={})=>{const a=i("province-selector/utils/fetchData"),r=Object.keys(t).length?nn(e,t):e;return ft(r).then((e=>V().get(e,"body",{}))).catch((e=>a.error(e)))},Vu=({className:e,...t})=>l().createElement(ld,mr({rootTag:"ul",className:Wa()("rc-province-selector-tablist",e)},t)),Hu=l().forwardRef((({index:e,name:t,label:a,className:r,...n},s)=>{const{selection:o}=Uu(),i=o[t]?l().createElement(l().Fragment,null,o[t],l().createElement("span",{className:"visuallyhidden"},a)):a;return l().createElement("li",{role:"presentation"},l().createElement(od,mr({index:e,className:Wa()("rc-province-selector-tab",r),ref:s},n),i))}));Hu.displayName="ProvinceSelectorTab";const ju=({className:e,children:t,...a})=>l().createElement(id,mr({className:Wa()("rc-province-selector-tab-panels",e)},a),t),Gu=({index:e,optionsLength:t,classes:a={},children:r,...n})=>{const{isMobile:s,optionsPerColumn:o,optionsHeight:i,mobileColumns:c,desktopColumns:d}=Uu(),m=((e,t,a,r)=>{if(r){const t=Math.ceil(e/r);return Math.round(t*a)||0}const n=e*a,s=t*a;return Math.min(n,s)})(t,o,i,s?c:d),u={height:`${m}px`};return l().createElement(cd,mr({index:e,className:Wa()("rc-province-selector-tab-panel",a.root)},n),l().createElement("ol",{className:Wa()("rc-province-selector-tab-options",a.list),style:u,role:"list"},r))},Wu=l().forwardRef((({name:e,value:t,index:a,className:r,children:n,onClick:s,...o},i)=>{const{selection:d,onSelection:m}=Uu(),u=l().useRef(!1);return l().createElement("li",{role:"listitem",ref:u},l().createElement("button",mr({type:"button",className:Wa()("rc-province-selector-option",Jc.BODY,r,{"rc-province-selector-option-selected":d[e]===t},`rc-province-selector-option-${e}`),"aria-current":d[e]===t||null,onClick:()=>{m(e,t),s&&s()},onKeyDown:a=>{const r=(()=>{const e=V().get(u,"current.nextSibling");return e?e.querySelector(".rc-province-selector-option"):null})(),n=(()=>{const e=V().get(u,"current.previousSibling");return e?e.querySelector(".rc-province-selector-option"):null})(),s=document.querySelectorAll(`.rc-province-selector-option-${e}`);switch(a.keyCode){case c.Home:a.preventDefault(),s.length&&s[0].focus();break;case c.End:a.preventDefault(),s.length&&s[s.length-1].focus();break;case c.ArrowDown:case c.ArrowRight:r&&r.focus(),a.preventDefault();break;case c.ArrowUp:case c.ArrowLeft:n&&n.focus(),a.preventDefault();break;case c.Space:case c.Return:a.preventDefault(),m(e,t)}},tabIndex:d[e]===t||0===a&&!d[e]?"0":"-1",ref:i},o),n))}));Wu.displayName="ProvinceSelectorOption";const qu=l().forwardRef((({activeTab:e,onTabChange:t=(()=>{}),tabs:a=[],selection:r={},onSelection:n=(()=>{}),optionsPerColumn:s=10,optionsHeight:o=62,mobileColumns:i,desktopColumns:c,classes:d={},children:m},u)=>{const{viewport:p}=z(),g="small"===p;return l().createElement($u.Provider,{value:{selection:r,onSelection:n,isMobile:g,optionsPerColumn:s,optionsHeight:o,mobileColumns:i,desktopColumns:c}},l().createElement("div",{className:Wa()("rc-province-selector",d.root),ref:u},l().createElement(sd,{id:"rc-province-selector-tabs",className:Wa()("rc-province-selector-tabs",d.tabs),index:e,handleChange:t,count:a.length},m)))}));qu.displayName="ProvinceSelectorTabs";const Yu=({tabs:e,activeTab:t,onTabChange:a,selection:r,onSelection:n,...s})=>l().createElement(qu,mr({activeTab:t,onTabChange:a,selection:r,onSelection:n,tabs:e},s),l().createElement(Vu,null,e.map(((e,t)=>l().createElement(Hu,{key:e.name,index:t,name:e.name,label:e.label})))),l().createElement(ju,null,e.map(((e,t)=>l().createElement(Gu,{key:e.name,index:t,name:e.name,"aria-label":e.label,optionsLength:V().get(e,"options.length",0)},V().get(e,"options",[]).map(((t,a)=>l().createElement(Wu,{key:t.value,name:e.name,value:t.value,index:a},t.label)))))))),zu=({addressLookupUrl:e,provinceSelectorTabs:t,onChange:a=(()=>{})})=>{const[r,n]=l().useState(0),[s,o]=l().useState([]),[i,c]=l().useState({}),d=s.filter((e=>e.options&&e.options.length>0));l().useEffect((()=>{Ku(e).then((e=>{return a=e,t.reduce(((e,t)=>{const r=V().get(a,`[${t.name}].data`);return r?[...e,{...t,options:r}]:e}),[]);var a})).then((e=>o(e)))}),[]);return{activeTab:r,setActiveTab:n,tabs:d,selection:i,handleSelection:(r,l)=>{const d=V().find(s,{name:r}),m=V().omit({...i,[r]:l},d.update),u=e=>{if(e.provinceCityDistrict)return a(e.provinceCityDistrict,m),void c(m);const r=(e=>Object.keys(e).reduce(((t,a)=>("object"==typeof e[a]&&(t.options[a]=e[a]),"string"==typeof e[a]&&(t.selection[a]=e[a]),t)),{selection:{},options:{}}))(e),l=(i=t,u=s,p=r.options,g=d.update,i.reduce(((e,t)=>{const a=V().get(p,`[${t.name}].data`),r=V().find(u,{name:t.name});return g.includes(t.name)?a?[...e,{...t,options:a}]:e:a?[...e,{...t,options:a}]:r?[...e,r]:e}),[]));var i,u,p,g;o(l),c({...m,...r.selection}),n(Object.keys(l).length-1);const h=document.querySelectorAll(".rc-province-selector-tab");h.length&&h[h.length-1].focus()};Ku(e,m).then((e=>u(e)))},reset:()=>{n(0),c({}),o((e=>e.slice(0,1)))}}},Xu=({isOpen:e,isLoading:t,showAsButtonLink:a,showGeoLocationDagger:r,buttonLinkText:n,buttonLinkLabel:s,value:o,error:i,...c},d)=>{const m=Yr(),{assets:u}=z(),{processing:p,geoLocationDagger:g}=u,h=!e&&t,y=Wa()("icon icon-after",{"form-dropdown-chevron":!a,"icon-chevrondown":!e,"icon-chevronup":e});if(a){const e=`${m}-error`;return l().createElement("div",{className:Wa()({"is-error":i})},l().createElement("span",null,s," "),h&&l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray as-address-accordion","aria-label":p}),l().createElement("button",mr({},c,{ref:d,type:"button",className:"as-buttonlink","aria-describedby":e}),o||n,r&&g,l().createElement("span",{"aria-hidden":"true",className:y})),i&&l().createElement(so,{id:e,error:i,className:"form-layout-ps-buttonlinkerror"}))}return l().createElement(Xo,mr({},c,{ref:d,error:i,value:o||"",classes:{root:"form-dropdown",input:"rf-form-layout-ps-input",label:"rf-form-layout-ps-input-label"}}),l().createElement("span",{"aria-hidden":"true",className:y}))},Ju=l().forwardRef(Xu),Qu="state",Zu="city",ep="district",tp=({isOpen:e,isLoading:t,tabs:a,activeTab:r,selection:n,onTabChange:s,onClose:o,selectorInputProps:i,error:c,onSelection:d,stateTabProps:m,cityTabProps:u,districtTabProps:p,locationConsent:g,showAsButtonLink:h,showGeoLocationDagger:y,buttonLinkText:E,buttonLinkLabel:v,hideInput:b,tabsRef:f,...w})=>{const N=l().useRef(!1);return!N.current&&e&&(N.current=!0),l().createElement("div",{className:"rf-form-layout-ps-container"},!b&&l().createElement(Ju,mr({error:c,isOpen:e,isLoading:t,showAsButtonLink:h,showGeoLocationDagger:y,buttonLinkText:E,buttonLinkLabel:v},i)),l().createElement(qr,{in:e,onExited:o},N.current&&l().createElement(l().Fragment,null,g,l().createElement(qu,mr({tabs:a,selection:n,activeTab:r,onTabChange:s,onSelection:d,desktopColumns:4,mobileColumns:2,ref:f},w),l().createElement(Vu,null,a.map(((e,t)=>{let a;switch(e.name){case Qu:a=m;break;case Zu:a=u;break;case ep:a=p;break;default:a=null}return l().createElement(Hu,mr({index:t,key:e.name,name:e.name,label:e.label},a))}))),l().createElement(ju,null,a.map(((e,t)=>l().createElement(Gu,{index:t,key:e.name,name:e.name,"aria-label":e.label,optionsLength:e.options.length},e.options.map(((t,a)=>l().createElement(Wu,{key:t.value,name:e.name,value:t.value,index:a},t.label)))))))))))},ap=l().createContext({isFullWidth:!1,classes:{},provinceSelectorProps:{},sectionHeadingTag:"h2",displayMapModKey:null}),rp=({isFullWidth:e,classes:t,provinceSelectorProps:a,sectionHeadingTag:r,children:n,displayMapModKey:s=null})=>l().createElement(ap.Provider,{value:{isFullWidth:e,classes:t,provinceSelectorProps:a,sectionHeadingTag:r,displayMapModKey:s}},n),np=()=>l().useContext(ap),sp="provinceCityDistrictTabs",lp="tabSelected",op=(e,t,a)=>e.getModuleData(t,a.options)||[],ip="linkText",cp=({modKey:e,section:t,field:a})=>{const r=Ia(),n=$a(),{data:s,properties:o}=xa(e),i=Ha(e,Qu),d=Ha(e,Zu),m=Ha(e,ep),u=Va(e,a.name,{disableErrorOnBlur:!0}),{provinceSelectorProps:p}=np(),{locationConsent:g,onChange:h}=p,y=o.isLoadingSubmit,{[sp]:E,[lp]:v,[ip]:b,showGeoLocationDisclaimer:f=!1}=s,w=t.fields[1].filter((t=>((e,t,a)=>op(e,t,a).length>0&&uu(e,t,a))(r,e,t))),N=w.map((t=>({name:t.name,label:t.label||t.name,options:op(r,e,t)}))),S=N.findIndex((e=>e.name===v)),C={state:i.binding.value,city:d.binding.value,district:m.binding.value},T=u.state.error,{name:L,label:k}=a,I=`form-field-${L}`,A={...u.props,name:L,"data-autom":I,"aria-expanded":E},P=l().useRef(null);l().useEffect((()=>{if(P.current){const e=P.current.querySelectorAll(".rc-province-selector-tab");e.length&&S&&e[S].focus()}}),[v]),dr((()=>{h&&h(u.binding.value)}),[u.binding.value]);const D=e=>{e.keyCode!==c.Space&&e.keyCode!==c.Return||(u.binding.runClickEvents(),A.ref.current&&A.ref.current.focus())},O=!!b;return O||(A.label=k,A.readOnly=!0,A.onKeyDown=D),l().createElement(tp,mr({},p,{isOpen:E,isLoading:y,tabs:N,error:T,activeTab:S,selection:C,selectorInputProps:A,onClose:()=>{const e=u.binding.properties.valid;u.state.setError(e),A.ref.current&&A.ref.current.focus()},onTabChange:t=>{n({type:Pe,modKey:e,key:lp,value:N[t].name})},onSelection:(e,t)=>{switch(e){case Qu:i.binding.setValue(t),i.binding.runSetEvents();break;case Zu:d.binding.setValue(t),d.binding.runSetEvents();break;case ep:m.binding.setValue(t),m.binding.runSetEvents()}},stateTabProps:i.props,cityTabProps:d.props,districtTabProps:m.props,locationConsent:g,showAsButtonLink:O,showGeoLocationDagger:f,buttonLinkText:b,buttonLinkLabel:k,tabsRef:P}))},dp=({field:e,isOpen:t,error:a,buttonProps:r,optionProps:n,onOverlayClose:s,selectedOption:o,options:i,onSelection:c})=>{const d=`${e.name}-overlay-header`,m=!r.value&&!r.placeholder,u=Wa()("form-dropdown",{"is-error":!!a}),p=Wa()({"form-dropdown-multiline":!0,"is-expanded":t}),g=Wa()("form-dropdown-select",{"form-dropdown-selectnone":m}),h=`${r.id}-error`;return l().createElement("div",{className:"rf-form-layout-overlayselector"},l().createElement("div",{className:u},l().createElement("div",{className:p},l().createElement("button",mr({},r,{className:g,"aria-describedby":h}),l().createElement("span",{className:"visuallyhidden"},r.label),l().createElement("span",{className:"form-dropdown-title"},r.value||r.placeholder)),l().createElement("span",{className:"form-dropdown-chevron","aria-hidden":"true"}),l().createElement("span",{className:"form-dropdown-label","aria-hidden":"true"},r.label)),a&&l().createElement("div",{id:h,className:"form-message-wrapper"},l().createElement("span",{className:"form-message"},a))),l().createElement(ss,{isFullscreen:!0,appear:!0,visible:t,onClose:s,ariaLabel:d},l().createElement("fieldset",null,l().createElement("legend",{className:"form-label rf-form-layout-overlayselector-legend"},l().createElement("h2",{id:d},e.label))),l().createElement("ul",{className:"rf-form-layout-overlayselector-list",role:"list"},i.map((e=>l().createElement("li",{className:"rf-form-layout-overlayselector-item",key:e.value,onClick:()=>{c(e)}},l().createElement("input",mr({},n,{type:"radio",className:"form-selector-input",checked:o===e.value,id:e.value,value:e.value})),l().createElement("label",mr({htmlFor:e.value,className:"form-label"},qa(e.label)))))))))},mp=({modKey:e,field:t})=>{const a=Ia(),[r,n]=Ma(e,"openMultiLineOptions",!1),[s]=Ma(e,"isAutoSelect",!1),[o,i]=l().useState(r),{props:c,binding:d,state:m}=nr(e,t.name),{name:u,label:p}=t,g=`form-field-${u}`,h=gu(a,e),y={label:p,id:d.properties.key,onClick:()=>i(!0),"data-autom":g},E={...c,name:u},{error:v}=m;return l().useEffect((()=>{r&&(i(!0),n(!1))}),[r,n]),s&&1===h.length&&""===d.value&&c.onChange({target:{value:"0"}}),l().createElement(dp,{field:t,isOpen:o,error:v,options:h,optionProps:E,buttonProps:y,onOverlayClose:()=>{i(!1)},selectedOption:d.value,onSelection:e=>{i(!1),d.setValue(e.value),d.runSetEvents()}})},up=e=>e?{width:e.width,left:0}:{},pp=l().forwardRef(((e,t)=>l().createElement(Zm,mr({},e,{ref:t,getPosition:up})))),gp=({field:e,hasAction:t,actionFieldProps:a,...r},n)=>l().createElement("div",{className:"rf-form-layout-autocomplete"},l().createElement(pp,mr({ref:n},r,{renderInput:r=>l().createElement(Xo,r,t&&l().createElement(Qo,a,l().createElement("span",mr({"aria-label":e.actionLabelA11y},qa(e.actionLabel)))))}))),hp=l().forwardRef(gp),yp=({modKey:e,displayMapModKey:t,field:a,tooltip:r=null,showUseManualFieldOption:n=!1,handleTypeAheadField:o=(()=>{})})=>{const i=Ha(e,a.actionName),d=Ha(t,"updateMap"),m=i.binding.bindExists,{assets:u}=z(),{props:p,binding:g}=cr(e,a.name,{debounce:150}),[h,y]=(0,s.useState)([{}]),E=!g.properties.optional,{options:v}=p;let b={};const{name:f,label:w}=a,N=`form-field-${f}`,S=$a(),C=e.includes("localitySearchTypeAhead")&&"searchString"===f,[,T]=Ma(e,"selectedLocality"),L=m&&"find"===a.actionName,k=V().get(window,"asMetrics.sendUserInteraction",V().noop);(0,s.useEffect)((()=>{n&&y([...v,{city:null,street2:null,street3:null,street:u.useManualEntry,district:null}])}),[n,v,u.useManualEntry]),n?b={options:h,className:"rs-street-typeahead-autocomplete-dropdown",getOptionValue:e=>e.street,getOptionDisabled:e=>!e.street,renderOption:e=>l().createElement(l().Fragment,null,l().createElement("p",{className:"form-dropdown-option-title"},e.street&&e.street),e.district&&e.countryCode&&l().createElement("p",{className:"form-dropdown-option-text"},`${e.district} ${e.countryCode}`))}:C&&(b={className:"rs-locationsearch-autocomplete-dropdown",getOptionValue:e=>e.searchString,renderOption:e=>l().createElement(l().Fragment,null,e.header&&l().createElement("p",{className:"form-dropdown-option-title rs-locationsearch-autocomplete-option-title"},e.header),l().createElement("p",{className:"form-dropdown-option-text"},e.subheader))});const I={...p,...b,name:f,label:w,search:L,required:E,onSelection:(t,a)=>{let r="";if(C){const t=p.options[a],r=e.replace(".localitySearchTypeAhead","");T(!0),Object.keys(t).map((e=>{e!==f&&S({type:Pe,modKey:r,key:e,value:t[e]})})),S({type:pe,modKey:e,name:"localitySelected"})}t===u.useManualEntry?(r=u.useManualEntry.toLowerCase(),o(u.useManualEntry)):(r=`${a+1}/${h.length-1} selected`,p.onSelection(t,a),n&&d.props.onClick()),(e=>{k({name:"metrics",data:{eVar21:`${['D=pageName+"'," |ShippingAddress",e].join("|")}"`}})})(r)},onChange:e=>{e.target.value.length<4&&n&&o(),C&&T(!1),y([]),p.onChange(e)},onKeyDown:e=>{m&&i.props.ref.current&&e.keyCode===c.Return&&i.props.ref.current.click(),p.onKeyDown(e)},"data-autom":N,"aria-required":E,"aria-invalid":!!p.error},A=Wa()({"form-tooltip-textbox-wrapper":!!r});return l().createElement("div",{className:A},l().createElement(hp,mr({field:a,hasAction:m,actionFieldProps:i.props},I)),r)},Ep=l().createContext({isSublayout:!1,isPostalCodeLayout:!1}),vp=({isSublayout:e,isPostalCodeLayout:t,children:a})=>l().createElement(Ep.Provider,{value:{isSublayout:e,isPostalCodeLayout:t}},a),bp=()=>l().useContext(Ep),fp=({modKey:e,section:t,field:a,messageId:r})=>{const n=Ia(),{isPostalCodeLayout:s}=bp(),{displayMapModKey:o}=np(),{viewport:i,assets:c}=z(),d="small"===i,[m,u]=Ma(e,"showUseManualFieldOption",!1),[p,g]=Ma(e,"typeAheadEnabled",!0);if("sublayout"===a.type){const t=`${e}.${a.name}`;if(!n.moduleExists(t))return null;const r="multiLineSelect"===a.component;if("fieldList"===a.name){const a=n.getModuleData(e,"enterAddressManually");return l().createElement(qr,{in:a},l().createElement(Cp,{isSublayout:!0,modKey:t}))}return l().createElement(Cp,{isSublayout:!0,isPostalCodeLayout:r,modKey:t})}let h=null;a.tooltipContent&&(h=l().createElement(Eo,{labelA11y:a.tooltipLabel,after:!0,autoAlign:!0},l().createElement(ho,null,a.tooltipLabel),l().createElement(yo,qa(a.tooltipContent))));let y=null;switch(a.type){case"text":{const{typeAheadDataKey:t}=n.getBindingProps(e,a.name),s=(e=null)=>{e===c.useManualEntry&&u(!m),g(!p)};y=!!t&&p?l().createElement(yp,{modKey:e,field:a,tooltip:h,showUseManualFieldOption:m,handleTypeAheadField:s,displayMapModKey:o}):l().createElement(wu,{modKey:e,field:a,tooltip:h,messageId:r,showUseManualFieldOption:m,handleTypeAheadField:s});break}case"select":y=l().createElement(Nu,{modKey:e,field:a});break;case"checkbox":y=l().createElement(Su,{modKey:e,field:a,tooltip:h});break;case"radio":y=l().createElement(Bu,{modKey:e,field:a});break;case"link":y=l().createElement(Tu,{modKey:e,field:a,isPostalCodeLayout:s});break;case"multiLineSelect":y=d?l().createElement(mp,{modKey:e,field:a}):l().createElement(Fu,{modKey:e,field:a});break;case"tabs":y=l().createElement(cp,{modKey:e,section:t,field:a});break;default:return null}return y},wp=({modKey:e,row:t,section:a})=>{const r=Ia(),{message:n,messageId:s}=((e,t,a)=>{const r=a.find((a=>{if(a.fieldLevelMessage){const{active:r,visible:n}=e.getBindingProps(t,a.name);return r&&n}return!1}));return r?{message:r.fieldLevelMessage||"",messageId:`${e.getBindingProps(t,r.name).key}-fieldMessage`||""}:{message:"",messageId:""}})(r,e,t),{isFullWidth:o,classes:i}=np(),{isSublayout:c}=bp(),d=t.filter((t=>uu(r,e,t))).length;if(0===d)return null;const m=t.map((t=>{const n=`rf-form-layout-field--${t.name}`,o=`large-${12/d} small-12`,c=Wa()("column",o,n),m=Wa()("rf-form-layout-field",i.field);return uu(r,e,t)?l().createElement("div",{key:t.name,className:c},l().createElement("div",{className:m},l().createElement(fp,{modKey:e,section:a,field:t,messageId:s||""}))):null})),u=t.reduce(((e,t,a)=>0===a?t.name:`${e}-and-${t.name}`),""),p="rf-form-layout-row-combo--"+u;return l().createElement(bu,{row:t,fieldCombinationClass:p,isFullWidth:o,isSublayout:c,message:n||"",messageId:s||"",classes:i,fields:m})},Np=({modKey:e,section:t,sectionId:a})=>{const{isFullWidth:r,classes:n,sectionHeadingTag:s}=np(),{isSublayout:o}=bp(),i=t.fields.map((a=>{const r=a.map((e=>e.name)).join("-");return l().createElement(wp,{key:r,modKey:e,section:t,row:a})}));return l().createElement(Eu,{sectionId:a,section:t,sectionHeadingTag:s,rows:i,classes:n,isFullWidth:r,isSublayout:o})},Sp=({layout:e,data:t,className:a,sectionHeadingTag:r="h2"})=>{const{isFullWidth:n}=np();return e&&t?l().createElement("div",{className:Wa()("rf-form-layout","rf-form-layout-viewmode",a)},e.map(((e,a)=>{const{sectionHeader:s="",sectionSubHeader:o="",sectionMessage:i=""}=e,c=e.fields,d=pu(c,a);return l().createElement("div",{key:d,className:"rf-form-layout-section"},s&&l().createElement(yu,{isFullWidth:n,isSublayout:!1,header:s,subHeader:o,headingTag:r,isViewMode:!0}),c.map((e=>{const a=e[0].name;return l().createElement("div",{key:a,className:"rf-form-layout-row"},e.map((e=>{if(!t[e.name])return null;const a=`${t[e.name]}`,r=e.showLabelViewMode?`${e.label}`:"";return l().createElement("span",{key:e.name,className:"rf-form-layout-field-viewmode","data-autom":`form-field-${e.name}`},r&&l().createElement("span",{className:"rf-form-layout-field-label-viewmode"},`${r.trim()}: `),a.trim())})))})),i&&l().createElement("div",{className:"rf-form-layout-section-message as-supplementalinfo large-6 small-12"},l().createElement("p",mr({className:"rf-form-layout-section-message-content"},qa(i)))))}))):null},Cp=({modKey:e,isSublayout:t=!1,layoutKey:a="layout",isPostalCodeLayout:r=!1})=>{const n=Ia(),{isFullWidth:s,classes:o,sectionHeadingTag:i}=np(),[c,d]=_a(e),m=xa(e);if(!m.modExists)return null;const u=((e,t,a)=>e.getModuleData(t,a))(n,e,a);if(!u)return null;if("VIEW"===m.data.mode)return l().createElement(Sp,{layout:u,data:m.data,sectionHeadingTag:i});const p=u.map(((t,a)=>{const r=pu(t.fields,a),n=`rf-form-layout-section--${r}`;return l().createElement(Np,{sectionId:n,key:r,modKey:e,section:t})}));return l().createElement(l().Fragment,null,l().createElement(qs,{messages:c,lastUpdated:d}),l().createElement(vp,{isSublayout:t,isPostalCodeLayout:r},l().createElement(hu,{isSublayout:t,isFullWidth:s,sections:p,classes:o})))},Tp=({modKey:e,isFullWidth:t=!1,layoutKey:a="layout",classes:r={},provinceSelectorProps:n={},sectionHeadingTag:s="h2",...o})=>{const i=Ra(`${e}.displayMap`)?`${e}.displayMap`:null;return l().createElement(rp,{isFullWidth:t,classes:r,provinceSelectorProps:n,sectionHeadingTag:s,displayMapModKey:i},l().createElement(mu,o,l().createElement(Cp,{modKey:e,isSublayout:!1,layoutKey:a})))},Lp=({className:e,error:t,children:a})=>{const r=Wa()("rs-province-selector",e);return l().createElement("div",{className:r},a,t&&l().createElement("div",{className:"is-error"},l().createElement(so,{error:t,className:"rs-province-selector-error"})))},kp=({modKey:e,className:t,mobileColumns:a,desktopColumns:r,isBagApp:n=!1,isCheckoutApp:s=!1,hideInput:o=!1,isFullWidth:i=!1,error:c="",onChange:d})=>l().createElement(Lp,{className:t,error:c},l().createElement(Tp,{modKey:e,isFullWidth:i,provinceSelectorProps:{onChange:d,mobileColumns:a,desktopColumns:r,hideInput:o,locationConsent:l().createElement(lu,{isBagApp:n,isCheckoutApp:s})}})),Ip=l().memo(kp),Ap=({visible:e,setVisible:t,saveBtnProps:a,headerId:r,children:n})=>{const{viewport:s,assets:o}=z(),i="small"===s,c=()=>{hl({eVar:pl,feature:"DeliveryOptionModel",action:"Cancel"}),t(!1)};return l().createElement(ss,{className:"rs-location-overlay",visible:e,onClose:c,isFullscreen:i,fixedWidth:!0,ariaLabel:r},l().createElement("h2",{id:r,className:"rs-location-overlay-header"},o.deliveryOptionRetrieverHeader),n,l().createElement("div",{className:"rs-location-overlay-save"},l().createElement(os,a,o.apply)),l().createElement("div",{className:"rs-location-overlay-cancel"},l().createElement("button",{type:"button",className:"as-buttonlink",onClick:c},o.cancel)))},Pp=({modKey:e,isBagApp:t,isCheckoutApp:a})=>{const{assets:r}=z(),n=$a(),[o,i]=Ma(e,"deliveryOptionsRetriever",!1),c=Ha(e,"Apply"),d=c.binding.properties.isLoadingSubmit,m={...c.props,disabled:d,isLoading:d,"data-autom":"deliveryOptionApply"},u=`${e}.address`,p=xa(u),{active:g}=p.properties;return(0,s.useEffect)((()=>{o!==g&&n({type:De,modKey:u,key:"active",value:o})}),[o,g]),l().createElement(l().Fragment,null,l().createElement(Ap,{visible:o,setVisible:i,saveBtnProps:m,headerId:`location-overlay-header-${e}`},l().createElement(Tp,{modKey:`${e}.address`,className:"rs-location-overlay-form",isFullWidth:!0}),l().createElement(lu,{isBagApp:t,isCheckoutApp:a})),l().createElement(fr,{isPending:d,messages:{pending:r.processing}}))},Dp=l().memo(Pp),Op=({modKey:e,className:t,isBagApp:a,isCheckoutApp:r})=>{const{assets:n}=z(),o=Wa()("rs-location-drawer",t),i=$a(),[c,d]=Ma(e,"deliveryOptionsRetriever",!1),[m]=Ma(e,"hasPostalCodeField",!1),u=`${e}.address`,p=xa(u),g=Ra(`${u}.localitySearchTypeAhead`),{active:h}=p.properties,{id:y}=p.data,E=m||g?`#${y} input.form-textbox-input`:`#${y} select.form-dropdown-select`;return(0,s.useEffect)((()=>{c!==h&&i({type:De,modKey:u,key:"active",value:c})}),[c,h]),l().createElement(qr,{className:o,id:"rs-edit-location",in:c,onEntered:()=>{const e=document.querySelector(E);e&&e.focus()}},l().createElement("div",{className:"rs-location-edit"},l().createElement(Tp,{modKey:u,id:y,isFullWidth:!0}),g&&l().createElement("button",{className:"as-buttonlink typography-body",type:"button",onClick:()=>{d(!1)}},n.cancel)),l().createElement(lu,{isBagApp:a,isCheckoutApp:r}))},xp=l().memo(Op),Rp=({template:e="",children:t})=>{const a=e.toLowerCase().replace(/_/g,"-"),r=a?`rs-${a}`:"",n=Wa()("rs-item-shipping rs-item-delivery","as-icondetails",r,{"rs-item-shipping-template":Boolean(e)});return l().createElement("div",{className:n},l().createElement("div",mr({className:"as-icondetails-icon as-svgicon-container"},qa('<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-shipping as-svgicon-reduced as-svgicon-shippingreduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h25v25H0z"/><path d="m19.69 7.154-6-3.245a2.5 2.5 0 0 0-2.38 0l-6 3.245A2.5 2.5 0 0 0 4 9.354v6.269a2.5 2.5 0 0 0 1.311 2.2l6 3.245a2.5 2.5 0 0 0 2.379 0l6-3.245a2.5 2.5 0 0 0 1.31-2.2V9.354a2.5 2.5 0 0 0-1.31-2.2Zm-7.9-2.365a1.492 1.492 0 0 1 1.427 0l6 3.244a1.454 1.454 0 0 1 .151.11l-2.931 1.665-6.743-3.886ZM8.661 6.48l6.768 3.9-2.929 1.666-6.864-3.9a1.456 1.456 0 0 1 .151-.11ZM5.787 16.941A1.5 1.5 0 0 1 5 15.622V9.354a1.5 1.5 0 0 1 .053-.39L12 12.912v7.358a1.463 1.463 0 0 1-.213-.083ZM20 15.622a1.5 1.5 0 0 1-.786 1.319l-6 3.245a1.5 1.5 0 0 1-.214.084v-7.358l6.947-3.949a1.508 1.508 0 0 1 .053.391Z"/></svg>'))),l().createElement("div",{className:"as-icondetails-detail","data-autom":"rs-item-delivery-details"},t))},Fp=({quote:e})=>e?l().createElement("div",{className:"rs-item-electronic-delivery rs-item-delivery"},l().createElement("span",{className:"rs-bag-delivery-egc"},e)):null,Mp="DUDE_APU_N",_p=({template:e,deliveryHeader:t,shippingLabel:a,deliveryToLabel:r,shipMethodQuote:n,showEditBtn:s,editBtn:o,inlineEditor:i})=>{const{assets:c}=z();if(e===Mp){const{dudeDeliversToLabelCondensed:e,dudeDeliversToLabelFull:d=""}=c;let m=r||e;if(s){m=(r||d).split("{loc}").filter((e=>e)).map(((e,t)=>l().createElement(l().Fragment,{key:e},e,0===t&&o)))}return l().createElement(l().Fragment,null,t&&l().createElement("div",{className:"rs-item-shipping-header"},t),l().createElement("div",{className:"rs-item-shipping-summary as-icondetails-label"},a&&l().createElement("span",{className:"rs-item-shipping-label"},a),l().createElement("span",{className:"rs-item-delivers-to"},m)),i,n.map((({date:e,postfix:t,tooltip:a})=>l().createElement("div",{key:`${e}-${t}`,className:"rs-item-shipping-quote-line as-icondetails-value"},t?l().createElement(l().Fragment,null,e," — ",t):e,a&&l().createElement(Eo,{className:"rs-item-shipping-tooltip",labelA11y:l().createElement("span",qa(a)),autoAlign:!0,after:!0},l().createElement("span",qa(a)))))))}return null},Bp=({shippingLabel:e,shipMethodQuote:t=[],showEditLine:a,editTitle:r,editBtn:n,isPrescription:s,inlineEditor:o})=>{const i=a&&s;return l().createElement("div",{className:Wa()({"rs-item-shipping-prescription":s})},l().createElement("div",{className:"rs-item-shipping-label as-icondetails-label"},e," ",i&&n),i&&o,t.map((({date:e,postfix:t})=>l().createElement("div",{key:`${e}-${t}`,className:"rs-item-shipping-detail-line as-icondetails-value"},t?`${e} - ${t}`:e))),a&&!s&&l().createElement("div",{className:"rs-item-shipping-detail-line"},`${r} `,n))},$p=()=>{const{assets:e}=z(),t=(0,s.useRef)(null),{modKey:a,editLocation:r}=ll(),[n]=Fa(a),{name:o}=n,[i]=Fa(`${a}.delivery`),{ships:c={},delivers:d={},pickup:m,isElectronic:u}=i,p=Boolean(m),g=Boolean(i.delivers&&u),h=Boolean(c.templateID),{type:y,isEditing:E,setIsEditing:v,showGeoLocationDisclaimer:b,deliveryOptions:f}=r,w=`${a}.delivery.lineDeliveryOptions`,N=`${a}.delivery.lineDeliveryOptions.address`,S=Ra(`${a}.delivery.lineDeliveryOptions`),C=js(E);if(g)return l().createElement(Fp,{quote:d.quote});const T=_m({editLocation:r,deliveryData:i,hasDeliveryOptions:S}),L=y===xm,k=y===Dm,I=y===Om,A=y===Pm&&!T,P=c.showShipLabel?e.deliveryLabel:c.resolvedShipLabel,D=Bm({editLocation:r,assets:e}),O=S&&!T,x=L||k||f.isDeliveryOptionDrawerEnabled,R=x||!x&&!E,F=$m({editLocation:r,assets:e}),M=Um({editLocation:r,assets:e,productName:o}),_=Km({editLocation:r}),B=l().createElement(jm,{showBtn:R,isEditing:E,wasEditing:C,setIsEditing:v,showDagger:b,label:F,"aria-label":`${F} ${M}`,"data-autom":_,showChevron:!L,btnRef:t}),$=l().createElement(l().Fragment,null,A&&l().createElement(iu,{triggerRef:t,modKey:N,isBagApp:!0}),I&&l().createElement(xp,{modKey:w,className:Wa()({"as-icondetails-detail":!h}),isBagApp:!0}));return l().createElement("div",{className:"rs-delivery-container"},l().createElement(Rp,{hasPickup:p,template:c.templateID},h?l().createElement(_p,{template:c.templateID,shippingLabel:P,deliveryToLabel:c.deliveryToLabel,shipMethodQuote:c.shipMethodQuote,deliveryHeader:c.deliveryHeader,showEditBtn:O&&void 0!==E&&!E,editBtn:B,inlineEditor:$}):l().createElement(Bp,{shippingLabel:P,shipMethodQuote:c.shipMethodQuote,showEditLine:O,isPrescription:c.isPrescription,inlineEditor:$,editTitle:D,editBtn:B})),!h&&!c.isPrescription&&$,k&&l().createElement(Ip,{modKey:N,className:"as-icondetails-detail",mobileColumns:2,desktopColumns:2,hideInput:!0,isBagApp:!0}),L&&l().createElement(Dp,{modKey:w,isBagApp:!0}))},Up=l().memo($p),Kp='<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-applestorepickup as-svgicon-reduced as-svgicon-applestorepickupreduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h25v25H0z"/><path d="M18.5 5h-1.775a4.231 4.231 0 0 0-8.45 0H6.5A2.5 2.5 0 0 0 4 7.5v11A2.5 2.5 0 0 0 6.5 21h12a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 18.5 5Zm-6-3a3.245 3.245 0 0 1 3.225 3h-6.45A3.245 3.245 0 0 1 12.5 2ZM20 18.5a1.5 1.5 0 0 1-1.5 1.5h-12A1.5 1.5 0 0 1 5 18.5v-11A1.5 1.5 0 0 1 6.5 6h12A1.5 1.5 0 0 1 20 7.5Z"/><path d="M14.4 12.448a1.592 1.592 0 0 1 .738-1.328 1.607 1.607 0 0 0-1.37-.687c-.52 0-.941.317-1.22.317s-.663-.3-1.129-.3a1.861 1.861 0 0 0-1.739 2.068 4.32 4.32 0 0 0 .723 2.3c.346.491.648.883 1.084.883s.617-.287 1.144-.287c.55 0 .663.279 1.137.279s.791-.43 1.084-.853a3.24 3.24 0 0 0 .474-.989 1.516 1.516 0 0 1-.926-1.403ZM12.583 10.357a1.346 1.346 0 0 0 .941-.5 1.594 1.594 0 0 0 .361-.974.731.731 0 0 0-.008-.136 1.5 1.5 0 0 0-1.016.528 1.547 1.547 0 0 0-.384.943c0 .053.008.106.008.128.03.004.06.011.098.011Z"/></svg>',Vp=({template:e,children:t})=>{const a=e.toLowerCase().replace(/_/g,"-"),r=a?`rs-${a}`:"",n=Wa()("rs-item-pickup","as-icondetails",r,{"rs-item-shipping-template":Boolean(e)});return l().createElement("div",{className:n},l().createElement("div",mr({className:"as-icondetails-icon as-svgicon-container"},qa(Kp))),l().createElement("div",{className:"as-icondetails-detail","data-autom":"rs-item-delivery-details"},t))},Hp=({pickupLabel:e,pickupDescription:t,pickupQuote:a,removeGiftingBtn:r,storeLocatorBtn:n})=>l().createElement(l().Fragment,null,e&&l().createElement("span",mr({className:"as-icondetails-label"},qa(e))),t&&l().createElement("span",mr({className:"as-icondetails-value"},qa(t))),a&&l().createElement("span",mr({className:"as-icondetails-value"},qa(a))),r&&l().createElement("span",{className:"as-icondetails-value"},r),n&&l().createElement("span",{className:"as-icondetails-value"},n)),jp="DUDE_APU_N",Gp=({template:e,pickupLabel:t,pickupDescription:a,pickupQuote:r,storeName:n,quoteValue:s,isPickupStoreAvailable:o,showStoreLocator:i,storeLocatorBtn:c,isWarmState:d,showLabelInBold:m})=>{if(e===jp){let e=r;o&&s&&(e=e.replace(s,`<strong>${s}</strong>`));const u=i&&n?e.split(n).filter((e=>e)):[e],p=e.startsWith(n),g=!d||m?`<strong>${t}</strong>`:t;return l().createElement(l().Fragment,null,t&&l().createElement("div",mr({className:"rs-pickup-label"},qa(g))),a&&l().createElement("div",mr({className:"rs-pickup-description"},qa(a))),e&&l().createElement("div",{className:"rs-pickup-quote"},u.map(((e,t)=>l().createElement(l().Fragment,{key:e},0===t&&n&&p&&i&&c,l().createElement("span",mr({className:"rs-pickup-quote-piece"},qa(e))),0===t&&n&&!p&&i&&c)))),!n&&i&&c)}return null},Wp=({children:e,...t},a)=>{const{assets:r}=z();return l().createElement("button",mr({},t,{ref:a,type:"button",className:"as-buttonlink","data-autom":"bag-giftmessage-remove","aria-label":`${r.remove} ${r.giftMsgLabel}`}),e)},qp=l().forwardRef(Wp),Yp=({isLoading:e,children:t,...a},r)=>e?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray"}):l().createElement("button",mr({},a,{ref:r,type:"button",className:"as-buttonlink","data-autom":"bag-seemorestores-link"}),t),zp=l().forwardRef(Yp),Xp=({isOpen:e})=>{const t=e?"icon-chevronup":"icon-chevrondown",a=Wa()("icon icon-after",t);return l().createElement("span",{className:a,"aria-hidden":"true"})},Jp=({items:e=[]})=>l().createElement("ul",{role:"list",className:"rt-storelocator-store-multipleavailability-list"},e.map((e=>{const t=(e=>Wa()({"rt-storelocator-store-availabilityquote":e.availableNowForLine}))(e);return l().createElement("li",{key:e.partId,role:"listitem",className:"row rt-storelocator-store-multipleavailability-item"},l().createElement("div",{className:"column large-7"},e.partName),l().createElement("div",{className:"column large-5 rt-storelocator-store-multipleavailability-quote"},l().createElement("span",{className:t},(e=>e.checkInRequiredMessage?`${e.availabilityQuote} - ${e.checkInRequiredMessage}`:e.availabilityQuote)(e)),e.pickupMethod&&l().createElement("div",qa(e.pickupMethod))))}))),Qp=({idx:e,store:t,name:a,onChange:r,distance:n,dataAutom:s,showMarker:o,isSelected:i,pickupInfo:c,isLoadingStoreSelection:d},m)=>{const{storeId:u,storeName:p,storeDisabled:g,availability:h,storeType:y,recommendationLabel:E}=t,{storeAvailability:v,pickupMethod:b="",waitTimeMessage:f="",multiplePickupMethods:w,availableNowForAllLines:N,lineItemAvailability:S=[],sameAvailabilityForAllLineItems:C}=h,T=Boolean(S.length>1&&!C),L=i&&(T||w||f),k=Wa()({"rt-storelocator-store-availabilityquote":N}),I=Wa()("rt-storelocator-store-marker",{"rt-storelocator-store-marker-apple":"APPLE"===y,"rt-storelocator-store-marker-pup":"PUP"===y});return l().createElement(l().Fragment,null,l().createElement(Nd,{ref:m,name:a,value:u,checked:i,disabled:g,onChange:r,"data-autom":s,withAriaLabeledBy:!0},l().createElement("span",{className:"row align-items-center"},l().createElement("span",{className:"column large-6 small-7 rt-storelocator-store-left"},E&&l().createElement("span",{className:"rt-storelocator-store-recommended typography-caption"},E),l().createElement("span",{className:"rt-storelocator-store-location"},o&&l().createElement("span",{className:I},e+1),l().createElement("span",null,l().createElement("span",mr({className:"form-selector-title"},qa(p))),l().createElement("span",{className:"form-label-small"},n)))),l().createElement("span",{className:"column large-6 small-5 rt-storelocator-store-right"},l().createElement("span",null,l().createElement("span",mr({className:k},qa(v))),l().createElement("span",mr({className:"form-label-small"},qa(b))))))),L&&l().createElement("li",{className:"rt-storelocator-store-multipleavailability typography-body-reduced"},l().createElement(Gr,{in:d,exit:!1,unmountOnExit:!0},l().createElement("div",{className:"rt-storelocator-store-multipleavailability-spinner"},l().createElement("div",{className:"waitindicator waitindicator24-gray"}))),l().createElement(Gr,{in:!d},l().createElement(Jp,{items:S}),c)))},Zp=l().forwardRef(Qp),eg=(e,t)=>new window.mapkit.Coordinate(e,t),tg=l().createContext(null),ag=(e,t)=>(Date.now()-e)/1e3>=t.maxAge,rg=({apiKey:e="",calculateDistances:t,cacheConfig:a={},children:r})=>{const[n,o]=(0,s.useState)(!1),c={maxAge:900,disableCache:!1,...a},d=(0,s.useRef)({distances:{},coordinates:{}});(0,s.useEffect)((()=>{t&&e&&((e,t=V().noop)=>{if(document.querySelector("script[data-mapkit-loaded]"))return void t(window.mapkit);const a=document.createElement("script");a.type="application/javascript",a.id="mapScript",a.src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.core.js",a.setAttribute("crossorigin","anonymous"),a.setAttribute("data-libraries","services,map,annotations"),a.setAttribute("data-initial-token",e),a.setAttribute("data-callback","initMapKit"),window.initMapKit=()=>{a.setAttribute("data-mapkit-loaded","true"),t(window.mapkit),delete window.initMapKit},document.body.appendChild(a)})(e,(()=>{o(!0)}))}),[t,e]);return l().createElement(tg.Provider,{value:{isMapKitInitialized:n,getCoordinates:async e=>{const t=i("react-trans/getCoordinates"),a=d.current.coordinates;if(!c.disableCache){const t=a[e];if(t){if(!ag(t.retrievedAt,c))return t.value;delete a[e]}}try{const t=await(async(e,t={})=>{const a=new window.mapkit.Geocoder;return new Promise(((r,n)=>{a.lookup(e,((e,t)=>e?n(e):r(t)),t)}))})(e),[r]=t.results;let n=null;return r&&(n=r.coordinate,!c.disableCache&&r&&(a[e]={value:n,retrievedAt:Date.now()})),n}catch(e){throw t.error(e),Error(e)}},getStoreDistances:(e,t,a,r)=>{const n=i("react-trans/getStoreDistances"),s={},l=d.current.distances;let o;if(c.disableCache)o=a;else if(l[e]){const t=a.filter((t=>{const a=l[e][t.storeId];return!a||!!ag(a.retrievedAt,c)&&(delete l[e][t.storeId],!0)}));if(0===t.length)return new Promise((t=>t(l[e])));o=t}else o=a;const m=[];V().chunk(o,10).forEach((e=>{const a=e.map((e=>e.coordinates)),r=((e,t,a={})=>{const r=window.mapkit,n=new r.Directions,s=new r.Coordinate(e.latitude,e.longitude),l=t.map((e=>new r.Coordinate(e.latitude,e.longitude)));return new Promise(((e,t)=>{n.eta({origin:s,destinations:l},((a,r)=>a?t(a):e(r)),a)}))})(t,a);m.push(r)}));return Promise.all(m).then((t=>(t.forEach(((t,n)=>{const{etas:o}=t;o.forEach(((t,o)=>{if(t.distance){const i=Date.now(),d=a[o+10*n],m=((e,t)=>"MI"===t?`${(.000621371192*e).toFixed(2)} mi`:`${(e/1e3).toFixed(2)} km`)(t.distance,r),{storeId:u}=d;c.disableCache||(l[e]||(l[e]={}),l[e][u]={value:m,retrievedAt:i}),s[u]={value:m,retrievedAt:i}}}))})),s))).catch((e=>(n.error(e),s)))}}},r)},ng=()=>{const e=l().useContext(tg);if(!e)throw new Error("`useStoreLocator` hook could not access Context. Ensure that it is a child of `<StoreLocatorProvider>`.");return e},sg=({origin:e,stores:t,showMap:a,calculateDistances:r,selectedStoreId:n,distanceUnit:o,maxVisibleStores:c,storeDataAutom:d,selectedStorePickupInfo:m,isSingleStoreCountry:u,isLoadingStoreSelection:p,showAllStoresButtonLabel:g,onShowAllStoresClick:h,onStoreSelection:y})=>{const E=i("react-trans/StoreList"),v=(0,s.useRef)(null),[b,f]=(0,s.useState)(null),[w,N]=(0,s.useState)({}),S=(0,s.useRef)(!1),[C,T]=(0,s.useState)(!1),{isMapKitInitialized:L,getCoordinates:k,getStoreDistances:I}=ng(),A=(0,s.useCallback)(k,[]),P=(0,s.useCallback)(I,[]),D=!C&&t.length>c,{assets:O}=z();(0,s.useEffect)((()=>{e&&r&&L&&(S.current=!0,(async()=>{try{const t=await A(e);f(t)}catch(e){E.error(e),f(null)}S.current=!1})())}),[e,r,L,A]),(0,s.useEffect)((()=>{N({}),!S.current&&b&&(async()=>{const a=await P(e,b,t,o);a&&N(a)})()}),[e,b,t,o,P]);const x=(e,t)=>{const{storeId:s,distance:l=""}=e,o=s,i=s===n,c=d;let g="";g=u?V().get(e,"retailAddress.street",""):r?w[e.storeId]?w[e.storeId].value:"":l;return{key:o,idx:t,name:"store-locator-result",store:e,isSelected:i,dataAutom:c,showMarker:a,isLoadingStoreSelection:p,distance:g,pickupInfo:m,onChange:t=>{y(e,t)}}};return l().createElement("div",{className:"rt-storelocator-store-list"},l().createElement("fieldset",null,l().createElement("legend",{className:"visuallyhidden"},O.selectYourStore),l().createElement(Sd,{className:"rt-storelocator-store-group"},t.map(((e,t)=>{if(t>=c)return null;const a=x(e,t);return l().createElement(Zp,a)}))),D&&l().createElement("button",{type:"button",className:"as-buttonlink rt-storelocator-store-showmore",onClick:e=>{T(!0),h(e)},"data-autom":"show-more-stores-button"},g," ",l().createElement(Xp,{isOpen:!D})),l().createElement(qr,{in:C,onEnter:()=>{v.current&&v.current.focus()}},l().createElement(Sd,{className:"rt-storelocator-store-group"},t.map(((e,t)=>{if(t<c)return null;const a=x(e,t),r=t===c;return l().createElement(Zp,mr({ref:r?v:null},a))}))))))},lg=e=>e.getBoundingClientRect().top+window.scrollY,og=e=>parseInt(window.getComputedStyle(e).getPropertyValue("margin-top"),10),ig=(e,t,a)=>{if("string"==typeof e){const r=document.querySelector(e);return r?lg(r)-(a?og(r):0):t}return void 0===e?t:e},cg=e=>{const t=A(),a=t.iosVersion>0||t.androidVersion>0,r=Boolean(e.noCss||e.mobileNoCss&&a);return!t.positionSticky||r},dg=(e,t,a)=>({"data-core-sticky":"","data-core-sticky-css":t?void 0:"","data-core-sticky-stuck":t&&e?"":void 0,"data-core-sticky-endpin":t&&a?"":void 0}),mg=e=>{const{minHeight:t,maxHeight:a,onStickyChange:r,children:n,...o}=e,[i,c]=(0,s.useState)({min:0,max:0,scrollTop:0,offsetTop:0}),[d,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),[g,h]=(0,s.useState)(cg(e)),[y,v]=(0,s.useState)({top:g?i.offsetTop:""}),[b,f]=(0,s.useState)(dg(u,g,d)),w=(0,s.useRef)(null),N=(0,s.useRef)(0);(0,s.useEffect)((()=>{h(cg(e))}),[e]);const S=(0,s.useCallback)((()=>{if(g&&w.current){const e=w.current,r=E.getViewportScrollY(),n=N.current||lg(e)-og(e);N.current=n;const s=ig(t,n,!1),l=ig(a,1/0,!0)-(e=>{const t=window.getComputedStyle(e);return e.offsetHeight+parseInt(t.getPropertyValue("margin-top"),10)+parseInt(t.getPropertyValue("margin-bottom"),10)})(e),o=Math.max(za(r,s,l)-n,0);c({min:s,max:l,scrollTop:r,offsetTop:o});const i=r>s&&r<l;p(i);m(!i&&r>l)}}),[a,t,g]);return U("scroll",S),(0,s.useLayoutEffect)((()=>{const e=dg(u,g,d);f(e)}),[u,g,d]),(0,s.useLayoutEffect)((()=>{g&&v(u?{top:""}:{top:i.offsetTop})}),[u,g,i.offsetTop]),dr((()=>{r&&r(u)}),[r,u]),l().createElement("div",mr({},o,b,{ref:w,style:y}),n)},ug=({store:e})=>{const{storeName:t,storeHours:a,specialHours:r,specialHoursLabel:n,phoneNumber:o,personalSetupDetail:i,comparePickupOptionsLink:c,pickupMessages:d,pupAuthorizedLabel:m,pickupMessageHeader:u,pickupMessageSubHeader:p,pickupMessageCommonLabel:g,lockerBoxDetail:h,showTradeInInfo:y,retailAddress:E,availability:v,shippingPayMonthlyInstruction:b}=e,f=e.storeHours.length>0,w=e.specialHours.length>0,{waitTimeMessage:N="",waitTimeMessageHeader:S=""}=v,C=Boolean(S||N),[T,L]=(0,s.useState)(!1),{assets:k,fragments:I,viewport:A}=z(),P="small"===A,D=V().get(window,"chatConfig.chat",null);return l().createElement("div",{className:"rt-storelocator-details typography-body-reduced"},b&&l().createElement("div",{className:"rt-storelocator-details-item rt-storelocator-details-monthly-instruction"},b),l().createElement("h3",{className:"rt-storelocator-details-header typography-body"},t),m&&l().createElement("div",{className:"rt-storelocator-details-item"},m),E&&l().createElement("div",{className:"rt-storelocator-details-address"},l().createElement(Sp,{layout:E.layout,data:E})),o&&l().createElement("div",{className:"rt-storelocator-details-item"},o),f&&l().createElement("div",{className:"rt-storelocator-details-item"},a.map((e=>l().createElement("div",{key:e.storeDays,className:"row"},l().createElement("div",{className:"columns large-5"},l().createElement("span",{"aria-label":e.voStoreDays,role:"text"},e.storeDays)),l().createElement("div",{className:"columns large-7 rt-storelocator-details-item-storetimings"},l().createElement("span",null,e.storeTimings)))))),w&&l().createElement("div",{className:"rt-storelocator-details-item"},l().createElement("h4",{className:"rt-storelocator-details-subheader"},n),r.map((e=>l().createElement("div",{key:e.storeHolidayDays,className:"row"},l().createElement("div",{className:"columns large-5"},l().createElement("span",null,e.storeHolidayDays)),l().createElement("div",{className:"columns large-7 rt-storelocator-details-storeholidaytiming"},l().createElement("span",null,e.storeHolidayTiming)))))),i&&l().createElement("div",{className:"rt-storelocator-details-item"},l().createElement("div",qa(i))),d&&l().createElement("div",{className:"rt-storelocator-details-item"},u&&l().createElement("h4",{className:"rt-storelocator-details-subheader"},u),p&&l().createElement("div",qa(p)),d.map((e=>l().createElement("div",{key:e.pickupMethod,className:"rt-storelocator-details-subitem"},l().createElement("h4",{className:"rt-storelocator-details-subheader"},e.pickupMethod),l().createElement("p",qa(e.description)))))),g&&l().createElement("div",{className:"rt-storelocator-details-item"},l().createElement("div",qa(g))),c&&l().createElement("div",{className:"rt-storelocator-details-item"},l().createElement("div",qa(c))),C&&l().createElement("div",{className:"rt-storelocator-details-item rt-storelocator-details-waittime"},S&&l().createElement("h3",{className:"rt-storelocator-details-subheader"},S),N&&l().createElement("div",qa(N))),h&&l().createElement("div",{className:"rt-storelocator-details-item"},l().createElement("div",qa(h))),y&&l().createElement("div",{className:"rt-storelocator-details-item rt-storelocator-details-instructions"},l().createElement("div",qa(I.tradeInMessageInstructions)),l().createElement("button",mr({id:"tradein-overlay-button",className:"as-buttonlink",type:"button",onClick:()=>L(!0)},qa(k.tradeinOverlayLink))),l().createElement(ss,{visible:T,onClose:()=>L(!1),isFullscreen:P,ariaLabel:"rs-tradeinoverlay-header",fixedWidth:!0,noPadding:!0},l().createElement("div",qa(I.smartphoneTradeInOverlayContent)),D&&l().createElement("div",{className:"rs-chatspecialist-wrapper"},l().createElement("div",{className:"as-chat rs-chat rs-chatspecialist"},l().createElement("div",mr({className:"rs-chat-content"},qa(I.chatSpecialist))))))))},pg={cameraDistance:300,showsMapTypeControl:!1},gg="rt-storelocator-map-annotation",hg="rt-storelocator-map-annotation-selected",yg="rt-storelocator-map-annotation-apple",Eg="rt-storelocator-map-annotation-pup",vg=(e,t)=>{const{data:a}=t,{idx:r,storeType:n,storeId:s,isSelected:l}=a,o=Wa()(gg,{[hg]:l,[yg]:"APPLE"===n,[Eg]:"PUP"===n}),i=document.createElement("div");return i.textContent=r+1,i.className=o,i.setAttribute("data-store-id",s),i},bg=({stores:e,selectedStore:t,onExpandMapClick:a})=>{const r=Yr(),n=(0,s.useRef)(null),o=(0,s.useRef)(null),i=(0,s.useRef)([]),c=`storelocator-map-container-${r}`,{assets:d,viewport:m}=z(),{isMapKitInitialized:u}=ng(),[p,g]=(0,s.useState)(!1),[h,y]=(0,s.useState)(!1),E="small"===m,v=Wa()("rt-storelocator-map",{"rt-storelocator-map-expanded":p}),{expandMap:b,collapseMap:f,mapLabelA11y:w}=d;(0,s.useEffect)((()=>(u&&(n.current=((e,t={})=>new window.mapkit.Map(e,t))(c,pg),y(!0)),()=>{n.current&&n.current.destroy()})),[c,u]),(0,s.useEffect)((()=>{if(h&&n.current){i.current.length>0&&n.current.removeAnnotations(i.current);const a=((e,t,a)=>{const{locationA11y:r=""}=a;return e.map(((e,a)=>{const{coordinates:n,storeType:s,storeId:l,storeName:o}=e;if(n){const e=eg(n.latitude,n.longitude),i=l===t.storeId,c={title:`${r} ${o}`.trim(),data:{idx:a,storeType:s,storeId:l,isSelected:i},animates:!0};return new window.mapkit.Annotation(e,vg,c)}return null})).filter(Boolean)})(e,t,d);i.current=a,n.current.addAnnotations(i.current)}}),[d,h,t,e]),(0,s.useEffect)((()=>{const e=o.current;if(h&&e){const a=e.querySelectorAll(`.${gg}`);a&&a.forEach((e=>{const{storeId:a}=e.dataset;a===t.storeId?e.classList.add(hg):e.classList.remove(hg)}))}}),[h,t.storeId]),(0,s.useEffect)((()=>{if(h&&n.current){const e=t.coordinates;if(e){const t=eg(e.latitude,e.longitude);n.current.center=t,n.current.cameraDistance=pg.cameraDistance}}}),[h,t.coordinates,t.storeId]);return l().createElement("div",{className:"rt-storelocator-map-container"},!E&&l().createElement("button",{type:"button",className:"as-buttonlink rt-storelocator-map-expand-button typography-body-reduced",onClick:()=>{g((e=>!e)),a(!p)}},p?f:b," ",l().createElement(Xp,{isOpen:p})),l().createElement("div",{id:c,ref:o,"aria-label":w,className:v,role:"group"}))},fg=({stores:e,selectedStore:t,showMap:a,afterDetails:r,beforeDetails:n,shouldStickDetails:s,onExpandMapClick:o})=>{const i=`rt-storelocator-anchor-${Yr()}`,c=`#${i}`,d=l().createElement("div",{className:"rt-storelocator-additionalinfo"},n,l().createElement(ug,{store:t}),r,a&&l().createElement(bg,{stores:e,selectedStore:t,onExpandMapClick:o}));return l().createElement(l().Fragment,null,s?l().createElement(mg,{maxHeight:c},d):d,l().createElement("div",{id:i}))},wg=(e,t)=>e.find((e=>e.storeId===t))||null,Ng=({stores:e,cacheConfig:t,origin:a="",calculateDistances:r=!1,apiKey:n="",showMap:o=!1,distanceUnit:i="KM",storeDataAutom:c="",beforeDetails:d=null,afterDetails:m=null,selectedStoreId:u="",maxVisibleStores:p=1/0,showAllStoresButtonLabel:g="",selectedStorePickupInfo:h=null,shouldStickDetails:y=!0,isLoadingStoreSelection:E=!1,isSingleStoreCountry:v=!1,onExpandMapClick:b=V().noop,onStoreSelection:f=V().noop,onShowAllStoresClick:w=V().noop})=>{const[N,S]=(0,s.useState)((()=>wg(e,u)));return(0,s.useEffect)((()=>{if(u){const t=wg(e,u);S(t)}}),[u,e]),l().createElement(rg,{apiKey:n,cacheConfig:t,calculateDistances:r},l().createElement("div",{className:"rt-storelocator","data-autom":"rt-storelocator-searchresult"},l().createElement("div",{className:"row"},l().createElement("div",{className:"column small-12 large-6"},l().createElement(sg,{origin:a,stores:e,calculateDistances:r,selectedStoreId:u,distanceUnit:i,maxVisibleStores:p,storeDataAutom:c,selectedStorePickupInfo:h,isSingleStoreCountry:v,beforeDetails:d,afterDetails:m,showMap:o,isLoadingStoreSelection:E,showAllStoresButtonLabel:g,onStoreSelection:f,onShowAllStoresClick:w})),l().createElement("div",{className:"column small-12 large-5"},N&&l().createElement(fg,{stores:e,selectedStore:N,showMap:o,afterDetails:m,beforeDetails:d,shouldStickDetails:y,onExpandMapClick:b})))))},Sg=e=>{const t=(0,s.useRef)([]),a=(0,s.useRef)(""),[r]=Fa(e),[n,l]=Fa(`${e}.searchResults`),o=(0,s.useRef)([]),{mapCoordinates:i,searchInput:c,noOfVisibleStore:d=1/0,showMoreLink:m,distanceUnit:u,mapsEnabled:p,mapApiKey:g,singleStoreCountry:h,isDrivingDistancesEnabled:y,showAllStores:E}=r,[v,b]=(0,s.useState)(c),{retailStores:f}=n,w=E?1/0:parseFloat(d);t.current=f,o.current=i,a.current=c;const N=(0,s.useMemo)((()=>(b(a.current),((e=[],t=[])=>e.map((e=>{const a={...e},r=t.find((t=>t.storeNumber===e.storeId));if(r){const{storeType:e}=r;a.storeType=e,a.coordinates={latitude:parseFloat(r.latitude),longitude:parseFloat(r.longitude)}}return a})).sort((e=>e.recommendationLabel?-1:0)))(t.current,o.current))),[l]),S=nr(e,"selectStore");return{origin:v,stores:N,distanceUnit:u,selectedStoreId:S.binding.value,maxVisibleStores:w,apiKey:g,showMap:p,isLoadingStoreSelection:S.binding.properties.isLoadingSubmit,showAllStoresButtonLabel:m,isSingleStoreCountry:h,calculateDistances:y,onStoreSelection:(e,t)=>{S.props.onChange(t)}}},Cg=({hasResults:e,hasProvinceSelector:t,overlayProps:a,searchField:r,messages:n,storeLocator:s,footerContent:o})=>{const{viewport:i,assets:c}=z(),d="small"===i,m=Wa()("rs-store-locator-overlay",{"rs-has-results":e,"rs-has-province-selector":t});return l().createElement(ss,mr({},a,{className:m,isFullscreen:d,footerContent:o,fixedWidth:!0,noPadding:!0,ariaLabel:"rs-store-locator-title-id"}),l().createElement("div",{className:"rs-store-locator-header"},l().createElement("h2",{id:"rs-store-locator-title-id",className:"rs-store-locator-title"},c.storeLocatorHeader),r),l().createElement("div",{className:"rs-store-locator-wrap"},n,s))},Tg=e=>e?{width:e.width,left:0}:{},Lg=l().forwardRef(((e,t)=>l().createElement(Zm,mr({},e,{className:"rf-form-layout-autocomplete",ref:t,getPosition:Tg})))),kg=(e,t,a)=>{fetch(e).then((e=>e.json())).then((e=>V().get(e,"body.matches",[]))).then((e=>{t(e),a(e.length)}))},Ig=({isLoading:e,autoCompleteUrl:t,textFieldProps:a,searchBtnProps:r,searchBtnLabel:n,isBagApp:o,isCheckoutApp:i,ariaLiveLabels:d})=>{const{assets:m}=z(),[u,p]=(0,s.useState)([]),[g,h]=(({autoCompleteChoiceAllyTxt:e,autoCompleteChoicesAllyTxt:t})=>{const[a,r]=l().useState(),n=l().useRef();return l().useEffect((()=>{a&&(n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{r()}),400))}),[a]),[a,n=>{1===n&&e&&r(`${n} ${e}`),(0===n||n>1&&t)&&r(`${n} ${t}`),a&&r(null)}]})(d),y=H(kg,250),E=r.onClick;i&&(a.onBlur=()=>null),r.disabled=r.disabled||""===a.value;const v=n||m.searchStores,b=`checkout-cityState-${v.toLowerCase()}`,f=e?l().createElement("div",{role:"img",className:"rs-store-locator-search-loader  waitindicator waitindicator16-gray"}):l().createElement(Qo,mr({},r,{"aria-label":m.storeLocatorSearchA11y,"data-autom":b}),v),w=t=>{t.keyCode===c.Esc&&t.stopPropagation();const r=t.keyCode===c.Return,{value:n}=t.target;!e&&n&&r&&E(),a.onKeyDown(t)},N=e=>l().createElement(Xo,mr({},e,{label:m.storeLocatorLabel,"data-autom":"bag-storelocator-input",search:!i}),f);if(!t)return l().createElement("div",{className:"rs-store-locator-search"},N({...a,onKeyDown:w}),l().createElement(lu,{isBagApp:o,isCheckoutApp:i}));return l().createElement("div",{className:"rs-store-locator-search"},l().createElement(Lg,mr({},a,{options:u,onChange:e=>{if(a.onChange(e),e.target.value){const a=nn(t,{value:e.target.value});y(a,p,h)}},onSelection:t=>{a.onChange({target:{value:t}}),e||E()},onHover:e=>{a.onChange({target:{value:e}})},onKeyDown:w,renderInput:N,selectFirst:!0})),g&&l().createElement(gr,{message:g}),l().createElement(lu,{isBagApp:o,isCheckoutApp:i}))},Ag=({submitBtnProps:e})=>{const{assets:t}=z();return l().createElement("div",{className:"rs-store-locator-submit"},l().createElement(os,mr({},e,{"data-autom":"bag-storelocator-confirmstore"}),t.confirmStore))},Pg=({triggerRef:e,triggerClicked:t,setTriggerClicked:a})=>{const{assets:r}=z(),{modKey:n,announceMessage:o}=ll(),i=`${n}.delivery.storeLocator`,[c,d]=_a(i),m=Sg(i),[u=[]]=Ma(`${i}.searchResults`,"retailStores"),p=u.length>0,[g]=Ma(`${n}.delivery`,"singleStoreCountry"),[h]=Fa(i),{retailStoreAutoComplete:y=""}=h,[E]=ir(i),v={...E,visible:E.visible&&t,onExited:()=>{E.onExited(),a(!1),o(r.contentLoadedA11y),e.current&&e.current.focus()}},b=rr(i,"searchInput"),f=Ha(i,"search"),w=f.binding.properties.isLoadingSubmit,N=b.binding.bindExists&&b.props.error,S=Ha(i,"submitStore"),C=!g,T=S.binding.properties.isLoadingSubmit,L={...S.props,isLoading:T,disabled:S.props.disabled||!p||N},k=r.storeResults,I=`${u.length} ${k}`;(0,s.useEffect)((()=>{w&&f.props.ref&&setTimeout((()=>{o(I)}),3e3)}),[w,f.props.ref]);const A=`${i}.address.provinceCityDistrictTabs`,P=Ra(A),[D]=Ma(A,"provinceCityDistrict"),O=$a(),x=N;(0,s.useEffect)((()=>{P&&v.visible&&(b.binding.setValue(D),D&&O({type:pe,modKey:i,name:"search"}))}),[v.visible,D]);const R={...m,onShowAllStoresClick:()=>{hl({eVar:pl,feature:"Pickup",action:"ShowMoreStores"})},onExpandMapClick:Nl},F=P?l().createElement(Ip,{modKey:A,error:x,mobileColumns:2,desktopColumns:4,isBagApp:!0,isFullWidth:!0}):l().createElement(Ig,{isLoading:w,autoCompleteUrl:y,textFieldProps:b.props,searchBtnProps:f.props,ariaLiveLabels:{autoCompleteChoicesAllyTxt:r.multipleSuggestionsLabel,autoCompleteChoiceAllyTxt:r.suggestionLabel},isBagApp:!0});return l().createElement(Cg,{hasResults:p,hasProvinceSelector:P,overlayProps:v,searchField:F,messages:l().createElement(qs,{messages:c,lastUpdated:d}),storeLocator:l().createElement(Ng,R),footerContent:C&&l().createElement(Ag,{submitBtnProps:L})})},Dg=l().memo(Pg),Og=()=>{const{assets:e}=z(),{acShowInstallment:t}=Hs(),{modKey:a}=ll(),[r]=Fa(a),n=`${a}.delivery`,[o]=Fa(n),i=V().get(o,"pickup.pickupLabel",""),c=V().get(o,"pickup.showLabelInBold",!1),d=V().get(o,"pickup.pickupDescription",""),m=V().get(o,"pickup.quote",""),u=V().get(o,"pickup.templateID",""),p=Boolean(u),g=V().get(o,"pickup.dudeAttributeStore",""),h=V().get(o,"pickup.dudeAttributeQuote",""),y=V().get(o,"pickup.isPickupStoreAvailable",!1),E=V().get(o,"pickup.warmStateForPickup",!1),v=V().get(o,"pickup.hasRemoveGiftMessageLink",!1),b=Ha(`${a}.delivery.removeGifting`,"remove"),[f,w]=(0,s.useState)(!1),N=V().get(o,"pickup.enableStoreSelectorLink",!1),S=p&&g?g:V().get(o,"pickup.storeSelectorLinkText",""),C=V().get(o,"pickup.storeSelectorLinkTextA11y",""),T=ln(C,{productName:r.name}),L=Ha(n,"storeLocatorView"),k={...L.props,isLoading:L.binding.properties.isLoadingSubmit,"aria-label":T,onClick:e=>{L.props.onClick(e),w(!0),t&&yl({name:"metrics",data:{hier1:"aos:bag",channel:"aos:bag",prop3:"modal open|pickup|show more stores"}})}},I=v&&l().createElement(qp,b.props,e.remove),A=N&&l().createElement(zp,k,S);return l().createElement(l().Fragment,null,l().createElement(Vp,{template:u,pickupLabel:i,pickupQuote:m},p?l().createElement(Gp,{template:u,pickupLabel:i,pickupDescription:d,pickupQuote:m,storeName:g,quoteValue:h,isPickupStoreAvailable:y,showStoreLocator:N,storeLocatorBtn:A,isWarmState:E,showLabelInBold:c}):l().createElement(Hp,{pickupLabel:i,pickupDescription:d,pickupQuote:m,removeGiftingBtn:I,storeLocatorBtn:A})),N&&l().createElement(Dg,{triggerRef:k.ref,triggerClicked:f,setTriggerClicked:w}))},xg=l().memo(Og),Rg=()=>{const{modKey:e,editLocation:t}=ll(),[a]=Fa(`${e}.delivery`),r=Boolean(a.ships||a.delivers),n=Boolean(a.pickup),o=V().get(a,"ships.leadByPickup",!1),i="true"===o||!0===o,c=Ra(`${e}.delivery.lineDeliveryOptions`),d=_m({editLocation:t,deliveryData:a,hasDeliveryOptions:c}),{templateID:m,deliveryHeader:u,source:p={}}=V().get(a,"ships",{}),{deliveryOrderSortBy:g,fastestShipMethodPriceLabel:h,cutoffFormat:y,eaglePosition:E}=p;return(0,s.useEffect)((()=>{m&&(({eaglePosition:e,...t})=>{vl({position:e,...t})})({templateId:m,deliveryHeader:u,leadByPickup:o,deliveryOrderSortBy:g,fastestShipMethodPriceLabel:h,cutoffFormat:y,eaglePosition:E})}),[m,u,o,g,h,y,E]),l().createElement(Vm,{callout:d&&l().createElement(du,null),hasDelivery:r,hasPickup:n,showPickupFirst:i},n&&i&&l().createElement(xg,null),r&&l().createElement(Up,null),n&&!i&&l().createElement(xg,null))},Fg=l().memo(Rg),Mg=({message:e})=>l().createElement("div",{className:"rs-iteminfo-child"},l().createElement("span",{className:"rs-iteminfo-child-tagline"},e)),_g=()=>{const{modKey:e}=ll(),[t]=Fa(e),{isBundlePromoItem:a,displayTagLine:r}=t,n=a?r:"";return n&&l().createElement(Mg,{message:n})},Bg=l().memo(_g),$g=e=>{if("none"===e.value)return e.value;if(e.values){if(e.values.length>1)return e.displayName;return e.values[0].value}return""},Ug=({group:e,optionProps:t,selectedGroup:a,selectedOption:r,onGroupSelection:n})=>{const{displayName:s,groupDescription:o,groupPrice:i,groupSelectorFooter:c}=e,d=s===a,m=e.values&&e.values.length>1,u=Boolean(i),p=Boolean(o),g=m?e.values.sort(((e,t)=>e.sortOrder-t.sortOrder)):[],h=Wa()("row","form-selector-list-header",{"rs-changeapplecare-nodesc":!p}),y=Wa()("form-selector-title","form-selector-left-col","column",{"large-6":u,"large-12":!u});return l().createElement("div",{className:"rs-changeapplecare-option"},l().createElement(Nd,mr({tag:"div"},t,{onChange:a=>{t.onChange(a),n(e)},value:$g(e),checked:d,name:"change-apple-care",withAriaLabeledBy:!0}),l().createElement("span",{className:h},l().createElement("span",mr({className:y},qa(s))),u&&l().createElement("span",mr({className:"form-selector-right-col column large-6"},qa(i)))),p&&l().createElement("div",mr({className:"form-selector-list-content"},qa(o)))),m&&l().createElement(qr,{in:d},l().createElement("div",{className:"rs-changeapplecare-overlay-tray"},l().createElement(Sd,null,g.map((e=>l().createElement(Nd,mr({},t,{key:e.value,value:e.value,checked:e.value===r,name:`change-apple-care-${s}`,withAriaLabeledBy:!0}),l().createElement("span",{className:"row"},l().createElement("span",mr({className:"form-selector-left-col form-selector-title column large-6"},qa(e.selectorDisplayName))),l().createElement("span",mr({className:"form-selector-right-col column large-6"},qa(e.price)))))))),l().createElement("div",mr({className:"rs-changeapplecare-overlay-trayfooter typography-caption"},qa(c))))))},Kg="rs-changeapplecare-overlay-header",Vg=({overlayProps:e,updateButtonProps:t,optionProps:a,selectedGroup:r,onGroupSelection:n,selectedOption:s,originalSelection:o,isUpdating:i,groups:c=[]})=>{const{assets:d}=z(),m=i||!s||o===s;return l().createElement(ss,mr({ariaLabel:Kg,className:"rs-changeapplecare-overlay"},e),l().createElement("div",{className:"rs-changeapplecare-overlay-wrap"},l().createElement("h2",{className:"rs-changeapplecare-overlay-header typography-headline-reduced",id:Kg},d.changeACTitle),l().createElement("fieldset",null,l().createElement("legend",{className:"visuallyhidden"},d.changeACTitle),l().createElement(Sd,{tag:"div"},c.map((e=>l().createElement(Ug,{group:e,key:e.displayName,optionProps:a,selectedGroup:r,onGroupSelection:n,selectedOption:s}))))),l().createElement(os,mr({},t,{className:"rs-changeapplecare-overlay-update",isLoading:i,disabled:m}),d.changeACUpdate),l().createElement("div",mr({className:"rs-changeapplecare-overlay-footnotes typography-caption"},qa(d.changeACFooter)))))},Hg=({isFetchingOverlay:e,buttonLabel:t,buttonProps:a,overlayProps:r,updateButtonProps:n,optionProps:s,selectedGroup:o,onGroupSelection:i,selectedOption:c,originalSelection:d,groups:m,isUpdating:u})=>l().createElement("div",{className:"rs-changeapplecare"},e?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray"}):t&&l().createElement("button",mr({type:"button",className:"as-buttonlink more"},a),t),l().createElement(Vg,{overlayProps:r,updateButtonProps:n,optionProps:s,selectedOption:c,originalSelection:d,selectedGroup:o,onGroupSelection:i,groups:m,isUpdating:u})),jg="none",Gg=({removeClick:e})=>{const{modKey:t}=ll(),[a,r]=(0,s.useState)(""),n=Ha(t,"changeAppleCareModal"),[o]=Ma(t,"changeAppleCareLinkText"),i=n.binding.properties.isLoadingSubmit,c=(0,s.useRef)(null),d=`${t}.changeAppleCare`,[m]=ir(d),u=Ha(d,"updateAppleCareSelection"),p=nr(d,"appleCarePartNumber"),g=p.binding.value,h={...m,returnFocusRef:n.props.ref,onClose:()=>{r(""),m.onClose()}},[y]=(0,s.useState)(g),{data:E,properties:v}=xa(d),{appleCareGroups:b=[]}=E,f=b.sort(((e,t)=>e.sortOrder-t.sortOrder)),w=v.isLoadingSubmit,N={...n.props,ref:c,onClick:e=>{(()=>{const e=V().get(window,"s.prop8","");hl({eVar:dl,slot:e,feature:"link | change your AppleCare+ plan",action:""})})(),n.props.onClick(e)}};(0,s.useEffect)((()=>{e&&c.current&&setTimeout((()=>{c.current.focus()}),1e3)}),[e,c]);return(0,s.useEffect)((()=>{f.some((e=>{const{displayName:t}=e;if(g===jg&&e.value===jg)return r(t),!0;if(e.values){if(e.values.some((e=>e.value===g)))return r(t),!0}return!1}))}),[g]),l().createElement(Hg,{isFetchingOverlay:i,buttonLabel:o,buttonProps:N,overlayProps:h,updateButtonProps:u.props,optionProps:p.props,selectedGroup:a,onGroupSelection:e=>{if(r(e.displayName),e.values&&e.values.length>1){const[t]=e.values;p.binding.setValue(t.value)}},selectedOption:g,originalSelection:y,groups:f,isUpdating:w})},Wg=l().memo(Gg),qg=({header:e,message:t})=>l().createElement("div",{className:"rs-changedisclaimer"},l().createElement("div",{className:"rs-changedisclaimer-wrap"},l().createElement("h3",{className:"rs-changedisclaimer-title typography-body"},e),l().createElement("div",mr({className:"rs-changedisclaimer-message typography-body-reduced"},qa(t))))),Yg=()=>{const{modKey:e}=ll(),t=`${e}.changeProductDisclaimer`,[a]=Ma(t,"changesAndAvailabilityHeader"),[r]=Ma(t,"changesAndAvailabilityText");return l().createElement(qg,{header:a,message:r})},zg=l().memo(Yg),Xg=({showHeader:e=!0,showDetails:t=!0,headerLabel:a,carrierLabel:r,carrierName:n})=>l().createElement("div",{className:"rs-item-bundle"},e&&l().createElement("h3",{className:"rs-item-bundle-header"},a),t&&l().createElement("div",{className:"rs-item-bundle-detail"},l().createElement("span",{className:"rs-item-bundle-detail-label"},r),l().createElement("span",{className:"rs-item-bundle-detail-value"},n))),Jg=({downPayment:e,downPaymentTermsUrl:t})=>{const{assets:a}=z();return l().createElement("div",{className:"rs-item-downpayment-message"},l().createElement("div",mr({className:"rs-item-downpayment-message-text"},qa(ln(a.downPaymentMessage,{downPayment:e})))),l().createElement("button",mr({className:"as-buttonlink",type:"button",onClick:()=>{window.open(t,"termsWin","width=450,height=773,menubar=no,location=no,status=no"),yl({name:"metrics",data:{evar6:'D=pageName+"|Select|Link|learn more about down payments|Selected"'}})}},qa(a.downPaymentLinkText))))},Qg=e=>{const[t,a]=(0,s.useState)(!1),r=e.showConsent&&e.url&&e.label;return{consent:t,handleChange:t=>{a(t),(t=>{const r=nn(e.url,{consent:t});ft(r).then((e=>{const t=V().get(e,"body.consent",!1);a(t)}))})(t)},showConsent:r,getConsentCookie:()=>ft(e.url).then((e=>{const t=V().get(e,"body.consent",!1);a(t)}))}},Zg=({consent:e,handleChange:t,label:a})=>l().createElement("div",{className:"rc-cookie-compliance"},l().createElement(am,{className:"rc-cookie-compliance-checkbox",checked:e,onChange:e=>t(e.target.checked)},a)),eh=Object.freeze({FETCH_PICKUP_AVAILABILITY:"FETCH_PICKUP_AVAILABILITY",SET_PICKUP_AVAILABILITY:"SET_PICKUP_AVAILABILITY",UPDATE_PICKUP_AVAILABILITY:"UPDATE_PICKUP_AVAILABILITY",SET_STORE_ID:"SET_STORE_ID",SET_GEO_STORE_ID:"SET_GEO_STORE_ID",SET_OVERLAY:"SET_OVERLAY",SELECTED_PART_DATA:"SELECTED_PART_DATA",SL_FETCH_PICKUP_START:"SL_FETCH_PICKUP_START",SL_FETCH_PICKUP_ERROR:"SL_FETCH_PICKUP_ERROR",SL_FETCH_PICKUP_SUCCESS:"SL_FETCH_PICKUP_SUCCESS",SL_CLEAR_PICKUP_DATA:"SL_CLEAR_PICKUP_DATA",PL_FETCH_META_START:"PL_FETCH_META_START",PL_FETCH_META_ERROR:"PL_FETCH_META_ERROR",PL_FETCH_META_SUCCESS:"PL_FETCH_META_SUCCESS",PL_META_SET_CONFIG:"PL_META_SET_CONFIG",PL_FILTER_INIT:"PL_FILTER_INIT",PL_FILTER_UPDATE:"PL_FILTER_UPDATE",PL_FILTER_SET_PART:"PL_FILTER_SET_PART",PL_FILTER_SHOW:"PL_FILTER_SHOW",PL_FILTER_HIDE:"PL_FILTER_HIDE",PL_PICKUP_SHOW_TOGGLE:"PL_PICKUP_SHOW_TOGGLE",PL_PICKUP_HIDE_TOGGLE:"PL_PICKUP_HIDE_TOGGLE",PL_PICKUP_UPDATE_STORE_SELECTION:"PL_PICKUP_UPDATE_STORE_SELECTION",PL_PICKUP_REMOVE_STORE_SELECTION:"PL_PICKUP_REMOVE_STORE_SELECTION",PL_FETCH_PICKUP_START:"PL_FETCH_PICKUP_START",PL_FETCH_PICKUP_ERROR:"PL_FETCH_PICKUP_ERROR",PL_FETCH_PICKUP_SUCCESS:"PL_FETCH_PICKUP_SUCCESS",PL_CLEAR_PICKUP_DATA:"PL_CLEAR_PICKUP_DATA",PL_FETCH_DELIVERY_START:"PL_FETCH_DELIVERY_START",PL_FETCH_DELIVERY_ERROR:"PL_FETCH_DELIVERY_ERROR",PL_FETCH_DELIVERY_SUCCESS:"PL_FETCH_DELIVERY_SUCCESS",PL_CLEAR_DELIVERY_DATA:"PL_CLEAR_DELIVERY_DATA",PL_FETCH_SUGGESTIONS_START:"PL_FETCH_SUGGESTIONS_START",PL_FETCH_SUGGESTIONS_ERROR:"PL_FETCH_SUGGESTIONS_ERROR",PL_FETCH_SUGGESTIONS_SUCCESS:"PL_FETCH_SUGGESTIONS_SUCCESS",PL_CLEAR_SUGGESTIONS_DATA:"PL_CLEAR_SUGGESTIONS_DATA",PL_SUGGESTIONS_UPDATE_STORE_SELECTION:"PL_SUGGESTIONS_UPDATE_STORE_SELECTION",PL_SUGGESTIONS_REMOVE_STORE_SELECTION:"PL_SUGGESTIONS_REMOVE_STORE_SELECTION",PL_SUGGESTIONS_SHOW_TOGGLE:"PL_SUGGESTIONS_SHOW_TOGGLE",PL_SELECTION_UPDATE:"PL_SELECTION_UPDATE",PL_SELECTION_REMOVE:"PL_SELECTION_REMOVE",PL_SELECTION_CLEAR:"PL_SELECTION_CLEAR"}),th=(e,t)=>{switch(t.type){case eh.FETCH_PICKUP_AVAILABILITY:return{...e,fetching:!0};case eh.SET_STORE_ID:return{...e,storeId:t.payload,geoStoreId:null};case eh.SET_GEO_STORE_ID:return{...e,geoStoreId:t.payload};case eh.SET_OVERLAY:return{...e,overlayVisible:t.payload};case eh.SELECTED_PART_DATA:{const{partNumber:a,productTitle:r}=t.payload;return{...e,overlayPart:a,productTitle:r}}case eh.UPDATE_PICKUP_AVAILABILITY:{const a=V().get(e,"pickupMessage.content",{}),r=V().get(t.payload,"content",{}),n={...a.pickupEligibility,...r.pickupEligibility},s={...a,...r};s.pickupEligibility=n;const l=V().get(e,"pickupMessage.stores[0]",{}),o=V().get(t.payload,"stores[0]",{}),i={...l.partsAvailability,...o.partsAvailability},c=[{...l,...o}];return c[0].partsAvailability=i,{...e,fetching:!1,pickupMessage:{...e.pickupMessage,...t.payload,stores:c,content:s}}}case eh.SET_PICKUP_AVAILABILITY:return{...e,fetching:!1,pickupMessage:t.payload};default:return e}},ah=(e,t)=>{const a=e?hn(e):null,r=/i=(.+)?;/,n=/t=a;/;let s,l,o=null;if(a&&(s=a.match(new RegExp(t+"={(.*?)};")),s)){const[,e]=s;e.match(n)&&(l=e.match(r),o=l?l[1]:null)}return o},rh=(e,t)=>encodeURI(`${e}=${t}`),nh=e=>Object.keys(e).filter((t=>t in e&&void 0!==e[t]&&null!==e[t]&&""!==e[t])).map((t=>"parts"===t?e[t].map(((e,t)=>{if(e&&"object"==typeof e){const a=[];return e.part&&a.push(rh(`parts.${t}`,e.part)),e.option&&a.push(rh(`option.${t}`,e.option.join(","))),e.cppart&&a.push(rh("cppart",e.cppart)),e.purchaseOption&&a.push(rh("purchaseOption",e.purchaseOption)),a.join("&")}return rh(`parts.${t}`,`${e}`)})).join("&"):rh(`${t}`,`${e[t]}`))).join("&"),sh=(e,t={})=>((e,t)=>(e=(e=V().unescape(e)).indexOf("?")>-1?/&$/.test(e)?e:`${e}&`:`${e}?`,e+t))(e,nh(t)),lh=(e,t={})=>{const{parts:a,little:r,maxParamsPerURL:n,doParamRestriction:s,timeout:l,...o}=t,[i,c]=V().partition(a,(e=>e&&"object"==typeof e?e.little:r)),d=V().chunk(i,s?n:i.length),m=V().chunk(c,s?n:c.length),u=[...d.map((t=>ft(sh(e,{...o,parts:t,little:!0})))),...m.map((t=>ft(sh(e,{...o,parts:t}),{timeout:l})))];return Promise.all(u)},oh=({pickupQuote:e,part:t,onTriggerClick:a,storeData:r,classes:n,hideSearch:s,info:o,singleStoreCountry:i,productLocatorEnabled:c,littleApuEnabled:d,pickupButtonRef:m})=>e||!s&&!d?l().createElement("div",{className:n.root},l().createElement("div",{className:Wa()(Jc.BODY_REDUCED,"rf-pickupinfo",n.info,{"rf-pickupinfo-noquote":!e})},!d&&l().createElement("span",mr({className:Wa()("as-svgicon-container","rf-pickup-quote-icon",n.svgIcon)},qa(Kp))),l().createElement("div",{className:Wa()(Jc.BODY_REDUCED,{"rf-pickup-quote-info-little":d}),"data-autom":"pickUpDetails"},l().createElement("span",mr({className:"rf-pickup-quote-label"},qa(o.storePickupLabel))),l().createElement("span",mr({className:"rf-pickup-quote-value"},qa(e))),!d&&o.storeSearchEnabled&&!s&&(i&&!c?l().createElement("a",{className:"rf-pickupinfo-moreinfolink",href:r.hoursUrl,target:"_blank",rel:"noopener noreferrer"},l().createElement("span",qa(o.storePickupLinkText)),l().createElement("span",mr({className:"visuallyhidden"},qa(o.storePickupProductTitle)))):l().createElement("button",{ref:m,type:"button",onClick:()=>a(t,o.storePickupProductTitle),className:Wa()("rf-pickup-quote-overlay-trigger","as-buttonlink"),"data-autom":c?`productLocatorTriggerLink_${t}`:`buacEligibilityChecker_${t}`},l().createElement("span",qa(o.storePickupLinkText)),l().createElement("span",mr({className:"visuallyhidden"},qa(o.storePickupProductTitle)))))))):null,ih=({pickupQuote:e,pickupQuoteForApu2:t,part:a,onTriggerClick:r,storeData:n,classes:s,hideSearch:o,info:i,singleStoreCountry:c,productLocatorEnabled:d,littleApuEnabled:m,pickupButtonRef:u})=>{const p=t||e;if(!e&&(o||m))return null;const g=t?null:l().createElement("button",{ref:u,type:"button",onClick:()=>r(a,i.storePickupProductTitle),className:Wa()("rf-pickup-quote-overlay-trigger","as-buttonlink"),"data-autom":d?"productLocatorTriggerLink":"buacEligibilityChecker"},l().createElement("span",qa(i.storePickupLinkText)));return l().createElement("div",{className:Wa()("rf-pickup-quote-storelink",s.root)},l().createElement("div",{className:Wa()(Jc.BODY_REDUCED,"rf-pickupinfo",s.info,{"rf-pickupinfo-noquote":!p})},!m&&l().createElement("span",mr({className:Wa()("as-svgicon-container","rf-pickup-quote-icon",s.svgIcon)},qa(Kp))),l().createElement("div",{className:Wa()(Jc.BODY_REDUCED,{"rf-pickup-quote-info-little":m}),"data-autom":"pickUpDetails",onClick:e=>{e.target&&e.target.classList.contains("rf-pickup-quote-overlay-trigger")&&r(a,i.storePickupProductTitle)}},l().createElement("span",mr({className:"rf-pickup-quote-label"},qa(i.storePickupLabel))),l().createElement("span",mr({className:"rf-pickup-quote-value",ref:e=>(u.current||(u.current=e),u)},qa(p))),!m&&i.storeSearchEnabled&&!o&&(c&&!d?l().createElement("a",{className:"rf-pickupinfo-moreinfolink",href:n.hoursUrl,target:"_blank",rel:"noopener noreferrer"},l().createElement("span",qa(i.storePickupLinkText)),l().createElement("span",{className:"visuallyhidden"},i.storePickupProductTitle)):g))))},ch=Object.freeze({APU2_0:"DUDE_APU_N"}),dh=({bootstrap:e,part:t,hideSearch:a=!1,pickupMessage:r,onTriggerClick:n=(e=>e),cache:s=!0,classes:o={},templateId:i,pickupButtonRef:c})=>{if(!e)return null;const{singleStoreCountry:d,productLocatorEnabled:m,littleApuEnabled:u=!1}=e,p=V().get(r,"stores.0",{hoursUrl:"#"}),g=l().useRef(null),h=V().get(p,`partsAvailability[${t}]`)||V().get(r,`content.pickupEligibility[${t}]`);h&&(g.current=h);const y=s?g.current:h,E=V().get(y,"storePickupQuote")||V().get(y,"pickupQuote"),v=V().get(y,"storePickupQuote2_0"),b=i===ch.APU2_0?l().createElement(ih,{pickupQuote:E,pickupQuoteForApu2:v,part:t,onTriggerClick:n,storeData:p,classes:o,hideSearch:a,info:y,singleStoreCountry:d,productLocatorEnabled:m,littleApuEnabled:u,pickupButtonRef:c}):l().createElement(oh,{pickupQuote:E,part:t,onTriggerClick:n,storeData:p,classes:o,hideSearch:a,info:y,singleStoreCountry:d,productLocatorEnabled:m,littleApuEnabled:u,pickupButtonRef:c});return y?b:null},mh=(e,t)=>a=>{const r=i("storelocator/fetchPickupData");a({type:eh.SL_FETCH_PICKUP_START});const n=ft(sh(e,t));return n.then((e=>({body:V().get(e,"body.content.pickupMessage")}))).then((e=>{if(e.body){const t=V().get(e.body,"errorMessage");t?(r.debug(`ResponseError: ${t}`),a({type:eh.SL_FETCH_PICKUP_ERROR,error:{isResponseError:!0,message:t}})):(e.body.stores=e.body.stores.slice().map((e=>{const t=V().get(e,"partsAvailability",{}),a=V().keys(t)[0];return e.partsAvailabilityNorm=V().get(t,a,{}),e})),a({type:eh.SL_FETCH_PICKUP_SUCCESS,data:e.body}))}})).catch((e=>{r.error(e),a({type:eh.SL_FETCH_PICKUP_ERROR,error:{isNetworkError:!0,message:e}})})),n},uh={isFetching:!1,isFetched:!1,data:{},error:null,isShown:!0,isToggleBtnNeeded:!1},ph=(e,t)=>{switch(t.type){case eh.SL_FETCH_PICKUP_START:return{...e,isFetching:!0,isFetched:!1,error:null};case eh.SL_FETCH_PICKUP_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:{}};case eh.SL_FETCH_PICKUP_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,data:t.data};case eh.SL_CLEAR_PICKUP_DATA:return uh;default:return e}},gh={},hh=(e,t,a,r,n)=>{const s={partNumber:r};n&&(s.carrierModel=n);const l=V().find(a,s),o=V().get(t,e,[]),i=V().map(V().sortBy(o,"sortOrder"),"key"),c=V().sortBy(V().uniq(V().map(V().filter(a,e),e)),(e=>i.indexOf(e)));return V().map(c,(t=>{const a=V().find(o,{key:t})||{};return{value:t,image:a.swatchImage,label:a.value,selected:!!l&&l[e]===t}}))},yh=e=>e.filter((e=>V().find(e.options,"selected"))).map((e=>({key:e.key,value:V().find(e.options,"selected").value}))).reduce(((e,t)=>(e[t.key]=t.value,e)),{}),Eh=(e,t,a=!1)=>{const{key:r,value:n}=e,s=yh(t);if(!((e,t,a=[])=>{let r=!1;return a.forEach((a=>{a.key===e&&V().findIndex(a.options,{value:t})>=0&&(r=!0)})),r})(r,n,t))return s;if(!a)return{...s,[r]:n};const l=((e,t)=>{let a=!1;const r=t.filter((t=>{if(t.key===e&&(a=!0),!a)return t.key}));return V().map(r,"key")})(r,t);return{...V().pick(s,l),[r]:n}},vh=(e,t,a)=>{let r=V().find(a,e);if(r)return r.partNumber;const n=Object.keys(e).length-1,s=n&&t[n]&&t[n].key,l=V().omit(e,s);return r=V().find(a,l),vh(l,t,a)},bh=(e,t,a)=>{const r=gh[t];if(!r||!r.products||!r.prices)return null;const n=a?{partNumber:e,carrierModel:a}:{partNumber:e},s=V().find(r.products,n)||{},l=V().get(r.prices,s.price,{});switch(r.purchaseOption||"fullPrice"){case"ipp":return V().get(l,"iupPrice");case"iupPriceNonDefault":return V().get(l,"iupPriceNonDefault");case"ipi":return V().get(l,"ipiPrice");case"cp":return V().get(l,"carrierInstallment");default:return V().get(l,"fullPrice")}},fh=(e,t,a)=>{const r=gh[t];if(!r||!r.products||!r.imageDictionary)return{};const n=a?{partNumber:e,carrierModel:a}:{partNumber:e},s=V().find(r.products,n)||{};return V().get(r.imageDictionary,s.image)},wh=(e,...t)=>{const a=gh[e];return a&&a.products?t.map((e=>(V().find(a.products,{partNumber:e})||{}).basePartNumber)):null},Nh=e=>{const t=gh[e];t.products=V().sortBy(t.products,(t=>((e,t)=>{const{displayValues:a,dimensionsVariations:r}=gh[t];return V().reduce(a.items,((t,a)=>{const n=V().get(a,"value.dimensionValue"),s=V().get(e,n),l=V().get(r,n,[]);return t+(V().find(l,{key:s})||{}).sortOrder}),0)})(t,e)))},Sh=(e,t)=>{var a,r;return a=t.config,r=t.family,gh[r]||(gh[r]={...a}),Nh(t.family),{...e,isInitialized:!0}},Ch=(e,t)=>{const a=gh[t.family],{products:r,displayValues:n,dimensionsVariations:s}=a;let l;if(t.part)gh[t.family]={...a,purchaseOption:t.purchaseOption},l=t.part;else{const a=yh(e.dimensions),{key:n,value:s}=t.selection,o={...a,[n]:s};l=vh(o,e.dimensions,r)}const o={partNumber:l},{cppart:i}=e;i&&(o.carrierModel=i);const c=V().find(r,o),d=bh(l,t.family,i),m=fh(l,t.family);let u=((e,t,a,r,n)=>e.items.map((e=>({label:e.value.dimensionLabel,key:e.value.dimensionValue}))).map(((e,s)=>({header:e.label,key:e.key,id:`pl-dim-${s}`,options:hh(e.key,t,a,r,n),modelMessage:V().get(window,"fulfillmentBootstrap.modelMessage","")}))))(n,s,r,l,i);return u=((e,t)=>e.map((a=>(a.options=a.options.map((r=>{const n={key:a.key,value:r.value},s=Eh(n,e,!0),l=V().find(t,s);return{...r,enabled:!!l}})),a))))(u,r),{...e,dimensions:u,part:l,product:c,displayPrice:d,productImage:m}},Th={isShown:!1,isInitialized:!1},Lh=(e,t)=>{switch(t.type){case eh.PL_FILTER_INIT:return{...e,...Sh(e,t)};case eh.PL_FILTER_UPDATE:return{...e,...Ch(e,t)};case eh.PL_FILTER_SET_CPPART:return{...e,cppart:t.cppart};case eh.PL_FILTER_SET_PART:return{...e,part:t.part};case eh.PL_FILTER_SHOW:return{...e,isShown:!0};case eh.PL_FILTER_HIDE:return{...e,isShown:!1};default:return e}},kh=window.asMetrics,{sendUserInteraction:Ih,util:Ah}=window.asMetrics,{OmnitureCollection:Ph,OmnitureEvent:Dh}=Ah.omnitureCollection;let Oh,xh="storeLocator";const Rh=(e,t)=>{const a=new Ph(new Dh("event29"));e?a.add(new Dh("event32")):a.add(new Dh("event31"));const r=['D=pageName+"',"",xh,"",`${e?"See more stores":"Check availability"}"`].join("|"),n=t.substring(0,5);Ih({name:xh,beacon:{linkTrackVars:"eVar67,prop37,events",linkTrackEvents:a,events:a,prop37:r,eVar67:n}})},Fh=(e,t)=>{const a=((e,t)=>{const a=gh[t],r=V().find(a.products,{partNumber:e})||{},{displayValues:n}=a,s={};return n.items.forEach((e=>{const t=V().get(e,"value.dimensionValue");Object.prototype.hasOwnProperty.call(r,t)&&(s[t]=r[t])})),s})(e,t)||{},r=V().toArray(V().omit(a,"carrierModel")).join(" > ").toUpperCase();kh.fireMicroEvent({part:r,feature:xh,eVar:"eVar6",action:"Selected"})},Mh=()=>{kh.fireMicroEvent({feature:xh,eVar:"eVar6",action:"Close"})},_h=(e,t)=>{Oh=e,xh=t?"storeLocator - sticky":"storeLocator"};let Bh={autoCompleteDebounceInterval:200,pickupRequest:{searchNearby:!0}};const $h=({bootstrap:e,part:t,options:a,storeId:r,visible:n,onStoreChange:s,stickyTrigger:o})=>{if(!e||!e.url)return{};Bh={...Bh,...e};const[i,c]=l().useState(null),[d,m]=l().useState(null),[u,p]=l().useState(!1),[g,h]=l().useState(!1),[y,E]=l().useReducer(ph,uh),v=l().useRef(null),b=a?Object.values(a).join(","):null;l().useEffect((()=>{if(n&&t&&r){c(r),p(!0);const e=b?{"option.0":b}:{};mh(Bh.url,{...Bh.pickupRequest,"parts.0":t,...e,store:r})(E)}n&&t&&(_h(t,o),Rh(r,t))}),[n,t,b,r]);const f=()=>{E({type:eh.SL_CLEAR_PICKUP_DATA}),m(null),c(null),p(!1)};return{state:y,isWarm:u,showStoreDetails:g,location:d,store:i,handleFormSubmit:e=>{if(e.search){p(!0),m(e.search);const a=b?{"option.0":b}:{};mh(Bh.url,{...Bh.pickupRequest,"parts.0":t,...a,location:e.search})(E).then((e=>{const t=V().get(e,"body.content.pickupMessage.stores[0].storeNumber");t&&c(t);const a=V().get(e,"body.content.pickupMessage.errorMessage");v.current&&a&&setTimeout((()=>{v.current.focus()}),100)}))}},handleStoreChange:e=>c(e),handleShowStoreDetails:(e,t=!1)=>{e&&c(e),h(t)},handleSaveSelection:()=>{s&&s({store:i}),(()=>{const e=new Ph(new Dh("event37")),t=['D=pageName+"',"",xh,"","Retail store selected"].join("|");Ih({name:xh,beacon:{events:e,prop37:t}})})(),f()},clearOverlayData:f,searchInputRef:v}},Uh=({ariaLabel:e,entered:t})=>{const a=l().useRef(null),r=l().useRef(null);return l().useEffect((()=>(t&&(r.current=document.activeElement,a.current&&a.current.focus()),()=>{r.current&&window.setTimeout((()=>{r.current.focus()}),0)})),[t]),l().createElement("div",{className:"column large-12 small-12 rf-pickupinfo-spinner"},l().createElement("div",{ref:a,role:"img",tabIndex:-1,className:"waitindicator waitindicator40-blue","aria-label":e}))};Uh.displayName="Loader";const Kh=Uh,Vh="search",Hh=({fieldData:e,form:t,inputProps:a,setOptions:r,inputRef:n,resetA11yText:s,errorMessageId:o=""})=>l().createElement(Xo,mr({type:"text","data-autom":"zipCode",name:Vh,search:!0,label:e.searchPlaceholder,autoComplete:"off",maxLength:e.maxlength,value:t.values[Vh],onChange:t.handleChange,error:t.touched[Vh]&&t.errors[Vh],onReset:()=>{t.setFieldValue(Vh,""),r([]);const e=n||a.ref;e&&e.current.focus()},resetA11y:s,ref:n},a,{onBlur:e=>{a&&a.onBlur(),t.handleBlur(e)},"aria-describedby":o})),jh=({onSubmit:e,fieldData:t,consent:a,classes:r={},inputValue:n,errorMessageId:s,searchInputRef:o})=>{const{initialValues:c,validationSchema:d}=l().useMemo((()=>((e,t)=>{const a=V().get(e,"validation.zip",{}),r={[Vh]:t||""},n={};return n[Vh]=[],n[Vh].push({type:"required",message:a.requiredError}),e.isAutoCompleteEnabled||n[Vh].push({type:"regEx",regEx:a.required?[a.pattern]:[a.pattern,"^$"],message:a.invalidFormatError}),{initialValues:r,validationSchema:n}})(t,n)),[t,n]),{isAutoCompleteEnabled:m}=t,[u,p]=l().useState([]),g=Fd({initialValues:c,validationSchema:d,onSubmit:e}),{consent:h,handleChange:y,showConsent:E}=a.cookieCompliance||{},[v,b]=hr({resetDelay:4e3}),f=V().get(c,Vh);l().useEffect((()=>{g.resetForm(),g.setValues(c),o.current&&g.registerFieldRef(o.current)}),[f]);const{assets:w}=z(),N=V().get(w,"reset");return l().createElement("div",{className:Wa()("rf-storelocator-search",r.search)},l().createElement("form",{className:"rf-storelocator-form",onSubmit:g.handleSubmit},l().createElement("div",{className:"field-wrapper row",key:Vh},l().createElement("div",{className:"large-8 small-12"},m?l().createElement(l().Fragment,null,l().createElement(Zm,{value:g.values[Vh],onChange:e=>{const a=i("storelocator/SearchForm/onChange");g.setFieldValue(Vh,e.target.value),ft(sh(t.autoCompleteUrl,{value:e.target.value})).then((e=>{const t=V().get(e,"body.matches",[]),a=V().get(e,"body.suggestionsVOText","");p(t),b(a)})).catch((e=>a.error(e)))},onSelection:t=>{g.setFieldValue(Vh,t),e({[Vh]:t})},options:u,getPosition:e=>e?{width:e.width,left:0}:{},renderInput:e=>l().createElement(Hh,{fieldData:t,form:g,inputProps:{...e,ref:o},setOptions:p,resetA11yText:N,errorMessageId:s}),classes:{root:"rf-storelocator-autocomplete"}}),l().createElement(gr,{message:v})):l().createElement(Hh,{fieldData:t,form:g,setOptions:p,inputRef:o,resetA11yText:N,errorMessageId:s})),l().createElement("div",{className:"large-4 small-12"},l().createElement("button",{type:"submit",className:"button button-super button-block rf-storelocator-searchbutton","data-autom":"storeSearchButton"},t.searchButton))),E?l().createElement("div",{className:"row"},l().createElement(Zg,{consent:h,handleChange:y,label:a.label})):null))};jh.displayName="SearchForm";const Gh=jh,Wh=({onSubmit:e,fieldData:t,consent:a,inputValue:r,classes:n={}})=>{const[s,o]=l().useState(!1),[i,c]=l().useState(),d=l().useRef(!1),m=l().useRef(),{selectLocationLabel:u,searchForStoresNearLabel:p,showingStoresNearLabel:g,provinceSelectorTabs:h,addressLookupUrl:y}=t,E=l().useMemo((()=>{const e=h.map((e=>e.name));return h.map(((t,a)=>({...t,update:e.slice(a+1)})))}),[h]),v=zu({addressLookupUrl:y,provinceSelectorTabs:E,onChange:t=>{m.current&&m.current.focus(),c(t),o(!1),e({search:t})}}),{consent:b,handleChange:f,showConsent:w}=a.cookieCompliance||{},N=i&&V().get(v.selection,"city")||r;return l().createElement("div",{className:Wa()("rf-storelocator-search-province-selector",n.search)},l().createElement("form",{className:"rf-storelocator-province-selector-form"},l().createElement("span",null,N?g:p),l().createElement("button",{type:"button",className:Wa()(n.button,"rf-storelocator-province-selector-button","icon","icon-after",{"icon-chevrondown":!s,"icon-chevronup":s}),onClick:()=>{o(!s),s||(d.current=!0)},ref:m,"aria-expanded":s},N||u),l().createElement("div",{className:"column large-12 small-12"},l().createElement(qr,{in:s},w?l().createElement(Zg,{consent:b,handleChange:f,label:a.label}):null,d.current&&l().createElement(Yu,{activeTab:v.activeTab,onTabChange:v.setActiveTab,selection:v.selection,onSelection:v.handleSelection,tabs:v.tabs,desktopColumns:4,mobileColumns:2})))))},qh=({inline:e,reduced:t,tiny:a,noScrim:r,className:n="",children:s,...o})=>l().createElement("span",mr({className:Wa()("badge",{"badge-reduced":t,"badge-tiny":a,"badge-no-scrim":r,"badge-inline":e},n)},o),s),Yh=({className:e,legend:t,childAfterLegend:a,classes:r={items:""},children:n,...s})=>l().createElement("fieldset",mr({className:Wa()("colornav","rc-dimension-colornav",e)},s),l().createElement("legend",null,t),a,l().createElement("ul",{className:Wa()("colornav-items",r.items)},n)),zh=({id:e,className:t,handleChange:r,classes:n={image:"",input:"",label:"",navLabel:""},badgeText:s,image:o,text:i,skipChangeSelection:c,isProductRed:d,productRedImage:m,compact:u,labelAttrs:p,useImageAlt:g=!1,isMultiSelect:h=!1,...y})=>{const E=l().useId(),v=e||E,b=g?o:o&&{...o,alt:""},f=(()=>{const e="../dist/assets/ac-colornav/productred.svg";return l().useMemo((()=>{let t=e;try{a.p&&(t=new URL(e,a.p).href)}catch{}return t}),[])})();return l().createElement("li",{className:Wa()(t,"colornav-item",{"colornav-item-productred":d,"rc-colornav-item-compact":u})},l().createElement("input",mr({type:h?"checkbox":"radio",id:v,className:Wa()("colornav-value","rc-dimension-colornav-input",n.input)},Cd(r,c),y)),l().createElement("label",mr({htmlFor:v,className:Wa()("colornav-link","rc-dimension-colornav-link",{"rc-colornav-label-compact":u},n.label)},p),s&&l().createElement(qh,mr({noScrim:!0,reduced:!0,className:"rc-colornav-label-badge"},qa(s))),l().createElement(Il,{data:b,className:Wa()(n.image,"colornav-swatch",{"rc-dimension-colornav-image-compact":u}),alt:""}),d&&l().createElement("span",{className:"colornav-logo-productred",tabIndex:"-1"},m||l().createElement("img",{alt:"",src:f})),l().createElement("span",mr({className:Wa()("colornav-label",n.navLabel)},qa(i)))))},Xh=({legend:e,childAfterLegend:t,withGutters:a,classes:r={items:""},tag:n="div",className:s,children:o,...i})=>l().createElement("fieldset",mr({className:Wa()("rc-dimension",s)},i),l().createElement("legend",null,e),t,l().createElement(Sd,{withGutters:a,className:Wa()("rc-dimension-selector-group",{row:a},r.items),tag:n},o)),Jh=({className:e,handleChange:t,skipChangeSelection:a,showSwatch:r,short:n,threeLine:s,itemsPerRowLarge:o=2,itemsPerRowSmall:i=2,classes:c={input:"",label:""},children:d,...m})=>l().createElement(Nd,mr({tag:"div",className:Wa()(e,"rc-dimension-multiple",{"form-selector-swatch":r,"form-selector-threeline":s,"form-selector-short":n},"column","large-"+12/o,"small-"+12/i),classes:{input:c.input,label:c.label}},Cd(t,a),m),d),Qh=({className:e,handleChange:t,skipChangeSelection:a,threeLine:r,listChild:n,childRight:s,childRightColumnWidth:o=6,classes:i={input:"",label:""},childTop:c,children:d,isStackedLayout:m,labelProps:u,...p})=>{const g=()=>l().createElement(l().Fragment,null,c&&l().createElement("span",{className:"row row-logical"},c),m?l().createElement("span",{className:"row row-logical"},l().createElement("span",{className:Wa()("form-selector-left-col","column","large-12","rc-dimension-stacked-layout",i.left)},l().createElement("span",{className:"row row-logical"},d),l().createElement("span",{className:"row row-logical"},s))):l().createElement("span",{className:"row row-logical"},l().createElement("span",{className:Wa()("form-selector-left-col","column",i.left,{["large-"+(12-o)]:s,"large-12":!s})},d),s?l().createElement("span",{className:Wa()("form-selector-right-col","column",`large-${o}`,i.right)},s):null));return l().createElement(Nd,mr({tag:"div",className:Wa()(e,"rc-dimension-selector-row",{"form-selector-twocol-threeline":r}),classes:{input:i.input,label:i.label},render:({inputId:e,SelectorLabel:t})=>n?l().createElement("div",{id:`${e}_label`,className:Wa()("form-selector-label",i.label)},l().createElement(t,{className:Wa()("rc-dimension-list-header","form-selector-list-header"),id:void 0},l().createElement(g,null)),n):l().createElement(t,mr({classes:{root:i.label}},u),l().createElement(g,null))},Cd(t,a),p))},Zh=({text:e,className:t,...a})=>l().createElement("span",mr({className:Wa()("form-label-small",t)},qa(e),a)),ey=({text:e,className:t})=>l().createElement("span",mr({className:Wa()("form-selector-title",t)},qa(e))),ty=({className:e,text:t,...a})=>l().createElement("span",mr({className:Wa()("rf-pickup-recommended-violator",Jc.CAPTION,e)},qa(t),a)),ay=({stores:e,storeNumber:t,assets:a,handleStoreChange:r,handleShowStoreDetails:n,legend:s=""})=>l().createElement("div",{className:"rf-storelocator-stores"},l().createElement(Xh,{name:"store",legend:s},e&&e.map((e=>{const s=e.storeNumber===t;return l().createElement(Nd,mr({key:e.storeNumber,name:`store-${e.partsAvailabilityNorm.partNumber}`,value:e.storeNumber,checked:s,withAriaLabeledBy:!0},Cd((e=>r(e)),!0),{className:Wa()("rf-storelocator-storeoption","form-selector-twocol-threeline",{selected:s},{disabled:!V().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1)}),render:({SelectorLabel:t})=>l().createElement(l().Fragment,null,l().createElement(t,{classes:{root:"rf-storelocator-storeoption-label"}},l().createElement("span",{className:"row"},l().createElement("span",{className:Wa()("form-selector-left-col","column","large-6","rf-storelocator-storeitem-storeinfo")},e.recommendationLabel&&l().createElement(ty,{text:e.recommendationLabel}),l().createElement(ey,{text:e.address.address}),l().createElement(Zh,{text:e.city}),l().createElement(Zh,{text:e.storeDistanceWithUnit})),l().createElement("span",{className:Wa()("form-selector-right-col","column","large-6","rf-storelocator-storeitem-availabilityinfo")},l().createElement("span",qa(e.partsAvailabilityNorm.pickupSearchQuote)),e.partsAvailabilityNorm.pickupType&&l().createElement(Zh,{text:e.partsAvailabilityNorm.pickupType})))),l().createElement("button",{className:"rf-storelocator-storeitem-showdetails",type:"button",onClick:()=>n(e.storeNumber,!0)},l().createElement("span",null,a.viewDetailsText)))}))}))));ay.displayName="StoreLocatorStoresList";const ry=ay,ny=({storeItem:e,assets:t,handleShowStoreDetails:a,handleSaveSelection:r,coldStartMessage:n})=>{const{viewport:s}=z(),o="small"===s,{selectButton:i,closebuttonVOText:c,moreInformation:d,moreInformationVoText:m,viewMoreHoursLinkText:u,viewMoreHoursVoText:p}=t,g=V().get(e,"specialHours.viewAllSpecialHours"),h=V().get(e,"address.address",""),y=V().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1);return l().createElement(l().Fragment,null,l().createElement("div",{className:"rf-storelocator-storedetails"},l().createElement("div",{className:"rf-storelocator-storeimgcontainer large-centered small-centered"},l().createElement("img",{src:e.storeImageUrl,alt:""})),l().createElement("button",{className:Wa()("rf-storelocator-profileclose",Jc.HEADLINE),type:"button",onClick:()=>a()},l().createElement("span",{className:"visuallyhidden"},c)),l().createElement("div",{className:"rf-storelocator-storedetailscontainer"},l().createElement("h3",{className:Jc.EYEBROW},e.address.address),l().createElement("div",{className:Jc.BODY_REDUCED},e.address&&l().createElement(l().Fragment,null,l().createElement("span",mr({className:"row"},qa(e.address.address2))),e.address.address3&&l().createElement("span",mr({className:"row"},qa(e.address.address3)))),l().createElement("span",{className:"row"},e.state?`${e.city}, ${e.state}`:`${e.city}`),l().createElement("span",{className:"row"},e.address.postalCode),l().createElement("span",{className:"row"},e.phoneNumber),e.pickupTypeAvailabilityText&&l().createElement("span",{className:"row rf-storelocator-pickuptypeinfo"},e.pickupTypeAvailabilityText),e.reservationUrl&&l().createElement("a",{className:"more rf-storelocator-reservationurl",href:e.reservationUrl,target:"_blank",rel:"noopener noreferrer"},d,l().createElement("span",{className:"visuallyhidden"},m)),g&&l().createElement("a",{className:"more rf-storelocator-specialhoursurl",href:g.directionsUrl,target:"_blank",rel:"noopener noreferrer"},"View all upcoming special hours",l().createElement("span",{className:"visuallyhidden"},m))),l().createElement("div",{className:Wa()("rf-storelocator-storehoursinfo",Jc.BODY_REDUCED)},e.storeHours&&l().createElement("div",{className:"rf-storelocator-storehours"},l().createElement("span",{className:"visuallyhidden"},e.storeHours.storeHoursText),e.storeHours.hours&&e.storeHours.hours.map((t=>l().createElement("div",{key:`${e.storeNumber}-${t.storeDays}`,className:"rf-storelocator-storehours-item row"},l().createElement("span",mr({className:"rf-storelocator-storehoursdays large-4 small-4"},qa(t.storeDays))),l().createElement("span",mr({className:"rf-storelocator-storehourstiming large-8 small-8"},qa(t.storeTimings))))))),e.hoursUrl&&l().createElement("a",{className:"more rf-storelocator-hoursurl",href:e.hoursUrl,target:"_blank",rel:"noopener noreferrer"},u,l().createElement("span",{className:"a11y"},p)),e.specialHours&&e.specialHours.specialHoursData&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rf-storelocator-specialhours"},l().createElement("p",qa(e.specialHours.specialHoursText)),e.specialHours.specialHoursData.map((t=>l().createElement("div",{key:`${e.storeNumber}-${t.specialDays}`,className:"rf-storelocator-storehours-item"},l().createElement("span",mr({className:"rf-storelocator-storehoursdays"},qa(t.specialDays))),l().createElement("span",mr({className:"rf-storelocator-storehourstiming"},qa(t.specialTimings))))))),g&&l().createElement("a",{className:"more rf-storelocator-specialhoursurl",href:g.directionsUrl,target:"_blank",rel:"noopener noreferrer"},"View all upcoming special hours",l().createElement("span",{className:"a11y"},m))),n&&l().createElement("div",mr({className:"rf-storelocator-personalsetup"},qa(n)))),o&&e.pickupOptionsDetails&&l().createElement("div",{className:Wa()("rf-storelocator-pickupdetails",Jc.BODY_REDUCED)},l().createElement("div",qa(e.pickupOptionsDetails.whatToExpectAtPickup)),e.pickupOptionsDetails.pickupOptions&&e.pickupOptionsDetails.pickupOptions.map((e=>l().createElement("ul",{key:e.index,className:"form-selector-group"},l().createElement("li",{className:"rf-storelocator-pickupoption"},l().createElement("div",null,e.pickupOptionTitle),l().createElement("div",null,e.pickupOptionDescription))))),l().createElement("div",qa(e.pickupOptionsDetails.comparePickupOptionsLink))))),l().createElement("div",{className:"rf-storelocator-selectaction"},l().createElement("button",{className:"button button-block","data-autom":"storeSelectButton",type:"button",onClick:()=>r(),disabled:!y},l().createElement("span",{className:"select-store","aria-hidden":"true"},i),l().createElement("span",{className:"visuallyhidden"},`${i} ${h}`))))};ny.displayName="StoreDetails";const sy=ny,ly=()=>l().createElement("ul",{className:"form-selector-group"},l().createElement("li",{className:"rf-storelocator-storeitem rf-storelocator-storeitem-emptycontent"}),l().createElement("li",{className:"rf-storelocator-storeitem rf-storelocator-storeitem-emptycontent"}),l().createElement("li",{className:"rf-storelocator-storeitem rf-storelocator-storeitem-emptycontent"}),l().createElement("li",{className:"rf-storelocator-storeitem rf-storelocator-storeitem-emptycontent"}),l().createElement("li",{className:"rf-storelocator-storeitem rf-storelocator-storeitem-emptycontent"}),l().createElement("li",{className:"rf-storelocator-storeitem rf-storelocator-storeitem-emptycontent"})),oy=({bootstrap:e,part:t,options:a,productTitle:r,storeId:n,consent:s,visible:o,onClose:i,onStoreChange:c,stickyTrigger:d})=>{const m=$h({bootstrap:e,visible:o,part:t,options:a,storeId:n,onStoreChange:c,stickyTrigger:d}),{viewport:u}=z(),[p,g]=l().useState(!1),[h,y]=l().useState(!!e?.personalPickupTextFragmentkey),[E,v]=hr({resetDelay:4e3}),b=Yr();if(l().useEffect((()=>{v(`${Ne} ${Se}`)}),[ce]),V().isEmpty(m))return null;const{searchHeader:f,personalPickup:w,personalSetupTextFragmentKey:N,personalPickupTextFragmentkey:S,autoCompleteUrl:C,isAutoCompleteEnabled:T,validation:L,searchPlaceholder:k,searchButton:I,searchInputClass:A,maxlength:P,autocompleteOn:D,autosaveValue:O,availabilityFor:x,selectButton:R,mowSelectButton:F,moreInformation:M,moreInformationVoText:_,closebuttonVOText:B,resultVoText:$,resultsVoText:U,provinceSelector:K,showingOptionsLabel:H,selectLocationLabel:j,searchForStoresNearLabel:G,showingStoresNearLabel:W,provinceSelectorTabs:q,addressLookupUrl:Y}=e,{isWarm:X,store:J,location:Q,handleStoreChange:Z,state:ee,clearOverlayData:te,showStoreDetails:ae,handleShowStoreDetails:re,handleFormSubmit:ne,handleSaveSelection:se,searchInputRef:le}=m,oe="small"===u,{isFetching:ie,isFetched:ce,error:de,data:me={}}=ee,{stores:ue=[],viewMoreHoursLinkText:pe,viewMoreHoursVoText:ge,viewDetailsText:he}=me,ye={viewMoreHoursLinkText:pe,viewMoreHoursVoText:ge,viewDetailsText:he,selectButton:R,mowSelectButton:F,moreInformation:M,moreInformationVoText:_,closebuttonVOText:B},Ee=Q||V().get(ee,"data.locationLabel")||V().get(ee,"data.location"),ve=ue.find((e=>e.storeNumber===J)),be=V().get(ve,"address.address",""),fe=V().get(ve,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1),we={autoCompleteUrl:C,isAutoCompleteEnabled:T,validation:L,searchPlaceholder:k,searchButton:I,searchInputClass:A,maxlength:P,autocompleteOn:D,autosaveValue:O},Ne=V().get(ee,"data.stores",[]).length,Se=1===Ne?$:U,Ce=V().get(ee,"data.legendLabelText",""),Te=l().createElement("span",mr({className:"visuallyhidden"},qa(Ce)));return l().createElement(ss,{visible:o,classes:{root:Wa()("rf-storelocator-overlay",{"rf-storelocator-storedetails-shown":oe&&ae}),content:"rf-storelocator-overlay-content"},fixedWidth:!0,noPadding:!0,appear:!0,ariaLabel:"rf-storelocator-overlay-label",onClose:()=>{i(),Mh(),te(),y(!!S)},onEntered:()=>g(!0),onExited:()=>g(!1)},ie&&l().createElement(Kh,{ariaLabel:"loading",entered:p}),ce&&Ne>0&&l().createElement(gr,{message:E}),l().createElement("div",{className:Wa()("rf-storelocator-headersection",{"rf-storelocator-loading":ie})},l().createElement("h2",mr({id:"rf-storelocator-overlay-label",className:Wa()("rf-storelocator-header",Jc.HEADLINE_REDUCED)},qa(f))),r&&l().createElement("div",{className:"rf-storelocator-productinfo"},l().createElement("span",{className:Wa()("rf-storelocator-labeltext",Jc.BODY)},x),l().createElement("span",{className:Jc.BODY},r)),K?l().createElement(Wh,{fieldData:{showingOptionsLabel:H,selectLocationLabel:j,searchForStoresNearLabel:G,showingStoresNearLabel:W,provinceSelectorTabs:q,addressLookupUrl:Y},onSubmit:ne,inputValue:Ee,consent:s}):l().createElement(Gh,{fieldData:we,onSubmit:ne,inputValue:Ee,consent:s,error:de,errorMessageId:b,searchInputRef:le})),l().createElement("div",{className:Wa()("rf-storelocator-contentsection",{"rf-storelocator-loading":ie,"rf-storelocator-showfootnote":h})},l().createElement("div",{className:"rf-storelocator-searchresult row"},l().createElement("div",{className:Wa()("rf-storelocator-searchresult-list",{"rf-storelocator-searchresult-empty":!X||de},"column","large-7","small-12")},!X||de?l().createElement(ly,null):l().createElement(l().Fragment,null,l().createElement(ry,{stores:ee.data.stores,storeNumber:J,handleStoreChange:Z,handleShowStoreDetails:re,assets:ye,legend:Te}),h&&l().createElement("div",{className:Wa()("rf-storelocator-footnote",Jc.BODY_REDUCED)},l().createElement("span",mr({className:"rf-storelocator-footnote-more more"},qa(S)))))),l().createElement("div",{className:"rf-storelocator-storeinfo column large-5 small-12"},!X&&l().createElement("div",mr({className:Wa()("rf-storelocator-personalpickup",Jc.BODY_REDUCED)},qa(w))),de&&l().createElement("div",{id:b,className:"rf-storelocator-errorplaceholder"},de.message),ve&&(oe?l().createElement(Br,{in:ae,timeout:1e3,classNames:"rf-storelocator-storeinfoslide",mountOnEnter:!0},l().createElement("div",{className:"rf-storelocator-storeinfoslide"},l().createElement(sy,{storeItem:ve,handleShowStoreDetails:re,handleSaveSelection:se,assets:ye}))):l().createElement(sy,{storeItem:ve,handleSaveSelection:se,coldStartMessage:N,assets:ye})))),oe&&ve&&!de&&l().createElement(l().Fragment,null,h&&l().createElement("div",{className:Wa()("rf-storelocator-footnote",Jc.BODY_REDUCED)},l().createElement("span",mr({className:"rf-storelocator-footnote-more more"},qa(S))),l().createElement("button",{className:Wa()("rf-storelocator-footnoteclose",Jc.BODY_REDUCED),type:"button",onClick:()=>y(!1)})),l().createElement("div",{className:"rf-storelocator-selectaction rf-storelocator-selectstore"},l().createElement("button",{type:"button",className:"button  button-block","data-autom":"selectStoreButton",onClick:()=>se(),disabled:!fe},l().createElement("span",{className:"select-store"},R),l().createElement("span",{className:"visuallyhidden"},`${R} ${be}`))))))};oy.displayName="StoreLocatorOverlay";const iy=oy,cy=(e,t,a)=>r=>{const n=i("productlocator/meta-reducer/fetchMetaData");r({type:eh.PL_FETCH_META_START});const s=ft(sh(e,t));return s.then((e=>{const t=V().get(e,"body.productLocatorOverlayData.productLocatorMeta"),s=V().get(e,"body.productLocatorOverlayData.errorMessage");if(!e.body||s||V().isEmpty(t))n.debug(`ResponseError: ${s}`),r({type:eh.PL_FETCH_META_ERROR,error:{isResponseError:!0,message:s||a}});else{const t=V().get(e,"body.productLocatorOverlayData",{});t.assets=((e,t)=>({...V().get(e,"overlayLevelTextAssets.namedTextAssets",{}),footer:V().get(e,"familyLevelFragments.namedFragments.footer",""),coldStartPickupInfo:V().get(e,"overlayLevelFragments.namedFragments.coldStartPickupInfo",""),filterButtonText:V().get(e,"familyLevelTextAssets.namedTextAssets.filterButtonText",""),errorMessage:t}))(t,a);const n=V().get(t,"productLocatorMeta.dimensionsVariations",{});t.noConfigurator=V().isEmpty(n),r({type:eh.PL_FETCH_META_SUCCESS,data:t})}})).catch((e=>{n.error(e),r({type:eh.PL_FETCH_META_ERROR,error:{isNetworkError:!0,error:e,message:a}})})),s},dy={isFetching:!1,isFetched:!1,data:{},error:null},my=(e,t)=>{switch(t.type){case eh.PL_FETCH_META_START:return{...e,isFetching:!0,isFetched:!1,error:null};case eh.PL_FETCH_META_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:{}};case eh.PL_FETCH_META_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,data:t.data};case eh.PL_META_SET_CONFIG:return{...e,config:t.config};default:return e}},uy=(e,t,a)=>{const r=i("productlocator/handleDeliveryData");if(t.deliveryMessage){const n=V().get(t,"deliveryMessage.errorMessage");if(n)r.debug(`ResponseError: ${n}`),a({type:eh.PL_FETCH_DELIVERY_ERROR,error:{isResponseError:!0,message:n}});else{let r=V().get(t,"deliveryMessage");r=((e,t)=>{const a={...e};return a.deliveryQuoteNorm=V().get(e,t),a.partNorm=t,a})(r,e["parts.0"]),a({type:eh.PL_FETCH_DELIVERY_SUCCESS,data:r})}}},py={isFetching:!1,isFetched:!1,data:{},error:null},gy=(e,t)=>{switch(t.type){case eh.PL_FETCH_DELIVERY_START:return{...e,isFetching:!0,isFetched:!1,error:null};case eh.PL_FETCH_DELIVERY_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:{}};case eh.PL_FETCH_DELIVERY_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,data:t.data};case eh.PL_CLEAR_DELIVERY_DATA:return py;default:return e}},hy=e=>V().sortBy(e,(e=>V().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1)?-1:1)),yy=(e,t)=>e.slice().map((e=>(t&&e.storeNumber===t&&V().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1)?e.selected=!0:e.selected=!1,e))),Ey=e=>V().filter(e,(e=>V().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1))).length,vy=(e,t,a,r,n)=>(s,l)=>{r&&s({type:eh.PL_FETCH_PICKUP_START}),n&&l({type:eh.PL_FETCH_DELIVERY_START});const o=i("productlocator/fetchFulfillmentData"),c=ft(sh(e,t));return c.then((e=>({pickupMessage:V().get(e,"body.content.pickupMessage"),deliveryMessage:V().get(e,"body.content.deliveryMessage")}))).then((e=>{if(r&&e.pickupMessage){const t=V().get(e,"pickupMessage.errorMessage");if(t)o.debug(`ResponseError: ${t}`),s({type:eh.PL_FETCH_PICKUP_ERROR,data:{location:V().get(e.pickupMessage,"location","")},error:{isResponseError:!0,message:t}});else{let t=e.pickupMessage,r=(e=>e.map((e=>{const t=V().get(e,"partsAvailability",{}),a=V().keys(t)[0];return e.partsAvailabilityNorm=V().get(t,a,{}),e})))(V().get(e,"pickupMessage.stores"));r=hy(r),t.stores=yy(r,a),t.availableStoreCount=Ey(r),0===t.availableStoreCount&&(t=(e=>{const t=V().get(e,"notAvailableNearby",""),a=e.stores||[],r=t.replace("[X]",a.length);return{...e,notAvailableNearby:r}})(t)),s({type:eh.PL_FETCH_PICKUP_SUCCESS,data:t})}}n&&e.deliveryMessage&&uy(t,e,l)})).catch((e=>{o.error(e),s({type:eh.PL_FETCH_PICKUP_ERROR,data:{},error:{isNetworkError:!0,message:e}}),l&&l({type:eh.PL_FETCH_DELIVERY_ERROR,error:{isNetworkError:!0,message:e}})})),c},by={isFetching:!1,isFetched:!1,data:{},error:null,isShown:!0,isToggleBtnNeeded:!1},fy=(e,t)=>{switch(t.type){case eh.PL_PICKUP_SHOW_TOGGLE:return{...e,isToggleBtnNeeded:!0,isShown:!1};case eh.PL_PICKUP_HIDE_TOGGLE:return{...e,isToggleBtnNeeded:!1,isShown:!0};case eh.PL_PICKUP_UPDATE_STORE_SELECTION:{const a=yy(V().get(e,"data.stores",[]),t.selectedStore);return{...e,data:{...e.data,stores:a}}}case eh.PL_PICKUP_REMOVE_STORE_SELECTION:{const{stores:t}=e.data;if(t){const a=(e=>{const t=e.slice(),a=V().find(t,{selected:!0});return a&&(a.selected=!1),t})(t);return{...e,data:{...e.data,stores:a}}}return e}case eh.PL_FETCH_PICKUP_START:return{...e,isFetching:!0,isFetched:!1,error:null};case eh.PL_FETCH_PICKUP_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:t.data};case eh.PL_FETCH_PICKUP_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,data:t.data};case eh.PL_CLEAR_PICKUP_DATA:return by;default:return e}},wy=(e,t,a,r)=>{let n=[];return e.forEach((e=>{V().forEach(e.partsAvailability,((t,s)=>{const l=V().cloneDeep(e);l.partsAvailabilityNorm=t,l.selected=!1;let o=V().find(n,{part:s});o?o.stores.push(V().omit(l,"partsAvailability")):(o={stores:[]},o.part=s,o.displayPrice=bh(s,a,r),o.productImage=fh(s,a,r),o.productTitle=((e,t,a)=>{const r=gh[t];if(!r||!r.products)return null;const n=a?{partNumber:e,carrierModel:a}:{partNumber:e};return(V().find(r.products,n)||{}).productTitle})(s,a,r),o.isShown=!1,o.stores.push(V().omit(l,"partsAvailability")),n.push(o))}))})),t&&(n=V().sortBy(n,(e=>t.indexOf(e.part)))),n},Ny=(e,t,a)=>{const r=V().get(e,"PickupMessage.stores",[]),n=V().get(e,"PickupMessage.recommendedProducts");e.products=wy(r,n,t,a);let s=V().omit(e,"PickupMessage");return s.products=s.products.map((e=>(e.stores=hy(e.stores),e))),s=(e=>(e.products=e.products.map((t=>{const a=Ey(t.stores),r=a>1?e.availableStoresText:e.availableStoreText;return t.availabilityText=r&&r.replace("[X]",a),t})),e))(s),s},Sy={isFetching:!1,isFetched:!1,data:{},error:null},Cy=(e=Sy,t)=>{switch(t.type){case eh.PL_FETCH_SUGGESTIONS_START:return{...e,isFetching:!0,isFetched:!1,error:null};case eh.PL_FETCH_SUGGESTIONS_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:{}};case eh.PL_FETCH_SUGGESTIONS_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,data:t.data};case eh.PL_CLEAR_SUGGESTIONS_DATA:return Sy;case eh.PL_SUGGESTIONS_UPDATE_STORE_SELECTION:{const a=((e,t,a)=>e.slice().map((e=>{const r=V().find(e.stores,{selected:!0});if(r&&(r.selected=!1),e.part===t){const t=V().find(e.stores,{storeNumber:a});t&&(t.selected=!0)}return e})))(e.data.products,t.part,t.selectedStore);return{...e,data:{...e.data,products:a}}}case eh.PL_SUGGESTIONS_REMOVE_STORE_SELECTION:{const{products:t}=e.data;if(t){const a=(e=>e.slice().map((e=>{const t=V().find(e.stores,{selected:!0});return t&&(t.selected=!1),e})))(t);return{...e,data:{...e.data,products:a}}}return e}case eh.PL_SUGGESTIONS_SHOW_TOGGLE:{const{products:a}=e.data;if(a){const r=((e,t)=>e.slice().map((e=>(e.part===t&&(e.isShown=!e.isShown),e))))(a,t.part);return{...e,data:{...e.data,products:r}}}return e}default:return e}},Ty={submitSelection:!1,isPickupSelected:!1,isDeliverySelected:!1,isSuggestionSelected:!1},Ly=(e,t)=>{switch(t.type){case eh.PL_SELECTION_UPDATE:return{...e,...t.prop};case eh.PL_SELECTION_REMOVE:return{submitSelection:!1};case eh.PL_SELECTION_CLEAR:return Ty;default:return e}};let ky={isMetaReceived:!1,combinePickupWithMeta:!1,pickupDebounceInterval:300,metaRequest:{},pickupRequest:{searchNearby:!0},suggestionsRequest:{},deliveryRequest:{"mts.1":"compact"}};const Iy=({fireRecommendations:e,params:t,location:a,family:r},n)=>{if(e){const e={...t};e["parts.0"]&&(e.product=e["parts.0"],delete e["parts.0"]),a&&(delete e.store,delete e.searchNearby),((e,t,a)=>r=>{const n=i("productlocator/suggestions-reducer/fetchSuggestionsData");r({type:eh.PL_FETCH_SUGGESTIONS_START});const s=ft(sh(e,t));return s.then((e=>{if(e.body){const s=V().get(e,"body.PickupMessage.errorMessage")||e.body.errorMessage;s?(n.debug(`ResponseError: ${s}`),r({type:eh.PL_FETCH_SUGGESTIONS_ERROR,error:{isResponseError:!0,message:s}})):(e.body=Ny(e.body,a,t.cppart),r({type:eh.PL_FETCH_SUGGESTIONS_SUCCESS,data:e.body}))}else n.debug("ResponseError: No response data"),r({type:eh.PL_FETCH_SUGGESTIONS_ERROR,error:{isResponseError:!0}})})).catch((e=>{n.error(e),r({type:eh.PL_FETCH_SUGGESTIONS_ERROR,error:{isNetworkError:!0,message:e}})})),s})(ky.suggestionsURL,e,r)(n).then((e=>{((e,t,a)=>{let r=V().map(e,(e=>e.part));r=wh(a,...r);const n=['D=pageName+"',"",xh,"Recommended",`${r}"`].join("|"),s=['D=pageName+"',"",xh,'No Availaibility"'].join("|"),l=new Ph(new Dh("event127"));let o={eVar6:n,eVar5:s};t&&(o={...o,events:l}),Ih({name:xh,beacon:o})})(V().get(e,"body.products",[]),a,r)}))}},Ay=({response:e,params:t,location:a,isDeliverySelected:r,fireRecommendations:n,family:s},l,o,i)=>{const c=V().get(e,"body.availableStoreCount");if(0===c?(l({type:eh.PL_PICKUP_SHOW_TOGGLE}),Iy({params:t,fireRecommendations:n,location:a,family:s},o)):(l({type:eh.PL_PICKUP_HIDE_TOGGLE}),o({type:eh.PL_CLEAR_SUGGESTIONS_DATA}),((e,t)=>{const a=new Ph(new Dh("event127")),r=['D=pageName+"',"",xh,"APU",`${e}"`].join("|");t?Ih({name:xh,beacon:{events:a,eVar6:r}}):kh.fireMicroEvent({part:"APU",feature:xh,eVar:"eVar6",action:e})})(c,a)),!r){const a=V().find(V().get(e,"body.stores"),{storeNumber:t.store}),r=V().get(a,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1);i({type:eh.PL_SELECTION_UPDATE,prop:{part:t["parts.0"],isPickupSelected:r,isDeliverySelected:!1,isSuggestionSelected:!1}})}},Py=({part:e,family:t,location:a,isDeliverySelected:r,needsDeliveryData:n,fireRecommendations:s},l,o,i,c)=>{const d={...ky.pickupRequest},m={...ky.deliveryRequest};e&&(ky.pickupRequest["parts.0"]=e,d["parts.0"]=e,m["parts.0"]=e),a&&(ky.pickupRequest.location=a),ky.pickupRequest.location&&(d.location=ky.pickupRequest.location),d.location&&(delete d.store,delete d.searchNearby);const u=d.location||d.store,p={"mts.0":"regular",...n?m:{},...u?d:{}};(u||n)&&vy(ky.pickupURL,p,r?null:ky.pickupRequest.store,u,n)(l,c).then((e=>({body:V().get(e,"body.content.pickupMessage")}))).then((c=>{u&&Ay({response:c,params:{...p,store:ky.pickupRequest.store},location:a,isDeliverySelected:r,fireRecommendations:s,family:t},l,o,i),n&&r&&i({type:eh.PL_SELECTION_UPDATE,prop:{part:e,isPickupSelected:!1,isDeliverySelected:!0,isSuggestionSelected:!1}})}))},Dy=e=>{e&&(ky.pickupRequest.cppart=e,ky.deliveryRequest.cppart=e)},Oy=({bootstrap:e,part:t,storeId:a,visible:r,onStoreChange:n,cppart:s,preventClearOnSave:o,stickyTrigger:i})=>{if(!e||!e.metaURL)return{};ky={...ky,...e};const[c,d]=l().useReducer(my,dy),[m,u]=l().useReducer(Lh,Th),[p,g]=l().useReducer(fy,by),[h,y]=l().useReducer(gy,py),[E,v]=l().useReducer(Cy,Sy),[b,f]=l().useReducer(Ly,Ty),[w,N]=l().useState(""),[S,C]=l().useState(),T=V().get(ky,"fireRecommendationsAvailability",!1)||!V().get(c,"data.hideRecommendations",!0),L=V().get(m,"cppart")||V().get(m,"product.carrierModel"),{isDeliverySelected:k}=b,I=l().useRef(null);l().useEffect((()=>{e.family&&(ky.metaRequest.family=e.family,ky.metaRequest.node=e.node,((e,t,a)=>{cy(ky.metaURL,ky.metaRequest,ky.errorMessage)(e).then((e=>{const r=V().get(e,"body.productLocatorOverlayData.productLocatorMeta");r&&a({type:eh.PL_FILTER_INIT,config:{...r},family:t})}))})(d,e.family,u))}),[]),l().useEffect((()=>{u({type:eh.PL_FILTER_SET_CPPART,cppart:s}),Dy(s)}),[s]),l().useEffect((()=>{var n,s;r&&t&&m.isInitialized&&(ky.part=t,n=u,s=e.family,ky.part&&n({type:eh.PL_FILTER_UPDATE,part:ky.part,purchaseOption:ky.purchaseOptionType,family:s}),f({type:eh.PL_SELECTION_CLEAR}),ky.pickupRequest.store=a,_h(t,i),Rh(a,t))}),[r,t,m.isInitialized,a,e.family]),l().useEffect((()=>{m.part&&(ky.part=m.part,Dy(L),Py({part:m.part,family:e.family,fireRecommendations:T,isDeliverySelected:k,needsDeliveryData:!0},g,v,f,y),m.part!==t&&Fh(m.part,e.family))}),[m.part,T,L,e.family]);const A=()=>{u({type:eh.PL_FILTER_HIDE}),g({type:eh.PL_CLEAR_PICKUP_DATA}),y({type:eh.PL_CLEAR_DELIVERY_DATA}),v({type:eh.PL_CLEAR_SUGGESTIONS_DATA}),u({type:eh.PL_FILTER_SET_PART,part:null}),C(),ky.pickupRequest={searchNearby:!0}};return{metaState:c,filterState:m,pickupState:p,deliveryState:h,suggestionsState:E,selectionState:b,store:w,inputRef:I,localLocation:S,setLocalLocation:C,handleFormSubmit:t=>{t.search&&Py({location:t.search,fireRecommendations:T,family:e.family},g,v,f)},handleInputBlur:e=>{ky.pickupRequest.location=e},handleDimensionChange:(e,t,a)=>{I.current&&""===ky.pickupRequest.location?I.current.focus():u({type:eh.PL_FILTER_UPDATE,selection:{key:e,value:t},family:a})},handleStoreChange:(e,t)=>{ky.pickupRequest.store=e,N(e),v({type:eh.PL_SUGGESTIONS_REMOVE_STORE_SELECTION}),g({type:eh.PL_PICKUP_UPDATE_STORE_SELECTION,selectedStore:e}),f({type:eh.PL_SELECTION_UPDATE,prop:{store:e,part:t,isPickupSelected:!0,isDeliverySelected:!1,isSuggestionSelected:!1}})},handleDeliverySelection:e=>{g({type:eh.PL_PICKUP_REMOVE_STORE_SELECTION}),v({type:eh.PL_SUGGESTIONS_REMOVE_STORE_SELECTION}),f({type:eh.PL_SELECTION_UPDATE,prop:{part:e,store:null,isPickupSelected:!1,isDeliverySelected:!0,isSuggestionSelected:!1}})},handleSuggestionsToggle:e=>{v({type:eh.PL_SUGGESTIONS_SHOW_TOGGLE,part:e})},handleSuggestionStoreChange:(e,t)=>{g({type:eh.PL_PICKUP_REMOVE_STORE_SELECTION}),v({type:eh.PL_SUGGESTIONS_UPDATE_STORE_SELECTION,part:t,selectedStore:e}),f({type:eh.PL_SELECTION_UPDATE,prop:{store:e,part:t,isDeliverySelected:!1,isSuggestionSelected:!0}})},handleSaveSelection:()=>{f({type:eh.PL_SELECTION_UPDATE,prop:{submitSelection:!0}}),((e={},t)=>{const a=wh(t,e.part),r=e.isDeliverySelected?"STH":"APU",n=new Ph(new Dh("event128")),s=['D=pageName+"',"",xh,"Continue",`${r}"`].join("|"),l=a[0];e.part!==Oh&&(e.isSuggestionSelected?n.add(new Dh("event130")):n.add(new Dh("event129"))),Ih({name:xh,beacon:{events:n,eVar6:s,eVar67:l}})})(b,e.family),n&&n({...b,submitSelection:!0}),o||A()},clearOverlayData:A}},xy="search",Ry=({fieldData:e,form:t,inputProps:a,setOptions:r,onInputBlur:n,inputRef:s,resetA11yText:o,errorMessageId:i=""})=>l().createElement(l().Fragment,null,l().createElement("label",{className:"visuallyhidden",htmlFor:xy},e.searchPlaceholder),l().createElement(Xo,mr({type:"text","data-autom":"zipCode",classes:{input:"rf-productlocator-form-textinput"},name:xy,search:!0,placeholder:e.searchPlaceholder,autoComplete:"off",maxLength:e.maxlength,value:t.values[xy],onChange:t.handleChange,error:t.touched[xy]&&t.errors[xy],onReset:()=>{t.setFieldValue(xy,""),r([]);const e=s||a.ref;e&&e.current.focus()},resetA11y:o,ref:s},a,{onBlur:e=>{a?(a.onBlur(),n(a.value)):n(t.values[xy]),t.handleBlur(e)},"aria-describedby":i}))),Fy=({onSubmit:e,fieldData:t,consent:a,classes:r={},inputValue:n,onInputBlur:s,inputRef:o,errorMessageId:c})=>{const{initialValues:d,validationSchema:m}=l().useMemo((()=>((e,t)=>{const a={[xy]:t||""},r={};return r[xy]=[],r[xy].push({type:"required",message:e.requiredError}),e.isAutoCompleteEnabled||r[xy].push({type:"regEx",regEx:e.required?[e.pattern]:[e.pattern,"^$"],message:e.invalidFormatError}),{initialValues:a,validationSchema:r}})(t,n)),[t,n]),{isAutoCompleteEnabled:u}=t,[p,g]=l().useState([]),[h,y]=(({autoCompleteChoiceAllyTxt:e,autoCompleteChoicesAllyTxt:t})=>{const[a,r]=l().useState(),n=l().useRef();return l().useEffect((()=>{a&&(n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{r()}),400))}),[a]),[a,n=>{1===n&&e&&r(`${n} ${e}`),(0===n||n>1&&t)&&r(`${n} ${t}`),a&&r(null)}]})(t),E=Fd({initialValues:d,validationSchema:m,onSubmit:e}),{consent:v,handleChange:b,showConsent:f}=a.cookieCompliance||{};l().useEffect((()=>{E.resetForm(),E.setValues(d)}),[d]);const{assets:w}=z(),N=V().get(w,"reset");return l().createElement("div",{className:Wa()("rf-productlocator-search",r.search)},l().createElement("form",{className:"rf-productlocator-form",onSubmit:E.handleSubmit},l().createElement("div",{className:"field-wrapper",key:xy},u?l().createElement(l().Fragment,null,l().createElement(Zm,{value:E.values[xy],onChange:e=>{const a=i("productlocator/SearchForm/onChange");E.setFieldValue(xy,e.target.value),ft(sh(t.autoCompleteUrl,{value:e.target.value})).then((e=>{const t=V().get(e,"body.matches",[]);g(t),y(t.length)})).catch((e=>a.error(e)))},onSelection:t=>{E.setFieldValue(xy,t),e({[xy]:t})},options:p,getPosition:e=>e?{width:e.width,left:0}:{},renderInput:e=>{const a={...e,ref:o};return l().createElement(Ry,{fieldData:t,form:E,inputProps:a,setOptions:g,onInputBlur:s,resetA11yText:N,errorMessageId:c})},classes:{root:"rf-productlocator-autocomplete"}}),h&&l().createElement(gr,{message:h})):l().createElement(Ry,{fieldData:t,form:E,setOptions:g,onInputBlur:s,inputRef:o,resetA11yText:N,errorMessageId:c})),f?l().createElement(Zg,{consent:v,handleChange:b,label:a.label}):null))};Fy.displayName="SearchForm";const My=Fy,_y=({onSubmit:e,fieldData:t,consent:a,classes:r={},inputRef:n,pickup:s,localLocation:o,onLocalLocationChange:i})=>{const[c,d]=l().useState(!1),m=l().useRef(!1),{showingOptionsLabel:u,selectLocationLabel:p,provinceSelectorTabs:g,addressLookupUrl:h}=t,y=l().useMemo((()=>{const e=g.map((e=>e.name));return g.map(((t,a)=>({...t,update:e.slice(a+1)})))}),[g]),E=zu({addressLookupUrl:h,provinceSelectorTabs:y,onChange:(t,a)=>{d(!1),e({search:t}),i(V().get(a,"city"))}}),{consent:v,handleChange:b,showConsent:f}=a.cookieCompliance||{},w=(e=>V().get(e,"data.locationLabel")||V().get(e,"data.location"))(s),N=o||w;return l().createElement("div",{className:Wa()("rf-productlocator-search-province-selector",r.search)},l().createElement("form",{className:"rf-productlocator-province-selector-form"},N&&l().createElement("span",null,u),l().createElement("button",{type:"button",className:Wa()(r.button,"rf-productlocator-province-selector-button","icon","icon-after",{"icon-chevrondown":!c,"icon-chevronup":c}),onClick:()=>{d(!c),c||(m.current=!0)},ref:n,"aria-expanded":c},N||p),l().createElement("div",{className:"column large-12 small-12"},l().createElement(qr,{in:c},f?l().createElement(Zg,{consent:v,handleChange:b,label:a.label}):null,m.current&&l().createElement(Yu,{activeTab:E.activeTab,onTabChange:E.setActiveTab,selection:E.selection,onSelection:E.handleSelection,tabs:E.tabs,desktopColumns:2,mobileColumns:2})))))},By=({stores:e,handleStoreChange:t,legend:a=""})=>l().createElement("div",{className:"rf-productlocator-stores"},l().createElement(Xh,{name:"store",legend:a},e&&e.map(((e,a)=>l().createElement(Nd,mr({key:e.storeNumber,name:`store-${e.partsAvailabilityNorm.partNumber}`,value:e.storeNumber,checked:e.selected,withAriaLabeledBy:!0,"data-pl-partnumber":e.partsAvailabilityNorm.partNumber,disabled:!V().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1)},Cd((a=>t(a,e.partsAvailabilityNorm.partNumber)),!0),{className:Wa()("rf-productlocator-storeoption","form-selector-twocol-threeline",{disabled:!V().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1)}),tagAttrs:{"data-autom":`pickupStore_${a}`},render:({SelectorLabel:t})=>l().createElement(l().Fragment,null,l().createElement(t,null,l().createElement("span",{className:"row"},l().createElement("span",{className:Wa()("form-selector-left-col","column","large-6")},e.recommendationLabel&&l().createElement(ty,{text:e.recommendationLabel}),l().createElement(ey,{text:e.address.address}),l().createElement(Zh,{text:e.state?`${e.city}, ${e.state}`:e.city}),l().createElement(Zh,{text:e.storeDistanceWithUnit})),l().createElement("span",{className:Wa()("form-selector-right-col","column","large-6")},l().createElement("span",qa(e.partsAvailabilityNorm.pickupSearchQuote)),e.partsAvailabilityNorm.pickupType&&l().createElement(Zh,{text:e.partsAvailabilityNorm.pickupType})))),l().createElement(qr,{in:e.selected},l().createElement("div",{className:"rf-productlocator-storedetails",id:`${e.partsAvailabilityNorm.partNumber}-${e.storeNumber}-details`},l().createElement("div",null,e.address&&l().createElement("span",mr({className:"rf-productlocator-storename row"},qa(e.address.address2))),l().createElement("span",{className:"rf-productlocator-storeaddress row"},e.state?`${e.city}, ${e.state}`:`${e.city}`),e.address&&e.address.postalCode&&l().createElement("span",mr({className:"row"},qa(e.address.postalCode))),e.storeHours&&l().createElement("div",{className:"rf-productlocator-storehours"},l().createElement("span",{className:"visuallyhidden"},e.storeHours.storeHoursText),e.storeHours.hours&&e.storeHours.hours.map((t=>l().createElement("div",{key:`${e.storeNumber}-${t.storeDays}`,className:"rf-productlocator-storehours-row"},l().createElement("span",mr({className:"rf-productlocator-storehoursdays"},qa(t.storeDays))),l().createElement("span",mr({className:"rf-productlocator-storehourstiming"},qa(t.storeTimings)))))),e.specialHours&&e.specialHours.specialHoursData&&l().createElement("div",{className:"rf-productlocator-specialhours"},l().createElement("p",qa(e.specialHours.specialHoursText)),e.specialHours.specialHoursData.map((t=>l().createElement("div",{key:`${e.storeNumber}-${t.specialDays}`,className:"rf-productlocator-storehours-row"},l().createElement("span",mr({className:"rf-productlocator-storehoursdays"},qa(t.specialDays))),l().createElement("span",mr({className:"rf-productlocator-storehourstiming"},qa(t.specialTimings))))))))),e.pickupOptionsDetails&&l().createElement("div",{className:Wa()("rf-productlocator-pickupdetails",Jc.CAPTION)},l().createElement("div",qa(e.pickupOptionsDetails.whatToExpectAtPickup)),e.pickupOptionsDetails.pickupOptions&&e.pickupOptionsDetails.pickupOptions.map((e=>l().createElement("ul",{key:e.index,className:"form-selector-group"},l().createElement("li",{className:"rf-productlocator-pickupoption"},l().createElement("div",qa(e.pickupOptionTitle)),l().createElement("div",qa(e.pickupOptionDescription)))))),l().createElement("div",qa(e.pickupOptionsDetails.comparePickupOptionsLink))))))}))))));By.displayName=By;const $y=By,Uy=({pickup:e,localLocation:t,handleStoreChange:a,assets:r,errorMessageId:n})=>{const[s,o]=l().useState(!1),{pickupHeader:i,pickupHeaderNear:c,coldStartPickupInfo:d}=r,m=V().get(e,"data.stores"),u=V().get(e,"data.availability.isComingSoon",!1),p=t||(e=>V().get(e,"data.locationLabel")||V().get(e,"data.location"))(e),g=V().get(e,"data.legendLabelText",""),h=l().createElement("span",mr({className:"visuallyhidden"},qa(g)));return l().createElement(l().Fragment,null,l().createElement("div",{className:"rf-productlocator-pickuploctionheader"},p?l().createElement("h3",null,c," ",p):l().createElement("h3",null,i),e.isFetched?"":l().createElement("div",mr({className:"rf-productlocator-pickupinfo"},qa(d)))),e.isFetched&&!u&&l().createElement("div",{className:Wa()("rf-productlocator-pickupstoreslist",{"rf-productlocator-nopickupstores":e.isToggleBtnNeeded,"rf-productlocator-togglebtn-open":s})},e.isToggleBtnNeeded?l().createElement(l().Fragment,null,l().createElement("button",{type:"button",className:Wa()("rf-productlocator-nopickupstores-btn as-buttonlink",Jc.BODY_REDUCED),"aria-expanded":s,onClick:()=>o(!s)},l().createElement("span",mr({className:"rf-productlocator-buttontitle"},qa(m&&m.length>1?e.data.notAvailableNearby:e.data.notAvailableNearOneStore))),l().createElement("span",{className:"icon icon-after icon-chevrondown rf-productlocator-buttonicon"})),l().createElement(qr,{in:s,className:"rf-productlocator-notavailablestores"},l().createElement($y,{stores:m,handleStoreChange:a,legend:h}))):l().createElement(l().Fragment,null,e.error&&l().createElement("div",{className:Wa()("rf-productlocator-errormsg",Jc.BODY_REDUCED,"is-error"),id:n},l().createElement(so,{error:e.error.message})),l().createElement($y,{stores:m,handleStoreChange:a,legend:h}))),e.isFetched&&u&&l().createElement("div",mr({className:"rf-productlocator-pickupinfo rf-productlocator-comingsoon"},qa(V().get(e,"data.availability.comingSoonText","")))))};Uy.displayName="ProductLocatorPickup";const Ky=Uy,Vy=({delivery:e,selected:t,handleDeliverySelection:a})=>{const{deliveryQuoteNorm:r,partNorm:n}=e,s=V().get(r,"compact.label",""),o=V().get(r,"compact.quote",""),i=V().get(r,"compact.isBuyable",!0);return r?l().createElement("div",{className:"rf-productlocator-deliveryquotes"},l().createElement(Qh,{name:"delivery",value:n,checked:t,tag:"div",disabled:!i,className:"rf-productlocator-deliveryquotesoption",skipChangeSelection:!0,handleChange:a,render:({SelectorLabel:e})=>l().createElement(e,null,l().createElement("span",{className:"row"},l().createElement("span",{className:Wa()("form-selector-left-col","column","large-12","small-12")},l().createElement(ey,{text:`${s} ${o}`}))))})):""};Vy.displayName="Delivery";const Hy=Vy,jy=({suggestions:e,assets:t,handleSuggestionStoreChange:a,handleSuggestionsToggle:r})=>{const{recommendationSectionHeader:n,errorMessage:s}=t,{isFetching:o,isFetched:i,data:c,error:d}=e,m=V().get(c,"products",[]),u=0===m.length;return l().createElement("div",{className:"rf-productlocator-suggestions"},l().createElement("div",{className:"rf-productlocator-suggestionheader"},l().createElement("h3",null,n)),o&&l().createElement("div",{className:"column large-12 small-12 rf-pickupinfo-spinner"},l().createElement("div",{role:"img",tabIndex:-1,className:"waitindicator waitindicator40-blue","aria-label":"loading"})),i&&l().createElement("div",{className:Wa()("rf-productlocator-suggestionitems",{"rf-productlocator-nosuggestionitems":u})},d&&l().createElement("div",mr({className:"rf-productlocator-errormsg is-error"},qa(d.isResponseError?d.message:s))),u?l().createElement("div",mr({className:Wa()("rf-productlocator-suggestions-nosimilarmodels",Jc.BODY_REDUCED)},qa(c.noSimilarModelsText))):m.map(((e,t)=>{const{part:n,productImage:s,productTitle:o,displayPrice:i,availabilityText:c,stores:d}=e;return l().createElement("div",{className:"rf-productlocator-suggestionitem","data-autom":`productLocator-suggestions-${t}`,key:n},l().createElement("div",{className:"rf-productlocator-productdetails"},s&&l().createElement("div",{className:"rf-productlocator-productimg"},l().createElement("img",{src:s.srcSet.src,className:"ir",alt:s.alt?s.alt:"",width:s.width,height:s.height})),l().createElement("div",{className:Wa()("rf-productlocator-productinfo",{"rf-productlocator-togglebtn-open":e.isShown})},l().createElement("button",{type:"button",className:"rf-productlocator-suggestionstogglebtn",onClick:()=>r(n)},l().createElement("span",{className:"rf-productlocator-togglebtn-content"},l().createElement("span",{className:Jc.BODY_REDUCED},o),l().createElement("span",mr({className:Wa()("rf-productlocator-productprice",Jc.BODY_REDUCED)},qa(i))),l().createElement("span",{className:Wa()("rf-productlocator-suggestionsstoresbtn",Jc.CAPTION)},c)),l().createElement("span",{className:"icon icon-after icon-chevrondown rf-productlocator-buttonicon"})))),l().createElement(Gr,{in:e.isShown,className:"rf-productlocator-suggestionoptions"},l().createElement($y,{stores:d,handleStoreChange:e=>a(e,n)})))}))))};jy.displayName="Suggestions";const Gy=jy,Wy=({state:e,onDimensionChange:t})=>V().get(e,"dimensions",[]).map((e=>"carrierModel"!==e.key&&l().createElement("div",{key:e.key,className:"rf-productlocator-filter-dimension"},e.header&&l().createElement("h3",mr({className:Wa()("rf-productlocator-filter-dimensionlabel",Jc.BODY)},qa(e.header))),"dimensionColor"===e.key?l().createElement(Yh,{name:"color",legend:l().createElement("span",mr({className:"visuallyhidden"},qa(e.header))),className:"rf-productlocator-filter-dimensiongroup"},e.options.filter((e=>e.enabled)).map((a=>{const r={...a.image,alt:""};return l().createElement(zh,{key:a.value,name:"pl_dimensionColor",value:a.value,checked:a.selected,image:r,text:a.label,isProductRed:"product_red"===a.value,skipChangeSelection:!0,handleChange:a=>t(e.key,a)})}))):l().createElement(Xh,{name:e.key,legend:l().createElement("span",mr({className:"visuallyhidden"},qa("dimensionConnection"!==e.key?e.header:V().get(e,"modelMessage")))),className:"rf-productlocator-filter-dimensiongroup",withGutters:!0},e.options.filter((e=>e.enabled)).map((a=>l().createElement(Jh,{key:a.value,name:`pl_${e.key}`,value:a.value,checked:a.selected,className:"rf-productlocator-filteroption",itemsPerRowLarge:"dimensionConnection"===e.key||"dimensionPackQty"===e.key||"dimensionScreensize"===e.key||"dimensionFinish"===e.key||"dimensionStandType"===e.key?1:3===e.options.length?3:2,itemsPerRowSmall:"dimensionConnection"===e.key||"dimensionPackQty"===e.key||"dimensionScreensize"===e.key||"dimensionFinish"===e.key||"dimensionStandType"===e.key?1:2,skipChangeSelection:!0,handleChange:a=>t(e.key,a)},l().createElement(Zh,{text:a.label})))))))),qy=({bootstrap:e,part:t,storeId:a,visible:r,consent:n,isSaving:s,onClose:o,onStoreChange:i,cppart:c,onMetaInitialized:d=V().noop,preventClearOnSave:m,stickyTrigger:u=!1})=>{const p=Oy({bootstrap:e,visible:r,part:t,storeId:a,onStoreChange:i,cppart:c,preventClearOnSave:m,stickyTrigger:u}),{viewport:g}=z(),[h,y]=l().useState(!1),[E,v]=l().useState(!1),[b,f]=hr({resetDelay:4e3}),w=Yr();if(l().useEffect((()=>{j&&d()}),[j,H,d]),l().useEffect((()=>{f(`${Ne} ${Se}`)}),[fe]),V().isEmpty(p))return null;const{metaState:N,filterState:S,pickupState:C,deliveryState:T,suggestionsState:L,selectionState:k,inputRef:I,localLocation:A,setLocalLocation:P,handleDimensionChange:D,handleStoreChange:O,handleDeliverySelection:x,handleFormSubmit:R,handleInputBlur:F,handleSuggestionsToggle:M,handleSuggestionStoreChange:_,handleSaveSelection:B,clearOverlayData:$}=p,U="small"===g,{data:K={},error:H,isFetched:j,isFetching:G}=N,{overlayHeader:W,search:q,assets:Y={}}=K,{deliveryHeader:X,storeSelectionButtonText:J,filterButtonText:Q,footer:Z}=Y,ee=V().get(C,"data.location"),{displayPrice:te,productImage:ae,product:re={}}=S,{part:ne,isPickupSelected:se,isDeliverySelected:le,isSuggestionSelected:oe}=k,ie=Boolean(ne)&&(se||le||oe),ce=V().get(N,"data.displayableDimensionVariants"),de=ce&&ce.size,me=ce&&ce.items.some((e=>"dimensionColor"===e.value)),{provinceSelector:ue,showingOptionsLabel:pe,selectLocationLabel:ge,provinceSelectorTabs:he,addressLookupUrl:ye,resultVoText:Ee,resultsVoText:ve}=e,be=V().get(C,"data.stores",[]),fe=V().get(C,"isFetched",""),we=V().get(C,"data.availability.isComingSoon",!1),Ne=be.length,Se=1===Ne?Ee:ve;return l().createElement(ss,{visible:r,classes:{root:"rf-productlocator-overlay",content:Wa()("rf-productlocator-overlay-content",{"rf-productlocator-overlay-comingsoon":we})},fixedWidth:!0,noPadding:!0,appear:!0,ariaLabel:"rf-productlocator-overlay-label",onClose:()=>{o(),Mh(),$(),v(!1)},onEntered:()=>y(!0),onExited:()=>y(!1)},G&&l().createElement(Kh,{ariaLabel:"loading",entered:h}),fe&&Ne>0&&l().createElement(gr,{message:b}),j&&(V().isEmpty(H)?l().createElement(l().Fragment,null,l().createElement("div",{className:"rf-productlocator-header"},l().createElement("h2",mr({id:"rf-productlocator-overlay-label"},qa(W))),r&&U&&q&&l().createElement(l().Fragment,null,ue?l().createElement(_y,{fieldData:{showingOptionsLabel:pe,selectLocationLabel:ge,provinceSelectorTabs:he,addressLookupUrl:ye},onSubmit:R,onInputBlur:F,pickup:C,inputRef:I,consent:n,localLocation:A,onLocalLocationChange:P}):l().createElement(My,{fieldData:q,onSubmit:R,onInputBlur:F,inputValue:ee,inputRef:I,consent:n,errorMessageId:w}))),l().createElement("div",{className:"row"},l().createElement("div",{className:Wa()("column","large-5","small-12","rf-productlocator-column",{"rf-productlocator-hidedimensions":1===de&&me,"rf-productlocator-filter-scrollable":!U})},r&&!U&&q&&l().createElement(l().Fragment,null,ue?l().createElement(_y,{fieldData:{showingOptionsLabel:pe,selectLocationLabel:ge,provinceSelectorTabs:he,addressLookupUrl:ye},onSubmit:R,onInputBlur:F,pickup:C,inputRef:I,consent:n,localLocation:A,onLocalLocationChange:P,classes:{search:"column large-12 small-12"}}):l().createElement(My,{fieldData:q,onSubmit:R,onInputBlur:F,inputValue:ee,inputRef:I,consent:n,errorMessageId:w})),l().createElement("div",{className:Wa()("rf-productlocator-filter",Jc.CAPTION)},U?l().createElement(l().Fragment,null,l().createElement("button",{type:"button",className:Wa()("rf-productlocator-filterbtn",Jc.BODY_REDUCED,{"rf-productlocator-filterbtn-show":E}),onClick:()=>{v(!E),(e=>{const t=e?"Check availability of another device - open":"Check availability of another device - close";kh.fireMicroEvent({part:"Link",feature:xh,eVar:"eVar6",action:t})})(!E)}},l().createElement("span",{className:"icon icon-after icon-chevrondown"},Q)),l().createElement(Gr,{in:E,className:"rf-productlocator-filtercontent"},l().createElement(Wy,{state:S,onDimensionChange:(t,a)=>D(t,a,e.family)}))):l().createElement(Wy,{state:S,onDimensionChange:(t,a)=>D(t,a,e.family)}))),l().createElement("div",{className:Wa()("column","large-7","small-12","rf-productlocator-column",{"rf-productlocator-ispickuploading":C.isFetching})},l().createElement("div",{className:Wa()("rf-productlocator-options",{"rf-productlocator-scrollable":!U})},C.isFetching&&l().createElement(Kh,{ariaLabel:"loading",entered:h}),l().createElement("div",{className:"rf-productlocator-main"},l().createElement("div",{className:"rf-productlocator-productdetails"},l().createElement("div",{className:"rf-productlocator-productimg"},ae&&l().createElement(Il,{data:ae})),l().createElement("div",{className:"rf-productlocator-productinfo"},l().createElement("div",{className:Jc.BODY_TIGHT},re.productTitle),l().createElement("div",mr({className:Wa()("rf-productlocator-productprice",Jc.BODY)},qa(te))))),l().createElement("div",{className:"rf-productlocator-maincontent"},!C.isFetching&&l().createElement(l().Fragment,null,l().createElement(Ky,{pickup:C,localLocation:A,handleStoreChange:O,assets:Y,errorMessageId:w}),T.data&&!T.error&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rf-productlocator-deliveryheader"},l().createElement("h3",null,X)),l().createElement(Hy,{delivery:T.data,handleDeliverySelection:x,selected:k.isDeliverySelected}))))),C.isToggleBtnNeeded&&!we&&l().createElement(Gy,{suggestions:L,handleSuggestionsToggle:M,handleSuggestionStoreChange:_,assets:Y}),l().createElement("div",mr({className:Wa()("rf-productlocator-footer",Jc.CAPTION)},qa(Z)))),l().createElement("div",{className:"rf-productlocator-sticky"},l().createElement(os,{className:Wa()("button","button-block","rf-productlocator-selectstorebtn",{disabled:!ie}),"data-autom":"continuePickUp",disabled:!ie||s,type:"button",isLoading:s,onClick:()=>B()},J))))):l().createElement("div",mr({className:"rf-productlocator-error"},qa(H.message)))))};qy.displayName="ProductLocatorOverlay";const Yy=qy,zy=({bootstrap:e,plBootstrap:t,parts:a,part:r,hideSearch:n,shouldWarm:s,onWarmDude:o,onStoreSelection:i,classes:c={}})=>{const d=(({bootstrap:e,parts:t,shouldWarm:a,onWarmDude:r,onStoreSelection:n})=>{if(!e)return{};const{url:s,littleApuEnabled:o=!1,maxParamsPerURL:i,doParamRestriction:c,isSingleStorePickup:d,singleStoreId:m,countryCode:u,cookie:p={},consent:g={},timeout:h=1e4}=e,[y,E]=l().useReducer(th,{overlayVisible:!1,storeId:null,overlayPart:null,pickupMessage:{stores:[]}}),v=l().useRef(),[b,f]=l().useState(!1),w=Qg(g),N=V().get(w,"getConsentCookie");l().useEffect((()=>{const e=d?m:y.storeId||ah(p.name,u);y.storeId||E({type:eh.SET_STORE_ID,payload:e});const r=V().differenceWith(t,v.current,V().isEqual);s&&(r.length||a)&&(v.current=t,E({type:eh.FETCH_PICKUP_AVAILABILITY}),lh(s,{parts:a?t:r,store:e,little:o,maxParamsPerURL:i,doParamRestriction:c,timeout:h}).then((t=>{let r=null;t.forEach((e=>{E({type:eh.UPDATE_PICKUP_AVAILABILITY,payload:e.body}),r||(r=V().get(e,"body.stores.0"))})),!e&&a?E({type:eh.SET_STORE_ID,payload:ah(p.name,u)}):e||V().isEmpty(r)||E({type:eh.SET_GEO_STORE_ID,payload:r.storeNumber})})))}),[t,s,i,y.storeId,a,d,m,p.name,u,c,h,o]);const S=()=>E({type:eh.SET_OVERLAY,payload:!1}),C={label:g.label,cookieCompliance:w};return{...y,handleOpenOverlay:(e,t)=>{E({type:eh.SELECTED_PART_DATA,payload:{partNumber:e,productTitle:t}}),E({type:eh.SET_OVERLAY,payload:!0}),g.showConsent&&N()},handleStoreSelection:e=>{const a=y.storeId;E({type:eh.SET_STORE_ID,payload:e.store}),E({type:eh.FETCH_PICKUP_AVAILABILITY}),lh(s,{parts:t,store:e.store,little:o,maxParamsPerURL:i,doParamRestriction:c,timeout:h}).then((e=>{e.forEach((e=>{E({type:eh.UPDATE_PICKUP_AVAILABILITY,payload:e.body}),!b&&r&&V().get(e,"body.warmDudeWithAPU")&&(f(!0),r())}))})),n&&n(e,a),S()},handleCloseOverlay:S,consent:C}})({bootstrap:e,parts:a,shouldWarm:s,onWarmDude:o,onStoreSelection:i});if(V().isEmpty(d))return null;const{overlayVisible:m,overlayPart:u,storeId:p,geoStoreId:g,pickupMessage:h,productTitle:y,handleStoreSelection:E,handleOpenOverlay:v,handleCloseOverlay:b,consent:f}=d,{productLocatorEnabled:w,littleApuEnabled:N=!1}=e;return l().createElement(l().Fragment,null,l().createElement(dh,{pickupMessage:h,part:r,hideSearch:n,bootstrap:e,onTriggerClick:v,classes:c}),w&&!N&&l().createElement(Yy,{visible:m,part:u,storeId:p||g,bootstrap:t,consent:f,onClose:b,onStoreChange:E}),!w&&!N&&l().createElement(iy,{bootstrap:e,visible:m,part:u,productTitle:y,storeId:p||g,consent:f,onClose:b,onStoreChange:E}))};zy.displayName="Pickup";const Xy=({onChangeModelClick:e,changeModelButtonLabel:t,changeModelOverlay:a,showChangeFamilyOverlay:r,onChangeFamilyClick:n,changeFamilyButtonLabel:s,changeFamilyOverlay:o})=>l().createElement("div",{className:"rs-iteminfo-changeproduct"},t&&l().createElement("button",{onClick:e,className:"rs-iteminfo-changeproduct-link as-buttonlink more",type:"button"},t),r&&l().createElement("button",{onClick:n,className:"rs-iteminfo-changeproduct-link as-buttonlink more",type:"button"},s),a,r&&o),Jy=()=>{const{modKey:e}=ll(),[t,a]=(0,s.useState)(!1),r=($a(),`${e}.changeProduct`),n=xa(r),{data:o,properties:i}=n,c=i.isLoadingSubmit,{currentFamilyNode:d,currentFamilyName:m,cppart:u,nextFamilyNode:p,nextFamilyName:g,nextFamilyDefaultPart:h,nextFamilyCppart:y,changeFamilyLinkTxt:E,changeProductLinkTxt:v,bootstrapURL:b}=o,[f,w]=(0,s.useState)(!1),[N,S]=(0,s.useState)(!1),[C,T]=(0,s.useState)({}),L=Qg(V().get(C,"consent",{})),k=(V().get(C,"consent.label"),Ua(r,"part")),I=Ua(r,"store"),A=Boolean(E);(0,s.useEffect)((()=>{(e=>{const t=`${window.location.origin}${e}`;return ft(t).then((e=>{const t=V().get(e,"body.fulfillmentMessageBootstrap"),a=V().get(e,"body.productLocatorBootstrap");return{...t,...a,fireRecommendationsAvailability:!1,metaURL:a.productLocatorMetaDataUrl,pickupURL:t.storePickupMessageUrlForPL,suggestionsURL:a.productLocatorRecommendedProductsUrl,maxParamsPerURL:t.batchSize||3,isAutoCompleteEnabled:t.autoCompleteEnabled,cookie:{name:t.cookieName,expiry:t.cookieExpiry,domain:t.cookieDomain,countryCode:t.countryCode,enabled:t.enabled},storeCookie:t.retailStoreCookie,validation:{zip:{pattern:t.locationValidationRegEx,invalidFormatError:t.invalidFormatErrorMessage,requiredError:t.requiredFieldErrorMessage}},availabilityUnknownError:t.availabilityUnknownErrorMessage,searchPlaceholder:t.searchPlaceholderText,searchButton:t.searchButtonText,availabilityFor:t.availabilityForText,personalPickup:t.personalPickupFragment,previousButton:t.previousButtonText,nextButton:t.nextButtonText,cancelButton:t.cancelButtonText,selectButton:t.selectButtonText,dataVersion:t.dataVersionValue,moreInformation:t.moreInformationText,url:t.storePickupMessageUrl,isSingleStorePickup:V().get(t,"singleStoreMetaData.singleStoreCountry",!1),singleStoreId:t.defaultRetailStoreId,productLocatorColdStartText:a.checkAvailabilityText,productLocatorWarmStartText:a.pickupLinkText,notificationMessage:a.toastNotificationText,setAPUCookie:!1,combinePickupWithMeta:!0,closeOverlayOnSelectStore:!1,deliveryURL:a.deliveryMessageUrl,searchForStoresNearLabel:a.searchForNearbyStoresLabel,showingStoresNearLabel:a.showingStoresNearLabel}}))})(b).then((e=>{T(e)}))}),[]);(0,s.useEffect)((()=>{t&&!c&&(S(!1),w(!1),a(!1))}),[t,c]);k.value,I.value;return I.value,l().createElement(Xy,{onChangeModelClick:()=>{(e=>{const t=V().get(window,"s.prop8","");hl({eVar:dl,slot:t,feature:`link | update your ${e} selections`,action:""})})(m),w(!0)},changeModelButtonLabel:v,changeModelOverlay:null,showChangeFamilyOverlay:A,onChangeFamilyClick:()=>{(()=>{const e=V().get(window,"s.prop8","");hl({eVar:dl,slot:e,feature:"link | choose a different iPhone model",action:""})})(),S(!0)},changeFamilyButtonLabel:E,changeFamilyOverlay:null})},Qy=l().memo(Jy),Zy=({header:e,message:t})=>l().createElement("div",{className:"rs-carrier-connectivity"},l().createElement("div",{className:"rs-carrier-connectivity-wrap"},l().createElement("h3",{className:"rs-carrier-connectivity-title"},e),l().createElement("div",mr({className:"rs-carrier-connectivity-message"},qa(t))))),eE=({modKey:e})=>{const[t]=Ma(e,"connectivityHeader"),[a]=Ma(e,"connectivityText");return l().createElement(Zy,{header:t,message:a})},tE=l().memo(eE),aE=({modKey:e,isReview:t,isEditable:a,announceMessage:r=V().noop,showQuantity:n=!0,showImage:o=!0,quantityLabel:i,dataAutom:c,productTitleHeadingLevel:d=2,alignDetailsLeft:m,index:u,itemLength:p,removedItemIndex:g,isFullWidthTitleMow:h=!0})=>{const{viewport:y,assets:E,fragments:v}=z(),b="small"===y,[f]=Fa(`${e}.cartItemBundleDownPaymentReview`),w=xa(e),{isGiftCard:N,promoLabel:S,showIntentToGift:C,isBundlePromoItem:T,buyFlowInstallmentsDetails:L,hasCarrierTradeIn:k,carrierLabel:I,carrierName:A,relatedParentLabel:P,relatedParent:D,purchaseOptionDescription:O,appleCareIncluded:x,priceMessage:R,preOrderDeviceTradein:F,productId:M,notReturnable:_,installmentPrice:B,fullPriceInfo:$,vatInfo:U,segmentSavingsMessage:K,standAloneDeviceActivationDetails:H={},description:j,processLinkText:G,processLinkMetrics:W,processOverlayText:q,bundleDetails:Y,brandTitle:X,carrierConnectivityDiscountMessage:J,priceAfterDiscountMessage:Q}=w.data,Z=Boolean(L),ee=Boolean(K),te=V().get(x,"label"),ae=te?`${te} ${x.value}`:"",re=Ra(`${e}.recommendedSystemCartMoreProducts`),ne=Ra(`${e}.egc`),se=Ra(`${e}.giftCard`),le=ne||se,oe=Ra(`${e}.engraving`),ie=Ra(`${e}.gifting`),ce=Ra(`${e}.delivery`),de=Ra(`${e}.itemQuantity`),me=Ra(`${e}.changeProduct`),ue=Ra(`${e}.changeProductDisclaimer`),pe=Ra(`${e}.carrierConnectivityCallout`),ge=Ua(e,"changeAppleCareModal"),he=H&&H.hasLearnMoreOverlay,ye=l().createElement(To,null),{isRecommendedSystems:Ee,quantity:ve}=w.data,be=Ee&&l().createElement(Io,null),fe=(0,s.useRef)(),we=a?fe:null,Ne=l().createElement(Do,{linkRef:we,productTitleHeadingLevel:d}),Se=l().createElement(Ro,{linkRef:we}),[Ce,Te]=(0,s.useState)(!1),Le=l().createElement(Yo,{visible:Ce}),ke=!he&&l().createElement(Uo,{visible:Ce,setVisible:Te}),Ie=he&&l().createElement(Xl,{btnLabel:E.carrierLearnMore,overlayContent:v.carrierLearnMoreOverlayContent}),{originalQty:Ae}=w.data,Pe=Boolean(Y),De=n&&(Ae||de)&&!(k&&b)&&!Pe,Oe=De&&l().createElement(ri,{label:i}),xe=l().createElement(ii,{showPriceMessage:!m}),Re=l().createElement(mi,null),Fe=l().createElement(Ei,{index:u,removedItemIndex:g}),Me=l().createElement(wi,null),_e=me&&l().createElement(Qy,null),[Be,$e]=l().useState(!1),Ue=ge.bindExists&&l().createElement(Wg,{removeClick:Be}),Ke=ue&&l().createElement(zg,null),Ve=pe&&l().createElement(tE,{modKey:`${e}.carrierConnectivityCallout`}),He=Pe&&b&&l().createElement(Xg,{showDetails:!1,headerLabel:Y.headerLabel}),je=Pe&&l().createElement(Xg,{showHeader:!b,showDetails:!0,headerLabel:Y.headerLabel,carrierLabel:I,carrierName:A}),Ge=f.downPayment&&l().createElement(Jg,{downPayment:f.downPayment,downPaymentTermsUrl:f.downPaymentTermsUrl}),{priceDetails:We,promos:qe}=w.data,Ye=Boolean(qe),[ze,Xe]=Ma(e,"isNewItemAdded"),Je=l().useRef(),[Qe,Ze]=Ma(vs,"isItemRemoved",!1),[et,tt]=(0,s.useState)(ze||Qe?-1:null),[at,rt]=(0,s.useState)("");(0,s.useEffect)((()=>{ze&&Je.current&&(Je.current.focus(),Xe(!1))}),[ze,Je]),(0,s.useEffect)((()=>{Qe&&Je.current&&(u===g.current||g.current===p&&u===g.current-1)&&(Je.current.focus(),Ze(!1))}),[Qe,Je,g]),(0,s.useEffect)((()=>()=>{g&&(g.current=u,Ze(!0))}),[]);const[nt]=Ma(Ts,"total"),[st]=Ma(Ds,"emiAmount"),lt=st||nt,[ot]=Fa(ws),it=Boolean(ot.undoMessages);(0,s.useEffect)((()=>{if(it){const e=`${ln(E.itemsHeader,{price:lt})}`;r(e)}}),[lt]);const ct=Mm(`${e}.delivery.lineDeliveryOptions`),dt={modKey:e,isReview:t,isEditable:a,announceMessage:r,editLocation:ct,isBundle:Pe},mt=!Pe&&(H.carrierLabelText||A),ut=!Pe&&(H.carrierLabel||I),pt=(0,s.useRef)(""),gt=(0,s.useRef)("");return l().createElement(sl.Provider,{value:dt},l().createElement(Cl,{messages:ye,isGiftCard:N,hasBuyFlowInstallmentDetails:Z,hasCarrierTradeIn:k,isRecommendedSystems:Ee,recommendedSystemsQuantity:ve,recommendedSystemsActions:be,promoLabel:S,carrierDiscountMessage:H.carrierDiscountMessage,brandTitle:X,productTitle:Ne,productImage:Se,showProductImage:o,productInfo:Le,productInfoTrigger:ke,carrierLearnMoreTrigger:Ie,description:j,processLinkText:G,processLinkMetrics:W,processOverlayContent:q,showQuantity:De,quantity:Oe,price:xe,carrierLabel:ut,carrierName:mt,carrierConnectivityDiscountMessage:J,priceAfterDiscountMessage:Q,relatedParentLabel:P,relatedParent:D,inlineFees:Re,installmentPrice:B,fullPriceInfo:$,hasSegmentSavingsMessage:ee,removeButton:Fe,saveForLaterButtonMarkup:Me,partNumber:M,isNonRefundable:_,hasPromos:Ye,installmentDetails:We,itemTabIndex:et,changeProduct:_e,changeAppleCare:Ue,changeProductDisclaimer:Ke,itemRef:Je,dataAutom:c,purchaseOptionDescription:O,alignDetailsLeft:m,priceMessage:R,hasPreOrderTradeIn:F,appleCareDescription:ae,vatInfo:U,itemBundleHeader:He,itemBundleDetails:je,itemDownPayment:Ge,isFullWidthTitleMow:h,carrierConnectivityCalloutInfo:Ve},l().createElement(Ci,null),l().createElement(ki,null),re&&l().createElement(Pi,null),l().createElement(no,{itemRef:Je,setItemTabIndex:tt,setAppleCarePlusType:rt,removeBtnRef:pt,acPlusAddRef:gt,handleRemoveClick:()=>{$e(!0)}}),l().createElement(No,{appleCarePlusType:at,acPlusAddRef:gt,removeClick:Be}),le&&l().createElement(Hi,null),oe&&l().createElement(em,null),C&&l().createElement(sm,null),ie&&l().createElement(Am,null),ce&&l().createElement(Fg,null),T&&l().createElement(Bg,null)))},rE=l().memo(aE),nE=({items:e,announceMessage:t,isEditable:a,quantityLabel:r,productTitleHeadingLevel:n=2,isReview:s,removedItemIndex:o})=>l().createElement(rl,{className:"rs-bag-items rs-iteminfos",component:"ol",role:"list","data-autom":"bag-items"},e.map((({modKey:i,props:c},d)=>l().createElement(nl,mr({key:`bag-item-${i}`},c,{enter:!0}),l().createElement(rE,{modKey:i,announceMessage:t,isEditable:a,quantityLabel:r,dataAutom:`bag-item-${d+1}`,productTitleHeadingLevel:n,isReview:s,index:d,itemLength:e.length,removedItemIndex:o}))))),sE=(e,t)=>{const a=e.items.length===t.items.length,r=e.isEditable===t.isEditable;return a&&r},lE=l().memo(nE,sE),oE=({modKey:e,quantityLabel:t,isEditable:a,productTitleHeadingLevel:r=2,isReview:n=!1})=>{const{assets:o}=z(),i=Ys(e),c=or(e,i),[d]=Ma(e,Xs),m=a||d,[u,p]=hr(),[g,h]=hr(),y=(0,s.useRef)(0);return l().createElement(l().Fragment,null,l().createElement(lE,{items:c,announceMessage:e=>{e===o.processing?p(e):h(e)},isEditable:m,quantityLabel:t,productTitleHeadingLevel:r,isReview:n,removedItemIndex:y}),l().createElement(gr,{message:u}),l().createElement(gr,{message:g}))},iE=l().memo(oE),cE=({text:e})=>l().createElement("span",{className:"rs-notificationbanner-ackmessage"},l().createElement("span",qa(e))),dE=({text:e,redirectText:t,redirectLink:a,linkEvar1:r})=>l().createElement("span",{className:"rs-notificationbanner-ackmessage rs-notificationbanner-saveditem"},l().createElement("span",mr({className:"rs-notificationbanner-icon"},qa('<svg width="21" height="21" class="as-svgicon as-svgicon-bookmarkfill as-svgicon-tiny as-svgicon-bookmarkfilltiny" role="img" aria-hidden="true"><path fill="none" d="M0 0h21v21H0z"/><path d="M12.8 3.25H8.2A2.2 2.2 0 0 0 6 5.45v11.588a.768.768 0 0 0 .166.522.573.573 0 0 0 .455.19.644.644 0 0 0 .38-.128 5.008 5.008 0 0 0 .524-.467l2.916-2.885a.084.084 0 0 1 .118 0l2.916 2.886a6.364 6.364 0 0 0 .52.463.628.628 0 0 0 .384.131.573.573 0 0 0 .456-.19.768.768 0 0 0 .165-.522V5.45a2.2 2.2 0 0 0-2.2-2.2Z"/></svg>'))),l().createElement("span",null,e," "),l().createElement("a",{href:a,className:"rs-notificationbanner-link more","data-evar1":r},t)),mE=e=>{const{message:t,isUndo:a,isUndoDisabled:r,undoButtonLabel:n,processingAriaLabel:s,undoButtonAriaLabel:o,undoButtonAttrs:i}=e;if("object"==typeof t){return{SAVED_ITEMS:l().createElement(dE,{text:t.text,redirectText:t.redirectText,redirectLink:t.savedItemsRedirect,linkEvar1:t.linkEvar1})}[t.type]||l().createElement(cE,{text:t.text})}return l().createElement("span",{className:"rs-notificationbanner-ackmessage"},l().createElement("span",qa(t)),a&&l().createElement("button",mr({},i,{"data-autom":"bag-item-remove-undo",disabled:r,className:"as-buttonlink",type:"button"}),l().createElement("span",{"aria-hidden":"true"},n),r?l().createElement("span",{className:"visuallyhidden"},s):l().createElement("span",{className:"visuallyhidden"},o)))},uE=e=>{const{isShown:t,stopTimer:a,startTimer:r,messages:n,isLoaded:s,closeButtonAttrs:o,closeNotificationAriaLabel:i,isUndo:c,isClose:d,isUndoDisabled:m,undoButtonLabel:u,processingAriaLabel:p,undoButtonAriaLabel:g,undoButtonAttrs:h}=e;return l().createElement(mg,{className:"rs-notificationbanner"},l().createElement(Gr,{in:t,id:"rs-notificationbanner-animation"},l().createElement("div",{className:"rs-notificationbanner-content","aria-live":"polite",role:"status",onMouseOver:a,onMouseOut:r,onFocus:a,onBlur:r},s&&l().createElement("div",{className:"rs-notificationbanner-message as-l-container"},l().createElement("p",{className:"rs-notificationbanner-row"},n&&n.map((e=>l().createElement(mE,{key:"object"==typeof e?e.text:e,message:e,isUndo:c,isUndoDisabled:m,undoButtonLabel:u,processingAriaLabel:p,undoButtonAriaLabel:g,undoButtonAttrs:h})))),d&&l().createElement("button",mr({},o,{className:"icon icon-reset rs-notificationbanner-close",type:"button","data-autom":"notification-banner-close-button"}),l().createElement("span",{className:"visuallyhidden"},i))))))},pE=({modKey:e,showBindName:t,closeBindName:a,undoBindName:r,headerRef:n})=>{const{assets:o}=z(),[i,c]=(0,s.useState)(null),[d,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),{data:g,properties:h}=xa(e),y=Va(e,t),E=r?g.undoMessages:g.ackMessages,v=r?g.undoDelayClose:g.ackDelayClose,b=()=>{const e=h.isLoadingSubmit;if(v&&!e){m(!0),window.clearTimeout(i);const e=window.setTimeout((()=>{c(null),m(!1),y.binding.setProperty("visible",!1)}),v);c(e)}},f=()=>{m(!1),n.current&&n.current.focus()};(0,s.useEffect)((()=>{E&&(i||(b(),m(!0)),p(!0))}),[E]),(0,s.useEffect)((()=>{u&&v&&setTimeout((()=>{p(!1)}),v+3e3)}),[u]);const w=Ha(e,a),N=Ha(e,r),S={...w.props,onClick:e=>{w.props.onClick(e),f()}},C={...N.props,onClick:e=>{N.props.onClick(e),f()}};return l().createElement(uE,{messages:E,isShown:d,isLoaded:u,stopTimer:()=>{window.clearTimeout(i),c(null)},startTimer:b,handleClose:f,closeButtonAttrs:S,closeNotificationAriaLabel:o.closeNotification,isUndo:Boolean(r),isClose:V().get(w,"binding.bindExists",!1),isUndoDisabled:h.isLoadingSubmit,undoButtonLabel:o.undo,processingAriaLabel:o.processing,undoButtonAriaLabel:o.undo,undoButtonAttrs:C})},gE=({rootTag:e="ul",index:t,defaultIndex:a=[],handleChange:r=(()=>{}),isExclusive:n=!1,id:o,children:i,...d})=>{const m=l().useId(),u=o||m,p=l().Children.count(i),{current:g}=(0,s.useRef)(void 0!==t),[h,y]=(0,s.useState)(a),[E,v]=(0,s.useState)(null);return l().createElement(e,mr({"data-core-accordion":"",id:u},d),l().Children.map(i,((e,a)=>e?l().cloneElement(e,{...e.props,isSelected:g?t&&t.includes(a):h.includes(a),focusedIndex:E,onHandleClick:e=>(e=>{let a=[];const s=g?t||[]:h;a=n?s.includes(e)?[]:[e]:s.includes(e)?s.filter((t=>t!==e)):[...s,e],g||y(a),r(a)})(e),onHandleKeyDown:(e,t)=>((e,t,a,r)=>{let n;const s=a-1;switch(e.keyCode){case c.ArrowDown:return e.preventDefault(),n=t<s?t+1:0,r(n);case c.ArrowUp:return e.preventDefault(),n=t>0?t-1:s,r(n);default:return!1}})(e,t,p,v),id:u,index:a}):null)))},hE=(0,s.forwardRef)((({rootTag:e="li",titleWrapperTag:t=l().Fragment,titleWrapperAttrs:a={},title:r,titleAttrs:n={},contentAttrs:o={},id:i,index:c,isSelected:d,onHandleClick:m=(()=>{}),onHandleKeyDown:u=(()=>{}),focusedIndex:p,children:g,mountOnEnter:h,unmountOnExit:y,...E},v)=>{const b=`title-${i}-${c}`,f=`content-${i}-${c}`,w=(0,s.useRef)(null);(0,s.useEffect)((()=>{c===p&&w.current&&w.current.focus()}),[c,p]);const{onClick:N,...S}=n;return l().createElement(e,mr({ref:v,"data-core-accordion-item":"","data-core-accordion-item-expanded":d?"":void 0},E),l().createElement(t,a,l().createElement("button",mr({type:"button","data-core-accordion-button":"","data-core-accordion-button-expanded":d?"":void 0,onClick:e=>{return t=e,m(c),void(N&&N(t));var t},onKeyDown:e=>u(e,c),"aria-expanded":d,"aria-controls":f,id:b,ref:w},S),r)),l().createElement(qr,{in:d,mountOnEnter:h,unmountOnExit:y},l().createElement("div",mr({"data-core-accordion-content":"","aria-hidden":!d||void 0,id:f},o),g)))}));hE.displayName="AccordionItem";const yE=hE,EE=({title:e,classes:t={root:"",button:"",icon:""},noPadding:a,className:r,children:n,withPlus:s,withChevron:o=!0,iconAttrs:i,firstItem:c,numbered:d,...m})=>l().createElement(yE,mr({className:Wa()(r,t.root,{"rc-accordion-item":!c}),title:l().createElement(l().Fragment,null,l().createElement("span",{className:Wa()({[`icon icon-${m.index+1}circle rc-accordion-numbered`]:d},Jc.CALLOUT)}),l().createElement("span",mr({className:Wa()("rc-accordion-title large-10",Jc.CALLOUT)},qa(e))),l().createElement("span",mr({className:Wa()("icon","rc-accordion-collapse-icon",{"icon-plus rc-accordion-plusicon":s},t.icon)},i)),!s&&o&&l().createElement("span",mr({className:"rc-accordion-chevrondown rc-accordion-collapse-icon"},qa('<svg viewBox="0 0 17 8.85" class="as-svgicon as-svgicon-chevrondown as-svgicon-base as-svgicon-chevrondownbase" role="img" aria-hidden="true" width="35px" height="35px"><path fill="none" d="M0 0h35v35H0z"/><path d="M15 1.13 8.5 7.72 2 1.13" style="fill:none;stroke:#86868b;stroke-linecap:round;stroke-linejoin:round;stroke-width:2.25px"/></svg>')))),titleAttrs:{className:Wa()("rc-accordion-button",t.button)}},m),l().createElement("div",{className:Wa()("rc-accordion-content","large-10",{"rc-accordion-content-nopadding":a,"rc-accordion-content-numbered":d})},n)),vE=({compact:e,hover:t,centered:a,hideClose:r,classes:n={root:""},className:s,...o})=>l().createElement(gE,mr({className:Wa()("rc-accordion",s,n.root,{"rc-accordion-compact":e,"rc-accordion-hover":t,"rc-accordion-centered":a,"rc-accordion-hideclose":r})},o)),bE=({isToolbarLoadingSubmit:e,toolbarSuccessMessage:t,rccToolbarCustomerId:a,rccToolbarAgentName:r,showToolbarOptions:n,isSavedCart:o,isThankYouToolBar:i,isCheckoutToolBar:c,commentsFieldProps:d,notificationBanner:m,rccHeaderLinks:u,productQuickLinks:p,rccOptions:g,dealCloserOverlay:h})=>{const{assets:y,viewport:E}=z(),v="small"===E,[b,f]=(0,s.useState)([]),[w,N]=(0,s.useState)(!1),S=!o&&!c&&!i,C=0===b.length?y.showProductLinks:y.hideProductLinks,T=w?y.hideToolbar:y.viewToolbar,L=l().createElement("button",{type:"button",className:Wa()("as-buttonlink icon icon-after rs-rcctoolbar-button",{row:v},{"icon-chevronup rs-rcctoolbar-hidetoolbar":w},{"icon-chevrondown rs-rcctoolbar-viewtoolbar":!w}),onClick:()=>{N(!w)}},T);return l().createElement("div",{className:"rs-rcctoolbar-container","data-trigger-context":!0,"aria-label":y.rccDashBoardA11y,role:"region"},l().createElement(fr,{isPending:e,messages:{pending:y.processing,finished:t}}),m,l().createElement("div",{className:"rs-rcctoolbar-header as-l-container"},l().createElement("div",{className:"row rs-rcctoolbar-header-info"},l().createElement("div",{className:"rs-rcctoolbar-appleid",tabIndex:"-1"},a),l().createElement("div",{className:"rs-rcctoolbar-headerright"},l().createElement("div",{className:"rs-rcctoolbar-agent-name"},r),!v&&L)),v&&L,l().createElement(qr,{in:w},u,n&&l().createElement("div",{className:"rs-rcctoolbar-options row"},l().createElement("div",{className:"column large-6 small-12"},g,h),l().createElement("div",{className:"rs-rcctoolbar-comments column large-6 small-12"},l().createElement(Fi,mr({},d,{className:"rs-form-textbox-textarea"})))),S&&p&&l().createElement("div",{className:"as-l-container"},l().createElement("div",{className:"rs-rcctoolbar-productlinks"},l().createElement(vE,{index:b,handleChange:f,id:"rs-rcctoolbar-productlinks",compact:!0,onClick:()=>{hl({action:C,feature:"Agent",eVar:gl})}},l().createElement(EE,{title:C,withPlus:!1,withChevron:!0,role:"listitem",iconAttrs:{"aria-hidden":"true"},classes:{root:"rs-rcctoolbar-accordionitem"}},l().createElement("div",mr({className:"row rs-rcctoolbar-drawer"},qa(p))))))))))},fE=({id:e,messages:t,messageLastUpdated:a,isEmailOverlayVisible:r,setEmailOverlayVisible:n,emailBagButtonProps:s,messageFieldProps:o,sendButtonProps:i,toEmailFieldProps:c,email2FieldProps:d,email3FieldProps:m,email4FieldProps:u,email5FieldProps:p})=>{const{assets:g}=z();return l().createElement("div",{className:"rs-rcctoolbar-emailoverlay-editbag rs-rcctoolbar-link"},l().createElement("button",mr({},s,{type:"button",className:"as-buttonlink"}),g.emailBag),l().createElement(ss,{visible:r,doublePadding:!0,onClose:()=>n(!1),ariaLabel:`${e}-overlayHeading`,fixedWidth:!0},l().createElement("div",{className:"rs-rcctoolbar-emailoverlay"},l().createElement("h2",{className:"rs-rcctoolbar-emailoverlay-header",id:`${e}-overlayHeading`},g.shareViaEmailLabel),l().createElement(qs,{messages:t,lastUpdated:a}),l().createElement("div",{className:"rs-rcctoolbar-emailoverlay-section"},l().createElement("div",{className:"rs-rcctoolbar-overlay-subsection"},l().createElement("p",{className:"rs-rcctoolbar-emailoverlay-label"},g.primaryRecipient),l().createElement(Xo,c)),l().createElement("div",{className:"rs-rcctoolbar-emailoverlay-subsection"},l().createElement("p",{className:"rs-rcctoolbar-emailoverlay-label"},g.additionalRecipients),l().createElement(Xo,d,l().createElement("span",{className:"visuallyhidden"},`${g.additionalRecipientA11y} 1`)),l().createElement(Xo,m,l().createElement("span",{className:"visuallyhidden"},`${g.additionalRecipientA11y} 2`)),l().createElement(Xo,u,l().createElement("span",{className:"visuallyhidden"},`${g.additionalRecipientA11y} 3`)),l().createElement(Xo,p,l().createElement("span",{className:"visuallyhidden"},`${g.additionalRecipientA11y} 4`))),l().createElement("div",{className:"rs-rcctoolbar-overlay-subsection"},l().createElement("div",{className:"rs-rcctoolbar-overlay-message",htmlFor:"emailCartMessageId"},g.messageOptionalLabel),l().createElement(Fi,o))),l().createElement("div",{className:"rs-rcctoolbar-emailoverlay-buttoncontainer"},l().createElement(os,i,g.sendEmailLabel),l().createElement("div",{className:"rs-rcctoolbar-emailoverlay-cancel"},l().createElement("button",{className:"as-buttonlink",type:"button",onClick:()=>n(!1)},g.cancel))))))},wE=({modKey:e})=>{const{assets:t}=z(),[a,r]=(0,s.useState)(!1),n=`${e}.toolbarHeader.emailCart`,{properties:o}=xa(n),[i,c]=Ma(n,"isEmailSent"),[d,m]=_a(n);(0,s.useEffect)((()=>{i&&(r(!1),c(!1))}),[i]);const u={...rr(n,"message").props,className:"rs-rcctoolbar-emailoverlay-textarea",id:"emailCartMessageId","aria-label":t.emailOverlayMessageA11y,label:"Enter Message"},p=Ha(`${e}.toolbarHeader`,"emailBag"),g={...p.props,onClick:e=>{r(!0),hl({action:"EmailBag",feature:"Agent",eVar:gl}),p.props.onClick(e)}},h={...Ha(n,"send").props,disabled:o.isLoadingSubmit,isLoading:o.isLoadingSubmit},y={...rr(n,"toEmails").props,label:t.emailAddressLabel},E={...rr(n,"email2").props,label:t.emailAddressOptional},v={...rr(n,"email3").props,label:t.emailAddressOptional},b={...rr(n,"email4").props,label:t.emailAddressOptional},f={...rr(n,"email5").props,label:t.emailAddressOptional};return l().createElement(fE,{id:n,messages:d,messagesLastUpdated:m,isEmailOverlayVisible:a,setEmailOverlayVisible:r,emailBagButtonProps:g,messageFieldProps:u,sendButtonProps:h,toEmailFieldProps:y,email2FieldProps:E,email3FieldProps:v,email4FieldProps:b,email5FieldProps:f})},NE=l().memo(wE),SE=({showOverlay:e,setShowOverlay:t,returnToBagLink:a,hasBundle:r})=>{const{assets:n}=z();return l().createElement(ss,{visible:e,onClose:()=>{hl({feature:"bag",eVar:gl,action:"close"}),t(!1)},doublePadding:!0,fixedWidth:!0,ariaLabel:"rs-leaving-securecheckout-header"},l().createElement("section",{className:"rs-leavingsecurecheckout-overlay"},l().createElement("h2",{id:"rs-leaving-securecheckout-header",className:"typography-headline-reduced"},n.leavingSecureCheckout),!r&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-leavingsecurecheckout-message"},n.secureCheckoutMessage),l().createElement("div",{className:"rs-leavingsecurecheckout-action"},Boolean(a)&&l().createElement("a",{href:a,className:"button rs-leavingsecurecheckout-button","data-prop37":'D=pageName+"|bag|leave secure checkout"',"data-autom":"leaveSecureCheckoutButton"},l().createElement("span",null,n.leaveSecureCheckoutCTA)),l().createElement("div",{className:"rs-leavingsecurecheckout-link"},l().createElement("button",{type:"button",className:"as-buttonlink","data-autom":"stay-and-continue-link",onClick:()=>{wl(),t(!1)}},n.stayInCheckoutCTA)))),r&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-leavingsecurecheckout-message"},n.bundleSecureCheckoutMessage),l().createElement("div",{className:"rs-leavingsecurecheckout-action"},l().createElement("button",{type:"button",className:"button rs-leavingsecurecheckout-button","data-autom":"stay-and-continue-link",onClick:()=>{wl(),t(!1)}},n.stayInCheckoutCTA),Boolean(a)&&l().createElement("div",{className:"rs-leavingsecurecheckout-link"},l().createElement("a",{href:a,"data-prop37":'D=pageName+"|bag|leave secure checkout"',"data-autom":"leaveSecureCheckoutButton"},l().createElement("span",null,n.leaveSecureCheckoutCTA)))))))},CE=({isSavedCart:e,isBagToolBar:t,isThankYouToolBar:a,isCheckoutToolBar:r,emailOverlayWithButton:n,hasInstallmentsFinancing:o,clearCustomerLink:i,findCustomerLink:c,clearBagLink:d,saveBagLink:m,editBagLink:u,copyToClipBoardLink:p,copyCartLinkProps:g,returnToBagLink:h})=>{const{assets:y}=z(),[E,v]=(0,s.useState)(!1);return l().createElement(l().Fragment,null,t&&!a&&l().createElement("div",{className:"row rs-rcctoolbar-header-links"},l().createElement("div",{className:"rs-rcctoolbar-content-left large-6 small-12"},!e&&i,c,d,m,u),l().createElement("div",{className:"rs-rcctoolbar-content-right large-5 small-12"},n,p,l().createElement(os,g,o?y.copyAcmiBagToClipBoard:y.copyToClipBoard))),r&&!a&&l().createElement("div",{className:"row rs-rcctoolbar-header-links"},l().createElement(SE,{showOverlay:E,setShowOverlay:v,returnToBagLink:h}),l().createElement("button",{type:"button",id:"returnToBagOverlaySelector",className:"as-buttonlink",onClick:()=>{hl({part:"Checkout",action:"ReturnToBag",feature:"Agent",eVar:gl}),v(!0)}},y.returnToBag)))},TE=({buttonProps:e,linkLabel:t})=>l().createElement("div",{className:"rs-rcctoolbar-link rs-load-fadein"},l().createElement("button",mr({type:"button"},e),t)),LE=({modKey:e,bindKey:t,linkLabel:a,setToolbarSuccessMessage:r})=>{const{assets:n}=z(),s=Ha(`${e}.toolbarHeader`,t),o=s.binding.bindExists,i={...s.props,className:"as-buttonlink",onClick:e=>{switch(e.target.id){case"cart-toolbar-header-clearCustomer":r(n.clearCustomerA11y);break;case"cart-toolbar-header-savedBag":r(n.bagSavedA11y);break;case"cart-toolbar-header-copyToClipBoard":r(n.copyToClipBoardA11y);break;case"cart-toolbar-header-clearEntireBag":r(n.clearBagA11y);break;default:r("")}s.props.onClick(e)}};return o&&l().createElement(TE,{buttonProps:i,linkLabel:a})},kE=l().memo(LE),IE=({modKey:e,isBagToolBar:t,isCheckoutToolBar:a,isThankYouToolBar:r,setToolbarSuccessMessage:n,setFlagNotificationBanner:o})=>{const{assets:i}=z(),[c]=Fa(Es),d=c.savedCart,{data:m}=xa(`${e}.toolbarHeader`),u=!!m.cartLink,[p]=Ma(Ts,"buyFlowInstallmentsFinancing"),g={hasDefaultClass:!1,className:"as-buttonlink rs-load-fadein",disabled:!m.cartLink,onClick:()=>{if(hl({action:"CopySharedBagLink",feature:"Agent",eVar:gl}),m.cartLink){const e=document.createElement("textarea");document.body.appendChild(e),e.textContent=m.cartLink,e.select(),document.execCommand("Copy"),document.body.removeChild(e),o(!0)}}};return(0,s.useEffect)((()=>{if(m.cartLink){const e=m.cartLink.match(/<SHAREDITEMSID>(.+)<\/SHAREDITEMSID>/)[1];Kl(e,"SHARED_BAG_ID")}}),[m.cartLink]),l().createElement(CE,{isSavedCart:d,isBagToolBar:t,isThankYouToolBar:r,isCheckoutToolBar:a,emailOverlayWithButton:l().createElement(NE,{modKey:e}),hasInstallmentsFinancing:p,clearCustomerLink:t&&!r&&!d&&l().createElement(kE,{modKey:e,bindKey:"clearCustomer",linkLabel:i.clearCustomer,setToolbarSuccessMessage:n}),findCustomerLink:t&&!r&&l().createElement(kE,{modKey:e,bindKey:"findCustomer",linkLabel:i.findCustomer,setToolbarSuccessMessage:n}),clearBagLink:t&&!r&&l().createElement(kE,{modKey:e,bindKey:"clearBag",linkLabel:i.clearBag,setToolbarSuccessMessage:n}),saveBagLink:t&&!r&&l().createElement(kE,{modKey:e,bindKey:"saveBag",linkLabel:i.saveBag,setToolbarSuccessMessage:n}),editBagLink:t&&!r&&l().createElement(kE,{modKey:e,bindKey:"editBag",linkLabel:i.editBag,setToolbarSuccessMessage:n}),copyToClipBoardLink:t&&!r&&l().createElement(kE,{modKey:e,bindKey:"copyToClipBoard",linkLabel:p?i.createAcmiSharedBagLabel:i.createSharedBagLabel,setToolbarSuccessMessage:n,disabled:!u}),copyCartLinkProps:g,returnToBagLink:m.returnToBag})},AE=l().memo(IE),PE=({addToCartModExists:e,isAddToCartLoadingSubmit:t,addToCartFieldProps:a,addToCartButtonProps:r,otherProductsLink:n,holdCodeOptions:s})=>{const{assets:o}=z();return l().createElement(l().Fragment,null,e&&l().createElement("div",{className:"row rs-rcctoolbar-addtocart-otherproducts-wrapper"},l().createElement(fr,{isPending:t,messages:{pending:o.processing,finished:o.itemAddedSucessAlly}}),l().createElement(Xo,a,t?l().createElement("div",{role:"img",className:"rs-rcctoolbar-loading waitindicator waitindicator16-gray","aria-label":o.processing}):l().createElement(Qo,r,o.addToBagLabel)),n&&l().createElement("div",{className:"rs-rcctoolbar-otherproducts column"},l().createElement("a",{href:n,target:"_blank",className:"icon-wrapper",onClick:()=>{hl({action:"OtherProducts",feature:"Agent",eVar:gl})}},l().createElement("span",{className:"icon-copy"},o.otherProducts,l().createElement("span",{className:"visuallyhidden"},o.newWindowAlly)),l().createElement("span",{className:"more","aria-hidden":"true"})))),s)},DE=({holdCodeDropDownProps:e,defaultSelectLabel:t,holdCodeOptions:a})=>l().createElement("div",{className:"rs-rcctoolbar-hold-code large-10"},l().createElement("div",{className:"form-dropdown"},l().createElement(oo,e,l().createElement(co,{disabled:!0},t),a.map((e=>l().createElement(co,{key:`product-${e.label}`,value:e.value},e.label)))))),OE=({modKey:e})=>{const{assets:t}=z(),[a]=Fa(`${e}.toolbarOptions`),{holdCodeOptions:r}=a,n={...sr(`${e}.toolbarOptions`,"holdCode").props,label:t.holdCodeLabel};return l().createElement(DE,{holdCodeDropDownProps:n,defaultSelectLabel:t.selectOne,holdCodeOptions:r})},xE=l().memo(OE),RE=({modKey:e})=>{const{assets:t}=z(),{data:a}=xa(`${e}.toolbarOptions`),{modExists:r,properties:n}=xa(`${e}.toolbarOptions.addToCart`),s=rr(`${e}.toolbarOptions.addToCart`,"product"),o={...s.props,label:t.partNumber,classes:{root:"column rs-rcctoolbar-partnumber",input:"rs-rcctoolbar-partnumber-input"},"data-trigger-return":"click .form-textbox-button","data-trigger-esc":"click .form-textbox-sidebutton"},i={...Ha(n.key,"add-to-cart-button").props,className:"form-textbox-button",disabled:!s.binding.value};return l().createElement(PE,{addToCartModExists:r,isAddToCartLoadingSubmit:n.isLoadingSubmit,addToCartFieldProps:o,addToCartButtonProps:i,otherProductsLink:a.otherProductsLink,holdCodeOptions:Boolean(a.holdCodeOptions)&&l().createElement(xE,{modKey:e})})},FE=l().memo(RE),ME=({priceOptionLabel:e,priceOptionRadioFieldEnabled:t,priceOptionRadioFieldProps:a,products:r=[]})=>{const{assets:n}=z(),s=Boolean(r.length);return l().createElement(l().Fragment,null,l().createElement(Nd,a,l().createElement("span",{className:"row"},l().createElement("span",{className:"form-selector-left-col column large-6"},l().createElement("span",{className:"form-selector-title"},e)),!t&&l().createElement("span",{className:"form-selector-right-col column large-6"},n.orderUnavailable))),s&&l().createElement("ul",{className:"rs-dealcloseroverlay-productinfo"},r))},_E="order_level",BE="price_match",$E=({isActive:e,priceOptionValue:t,title:a,originalPrice:r,discount:n,maxPriceMatchDiscount:s,discountOptions:o,productDiscountDropdownProps:i,productDiscountTextFieldProps:c})=>{const{assets:d}=z();return l().createElement(qr,{in:e},l().createElement("li",null,l().createElement("div",{className:"rs-dealcloseroverlay-innersection"},t!==_E&&l().createElement("p",{className:"rs-dealcloseroverlay-productname"},l().createElement("span",null,a)),l().createElement("div",{className:"rs-dealcloseroverlay-options"},l().createElement("div",{className:"large-7"},l().createElement("p",{className:"rs-dealcloseroverlay-columnheader"},"order_level"===t?d.originalOrderTotalHeader:d.originalPriceHeader),l().createElement("p",{className:"rs-dealcloseroverlay-columncontent"},r)),l().createElement("div",{className:"rs-dealcloseroverlay-dropdown"},l().createElement("div",{className:"rs-dealcloseroverlay-discountlabel"},n,o?l().createElement(oo,i,o.map(((e,t)=>l().createElement(co,{key:`discount-${e}`,value:0===t?-1:t},e)))):l().createElement(Xo,c)),t===BE&&l().createElement("div",{className:"rs-dealcloseroverlay-maxdiscount"},`${d.maxDiscountAmount} ${s}`))))))},UE=({isActive:e,modKey:t,priceOptionValue:a})=>{const{assets:r}=z(),[n]=Fa(t),s={...sr(t,"selectedDealCloserIndex").props,label:r.discountLabel},o={...rr(t,"deal-discount").props,label:r.discountLabel};return l().createElement($E,{isActive:e,priceOptionValue:a,title:n.title,originalPrice:n.originalPrice,discount:n.discount,discountOptions:n.discountOptions,maxPriceMatchDiscount:n.maxPriceMatchDiscount,productDiscountDropdownProps:s,productDiscountTextFieldProps:o})},KE=l().memo(UE),VE=({modKey:e,priceOptionValue:t,priceOptionLabel:a})=>{const[r,n]=Ma(`${e}.toolbarOptions.dealCloserPriceAdjustment`,"priceAdjustmentTab"),{childModKeys:s}=xa(`${e}.toolbarOptions.dealCloserPriceAdjustment.${t}`),o=nr(`${e}.toolbarOptions.dealCloserPriceAdjustment`,`show-${t}`),i={...o.props,key:o.binding.properties.key,value:t,checked:r===t,disabled:!o.binding.properties.enabled,onChange:e=>{n(e.target.value),o.binding.runClickEvents()}},c=s.map((e=>l().createElement(KE,{key:`product-list-item-${e}`,isActive:r===t,modKey:e,priceOptionValue:t})));return l().createElement(ME,{priceOptionLabel:a,priceOptionRadioFieldEnabled:o.binding.properties.enabled,priceOptionRadioFieldProps:i,products:c})},HE=l().memo(VE),jE=({id:e,overlayProps:t,cancelOverlay:a,priceAdjustmentLabel:r,isToolbarOptionsLoadingSubmit:n,pricingSections:s,priceAdjustmentButtonProps:o,savePriceAdjustmentButtonProps:i,removePriceAdjustmentButtonProps:c,isRemoving:d})=>{const{assets:m}=z(),{priceAdjustmentLabel:u}=m,p=Boolean(r),g=Wa()("as-buttonlink column",{"rs-dealcloseroverlay-change":p}),h=Wa()("row",{"rs-dealcloseroverlay-label":p}),y=Wa()("large-6",{"small-12":!p}),E=Wa()("rs-dealcloseroverlay",{"rs-apply-price-adjustment":!p});return l().createElement("div",{className:E},p&&l().createElement("div",{className:"rs-dealcloseroverlay-label-header"},`${u}:`),l().createElement("div",{className:h},p&&l().createElement("div",{className:"large-6"},r),l().createElement("div",{className:y},l().createElement("div",{className:"row rs-dealcloseroverlay-buttons"},l().createElement(fr,{isPending:n,messages:{pending:m.processing,finished:""}}),l().createElement("button",mr({},o,{type:"button",className:g}),p?l().createElement(l().Fragment,null,m.changeLabel,l().createElement("span",{className:"visuallyhidden"},u)):m.applyPriceAdjustments),l().createElement(ss,mr({},t,{className:"rs-dealcloser-overlay",ariaLabel:`${e}-overlayHeading`,fixedWidth:!0,noPadding:!0,footerContent:l().createElement("div",{className:"rs-dealcloseroverlay-buttoncontainer"},l().createElement("div",{className:"rs-dealcloseroverlay-save"},l().createElement(os,i,m.save),l().createElement(fr,{isPending:i.isLoading,messages:{pending:m.processing,finished:m.itemAddedSucessAlly}})),l().createElement("div",{className:"rs-dealcloseroverlay-cancel"},l().createElement("button",{type:"button",className:"as-buttonlink",onClick:a},m.cancel)))}),l().createElement("div",{className:"rs-dealcloseroverlay-content"},l().createElement("h2",{id:`${e}-overlayHeading`,className:"rs-dealcloseroverlay-header"},m.priceAdjustmentLabel),l().createElement("div",{className:"rs-dealcloseroverlay-section"},l().createElement("fieldset",{className:"form-selector-group"},l().createElement("legend",{className:"rs-dealcloseroverlay-subheader"},m.dealCloserSubHeader),s)))),p&&l().createElement(l().Fragment,null,l().createElement("button",mr({},c,{type:"button",className:"as-buttonlink"}),d?l().createElement("span",{className:"waitindicator waitindicator-inline waitindicator16-gray column rs-dealcloseroverlay-loading"}):m.remove,l().createElement("span",{className:"visuallyhidden"},m.priceAdjustmentLabel)),l().createElement(fr,{isPending:c.isLoading,messages:{pending:m.processing,finished:m.removedPriceAdjustmentA11y}}))))))},GE=({modKey:e})=>{const t=`${e}.toolbarOptions.dealCloserPriceAdjustment`,[a,r]=ir(t),{data:n,properties:s}=xa(`${e}.toolbarOptions`),{priceAdjustmentLabel:o}=n,{data:i,properties:c}=xa(`${e}.toolbarOptions.dealCloserPriceAdjustment`),{priceOptionsAcc:d=[]}=i,m={...Ha(`${e}.toolbarOptions`,"priceAdjustment").props,disabled:!n.enablePriceAdjustment,id:"rccApplyPriceAdjustmentsSelector"},u=Ha(`${e}.toolbarOptions`,"removePriceAdjustment"),p={...Ha(`${e}.toolbarOptions.dealCloserPriceAdjustment`,"save").props,isLoading:c.isLoadingSubmit},g=d.map((t=>l().createElement(HE,{key:t,modKey:e,priceOptionValue:t.value,priceOptionLabel:t.label})));return l().createElement(jE,{id:c.key,overlayProps:a,cancelOverlay:r,priceAdjustmentLabel:o,isToolbarOptionsLoadingSubmit:s.isLoadingSubmit,pricingSections:g,priceAdjustmentButtonProps:m,savePriceAdjustmentButtonProps:p,removePriceAdjustmentButtonProps:u.props,isRemoving:u.binding.properties.isLoadingSubmit})},WE=l().memo(GE),qE=({modKey:e,isBagToolBar:t=!1,isCheckoutToolBar:a=!1,isThankYouToolBar:r=!1})=>{const n=l().useRef(null),{assets:o}=z(),{customerAppleId:i,notSignedIn:c,specialistLabel:d,noSpecialist:m,comments:u}=o,[p]=Fa(Es),g=p.savedCart,{properties:h}=xa(e),[y]=Fa(`${e}.toolbarHeader`),[E]=Fa(`${e}.toolbarOptions`),v=Boolean(Object.keys(E).length),[b,f]=(0,s.useState)(""),[w,N]=(0,s.useState)(!1),S=`${i} ${y.customerId||c}`,C=`${d} ${y.agentName||m}`,T=$a(),L=rr(`${e}.toolbarOptions`,"comments"),k={...L.props,label:u,onBlur:t=>{L.props.onBlur(t),T({type:Ee,modKey:`${e}.toolbarOptions`,bindName:"comments"})}},I=v&&!g&&!r;return l().createElement(bE,{modKey:e,isToolbarLoadingSubmit:h.isLoadingSubmit,toolbarSuccessMessage:b,flagNotificationBanner:w,headerRef:n,rccToolbarCustomerId:S,rccToolbarAgentName:C,showToolbarOptions:I,isSavedCart:g,isThankYouToolBar:r,isCheckoutToolBar:a,commentsFieldProps:k,notificationBanner:w&&l().createElement(pE,{modKey:`${e}.toolbarHeader`,key:"ack-message",headerRef:n,showBindName:"ackBanner",closeBindName:"ack"}),rccHeaderLinks:l().createElement(AE,{modKey:e,isBagToolBar:t,isCheckoutToolBar:a,isThankYouToolBar:r,setToolbarSuccessMessage:f,setFlagNotificationBanner:N}),productQuickLinks:y.productQuickLinks,rccOptions:I&&l().createElement(FE,{modKey:e}),dealCloserOverlay:I&&l().createElement(WE,{modKey:e})})},YE=l().memo(qE),zE=({carrierFinancedInfo:e})=>l().createElement("div",{className:"rs-carrier-billedseparately"},l().createElement("div",mr({className:"row rs-carrier-financed-info"},qa(e)))),XE=({modKey:e})=>{const[t]=Ma(e,"itemsBilledSeparately"),{assets:{carrierFinancedItemHeader:a},fragments:{carrierFinancedIphoneBilling:r}}=z(),{carrierFinancedItemHeader:n}=t,s=ln(r,{carrierFinancedItemHeader:n||a});return l().createElement(zE,{carrierFinancedInfo:s})},JE=l().memo(XE),QE=(e,t)=>Object.keys(t).every((a=>e.dimensions[a]===t[a])),ZE=(e,t)=>{if(!t||!(e&&e.length>0))return null;return e.find((e=>QE(e,t)))||null},ev=(e,t)=>t&&e&&e.length>0?e.filter((e=>QE(e,t))):[],tv=(e,t)=>{if(!e)return!1;return Object.keys(e).every((a=>!!t.find((t=>t.key===a&&t.options?t.options.find((t=>t.value===e[a])):null))))},av=(e,t)=>{const a=t.reduce(((e,t)=>(t.dependsOn&&t.dependsOn.length&&t.dependsOn.some((t=>e.includes(t)))&&e.push(t.key),e)),[e]);return V().uniq(a).filter((t=>t!==e))},rv=(e,t)=>{if(0===e.length)return{};const a=(t?ev(e,t):e).map((e=>e.dimensions));return a.reduce(((e,t)=>(Object.keys(t).forEach((a=>{e[a]!==t[a]&&delete e[a]})),e)),{...a[0]})},nv=(e,t,a,r)=>{const n=ev(a,t);if(1===n.length)return{part:n[0].part,selection:n[0].dimensions};if(n.length>1)return r?{part:n[0].part,selection:n[0].dimensions}:{part:null,selection:t};const s=((e,t)=>t.map((e=>e.key)).filter((t=>e.hasOwnProperty(t))))(t,e),l=V().omit(t,s[s.length-1]);return nv(e,l,a,r)},sv=e=>0===Object.keys(e).length,lv=(e,t,a)=>{const r={};return!V().isEmpty(V().get(t,"full"))||!V().isEmpty(V().get(t,"short"))?V().forEach(t,((t,n)=>{V().isEmpty(t)||(r.pricesInOrder=r.pricesInOrder||{},r.pricesInOrder[n]=[],t.forEach((t=>{let s="";e[t]?r.pricesInOrder[n].push({key:t,value:e[t]}):"fullPrice"===t?(s=a?e.comparativeDisplayPrice:e.currentDisplayPrice||V().get(e,"currentPrice.amount",""),r.pricesInOrder[n].push({key:t,value:s})):"fullPrice-short"===t&&(s=a?e["comparativeDisplayPrice-short"]:e["currentDisplayPrice-short"]||V().get(e,"currentPrice.amount",""),r.pricesInOrder[n].push({key:t,value:s}))})))})):r.full=a?V().get(e,"comparativeDisplayPrice"):V().get(e,"currentPrice.amount"),r},ov=(e,t,a)=>{const{bootstrap:{products:r},autoSelectOneProduct:n,autoSelectSingleDimension:s}=a;if(e){const t=e&&r?r.find((t=>t.part===e)):null;return t?{part:t.part,selection:t.dimensions}:{part:null,selection:{}}}if(n&&r&&1===r.length)return{part:r[0].part,selection:r[0].dimensions};const l=s?{...rv(r,t),...t}:t;if(!V().isEmpty(l)){const e=a.bootstrap.products.find((e=>((e,t)=>{const a=Object.keys(t),r=Object.keys(e.dimensions);return a.every((a=>e.dimensions[a]===t[a]))&&r.every((a=>e.dimensions[a]===t[a]))})(e,l)));if(e)return{part:e.part,selection:l}}return{part:e,selection:l}},iv=(e,t,a)=>a.map((a=>{if(!a.options){const r=e.map((e=>e.dimensions[a.key])),n=((e,t,a)=>e.map((e=>({value:e,...V().get(a,`dimensions.${t}.${e}`,{})}))))(V().uniq(r),a.key,t);return n.sort(((e,t)=>e.sortOrder-t.sortOrder)),{...a,options:n}}return a})),cv=(e,t,a)=>t.length>0&&t.every((e=>!e.productMessage))?a:a.map((r=>(r.options&&r.options.map((n=>{let s={...e,[r.key]:n.value};s=V().omit(s,av(r.key,a));const l=ev(t,s),o=l.length>0&&l.every((e=>e.productMessage));if(o&&a.every((e=>!e.isProductMessageDimension))&&(r.isProductMessageDimension=!0),o&&r.isProductMessageDimension){const{productMessage:e}=l[0];n.productMessage=e}return n})),r))),dv=(e,t,a)=>a.map(((r,n)=>{const s=av(r.key,a),l=V().omit(e,s);let o=!1;const i=r.options.map((a=>{const s=e[r.key]===a.value;s&&(o=!0);let i=!1;if(s||0===n)i=!1;else{i=!ZE(t,{...l,[r.key]:a.value})}return{...a,disabled:i}}));return{...r,options:i,value:e[r.key],selected:o}})),mv=(e,t,a,r,n,s,l,o,i)=>n?i.map((n=>{const c=n.key,d=av(c,i),{promotionsFilter:m={},promotionsFilterOverrideUseFromPrice:u=!1}=((e,t,a,r,n)=>{if(V().isEmpty(a))return{};const s=n.includes(r),l=V().has(e,r),o=s||!l&&t!==r?{...a}:{};return{promotionsFilter:o,overrideUseFromPrice:!V().isEmpty(o)}})(e,c,l,o,d),p=n.options.map((l=>{let o={...e,[n.key]:l.value};o=V().omit(o,d);let i=V().uniq(V().filter(ev(t,o),m).map((e=>e?e.productPrice:null)));i=V().sortBy(i,(e=>parseInt(V().get(a,`productPrice[${e}].currentPrice.raw_amount`,0),10)));let c=V().uniq(V().filter(ev(t,o),m).map((e=>e?e.amsProductPrice:null)));c=V().sortBy(V().compact(c),(e=>parseInt(V().get(a,`productPrice[${e}].rawAmsPrice`,0),10)));let p={};p=c[0]?V().get(a,`productPrice.${c[0]}`,{}):V().get(a,`productPrice.${i[0]}`,{});const g=V().isBoolean(s)?s:i.length>1||u,h={useFromPrice:g,...lv(p,r,g)};return{...l,price:h,priceData:p}}));return{...n,options:p}})):i,uv=e=>e.map(((t,a)=>{if(a>0){const r=t.dependsOn?t.dependsOn:[e[a-1].key];return{...t,dependsOn:r}}return{...t}})),pv=e=>e.map((t=>{const{dependsOn:a}=t;if(a&&a.length>0){const r=e.find((e=>a.indexOf(e.key)>=0&&(!e.selected||e.disabled)));t.disabled=!!r}else t.disabled=!1;return t.active=!t.disabled&&!t.selected,{...t}})),gv=(e,{bootstrap:{products:t,dictionaries:a}})=>{const{selectionImages:r,productImage:n}=a;if(r){const t=(e=>{const t=e.find((e=>null===e.selection));return t?t.image:null})(r),a=((e,t)=>{const a=t.find((t=>V().isEqual(t.selection,e)));return a?a.image:null})(e,r);if(sv(e)&&t)return t;if(!sv(e)&&a)return a}return((e,t)=>{const a=e?e.productImage:null;return a&&t[a]?t[a]:null})(ZE(t,e),n)},hv=(e,{bootstrap:{products:t,dictionaries:a}})=>{const r=t.find((t=>t.part===e));return r?Object.keys(r).reduce(((e,t)=>{const n=r[t],s=V().get(a,`${t}.${n}`);return e[t]=s||n,e}),{}):null},yv=(e,t,a,r)=>{const{config:n}=e,{part:s,selection:l}=ov(t,a,n);if(e.init&&V().isEqual(e.part,s)&&V().isEqual(e.selection,l)&&!r)return e;const o=((e,t,{bootstrap:{products:a,dictionaries:r,priceDisplayOrder:n,leadPriceFilter:s},calculateOptionPrices:l,overrideUseFromPrice:o,promotedDimension:i})=>V().flow(V().partial(uv),V().partial(iv,a,r),V().partial(dv,t,a),V().partial(mv,t,a,r,n,l,o,s,i),V().partial(cv,t,a),V().partial(pv))(e))(e.init?e.dimensions:V().cloneDeep(n.bootstrap.dimensions),l,n),i=e.init?e.hidePartnershipIcons:!!(c=n.bootstrap.products)&&!c.find((e=>Array.isArray(e.partnershipIcons)&&e.partnershipIcons.length>0));var c;return{...e,part:s,selection:l,dimensions:o,hidePartnershipIcons:i,selectedProduct:hv(s,n),selectionImage:n.bootstrap.dictionaries?gv(l,n):null}},Ev={part:null,selection:{},dimensions:[],selectedProduct:null,config:{},carrierPromoParams:{}},vv="INIT",bv="SET_DIMENSION",fv="SET_SELECTION",wv="SET_PART",Nv="REPLACE_PRICES",Sv="UPDATE_CARRIER_PROMO_PARAMS",Cv=(e,t)=>{const{key:a,value:r,part:n,selection:s,callbacks:l}=t;let o;const i=(t,a)=>{V().isEqual(e.part,t)||l.onPartChange(t,e.part),V().isEqual(e.selection,a)||l.onSelectionChange(a,e.selection)};switch(t.type){case vv:return{...e,init:!0};case bv:return o=((e,t,a)=>{const{part:r,selection:n,dimensions:s,config:{autoSelectFirstSelection:l,bootstrap:{products:o}}}=e;if(a&&!tv({[t]:a},s))return e;const i=((e,t,a,r)=>{const n=r?{...r,[e]:t}:{[e]:t};return a?{...a.dimensions,[e]:t}:n})(t,a,o.find((e=>e.part===r)),n),c=nv(s,i,o,l);return yv(e,c.part,c.selection)})(e,a,r),i(o.part,o.selection),o;case fv:return o=((e,t)=>{const{dimensions:a,config:{bootstrap:{products:r},autoSelectFirstSelection:n}}=e;if(!tv(t,a))return e;if(sv(t))return yv(e,null,{});const s=nv(a,t,r,n);return yv(e,s.part,s.selection)})(e,s),i(o.part,o.selection),o;case Sv:return o={...e,carrierPromoParams:t.payload},i(o.part,o.selection),o;case wv:return o=((e,t)=>{const{config:{bootstrap:{products:a}}}=e,r=a.find((e=>e.part===t));return r?yv(e,r.part,r.selection):e})(e,n),i(o.part,o.selection),o;case Nv:return o={...e,config:{...e.config,bootstrap:{...e.config.bootstrap,dictionaries:{...e.config.bootstrap.dictionaries,productPrice:t.payload.prices},priceDisplayOrder:t.payload.priceDisplayOrder,leadPriceFilter:t.payload.leadPriceFilter}}},o=yv(o,e.part,e.selection,!0),o;default:return e}},Tv=({selection:e={},part:t=null,bootstrap:a,autoSelectOneProduct:r=!1,autoSelectFirstSelection:n=!1,autoSelectSingleDimension:l=!1,calculateOptionPrices:o=!1,overrideUseFromPrice:i,promotedDimension:c="carrierModel",onSelectionChange:d=(()=>{}),onPartChange:m=(()=>{})})=>{const u=(e=>{const t=e||{};return t.dimensions||(t.dimensions=[]),t.products||(t.products=[]),t})(a),p=(0,s.useMemo)((()=>yv({...Ev,part:t,selection:e,config:{bootstrap:u,autoSelectOneProduct:r,autoSelectFirstSelection:n,autoSelectSingleDimension:l,calculateOptionPrices:o,overrideUseFromPrice:i,promotedDimension:c}},t,e)),[]),[g,h]=(0,s.useReducer)(Cv,p),y={onSelectionChange:d,onPartChange:m};(0,s.useEffect)((()=>{h({type:vv})}),[]);const E=Object.keys(e).reduce(((t,a)=>`${t},${a}=${e[a]}`),"");(0,s.useEffect)((()=>{g.init&&h({type:fv,selection:e,callbacks:y})}),[E]),(0,s.useEffect)((()=>{g.init&&h({type:wv,part:t,callbacks:y})}),[t]);const v=V().get(a,"products",[]),b=V().get(e,"carrierModel"),f=v.find((e=>e.carrierPolicyPart===b))||{};return(0,s.useEffect)((()=>{h({type:Sv,payload:{carrierPolicyPart:f.carrierPolicyPart,familyType:f.familyType}})}),[f.carrierPolicyPart,f.familyType]),{state:g,setDimension:(e,t)=>h({type:bv,key:e,value:t,callbacks:y}),replacePrices:({prices:e,priceDisplayOrder:t,leadPriceFilter:a})=>{h({type:Nv,payload:{prices:e,priceDisplayOrder:t,leadPriceFilter:a}})}}},Lv=({uid:e,dimension:t,onDimensionChange:a,hidePartnershipIcons:r})=>{const n=V().get(V().find(t.options,{value:t.value}),"text","");return l().createElement(Yh,{legend:`${t.legend} - ${n}`,disabled:t.disabled},t.options.map((n=>l().createElement(zh,{key:n.value,name:`${t.key}_${e}`,value:n.value,checked:n.value===t.value,handleChange:e=>a(t.key,e),disabled:n.disabled,image:n.image,isProductRed:!r&&"product_red"===n.value,text:n.text}))))},kv=({uid:e,dimension:t,onDimensionChange:a})=>l().createElement(oo,{name:`${t.key}_${e}`,label:t.label,value:t.value,onChange:e=>a(t.key,e.target.value),disabled:t.disabled,classes:{root:"rf-recommendations-productselection-dropdown"}},t.options.map((e=>l().createElement(co,{key:e.value,value:e.value,disabled:e.disabled},e.text)))),Iv=({uid:e,dimensions:t,onDimensionChange:a,hidePartnershipIcons:r})=>t.map((t=>{const n="dropdown"===t.displayType?kv:Lv;return l().createElement("div",{className:"rf-recommendations-productselection",key:t.key},l().createElement(n,{uid:e,dimension:t,onDimensionChange:a,hidePartnershipIcons:r}))})),Av=({dimensions:e,bootstrap:t,title:a})=>{const r=V().find(e,{displayType:"image"}),{moreText:n="",minimumSwatches:s=4}=t,o=r&&r.options?r.options.length-s:0;return r&&r.options?l().createElement("ul",{className:"rf-recommendations-accessory-swatchescontainer","aria-label":a+r.availableColors,role:"list"},r.options.slice(0,s).map((e=>e.image?l().createElement("li",{className:"rf-recommendations-accessory-colorimage",key:e.value},l().createElement(Il,{data:e.image,alt:""})):"")),o>0?l().createElement("li",{className:"rf-recommendations-accessory-moretext"},ln(n,{swatches:o})):null):null},Pv=Object.freeze({RECOMMENDATIONS_INIT:"RECOMMENDATIONS_INIT",FETCH_RECOMMENDATIONS_START:"FETCH_RECOMMENDATIONS_START",FETCH_RECOMMENDATIONS_SUCCESS:"FETCH_RECOMMENDATIONS_SUCCESS",FETCH_RECOMMENDATIONS_ERROR:"FETCH_RECOMMENDATIONS_ERROR",FETCH_MORE_TILES_START:"FETCH_MORE_TILES_START",FETCH_MORE_TILES_SUCCESS:"FETCH_MORE_TILES_SUCCESS",FETCH_MORE_TILES_ERROR:"FETCH_MORE_TILES_ERROR",UPDATE_RECOMMENDATIONS_TILE:"UPDATE_RECOMMENDATIONS_TILE"}),Dv=Object.freeze({GRID:"grid",CAROUSEL:"carousel",SCROLLER:"scroller"}),Ov=Object.freeze({SPOTLIGHT:"spotlight",RECOMMENDED:"recommended"}),xv=window.asMetrics,{OmnitureCollection:Rv,OmnitureProduct:Fv,OmnitureVariable:Mv,OmnitureEvent:_v}=V().get(xv,"util.omnitureCollection",{}),Bv=(e=[],t,a)=>{const{partsInBag:r="",baseParts:n=""}=t,s=r?r.join(":"):n?n.join(":"):"",l="loadMore"===a?e.slice(t.minimumTiles):e,o="AOS_Momentum_Recommendations"===V().get(l,"[0].metrics.mZone")?"ty Recommendation":"Bag Recommendation",i=new Rv;return l.forEach((e=>{const t=V().get(e.metrics,"mZone",o),r=V().get(e.metrics,"ruleId",""),n=V().get(e.metrics,"ruleAction",""),l=V().get(e.metrics,"algorithm",""),c=r?`${r}:${n}`:l,d=V().get(e,"products",[]).find((t=>t.part===e.part))||e,m=V().get(d,"basePartNumber"),u=V().get(e.metrics,"position","1/1");"addToBag"===a&&xv.purchaseJourney.registerProduct(m,o),i.add(new Fv({sku:m,variables:new Rv(new Mv("eVar60",t.toLowerCase()),new Mv("eVar61",c),new Mv("eVar65",u),new Mv("eVar69",s))}))})),i},$v=(e,t,a)=>{const r=e.basePartNumber,n="Configurable spotlight",{partsInBag:s=""}=t,l=s?s.join(":"):"";return"addToBag"===a&&xv.purchaseJourney.registerProduct(r,n),new Fv({sku:r,variables:new Rv(new Mv("eVar60",n),new Mv("eVar61","curated"),new Mv("eVar65","1/1"),new Mv("eVar69",l))})},Uv=(e,t)=>{if(!xv)return;const a=Bv(e,t,"loadMore"),r=new Rv(new _v("event4"));xv.sendUserInteraction({name:"metrics",data:{events:r,products:a,prop37:'D=pageName+"||recommendation|Show more products"'}})},Kv=({product:e,type:t,bootstrap:a})=>{if(!xv)return;let r;r=t===Ov.SPOTLIGHT?$v(e,a,"addToBag"):t===Ov.RECOMMENDED?Bv([e],a,"addToBag"):new Rv;const n=new Rv(new _v("scAdd"),new _v("event52"),new _v("event115"));xv.sendUserInteraction({name:"metrics",data:{products:r,events:n}})},Vv=({products:e,part:t,metrics:a,bootstrap:r,type:n})=>{if(!xv)return;const s=V().find(e,{part:t})||{};let l;n===Ov.SPOTLIGHT?l=$v(s,r):n===Ov.RECOMMENDED?(s.metrics=a,l=Bv([s],r)):l=new Rv;const o=new Rv(new _v("event4"));xv.sendUserInteraction({name:"metrics",data:{products:l,events:o}})},Hv=(e,t={})=>{if(!xv)return;const{products:a,part:r}=e,n=V().find(a,{part:r})||{},s=$v(n,t),l=new Rv(new _v("event4"));xv.sendUserInteraction({name:"metrics",data:{products:s,events:l}})},jv=(e,t={})=>{if(!xv)return;const a=Bv(e,t),r=new Rv(new _v("event4"));xv.sendUserInteraction({name:"metrics",data:{products:a,events:r}})},Gv=(e,t,a)=>{if(!xv)return;const r=[];if(Array.isArray(e))e.forEach((e=>{const a=V().find(t,{part:e.part})||{};r.push(a)}));else{const a=V().find(t,{part:e.part})||{};r.push(a)}const n=Bv(r,a),s=new Rv(new _v("event4"));xv.sendUserInteraction({name:"metrics",data:{products:n,events:s}})},Wv=({tiles:e=[],recommendations:t,mZone:a})=>{const r=t?t.length:"";return e.map(((n,s)=>{const l=t.find((e=>e.part===n.part))||{};return n.metrics={recommendationLength:r,algorithm:l.algorithm,ruleId:l.ruleId,ruleAction:l.ruleAction,mZone:a,position:`${s+1}/${e.length}`},n}))},qv=({spotlight:e,bootstrap:t,onAddToBag:a})=>{const{viewport:r}=z(),n=l().useId(),{products:s,part:o,headerTitle:i,headerSubTitle:c,marketingData:d,isAddingToBag:m=!1}=e,{state:u,setDimension:p}=Tv({part:o,bootstrap:e,onPartChange:e=>{Vv({products:s,part:e,bootstrap:t,type:Ov.SPOTLIGHT})}}),{dimensions:g,selectionImage:h,selectedProduct:y,hidePartnershipIcons:E}=u,{asyncAddToBag:v={},entireTileClickable:b=!1,spotlightType:f}=t,{addToBagButton:w="",addToBagButtonA11y:N=""}=v,{part:S,price:C,productDetailsUrl:T,productEvarURL:L}=y||{},k=s&&s.length<=1,I={disabled:!o||m},A=V().get(C,"currentPrice.amount"),P=V().get(C,"previousPrice.previousPrice"),D=V().get(C,"tierListSavings"),O=V().get(C,"promoSavings"),x=`${S||o||""}|${f}`,R={className:Wa()("rf-recommendations-accessory rf-recommendations-accessory-featured row row-reverse",{"as-util-relatedlink":b})};return b&&(R["data-trigger-click"]=`click [data-relatedlink='${n}']`),l().createElement("div",R,l().createElement("div",{className:"column large-6 small-12"},h&&l().createElement("div",{className:"rf-recommendations-accessory-image"},l().createElement(Il,{data:h,alt:""}))),l().createElement("div",{className:"column large-6 small-12"},i&&l().createElement("div",{className:Wa()("rf-recommendations-accessory-violator",{[Jc.EYEBROW_REDUCED]:"small"===r,[Jc.BODY]:"small"!==r})},l().createElement("span",qa(i))),c&&l().createElement("h3",{className:`rf-recommendations-accessory-title ${Jc.CALLOUT}`},l().createElement("a",{href:T,"data-evar1":L,"data-relatedlink":n,"data-evar11":x},l().createElement("span",qa(c)))),A&&l().createElement("div",{className:"rf-recommendations-accessory-price"},l().createElement("span",qa(A)),P&&l().createElement("span",mr({className:"rf-recommendations-accessory-previousprice"},qa(P)))),D&&l().createElement("div",{className:"rf-recommendations-accessory-pricesavings"},l().createElement("span",qa(D))),O&&l().createElement("div",{className:`rf-recommendations-accessory-promosavings ${Jc.BODY}`},l().createElement("span",qa(O))),d&&l().createElement("div",mr({className:`rf-recommendations-accessory-description ${Jc.BODY_REDUCED}`},qa(d))),!k&&l().createElement(Iv,{dimensions:g,onDimensionChange:(e,t)=>p(e,t),uid:n,hidePartnershipIcons:E}),l().createElement("button",mr({type:"button",className:"button button-block button-super rf-recommendations-accessory-button","data-autom":"recommendations-addToBag-button"},I,{onClick:()=>a(y,Ov.SPOTLIGHT)}),l().createElement("span",{"aria-hidden":"true"},w),N&&y?l().createElement("span",{className:"visuallyhidden"},ln(N,y)):"")))},Yv=({tile:e,bootstrap:t,className:a,onAddToBag:r,tabIndex:n=0})=>{const{viewport:s}=z(),o=l().useId(),{products:i,part:c,isAddingToBag:d=!1,metrics:m={},showSingleVariant:u=!1,message:p={}}=e,{state:g,setDimension:h}=Tv({part:c,bootstrap:e,onPartChange:e=>{Vv({products:i,part:e,metrics:m,bootstrap:t,type:Ov.RECOMMENDED})}}),{dimensions:y,selectionImage:E,selectedProduct:v}=g,{part:b,title:f="",price:w,productDetailsUrl:N,productEvarURL:S,violators:C=[],basePartNumber:T="",engravingDescription:L}=v||{},k=i&&i.length<=1,I={disabled:!c||d},A=V().get(w,"currentPrice.amount"),P=V().get(w,"previousPrice.previousPrice"),D=V().get(w,"tierListSavings"),O=V().get(w,"promoSavings"),x=V().get(w,"segmentSavings.priceString",""),{ruleId:R,ruleAction:F,mZone:M}=m,_=`${R}:${F}`,B="AOS_Momentum_Recommendations"===M?"ty Recommendation":"recommended cart",$=`${b||c||""}|${V().get(t,"recommendationEvar11Val",B)}`,{isAddToBagEnabled:U=!0,asyncAddToBag:K={},entireTileClickable:H=!1,isProductSelectionEnabled:j=!0}=t,{addToBagButton:G="",addToBagButtonA11y:W=""}=K,q={className:Wa()("rf-recommendations-accessory rf-recommendations-accessory-inline tile",a,{"as-util-relatedlink":H})},Y={data:E,className:Wa()({"as-util-relatedlink":!H}),alt:""},X=`click [data-relatedlink='${o}']`;return H?q["data-trigger-click"]=X:Y["data-trigger-click"]=X,l().createElement("div",q,E&&l().createElement("div",{className:"rf-recommendations-accessory-image"},l().createElement(Il,Y)),l().createElement("div",{className:"rf-recommendations-accessory-info"},C&&C.length>0?l().createElement("div",{className:Wa()("rf-recommendations-accessory-violator",{[Jc.EYEBROW_REDUCED]:"small"===s,[Jc.BODY]:"small"!==s})},C.map((e=>l().createElement("span",mr({className:`rf-recommendations-accessory-violatortext ${Jc.CAPTION}`},qa(e.violatorTranslatedText),{key:e.attributeValue}))))):null,f&&l().createElement("h3",{className:Wa()("rf-recommendations-accessory-title",{[Jc.BODY_REDUCED_TIGHT]:"small"===s,[Jc.BODY]:"small"!==s})},l().createElement("a",{href:N,"data-evar1":S,"data-relatedlink":o,"data-evar11":$,"data-algorithm-type":_,"data-display-name":f,"data-part-number":T,"data-slot-name":m.recommendationLength,tabIndex:n},l().createElement("span",qa(f)))),A&&l().createElement("div",{className:`rf-recommendations-accessory-price ${Jc.BODY}`},l().createElement("span",qa(A)),P&&l().createElement("span",mr({className:"rf-recommendations-accessory-previousprice"},qa(P)))),D&&l().createElement("div",{className:"rf-recommendations-accessory-pricesavings"},l().createElement("span",qa(D))),O&&l().createElement("div",{className:`rf-recommendations-accessory-promosavings ${Jc.BODY}`},l().createElement("span",qa(O))),x&&l().createElement("div",{className:`rf-recommendations-accessory-segmentsavings ${Jc.BODY}`},l().createElement("span",qa(x))),(!k||u)&&(j?l().createElement(Iv,{dimensions:y,onDimensionChange:(e,t)=>h(e,t),uid:o}):l().createElement(Av,{dimensions:y,title:f,bootstrap:t})),L&&l().createElement("div",{className:`rf-recommendations-accessory-engravingdescription ${Jc.BODY_REDUCED}`},l().createElement("span",qa(L)))),U?l().createElement("button",mr({type:"button",className:"button button-block button-super rf-recommendations-accessory-button","data-autom":"recommendations-addToBag-button",onClick:()=>r({...v,metrics:m},Ov.RECOMMENDED)},I),l().createElement("span",{"aria-hidden":"true"},G),W&&v?l().createElement("span",{className:"visuallyhidden"},ln(W,v)):null):null,p.text&&l().createElement("div",{className:Wa()("rf-recommendations-accessory-message",{"form-message-wrapper":"ERROR"===p.level})},p.text))},zv=i("recommendations/reducer"),Xv=(e,t)=>a=>{const{tiles:r=[],recommendations:n,mZone:s,baseParts:l}=e,o=((e,t)=>{const{minimumTiles:a,recommendedForYouDetailsUrl:r}=t,n=e.slice(a).map(((e,t)=>`parts.${t}=${encodeURIComponent(e.part)}`)).join("&");return r?r+(r.indexOf("?")>0?"&":"?")+n:null})(n,t);a({type:Pv.FETCH_MORE_TILES_START});const i=ft(o,{credentials:"include"});return i.then((e=>{const o=V().get(e,"body.tiles",[]),i=r.concat(o),c=Wv({tiles:i,recommendations:n,mZone:s});Uv(c,{...t,baseParts:l}),a({type:Pv.FETCH_MORE_TILES_SUCCESS,data:c})})).catch((e=>{zv.error(`Network ERROR: ${e}`),a({type:Pv.FETCH_META_ERROR,error:{isNetworkError:!0,errorInfo:e,message:"Something went wrong."}})})),i},Jv=(e,t)=>{switch(t.type){case Pv.RECOMMENDATIONS_INIT:{const a=V().get(t,"data.spotlight",{});return{...e,data:{...t.data,spotlight:a.products?a:null}}}case Pv.FETCH_RECOMMENDATIONS_START:return{...e,isFetching:!0,isFetched:!1,isFetchedMoreTiles:!1,error:null};case Pv.FETCH_RECOMMENDATIONS_SUCCESS:return{...e,isFetching:!1,isFetched:!0,isFetchedMoreTiles:!1,error:null,data:t.data};case Pv.FETCH_RECOMMENDATIONS_ERROR:return{...e,isFetching:!1,isFetched:!0,isFetchedMoreTiles:!1,error:t.error,data:{}};case Pv.FETCH_MORE_TILES_START:return{...e,isFetchingMoreTiles:!0,isFetchedMoreTiles:!1};case Pv.FETCH_MORE_TILES_SUCCESS:return{...e,isFetchingMoreTiles:!1,isFetchedMoreTiles:!0,data:{...e.data,tiles:t.data}};case Pv.FETCH_MORE_TILES_ERROR:return{...e,isFetchingMoreTiles:!1,isFetchedMoreTiles:!1};case Pv.UPDATE_RECOMMENDATIONS_TILE:{const{index:a,message:r}=t.data,n=V().get(e,"data.tiles",[]).slice();return n[a]={...n[a],message:r},{...e,data:{...e.data,tiles:n}}}default:return e}},Qv={isRecommendationsFirst:!1,isSpotlightHidden:!1,isRecommendationsHidden:!1,elementAfterTitle:null,elementAfterFirstSection:null,doPostRenderInit:!0,minimumTiles:3},Zv=({bootstrap:e,part:t,recommendations:a={},ref:r,onAddToBag:n})=>{const[s,o]=l().useReducer(Jv,{isFetchedMoreTiles:!1,data:{}}),[i,c]=l().useState(!1);l().useEffect((()=>{t&&(({part:e,bootstrap:t})=>a=>{const r=V().unescape(nn(t.recommendedForYouFullUrl,{mainPart:e}));a({type:Pv.FETCH_RECOMMENDATIONS_START});const n=ft(r);return n.then((e=>{const r=V().get(e,"body",{}),{recommendations:n,tiles:s,mZone:l,baseParts:o}=r,{view:i,marketingTile:c,isMarketingTileFirst:d}=t;let m={};if(n&&n.length>2){m={recommendations:n,mZone:l,baseParts:o};const e=Wv({tiles:s,recommendations:n,mZone:l});i===Dv.SCROLLER&&c?m.tiles=d?[{...c},...e]:[...e,{...c}]:m.tiles=[...e],i===Dv.CAROUSEL&&(m.galleryItems=t.minimumTiles>1?V().chunk(n,t.minimumTiles):n,m.pageStandard=0),m.updateTileHeight=!1}a({type:Pv.FETCH_RECOMMENDATIONS_SUCCESS,data:m})})).catch((e=>{zv.error(`Network ERROR: ${e}`),a({type:Pv.FETCH_RECOMMENDATIONS_ERROR,error:{isNetworkError:!0,errorInfo:e,message:"Something went wrong."}})})),n})({state:s,part:t,bootstrap:e})(o).then((()=>{c(e.view===Dv.CAROUSEL)}))}),[t]),l().useEffect((()=>{if(e.doPostRenderInit){const e=Wv(a);o({type:Pv.RECOMMENDATIONS_INIT,data:{...a,tiles:e}})}}),[e.doPostRenderInit]),l().useEffect((()=>{if(i&&r&&r.current){const e=[...r.current.querySelectorAll(".rf-recommendations-accessory-info")],t=Math.max.apply(e,e.map((e=>e.clientHeight)));e.forEach((e=>{e.style.minHeight=`${t}px`}))}}),[i,r]),l().useEffect((()=>{if(a.message){const e=V().get(s,"data.tiles",[]),t=V().findIndex(e,(e=>e.part===a.part));t>=0&&o({type:Pv.UPDATE_RECOMMENDATIONS_TILE,data:{index:t,message:a.message}})}}),[a.parts,a.message]);return window.recommendationsState=s,{...s,onAddToBag:(t,a)=>{n(t.part),Kv({product:t,bootstrap:e,type:a})},onLoadMore:()=>{const t=V().get(s,"data",{});c(!1),Xv(t,e)(o).then((t=>{c(e.view===Dv.CAROUSEL);const a=V().get(t,"body.tiles[0].part",""),r=document.getElementById(`rf-recommendations-${a}`);r&&r.focus()}))},onPageChangeFireMetrics:t=>{const{data:{tiles:a=[],galleryItems:r=[],baseParts:n}}=s,l=r[t];Gv(l,a,{...e,baseParts:n})}}},eb=({className:e,"aria-label":t=""})=>{const a=l().useRef(null),r=l().useRef(null);return l().useEffect((()=>(r.current=document.activeElement,a.current&&a.current.focus(),()=>{r.current&&r.current.focus()})),[]),l().createElement("div",{ref:a,role:"img",tabIndex:-1,className:Wa()("waitindicator",e),"aria-label":t})},tb=({spotlight:e,hide:t,bootstrap:a,onAddToBag:r})=>{const{dataAnalyticsType:n}=a,[s,o]=Tl({});return l().useEffect((()=>{o&&Hv(e,a)}),[o]),e&&!t?l().createElement("div",{className:"as-l-container rf-recommendations-spotlight",ref:s,"data-analytics-type":n},l().createElement(qv,{spotlight:e,bootstrap:{...a,spotlightType:"Configurable spotlight"},onAddToBag:r})):""},ab=({state:e,hide:t,bootstrap:a})=>{const{data:{tiles:r=[],recommendations:n=[]},isFetchingMoreTiles:s,isFetchedMoreTiles:o,onLoadMore:i,onAddToBag:c}=e,{loadMoreText:d,loadingText:m,minimumTiles:u,dataAnalyticsType:p=""}=a,g=n&&n.length>u,h=r&&r.length>3,y=r&&r.length%3==2,[E,v]=Tl({});return l().useEffect((()=>{v&&jv(r,a)}),[v]),!t&&r&&r.length>=u?l().createElement("div",{className:"as-l-container rf-recommendations-tiles",ref:E,"data-analytics-type":p},r.map(((e,t)=>[l().createElement("div",{tabIndex:-1,id:`rf-recommendations-${e.part}`,className:"rf-recommendations-tile small-12",key:e.part},l().createElement(Yv,{tile:e,bootstrap:a,onAddToBag:c})),h&&t+1!==r.length&&(t+1)%3==0?l().createElement("div",{className:"rf-recommendations-divider",key:`${e.part}-divider`}):""])),y?l().createElement("div",{className:"rf-recommendations-tile small-12"}):"",g?l().createElement("div",{className:"as-l-container rf-recommendations-footer"},s&&l().createElement(eb,{className:"waitindicator-inline waitindicator16-gray","aria-label":m}),!o&&!s&&l().createElement("button",{type:"button",className:"as-buttonlink","data-analytics-title":"show more products",onClick:i},d,l().createElement("span",{"aria-hidden":"true",className:"icon icon-after icon-chevrondown"}))):""):""},rb=({bootstrap:e,part:t,defaultRecommendations:a={},onAddToBag:r=(e=>e)})=>{const n=l().useRef(null),s={...Qv,...e},o=Zv({bootstrap:s,ref:n,part:t,recommendations:a,onAddToBag:r}),{isRecommendationsFirst:i,isSpotlightHidden:c,isRecommendationsHidden:d,elementAfterTitle:m,elementAfterFirstSection:u,title:p,subTitle:g}=s,{data:{spotlight:h={},recommendations:y=[]},onAddToBag:E}=o,v=!c&&!V().isEmpty(h)||!d&&y.length>0,b=i?l().createElement(l().Fragment,null,m&&l().createElement("div",qa(m)),l().createElement(ab,{hide:d,state:o,bootstrap:s}),u&&l().createElement("div",qa(u)),l().createElement(tb,{hide:c,spotlight:h,bootstrap:s,onAddToBag:E})):l().createElement(l().Fragment,null,m&&l().createElement("div",qa(m)),l().createElement(tb,{hide:c,spotlight:h,bootstrap:s,onAddToBag:E}),u&&l().createElement("div",qa(u)),l().createElement(ab,{hide:d,state:o,bootstrap:s}));return v&&l().createElement("div",{className:"rf-recommendations rf-recommendations-grid",key:"recommendationsGrid",ref:n},l().createElement("div",{className:"as-l-container"},p&&l().createElement("h2",{className:`rf-recommendations-title ${Jc.HEADLINE_REDUCED}`},p),g&&l().createElement("div",{className:`rf-recommendations-subtitle ${Jc.QUOTE_REDUCED}`},g)),b)},nb=(e="")=>{switch(e.toLowerCase()){case"aos_momentum_recommendations":return"recommendations:momentum";case"aos_bag_recommendations":return"recommendations:bag";default:return""}},sb=({label:e})=>l().createElement("div",{className:"rs-recommendations-loader as-l-container"},l().createElement("div",{role:"img",className:"waitindicator waitindicator40-gray","aria-label":e})),lb=({label:e})=>((0,s.useLayoutEffect)((()=>{window.scrollTo(window.pageXOffset,0)}),[]),(0,ur.createPortal)(l().createElement("div",{className:"rs-recommendations-add-to-bag-loader"},l().createElement("div",{role:"img",className:"waitindicator waitindicator40-gray","aria-label":e})),document.getElementById("portal")||document.body)),ob=({modKey:e,isThankyou:t})=>{const a=xa(e),r=`${e}.recommendedItem`,n=Ua(r,"part"),{assets:s}=z(),o=xa(r),{data:i}=o;if(!a.modExists)return null;const c=o.properties.isLoadingSubmit,d=!c&&(!i.recommendations||o.properties.isLoadingFault),m=!d&&(!c||t),u=i.mZone||"",p={...a.data.bootstrap,dataAnalyticsType:nb(u),isRecommendationsFirst:!0};return l().createElement(l().Fragment,null,d&&l().createElement(sb,{label:s.processing}),!t&&c&&l().createElement(lb,{label:s.processing}),l().createElement(fr,{isPending:c,messages:{pending:s.processing,finished:s.itemAddedSucessAlly}}),m&&l().createElement("div",{className:"rs-recommendations"},l().createElement(rb,{bootstrap:p,defaultRecommendations:i,onAddToBag:e=>{n.setValue(e),n.runSetEvents()}})))},ib=({content:e,titleTag:t,defaultSelection:a,...r})=>{const[n,o]=(0,s.useState)(void 0!==a?[a]:[]);return l().createElement(vE,mr({compact:!0,hover:!0,index:n,handleChange:e=>o(e),role:"list"},r),e.map(((e,a)=>e.question&&e.answer&&l().createElement(EE,{key:e.question,title:e.question,titleWrapperTag:t,onClick:()=>((e,t,a,r)=>{const n=window.asMetrics,s=`${e}-${a} | ${t.question}`,l=r.includes(a)?"collapsed":"expanded";n.fireMicroEvent({part:"FAQ",eVar:"eVar6",feature:s,action:l})})(r.id,e,a,n),role:"listitem"},l().createElement("div",qa(e.answer))))))},cb=({modKey:e,metrics:t={}})=>{const[a]=Fa(e),[r,n]=l().useState([]),{assets:s}=z();return a.faq&&a.faq.length?l().createElement(vE,{index:r,handleChange:e=>{n(e),((e=[],t={})=>{const{feature:a="FaqSection",eVar:r=ul}=t,n=e.includes(0)?"collapsed":"expanded";hl({action:n,eVar:r,feature:a})})(r,t)},rootTag:"div",className:"rs-faq"},l().createElement(EE,{title:a.faqTitle||s.faqTitle,titleWrapperTag:"h2",titleWrapperAttrs:{className:"as-l-container"},contentAttrs:{className:"as-l-container"},noPadding:!0,withPlus:!0,rootTag:"div",titleAttrs:{"data-autom":"faq-button",className:"rc-accordion-button"}},l().createElement(ib,{content:a.faq,id:"faq-question",titleTag:"h3"}))):null},db=({acShowInstallment:e,shipping:t,epptext:a,subtotal:r,instantCredit:n,amountChargedToday:s,instantCashback:o,emiDetails:i,loyaltyPointsAmount:c,downPayment:d,paymentFullDiscount:m,tax:u,appleBalanceApplied:p,totalGCsApplied:g,noOfGiftCards:h,taxCalculatorEnabled:y,hasTaxCalculator:E,recycleFee:v,fees:b,hasPromoCode:f,hidePromoModule:w,upgrade:N,installmentTerm:S,installmentAmount:C,total:T,monthlyTotalPricing:L,monthlyTotalPricingLabel:k,mixedTradeInMonthlyInstallmentAmount:I,showPayInFullFirst:A,buyFlowInstallmentsCashBackLabel:P,tradeInRefund:D,totalAfterTradeIn:O,totalAfterInstantTradeIn:x,paymentSubLabel:R,showTotalAfterTradeinAsTotal:F,showTaxInclusivePrices:M,taxExclusiveTax:_,creditInstallmentAmount:B,totalSavings:$,totalSavingsInclusiveTax:U,totalListSavings:K,segmentSavingsMessages:V,financingMessage:H,enableFinancingCalculatorLink:j,financeOverlayLinkLeftAlignment:G,buyflowMessages:W,installmentSummary:q,cashBackOverlayLink:Y,hasPinCodeEligibility:z,cashBackSuperscript:X,monthlyTotal:J,partnerFinancedInstallments:Q,paymentBreakdown:Z,hasFlexibleTradeIn:ee,tradeInCredit:te,outstandingLoan:ae,iUPOrInstallments:re,paymentDetails:ne,totalTaxSubValue:se,totalTaxSubLabel:le,acmiMonthlyPayment:oe,acmiPayTextEnabled:ie,assets:ce,iupEstCredit:de,iupEstAfterCredit:me,totalSavingsWithCard:ue,stateDeliveryFee:pe,displayNetOfAllSavings:ge,hasPartnerFinance:he,savingsLabel:ye,hideVatText:Ee})=>{const ve=l().createElement(l().Fragment,null,l().createElement("span",qa(`- ${D}`)),l().createElement("span",{className:"visuallyhidden"},ce.footnoteText),l().createElement("span",qa(ce.tradeInValueDagger))),be=l().createElement(l().Fragment,null,l().createElement("span",qa(O)),l().createElement("span",{className:"visuallyhidden"},ce.footnoteText),l().createElement("span",null,"*")),fe=l().createElement(l().Fragment,null,l().createElement("span",qa(`- ${de}${ce.tradeInValueDagger}`)),l().createElement("span",{className:"visuallyhidden"},ce.footnoteText)),we=l().createElement(l().Fragment,null,l().createElement("span",qa(`${me}*`)),l().createElement("span",{className:"visuallyhidden"},ce.footnoteText)),Ne=l().createElement("div",null,l().createElement("span",{className:"rs-summary-totalaftertradeiLabel"},`${R} `),l().createElement("span",{className:"rs-summary-totalaftertradeinvalue"},F?T:O));let Se="";return t&&(Se=t.free?ce.freeLabel:t.cost),[{showField:!!a,type:"ePPPlusSummary"},{showField:!!te&&!re,type:"summaryRow",name:"tradeInCredit",label:ce.tradeinInstantCreditLabel,value:te},{showField:!!(re&&ee&&ne),type:"oneTimeChargeLabel"},{showField:!!ae,type:"summaryRow",name:"outsandingLoan",label:ce.tradeinOutstandingAmtLabel,value:ae},{showField:!!r,type:"summaryRow",name:"subtotal",label:ce.subtotal,value:r},{showField:!!n,type:"summaryRow",name:"instantCredit",label:ce.instantCredit,value:n},{showField:!!s,type:"amountChargedToday"},{showField:!!i,type:"emiDetails"},{showField:!!c,type:"summaryRow",name:"loyaltypointsAmount",label:ce.loyaltyPointsLabel,value:c},{showField:!!d,type:"summaryRow",name:"downpayment",label:ce.downPaymentLabel,value:d},{showField:!!t,type:"summaryRow",name:"shipping",label:ce.shipping,value:Se},{showField:!(!o||!U||ge),type:"summaryRow",name:"discountSavings",label:ye||ce.savingsLabel,value:U},{showField:!!o&&!ge,type:"summaryRow",name:"instantCashback",label:ce.instantcashback,value:o},{showField:!!m,type:"summaryRow",name:"paymentFullDiscount",label:ce.paymentFullDiscount,value:m},{showField:!!pe,type:"stateDeliveryFeeDetails"},{showField:!!u,type:"taxReview"},{showField:!!p,type:"summaryRow",name:"accountbalance",label:ce.accountBalance,value:p},{showField:!!g,type:"summaryRow",name:"giftcardamount",label:h?ln(ce.giftCardAmount,{quantity:h}):ce.giftCardBalance,value:g},{showField:!(!y||!E),type:"taxWithTaxCalculator"},{showField:!!v,type:"recycleFee"},{showField:!(!b||!b.cod),type:"summaryRow",name:"codfee",label:ce.codFeeLabel,value:b&&b.cod},{showField:!!f&&!w,type:"promoCodeRow"},{showField:!!N,type:"summaryRow",name:"upgrade",label:N&&N.upgradePaymentLabel,value:N&&N.upgradeProgramBalance},{showField:!(!S||!C),type:"summaryRow",name:"installmentTerm",label:S,value:C},{showField:!(A||!L&&!I),type:"monthlyInstallmentsRow",name:"monthlyInstallmentsRow"},{showField:!!T,type:"totalAmountRow"},{showField:!e&&!!A&&!(!O||!R),type:"summaryRow",name:"totalAfterTradeInSub",label:Ne},{showField:!!A&&!!L&&!G,type:"monthlyInstallmentsRow",name:"monthlyInstallmentsLabelValueAfterTotal"},{showField:!(!A||!L&&!k||!G),type:"monthlyInstallmentsRow",name:"monthlyInstallmentsLabelValueAfterTotal"},{showField:ge&&!(!o&&!U),type:"summaryRow",name:"discountSavings",label:ce.followingSavingsLabel},{showField:!!(o&&U&&ge),type:"summaryRow",name:"discountSavings",label:ye||ce.savingsLabel,value:U},{showField:!!o&&ge,type:"summaryRow",name:"instantCashback",label:ce.instantcashback,value:o},{showField:!(!$&&!U),type:"summaryRow",name:"savings",label:ce.totalSavings,value:$||U||""},{showField:!!J,type:"summaryRow",name:"monthlyPayment",label:ce.monthlyTotal,value:J},{showField:!!ue,type:"summaryRow",name:"totalSavingsWithCard",value:ue},{showField:!!D,type:"summaryRow",name:"tradeInRefund",label:ce.tradeUpValueLabel,value:ve},{showField:!(!O||!D),type:"summaryRow",name:"totalAfterTradeIn",label:ce.orderTotalAfterTradeUpLabel,value:be},{showField:de,type:"summaryRow",name:"iupCredit",label:ce.iupEstCreditValueLabel,value:fe},{showField:me,type:"summaryRow",name:"iupEstAfterCredit",label:ce.iupEstAfterCreditLabel,value:we},{showField:!(!x||!x),type:"summaryRow",name:"totalAfterInstantTradeIn",label:ce.totalAfterInstantTradeIn,value:x},{showField:(!e||he)&&!A&&!(!O||!R),type:"summaryRow",name:"totalAfterTradeInSub",label:Ne},{showField:Boolean(V),type:"segmentSavings"},{showField:!!P,type:"summaryRow",name:"cashback",label:P+(X||""),value:""},{showField:!(!M||!_||Ee),type:"showTaxInclusivePrices"},{showField:!(!se&&!le),type:"totalTaxSubValue"},{showField:!!B,type:"creditInstallmentAmount"},{showField:!!K,type:"totalListSavings"},ie?{showField:!!oe,type:"summaryRow",name:"acmiMontlhyPayment",label:oe}:{showField:!!oe,type:"summaryRow",name:"acmiMontlhyPayment",label:ce.acmiPaymentLabel,value:oe},ie?{showField:!oe&&(!!H||!!Z||!!j||W&&W.buyflowMessagesEnabled||!!q),type:"financingMessagesMarkup"}:{showField:!!H||!!Z||!!j||W&&W.buyflowMessagesEnabled&&!oe||!!q,type:"financingMessagesMarkup"},{showField:!!Y,type:"cashbackMessagesMarkup"},{showField:!!z,type:"pinCodeEligibility"},{showField:!!A&&!L&&!G,type:"monthlyInstallmentsRow",name:"monthlyInstallmentsLabelAfterTotal"},{showField:!!Q,type:"partnerFinancedInstallmentsMarkup"}]},mb=({orderTotal:e,subtotal:t,installmentSubTotal:a,subTotalExclusiveTax:r,tradeInValue:n,installmentTotal:s,orderTotalExclusiveTax:l,installmentTotalFinanced:o,downPayment:i,shipping:c,tradeinCreditSecured:d,tax:m,hasTaxCalculator:u,recycleFee:p,fees:g,hasPromoCode:h,hidePromoModule:y,installmentsremainingpayments:E,firstInstallmentAmount:v,upgrade:b,totalCardCharge:f,amountAuthorized:w,totalAmountAuthorized:N,psd2Enabled:S,financingMessage:C,enableFinancingCalculatorLink:T,buyflowMessages:L,installmentSummary:k,cashBackOverlayLink:I,tradeInCredit:A,iUPOrInstallments:P,hasFlexibleTradeIn:D,outstandingLoan:O,tradeInType:x,stateDeliveryFee:R,assets:F})=>{let M="";return c&&(M=c.free?F.freeLabel:c.cost),[{showField:!!A&&!P,type:"summaryRow",name:"tradeInCredit",label:F.tradeinInstantCreditLabel,value:A},{showField:!!e,type:"summaryRow",name:"ordertotal",label:F.orderTotal,value:e},{showField:!(!P||!D),type:"oneTimeChargeLabel"},{showField:!!O&&D,type:"summaryRow",name:"outstandingLoan",label:F.tradeinOutstandingAmtLabel,value:O},{showField:!!t,type:"summaryRow",name:"subtotal",label:F.subtotal,value:t},{showField:!!a,type:"summaryRow",name:"installmentsubtotal",label:F.installmentSubTotal,value:a},{showField:!(!a||!r),type:"subTotalExclusiveTax"},{showField:!!n,type:"summaryRow",name:"tradeinvalue",label:F.instantCreditTradeInValueLabel,value:n},{showField:!!s,type:"summaryRow",name:"installmenttotal",label:F.installmentTotal,value:s},{showField:!(!s||!l),type:"orderTotalExclusiveTax"},{showField:!!o,type:"summaryRow",name:"installmenttotalfinanced",label:F.installmentTotalFinanced,value:o},{showField:!!i,type:"summaryRow",name:"downpayment",label:F.installmentdownPaymentLabel,value:i},{showField:!!c,type:"summaryRow",name:"shipping",label:F.shipping,value:M},{showField:!!d,type:"summaryRow",name:"trade-in",label:F.instantCreditTradeInValueLabel,value:d},{showField:!!R,type:"stateDeliveryFeeDetails"},{showField:!!m,type:"taxReview",name:"taxandfees"},{showField:!!u,type:"taxWithTaxCalculator"},{showField:!!p,type:"recycleFee"},{showField:!(!g||!g.cod),type:"summaryRow",name:"codfee",label:F.codFeeLabel,value:g&&g.cod},{showField:!!h&&!y,type:"promoCodeRow"},{showField:!!E,type:"summaryRow",name:"installmentsremainingpayments",label:F.installmentsremainingpayments,value:E},{showField:!!v,type:"summaryRow",name:"firstinstallmentamount",label:F.firstInstallmentAmountLabel,value:v},{showField:!!b,type:"summaryRow",name:"upgrade",label:b&&b.upgradePaymentLabel,value:b&&b.upgradeProgramBalance},{showField:!!f,type:"summaryRow",name:"totalcardcharge",label:F.total,value:f},{showField:!!w,type:"summaryRow",name:"amountauthorized",label:F.authorizedAmount,value:w},{showField:!(!N||!S||"TRADE_IN_GREATER_THAN_LOAN"!==x),type:"totalAmountAuthorizedRow"},{showField:!!C||!!T||L&&L.buyflowMessagesEnabled||!!k,type:"financingMessagesMarkup"},{showField:!!I,type:"cashbackMessagesMarkup"}]},ub=({carrierSummaryClasses:e,deviceCarrierHeaderLabel:t,productLabel:a,monthlyPayment:r,monthlyPaymentAlly:n,monthlyPayments:s,productPrice:o,priceMessage:i,instantCredit:c,downPayment:d,totalCarrierFinancedLabel:m,totalCarrierFinancedAmount:u,carrierCredit:p,monthlyPaymentBeforeCredit:g,monthlyPaymentAfterCredit:h})=>{const{assets:y}=z();return l().createElement("div",{className:`rs-summary-carrierfinance ${e}`},l().createElement("div",{className:"rs-carrierfinance-paymentheader"},t),a&&l().createElement(ol,{name:"productinfo",label:a,value:r,valuea11y:n,subLabel:o}),(c||d)&&l().createElement(l().Fragment,null,l().createElement("div",mr({className:"rs-summary-instantcredit"},qa(c))),d&&l().createElement("div",{className:"rs-summary-sublabel large-12"},d)),i&&l().createElement("div",mr({className:"rs-summary-pricemessage"},qa(i))),u&&l().createElement(ol,{name:"totalCarrierFinance",label:m,value:u}),s&&l().createElement(ol,{name:"monthlyPayments",label:y.monthlyPaymentsLabel,value:s}),g&&l().createElement(ol,{name:"monthlyPaymentBeforeCredit",label:y.monthlyPaymentBeforeCreditLabel,value:g}),p&&l().createElement("div",{className:"rs-summary-labelred rs-summary-carriercredit"},l().createElement("div",qa(p))),h&&l().createElement(ol,{name:"monthlyPaymentAfterCredit",label:y.monthlyPaymentAfterCreditLabel,value:h}))},pb=({classes:e,modKey:t})=>{const[a]=Ma(t,"carrierFinancePromoSummary"),{productLabel:r,productPrice:n,priceMessage:s,instantCredit:o,downPayment:i,totalCarrierFinancedLabel:c,totalCarrierFinancedAmount:d,carrierCredit:m,monthlyPaymentBeforeCredit:u,monthlyPaymentAfterCredit:p,deviceCarrierHeaderLabel:g,monthlyPayment:h,monthlyPaymentAlly:y,monthlyPayments:E}=a;return l().createElement(ub,{carrierSummaryClasses:e,deviceCarrierHeaderLabel:g,productLabel:r,monthlyPayment:h,monthlyPaymentAlly:y,monthlyPayments:E,productPrice:n,priceMessage:s,instantCredit:o,downPayment:i,totalCarrierFinancedLabel:c,totalCarrierFinancedAmount:d,carrierCredit:m,monthlyPaymentBeforeCredit:u,monthlyPaymentAfterCredit:p})},gb=l().memo(pb),hb=({supplementalInfo:e,iUpSummaryField:t,classes:a,installmentsAmountDue:r,authorizedAmount:n,totalSavings:s,showSupplementalDisclaimer:o})=>{const{assets:i}=z(),c=Wa()(a,{"large-9 large-offset-3 small-12 small-offset-0":!a});return l().createElement(l().Fragment,null,l().createElement("div",{className:"row"},l().createElement("div",{className:c},t)),l().createElement("div",{className:"row"},r&&(n?l().createElement("div",{className:c},l().createElement(ol,{name:"installmentsamountdue",label:i.dueTodayLabel,classes:"rs-summary-withauthorizedamount",value:r})):l().createElement(ol,{name:"installmentsamountdue",label:i.dueTodayLabel,classes:c,value:r})),o&&l().createElement("div",{className:`rs-summary-installmentsamountdue rs-summary-supplementalinfo ${c}`},e.installmentsAmountDue),s&&l().createElement(ol,{name:"savings",label:i.totalSavings,value:s})))},yb=({modKey:e,supplementalInfo:t,iUpSummaryField:a,classes:r,showFinancingMessages:n})=>{const[s]=Fa(e),{installmentsAmountDue:o,authorizedAmount:i,totalSavings:c}=s,d=o&&t&&t.installmentsAmountDue;return l().createElement(hb,{supplementalInfo:t,iUpSummaryField:a,classes:r,installmentsAmountDue:o,authorizedAmount:i,totalSavings:c,showSupplementalDisclaimer:d,showFinancingMessages:n})},Eb=l().memo(yb),vb=({summaryClasses:e,wrapperClass:t,webInstallmentSummary:a,fullPriceProductSummary:r,summaryDetails:n,hasCarrierFinancePromoSummary:s,hasIUPOrInstallments:o,summaryModKey:i,supplementalInfo:c,summaryField:d,iUpSummaryField:m,showFinancingMessages:u,xMerchSummary:p})=>l().createElement("div",{className:`rs-summary ${t}`},s&&l().createElement(gb,{classes:e,modKey:i}),a,r,n,o?l().createElement(Eb,{modKey:i,supplementalInfo:c,iUpSummaryField:m,classes:e,showFinancingMessages:u}):l().createElement("div",{className:e},d),p&&l().createElement("div",mr({className:"rs-summary-xmerch"},qa(p)))),bb=({epptext:e,showEPPPlusSummaryButton:t,ePPPlusSummaryButtonProps:a})=>{const{assets:r}=z();return l().createElement(l().Fragment,null,l().createElement("span",null,e," "),t&&l().createElement(os,a,r.remove))},fb=({modKey:e})=>{const{data:t,properties:a}=xa(`${e}.ePPPlusSummary`),{epptext:r,showRemove:n}=t,s=Ha(`${e}.ePPPlusSummary`,"remove-binding"),o=n&&s.binding.bindExists,i={...s.props,isLoading:a.isLoadingSubmit,hasDefaultClass:!1,className:"as-buttonlink"};return l().createElement(bb,{epptext:r,showEPPPlusSummaryButton:o,ePPPlusSummaryButtonProps:i})},wb=l().memo(fb),Nb=({recycleFeeInfo:e})=>{const{assets:t,viewport:a}=z(),r="small"===a,[n,o]=(0,s.useState)(!1);return l().createElement(l().Fragment,null,t.recycleFee,e&&l().createElement(l().Fragment,null," ",l().createElement("button",{id:"recyclefee-help",className:"as-buttonlink","aria-label":t.recycleFeesLearnMoreA11y,type:"button",onClick:()=>{o(!0),hl({eVar:gl,feature:"",part:"Recycling",action:"LearnMore"})}},l().createElement("span",qa(t.learnMore))),l().createElement(ss,{visible:n,onClose:()=>o(!1),isFullscreen:r,ariaLabel:"rs-recyclefee-overlayHeading",fixedWidth:!0},l().createElement("div",mr({className:"rs-recyclefee-overlay"},qa(e))))))},Sb=({modKey:e})=>{const[t]=Fa(e),{recycleFee:a,recycleFeeHelp:r}=t;return l().createElement(ol,{name:"recycleFee",label:l().createElement(Nb,{recycleFeeInfo:r}),value:a})},Cb=l().memo(Sb),Tb=({couponAppliedMessage:e,promoMessage:t})=>{const{assets:a}=z();return l().createElement("div",null,l().createElement("div",{"aria-live":"polite",className:"rs-summary-promocodelabel"},e||a.promoCodeApplied),t&&l().createElement("div",{className:"rs-summary-promocodemessage"},t))},Lb=({promoSaving:e,showRemovePromoCodeButton:t,removePromoCodeButtonProps:a})=>{const{assets:r}=z();return l().createElement(l().Fragment,null,e&&l().createElement("div",{className:"rs-summary-promocodevalue"},e),t&&l().createElement(os,a,l().createElement("span",null,r.remove),l().createElement("span",{className:"visuallyhidden"},r.promoEnterLabel)))},kb=({showEditPromoCodeButton:e,editPromoCodeButtonProps:t})=>{const{assets:a}=z();return l().createElement("div",null,l().createElement("span",null,a.promoCodeLabel," "),e&&l().createElement("button",mr({},t,{type:"button"}),l().createElement("span",null,a.promoEnterItNow),l().createElement("span",{className:"icon icon-after icon-chevrondown","aria-hidden":"true"})))},Ib=({modKey:e,messages:t,promoApplied:a,couponAppliedMessage:r,promoMessage:n,promoSaving:s,showEditPromoCodeButton:o,editPromoCodeButtonProps:i,showRemovePromoCodeButton:c,removePromoCodeButtonProps:d,cancelMetricsForPromo:m})=>{const{assets:u}=z(),p=Boolean(t.length);return a?l().createElement(ol,{name:"promoCodeSaving",label:l().createElement(Tb,{couponAppliedMessage:r,promoMessage:n}),value:l().createElement(Lb,{promoSaving:s,showRemovePromoCodeButton:c,removePromoCodeButtonProps:d})}):l().createElement(l().Fragment,null,l().createElement(ol,{name:"promoCode",label:l().createElement(kb,{showEditPromoCodeButton:o,editPromoCodeButtonProps:i})}),l().createElement(au,{modKey:e,className:"rs-summary-promo-inlineeditor",triggerRef:i.ref,visibleKey:"_editing",textField:{label:u.promoEnterLabel,bindName:"promoCode","data-autom":"bag-promocode-input"},applyButton:{label:u.apply,ally:u.applyPromoCodeA11y,processingText:u.processing,bindName:"applyPromoCode","data-autom":"bag-promocode-apply"},cancelButton:{label:u.cancel,ally:u.cancelPromoCodeA11y,bindName:p?"removePromoCode":void 0,"data-autom":"bag-promocode-cancel",metrics:m}}))},Ab=({modKey:e})=>{const{data:t,properties:a}=xa(`${e}.promoCode`),[r]=Ma(`${e}.promoCode`,"_editing"),n=Ha(`${e}.promoCode`,"edit"),s=!r&&n.binding.bindExists,o=Ha(`${e}.promoCode`,"removePromoCode"),i=!r&&o.binding.bindExists,{assets:c}=z(),[d]=_a(`${e}.promoCode`),{promoApplied:m,couponAppliedMessage:u,promoMessage:p,promoSaving:g}=t,h={...n.props,id:"rs-summary-enterpromocode",className:"as-buttonlink","aria-label":c.promoEnterLabel,"aria-controls":a.key,"data-autom":"bag-promocode-enteritnow"},y={...o.props,isLoading:a.isLoadingSubmit,hasDefaultClass:!1,className:"as-buttonlink"};return l().createElement(Ib,{modKey:a.key,messages:d,promoApplied:m,couponAppliedMessage:u,promoMessage:p,promoSaving:g,showEditPromoCodeButton:s,editPromoCodeButtonProps:h,showRemovePromoCodeButton:i,removePromoCodeButtonProps:y,cancelMetricsForPromo:{eVar:"eVar6",feature:"PromoCode",action:"CancelPromoCode"}})},Pb=l().memo(Ab),Db=({showTooltip:e,label:t,isEditing:a,postalCode:r,showGeoLocationDisclaimer:n,showTaxCalc:s,editButtonProps:o})=>{const{assets:i,viewport:c}=z(),d="small"===c,m=r?`${r} ${i.estimatedTaxZipA11y}`:i.taxZipCodeA11y;return l().createElement("div",{className:"rs-summary-tax"},l().createElement("span",{className:"rs-summary-tax-label"},t),e&&l().createElement(Eo,{className:"rs-summary-tooltip",labelA11y:i.taxEstimateLabelIconA11y,before:!d,after:d,autoAlign:!0},l().createElement(ho,null,i.taxTooltipTitle),l().createElement(yo,null,i.taxTooltipContent)),s&&!a&&l().createElement("button",mr({},o,{className:"as-buttonlink icon icon-after icon-chevrondown","aria-label":m,type:"button","data-autom":"enterzipcode-checkoutpage"}),r?l().createElement(l().Fragment,null,r,n&&i.geoLocationDagger):i.taxZipCode))},Ob=({modKey:e})=>{const[t]=Fa(e),{tax:a,taxSubLabel:r,bundleTaxSubLabel:n,showTooltip:s=!1}=t,{assets:o}=z(),i=n?`${n}<br/>${r}`:r;return l().createElement(ol,{name:"tax",label:l().createElement(Db,{showTooltip:s,label:o.tax}),value:a,subLabel:i})},xb=l().memo(Ob),Rb={eVar:"eVar6",feature:"TaxCalculator",action:"CancelZipCode"},Fb=({modKey:e})=>{const{assets:t}=z(),{modExists:a,data:r}=xa(`${e}.taxCalculator`),{showVatLabel:n,tax:s}=r,[o]=Ma(e,"showTooltip"),[i]=Fa(`${e}.taxCalculator.address`),{showGeoLocationDisclaimer:c,_editing:d}=i,m=V().get(i,"was.postalCode",""),u={...Ha(`${e}.taxCalculator.address`,"edit").props,id:"rs-summary-enterzipcode","aria-controls":`${e}.taxCalculator.address`},p=n?t.tax:l().createElement(Db,{showTooltip:o,showTaxCalc:a,label:t.taxEstimateLabel,isEditing:d,postalCode:m,showGeoLocationDisclaimer:c,editButtonProps:u});return l().createElement(l().Fragment,null,l().createElement(ol,{name:"tax",label:p,value:s}),a&&l().createElement(au,{modKey:`${e}.taxCalculator.address`,className:"rs-summary-enterzipcode",triggerRef:u.ref,visibleKey:Xs,textField:{label:t.zipCodeLabel,bindName:"postalCode","data-autom":"bag-zipcode-input"},applyButton:{label:t.apply,ally:t.applyZipCodeA11y,processingText:t.processing,bindName:"calculate","data-autom":"bag-zipcode-apply"},cancelButton:{label:t.cancel,ally:t.cancelTaxCalculatorA11y,"data-autom":"bag-zipcode-cancel",metrics:Rb}},l().createElement(lu,{isBagApp:!0})))},Mb=l().memo(Fb),_b=({was:e,pinCodeAddressKey:t,showEditPinCodeAddresButton:a,editPinCodeAddresButtonProps:r,cancelMetricsForZipcode:n})=>{const{assets:s}=z(),o=e&&e.postalCode,i=Wa()({"rs-summary-pincode-warm-inline":e.postalCode,"rs-summary-pincode-cold-inline":!e.postalCode});return l().createElement("div",{className:i},l().createElement("h2",{className:"visuallyhidden"},s.pinCodeAvailibilityLabelA11y),o&&l().createElement("div",{className:"rs-summary-pincode"},l().createElement("span",null,`${s.deliveryPostalLabelWarmStart} `),a&&l().createElement("button",mr({},r,{type:"button"}),l().createElement("span",null,e.postalCode),l().createElement("span",{className:"icon icon-after icon-chevrondown","aria-hidden":"true"}))),l().createElement("div",null,!o&&l().createElement("div",{className:"rs-summary-pincode"},s.pinCodeAvailibilityLabel),l().createElement(au,{modKey:t,className:"rs-summary-pincode-inlineeditor",triggerRef:r.ref,isCollapsible:Boolean(o),visibleKey:"_editing",textField:{label:s.zipCodeLabel,bindName:"postalCode","data-autom":"bag-pincode-input"},applyButton:{label:s.apply,ally:s.applyZipCodeA11y,processingText:s.processing,bindName:"calculate","data-autom":"bag-pincode-apply"},cancelButton:{label:s.cancel,ally:s.cancelZipCodeA11y,"data-autom":"bag-pincode-cancel",metrics:n}},l().createElement(lu,{isBagApp:!0}))))},Bb=({modKey:e})=>{const[t]=Fa(`${e}.pinCodeEligibility.address`),{was:a,_editing:r}=t,n=Ha(`${e}.pinCodeEligibility.address`,"edit"),s=!r&&n.binding.bindExists,o=xa(`${e}.pinCodeEligibility.address`).properties.key,i={...n.props,id:`${o}-enterpincode`,className:"as-buttonlink","data-autom":"bag-pincode-edit-cold","aria-controls":o};return l().createElement(_b,{was:a,pinCodeAddressKey:o,showEditPinCodeAddresButton:s,editPinCodeAddresButtonProps:i,cancelMetricsForZipcode:{eVar:"eVar6",feature:"Delivery",action:"CancelZipCode"}})},$b=l().memo(Bb),Ub=({messages:e})=>l().createElement("div",{className:"rs-summary-segmentsavings"},e.map((e=>l().createElement("div",{key:e,className:"rs-summary-segmentsavingsmessage"},e)))),Kb=({modKey:e})=>{const[t]=Ma(e,"segmentSavingsMessages",[]);return t.length>0&&l().createElement(Ub,{messages:t})},Vb=l().memo(Kb),Hb=({totalLoyaltySavings:e,totalListSavings:t})=>l().createElement("div",{className:"rs-summary-loyaltysavings-message"},l().createElement("div",{className:"rs-summary-value"},l().createElement("p",{className:"rs-total-loyalty-savings"},l().createElement("span",qa(ln(e,{totalListSavings:t})))))),jb=({modKey:e})=>{const[t]=Ma(e,"totalListSavings"),{assets:a}=z();return l().createElement(Hb,{totalLoyaltySavings:a.totalLoyaltySavings,totalListSavings:t})},Gb=l().memo(jb),Wb=({creditInstallmentsContent:e,creditInstallmentTerm:t,creditInstallmentAmount:a})=>l().createElement("div",mr({className:"rs-credit-installments"},qa(ln(e,{creditInstallmentTerm:t,creditInstallmentAmount:a})))),qb=({modKey:e})=>{const[t]=Fa(e),{creditInstallmentTerm:a,creditInstallmentAmount:r}=t,{fragments:n}=z();return l().createElement(Wb,{creditInstallmentsContent:n.creditInstallments,creditInstallmentTerm:a,creditInstallmentAmount:r})},Yb=l().memo(qb),zb=({totalAmountAuthorized:e,tradeinLabel:t,tradeinLabelWithDeposit:a})=>{const{assets:r}=z(),n=a?r.authorizedAmountInfoWithDeposit:r.authorizedAmountInfo;return l().createElement(l().Fragment,null,l().createElement(ol,{name:"totalAmountAuthorized",label:"",value:e}),t&&l().createElement(ol,{name:"totalAmountAuthorized",label:"",value:n}))},Xb=({modKey:e})=>{const[t]=Fa(e),{totalAmountAuthorized:a,tradeinLabel:r,tradeinLabelWithDeposit:n}=t;return l().createElement(zb,{totalAmountAuthorized:a,tradeinLabel:r,tradeinLabelWithDeposit:n})},Jb=l().memo(Xb),Qb=({className:e,headerLabel:t,row:a})=>{const r=Wa()(e,"row");return l().createElement("div",{className:r},l().createElement("div",{className:"large-12"},t&&l().createElement("div",{className:"rs-summary-subheader"},t),a&&a.map((e=>l().createElement(ol,{key:`amount-${e.name}`,name:e.name,label:e.label,value:e.value,subValue:e.subValue,valuea11y:e.valuea11y||""})))))},Zb=({modKey:e})=>{const[t]=Ma(e,"amountChargedToday"),{headerLabel:a,row:r}=t;return l().createElement(Qb,{className:"rs-summary-amountchargedtoday",headerLabel:a,row:r})},ef=l().memo(Zb),tf=({modKey:e})=>{const[t]=Ma(e,"emiDetails"),{headerLabel:a,row:r}=t;return l().createElement(Qb,{className:"rs-summary-emidetails",headerLabel:a,row:r})},af=l().memo(tf),rf=({taxLabel:e,taxValue:t})=>l().createElement("div",mr({className:"rs-tax-section"},qa(ln(e,{taxExclusiveTax:t})))),nf=({modKey:e})=>{const[t]=Ma(e,"subTotalExclusiveTax"),{assets:a}=z();return l().createElement(rf,{taxLabel:a.subTotalExclusiveTax,taxValue:t})},sf=l().memo(nf),lf=({totalTaxSubValue:e,totalTaxSubLabel:t})=>l().createElement("div",{className:"rs-summary-content"},t&&l().createElement("div",mr({className:"rs-summary-tax-sublabel"},qa(t))),e&&l().createElement("div",mr({className:"rs-summary-subvalue"},qa(e)))),of=({modKey:e})=>{const[{totalTaxSubValue:t,totalTaxSubLabel:a}]=Ma(e);return l().createElement(lf,{totalTaxSubValue:t,totalTaxSubLabel:a})},cf=l().memo(of),df=({modKey:e})=>{const[t]=Ma(e,"taxExclusiveTax"),{assets:a}=z();return l().createElement(rf,{taxLabel:a.taxExclusiveTax,taxValue:t})},mf=l().memo(df),uf=({modKey:e})=>{const[t]=Ma(e,"orderTotalExclusiveTax"),{assets:a}=z();return l().createElement(rf,{taxLabel:a.orderTotalExclusiveTax,taxValue:t})},pf=l().memo(uf),gf=({totalClassName:e,label:t,total:a,orderInstallmentPriceVal:r})=>{const{assets:n}=z();return l().createElement(l().Fragment,null,l().createElement("div",{className:e},t&&(t&&"string"==typeof t?l().createElement("div",mr({className:"rs-summary-label","data-autom":"bagtotallabel"},qa(t))):l().createElement("div",{className:"rs-summary-label","data-autom":"bagtotalvalue"},t)),a&&(a&&"string"==typeof a?l().createElement("div",mr({className:"rs-summary-value","data-autom":"bagtotalvalue"},qa(a))):l().createElement("div",{className:"rs-summary-value","data-autom":"bagtotalvalue"},a))),r&&l().createElement("div",{className:"column large-10 large-last rs-summary-emiinstallmenttotal"},l().createElement("span",{"aria-hidden":"true"},ln(n.orderInstallmentPriceLabel,{orderInstallmentPrice:r})),l().createElement("span",{className:"visuallyhidden","aria-live":"polite"},ln(n.orderInstallmentPriceLabelA11y,{orderInstallmentPrice:r}))))},hf=({modKey:e})=>{const{assets:t}=z(),[a]=Fa(e),{suppressDefaultInstallmentDisplays:r,partnerFinancedInstallments:n,buyFlowInstallmentsFinancing:s,carrierFinancePromoSummary:o,totalAfterTradeIn:i,paymentSubLabel:c,showTotalAfterTradeinAsTotal:d,hasSubscription:m,orderInstallmentPrice:u,total:p,monthlyTotalPricing:g,totalLabel:h,showPayInFullFirst:y}=a,E=Wa()("rs-summary-labelandvaluecontainer","rs-summary-total",{"rs-webinstallment-summary-total":s&&!n,"rs-carrierfinance-summary-total":o,"rs-monthlyprice-summary-total":g&&!y,"rs-monthlyprice-summary-total rs-monthlyprice-border":y}),{acShowInstallment:v}=Hs();let b;return b=h||(i&&c&&!v?t.tradeInDueTodayLabel:m?t.totalToday:t.total),l().createElement(gf,{totalClassName:E,label:b,total:d?i:p,orderInstallmentPriceVal:r?"":u})},yf=l().memo(hf),Ef=({cashBackOffersData:e,cashBackHeader:t,cashBackLegalFooter:a})=>l().createElement("div",{className:"rs-cashbackoverlay"},l().createElement("h2",{id:"cashbackOptions",className:"rs-cashbackoverlay-header"},t),l().createElement("div",{className:"rs-cashbackoverlay-options-wrapper"},l().createElement("ul",{className:"rs-cashbackoverlay-options-list row small-12"},e.map((t=>{const a=Wa()("rs-cashbackoverlay-options-item column",{"rs-cashbackoverlay-centered-item":1===e.length});return l().createElement("li",{className:a,id:t.id,key:t},l().createElement("div",{className:"rs-cashbackoverlay-option-list"},l().createElement("h3",{className:"rs-cashbackoverlay-option-image"},l().createElement(Il,{width:t.image.labelImageWidth,height:t.image.labelImageHeight,src:t.image.labelImageUrl,alt:t.image.labelImageAlt,"aria-hidden":"true"}),l().createElement("span",{className:"visuallyhidden rs-cashbackoverlay-imagealt-span"},t.image.labelImageAlt)),l().createElement("p",mr({className:"rs-cashbackoverlay-offermessage-keyline"},qa(t.offerMessage))),l().createElement("div",mr({className:"rs-cashbackoverlay-offerdetails"},qa(t.offerDetails.content)))))})))),l().createElement("div",mr({className:"rs-cashbackoverlay-legalfooter"},qa(a)))),vf=({cashBackOffersData:e,cashBackHeader:t,cashBackLegalFooter:a,isOpen:r,setIsOpen:n})=>{const{viewport:s}=z(),o="small"===s;return l().createElement(ss,{visible:r,fixedWidth:!0,noPadding:!0,isFullscreen:o,ariaLabel:"cashbackOptions",footerContent:l().createElement(zl,null),onClose:()=>n(!1)},l().createElement(Ef,{cashBackOffersData:e,cashBackHeader:t,cashBackLegalFooter:a}))},bf=({cashBackOverlayLinkButtonProps:e,cashBackOverlayLinkText:t,instantLearnMoreLabel:a})=>l().createElement("div",{className:"rs-cashbackoverlay-link"},l().createElement("button",mr({},e,qa(t),{type:"button","data-autom":"cashbackoverlay-button","aria-label":a,className:"as-buttonlink"}))),ff=({modKey:e})=>{const{assets:t}=z(),a=Ha(e,"cashBackOverlayLink"),r=xa(`${e}.cashBackOverlay`),[n]=Ma(e,"cashBackOverlayLink"),o=Ba(`${e}.cashBackOverlay`),[i,c]=(0,s.useState)(!1),{header:d,legalFooter:m}=r.data,u=o.map((e=>({image:e.data.image,offerMessage:e.data.offerMessage,offerDetails:e.data.offerDetails,id:e.data.id}))),p={...a.props,onClick:()=>{c(!0),a.props.onClick()}},g=n&&t.instantLearnMoreLabel?t.instantLearnMoreLabel:"";return l().createElement(l().Fragment,null,r.modExists&&l().createElement(vf,{cashBackOffersData:u,cashBackHeader:d,cashBackLegalFooter:m,isOpen:i,setIsOpen:c}),l().createElement(bf,{cashBackOverlayLinkButtonProps:p,cashBackOverlayLinkText:n,instantLearnMoreLabel:g}))},wf=l().memo(ff),Nf=({hasACMessages:e,webApplyButtonProps:t,acMessageBootstrap:a,hideGetDailyCashWithAppleCardText:r,children:n,financeOverlayLinkLeftAlignment:s})=>{const o=Wa()("rs-summary-financingmessage-wrapper",{"rs-summary-financingmessage-align-left":s});return l().createElement("div",{className:o},l().createElement("div",{className:"rs-summary-value"},e?l().createElement(hs,{webApplyButtonProps:t,bootstrap:a,shouldHideLinks:r,dataAutom:"rs-financinglink"},n):n))},Sf=({displayDynamicHeader:e,headerMap:t,noInstallmentsResponse:a,errorText:r,legalFooter:n,tradeInAndInstallments:s})=>{const{assets:o}=z(),i=e?t.compareInstallmentSubHeader:o.installmentInfo;return l().createElement(l().Fragment,null,a?l().createElement("p",{className:"rs-financeoverlay-error"},r):l().createElement(l().Fragment,null,l().createElement("div",null,l().createElement("h2",{id:"financingOptions",className:"as-compareplansoverlay-header"},e?t.compareInstallmentHeader:o.compareInstallmentHeader)),i&&l().createElement("div",{className:"as-compareplansoverlay-info"},l().createElement("div",mr({className:"as-compareplansoverlay-subinfo"},qa(i)))),s,n&&l().createElement("div",mr({className:"as-compareplans-information large-10 small-12 large-centered"},qa(n)))))},Cf=({selectedTab:e,tables:t,showInstallmentsWithTradeinTab:a,columnHeaderLabels:r})=>{const{assets:n}=z(),s=Wa()("as-compareplans-wrapper",{"as-l-container-full-small":!a}),o=e||{tabKey:"nontradeinKey"},i=Wa()("as-compareplans-bankname as-compareplans-first",{"rs-compareplans-savings-height":t.some((e=>e.savings))}),c=Wa()("as-compareplans-data",{"rs-compareplane-paymentpromo-savings-height":t.some((e=>e.termData.some((e=>e.savingsPaymentPromo))))});return l().createElement("div",{className:"as-compareplans-tablewrapper"},l().createElement("div",{className:s,id:`${o.tabKey}-tab`,role:"tabpanel"},l().createElement("table",{className:"as-compareplans-datatable"},l().createElement("caption",{className:"visuallyhidden"},n.paymentCompareFinanceLink||n.compareFinanceLink),l().createElement("thead",{className:"rs-financeoverlay-compare-plan-table-head"},l().createElement("tr",{className:"rs-financeoverlay-compare-plan-table-heading-row"},l().createElement("th",{scope:"col",className:"as-compareplans-heading"},n.partnerHeading),r.map((e=>l().createElement("th",{scope:"col",className:"as-compareplans-heading",key:`financingcolheader-${e}`},e))))),l().createElement("tbody",null,t.map((e=>{const t=e.imageAttributes,a=t&&t.labelImageAlt?t.labelImageAlt:e.issuerName;return l().createElement("tr",{className:"rs-compareplans-issuer-row",key:`financingbankrow-${a}`},l().createElement("td",{className:i},t&&t.labelImageUrl?l().createElement(Il,{className:"as-compareplans-bankimage",width:t.labelImageWidth,height:t.labelImageHeight,src:t.labelImageUrl,alt:t.labelImageAlt}):e.issuerName,e.savings&&l().createElement("div",{className:"rs-compareplans-savings"},e.savings)),e.termData.map((e=>{let t="tradeInTabText"===o.tabKey?"netmonthly":"monthly";e[t]||"netmonthly"!==t||(t="monthly");const a="tradeInTabText"===o.tabKey&&"monthly"===t&&e[t]&&"-"!==e[t],r=`dataitem-${e.total}-${e.monthly}`;return l().createElement("td",{className:c,key:`financingbankitems-${r}`},l().createElement("div",{className:"rs-financeoverlay-compare-plan-item-asterisk"},a?l().createElement(l().Fragment,null,l().createElement("span",null,e[t]),l().createElement("span",{className:"visuallyhidden"},n.footnoteText),l().createElement("span",null,"*")):e[t]),e.rate&&l().createElement("div",null,e.rate),e.savingsPaymentPromo&&l().createElement("div",{className:"rs-financeoverlay-compare-plan-promo-savings"},e.savingsPaymentPromo),e.apr&&l().createElement("div",null,e.apr))})))}))))))},Tf=({tradeInTabHeaderMap:e,tables:t,columnHeaderLabels:a,showInstallmentsWithTradeinTab:r})=>{const[n,o]=(0,s.useState)(1),i=Object.entries(e).map((([e,t])=>({title:t,tabKey:e})));return l().createElement("div",{className:"row rs-tradeintab-container"},l().createElement("div",{className:"column large-12 small-12 large-centered rs-tradeintab-options"},l().createElement(ud,{count:i.length,index:n,handleChange:o,className:"as-l-container-full-small"},l().createElement(md,{items:i.map((e=>e.title))})),l().createElement(Cf,{tradeInTabHeaderMap:e,selectedTab:i[n],tables:t,showInstallmentsWithTradeinTab:r,columnHeaderLabels:a})))},Lf=({cartTotal:e,orderTotalLabel:t,orderTotal:a,columnHeaderLabels:r,tables:n,compareMultipleBanksDropdownProps:s,issuerOptions:o=[],emiTypeOptions:i,emiOptionsRadioProps:c,emiSelectedOption:d,showConsolidatedTerms:m})=>{const{assets:u}=z(),p=i?u.bankLabel:u.selectOne,g=i?u.selectBankLabel:u.selectOneCreditcard,h=Wa()("rs-financeoverlay-multiplebanks as-l-container-full-small",{"rs-financeoverlay-multiplebanks-terms":m});return l().createElement("div",{className:h},m&&l().createElement("div",{className:"column large-12 small-12 large-centered rs-emi-table-header"},u.financeOverlayTableHeader),i&&l().createElement("div",{className:"column large-6 small-12 large-centered rs-emi-options"},l().createElement("fieldset",null,l().createElement("div",{className:"as-buttongroup rs-emiOptionsGroup"},i.map(((e,t)=>l().createElement("div",{className:"as-buttongroup-item large-5 rs-emiOption-item",key:e.value},l().createElement("input",mr({},c,{type:"radio",value:e.value,checked:d===e.value,id:`emiOptionType${t}`,name:"emiOptionType",className:"as-buttongroup-radio rs-emiOption-radio"})),l().createElement("label",{htmlFor:`emiOptionType${t}`,className:"as-buttongroup-button large-12  rs-emiOption-button"},l().createElement("span",{className:"rs-emiOption-label"},e.label)))))))),o&&!!o.length&&l().createElement("div",{className:"rs-financeoverlay-dropdowns large-12"},l().createElement(oo,mr({},s,{id:"rs-financeoverlay-issuer",classes:{root:"large-6 small-12 large-centered column"},label:l().createElement("span",{"aria-label":g},p)}),o.map((e=>l().createElement(co,{key:e.value,value:e.value},e.label))))),a&&l().createElement("div",{className:"rs-emioverlay-ordertotal large-12 small-12"},l().createElement("span",{className:"rs-emioverlay-ordertotal-label"},t),l().createElement("span",{className:"rs-emioverlay-ordertotal-value"},a)),l().createElement("div",{className:"rs-financeoverlay-table"},e&&l().createElement("div",{className:"rs-financeoverlay-table-header as-l-container-full-small"},u.loanAmount,": ",e),l().createElement("div",{className:"rs-financeoverlay-wrapper"},l().createElement("div",{className:"rs-financeoverlay"},l().createElement("div",{className:"rs-financeoverlay-tableinner"},l().createElement("table",{className:"rs-emioverlay-tablewrapper rs-financeoverlay-comparebanks","aria-labelledby":"financingOptions"},l().createElement("thead",null,l().createElement("tr",{className:"rs-financeoverlay-duration"},r.map((e=>l().createElement("th",{scope:"col",className:"rs-emioverlay-headings",key:`financingcolheader-${e}`},e))))),l().createElement("tbody",null,n.map((e=>l().createElement("tr",{className:"rs-emioverlay-tablerow",key:e.termData[0]?`financingbankrow-${e.termData[0].term}`:"financingbankrow"},e.termData.map((e=>{const t=`dataitem-${e.cost}-${e.total}-${e.rate}-${e.monthly}`;return e.total?l().createElement("td",{className:"rs-financeoverlay-data large-6 small-6",key:`financingbankitems-${t}`},e.noCostEMI&&l().createElement("div",{className:"rs-financeoverlay-nocost-emi"},e.noCostEMI),e.topLabel&&l().createElement("div",{className:"rs-emioverlay-special-offers"},e.topLabel),l().createElement("div",{className:"rs-emioverlay-term"},e.term),l().createElement("div",mr({className:"rs-emioverlay-total large-11 small-12"},qa(e.total))),i&&e.totalSavings&&l().createElement("div",{className:"rs-emioverlay-totalsavings large-6 small-6"},e.totalSavings)):l().createElement("td",{className:"rs-financeoverlay-data large-6 small-6",key:`financingbankitems-${t}`},l().createElement("div",null,l().createElement("span",{className:"rs-emioverlay-installment"},l().createElement("span",null,e.installmentAmount),e.installmentsa11y&&l().createElement(l().Fragment,null,l().createElement("span",{"aria-hidden":"true"},e.installmentPer),l().createElement("span",{className:"visuallyhidden"},e.installmentsa11y))),e.imageAttributes&&e.imageAttributes.labelImageUrl&&l().createElement(Il,{className:"rs-compareplans-bankimage",width:e.imageAttributes.labelImageWidth,height:e.imageAttributes.labelImageHeight,src:e.imageAttributes.labelImageUrl,alt:e.imageAttributes.labelImageAlt}),e.term&&l().createElement("span",{className:"rs-emioverlay-nototal-term"},e.term),e.threshold&&l().createElement("span",{className:"rs-emioverlay-threshold"},e.threshold)))}))))))))))))},kf=({tables:e=[],columnHeaderLabels:t,cartTotal:a})=>{const{assets:r}=z();return l().createElement("div",{className:"as-l-container-full-small"},l().createElement("div",{className:"as-compareplans-tablewrapper"},a&&l().createElement("div",{className:"rs-financeoverlay-table-header as-l-container-full-small"},r.loanAmount,": ",a),l().createElement("div",{className:"as-compareplans-wrapper"},l().createElement("div",{className:"rs-financeoverlay-tableinner"},e.map((e=>{const a=e.imageAttributes,n=a&&a.labelImageAlt?a.labelImageAlt:e.issuerName;return l().createElement("div",{className:"rs-financeoverlay-issuer-tablecontent",key:`financingissuercontent-${n}`},l().createElement("table",{className:"rs-financeoverlay-tablewrapper as-compareplans-datatable",key:`financingtable-${n}`},l().createElement("caption",{className:"visuallyhidden"},`${r.compareInstallmentHeader}\n                                            ${e.thresholdText}`),l().createElement("thead",{className:"rs-financeoverlay-table-head"},l().createElement("tr",{className:"rs-financeoverlay-duration"},l().createElement("th",{scope:"col",className:"as-compareplans-heading"},a&&a.labelImageUrl&&l().createElement(Il,{className:"rs-compareplans-bankimage",width:a.labelImageWidth,height:a.labelImageHeight,src:a.labelImageUrl,alt:a.labelImageAlt})),t.map((e=>l().createElement("th",{scope:"col",className:"as-compareplans-heading",key:`financingcolheader-${e}`},l().createElement("div",{className:"rs-financeoverlay-compareplans-heading-item"},e)))))),l().createElement("tbody",null,l().createElement("tr",{className:"rs-financeoverlay-tablerow"},l().createElement("th",{scope:"row",className:"rs-financeoverlay-sidelabels rs-financeoverlay-first"},l().createElement("span",qa(e.sideLabels.monthly))),e.termData.map((e=>{const t=`dataitem-${e.cost}-${e.total}-${e.monthly}`;return l().createElement("td",{className:"rs-financeoverlay-data",key:`financingdataitem-${t}`},l().createElement("div",{className:"rs-financeoverlay-compareplans-item-monthly-cost"},e.monthly),e.rate&&l().createElement("div",{className:"rs-financeoverlay-compareplans-item-rate"},e.rate),l().createElement("div",{className:"rs-financeoverlay-compareplans-item-apr"},e.apr))}))),l().createElement("tr",{className:"rs-financeoverlay-tablerow"},l().createElement("th",{scope:"row",className:"rs-financeoverlay-sidelabels rs-financeoverlay-first"},e.sideLabels.cost),e.termData.map((e=>{const t=`dataitem-${e.cost}-${e.total}-${e.monthly}`;return l().createElement("td",{className:"rs-financeoverlay-data",key:`financingdataitem-${t}`},e.cost)}))),l().createElement("tr",{className:"rs-financeoverlay-tablerow"},l().createElement("th",{scope:"row",className:"rs-financeoverlay-sidelabels rs-financeoverlay-first"},e.sideLabels.total),e.termData.map((e=>{const t=`dataitem-${e.cost}-${e.total}-${e.monthly}`;return l().createElement("td",{className:"rs-financeoverlay-data",key:`financingdataitem-${t}`},e.total)}))))),e.thresholdText&&l().createElement("table",{className:"rs-financeoverlay-thresholdtext-table"},l().createElement("tbody",{className:"rs-financeoverlay-thresholdtext-tablebody"},l().createElement("tr",{className:"rs-financeoverlay-thresholdtext-row"},l().createElement("td",{className:"rs-financeoverlay-thresholdtext-cell"},l().createElement("div",{className:"rs-financeoverlay-thresholdtext","aria-hidden":"true"},e.thresholdText))))))}))))))},If=({rows:e,footnotes:t})=>{const[a,r]=(0,s.useState)([]);return l().createElement("div",{className:"rs-payment-breakdown-wrapper"},l().createElement(vE,{index:a,handleChange:r,rootTag:"div"},e.map((e=>l().createElement(EE,{rootTag:"h3",title:`<span class="typography-eyebrow-reduced rs-payment-breakdown-accordian-title"><span>${e.header}</span> <span>${e.total}</span></span>`,iconAttrs:{"aria-hidden":"true"},classes:{root:"rs-payment-breakdown-accordian-item",button:"rs-payment-breakdown-accordian-header"},key:e.header},Array.isArray(e.rangeGroup)&&e.rangeGroup.map((t=>l().createElement("div",{className:"rs-payment-breakdown-data typography-body",key:`${e.header}-${t.label}`},l().createElement("span",{className:"large-8"},t.label),l().createElement("span",mr({className:"large-last"},qa(t.value)))))))))),t&&l().createElement("div",{className:"rs-payment-breakdown-footnotes"},t.map((e=>l().createElement("div",mr({key:e,className:"rs-payment-breakdown-footnote"},qa(e)))))))},Af=({modKey:e})=>{const[t]=Fa(e),a=sr(e,"issuer"),r=nr(e,"emiType"),n=a.props,s=r.props,{displayDynamicHeader:o,headerMap:i,noInstallmentsResponse:c,errorText:d,showInstallmentsWithTradeinTab:m,useInstallmentTableOverlay:u,cartTotal:p,showOnlyMonthlyInstallments:g,legalFooter:h,columnHeaderLabels:y,tables:E,tradeInTabHeaderMap:v,orderTotalLabel:b,orderTotal:f,issuerOptions:w,emiTypeOptions:N,paymentBreakdownTree:S,footnotes:C,showConsolidatedTerms:T}=t;let L;return L=m?l().createElement(Tf,{tradeInTabHeaderMap:v,tables:E,showInstallmentsWithTradeinTab:m,columnHeaderLabels:y}):g?l().createElement(Cf,{showInstallmentsWithTradeinTab:m,tables:E,columnHeaderLabels:y}):u?l().createElement(Lf,{cartTotal:p,tables:E,columnHeaderLabels:y,orderTotalLabel:b,orderTotal:f,compareMultipleBanksDropdownProps:n,issuerOptions:w,emiTypeOptions:N,emiOptionsRadioProps:s,emiSelectedOption:r.binding.value,showConsolidatedTerms:T}):S?l().createElement(If,{rows:S,footnotes:C}):l().createElement(kf,{cartTotal:p,columnHeaderLabels:y,tables:E}),l().createElement(Sf,{displayDynamicHeader:o,headerMap:i,noInstallmentsResponse:c,errorText:d,legalFooter:h,tradeInAndInstallments:L})},Pf=l().memo(Af),Df=({monthlyInstallmentsExists:e,financeOverlayLink:t,buttonProps:a,overlayProps:r,financeCalculatorExists:n,useInstallmentTableOverlay:s,modKey:o,financingOverlayLoading:i,showChatLink:c,topBanner:d})=>{const{viewport:m,assets:u,fragments:p}=z(),g="small"===m,h=Wa()({"rs-financeoverlay-emioverlay":s,"rs-financeoverlay-monthlyinstallments":e,"rs-financeoverlay-monthlyinstallments-breakdown":!!u.paymentBreakDownInstallmentLink}),[y,E]=l().useState([]),v=!!t&&l().createElement("button",mr({},a,qa(t),{type:"button",className:Wa()("as-buttonlink rs-financeoverlay-buttonlink",{"ribbon-link more":d}),"data-autom":"bag-installments-financing-options",id:"rs-financingOptions-overlay"}));return l().createElement(l().Fragment,null,l().createElement(ss,mr({},r,{fixedWidth:!0,ariaLabel:"financingOptions",isFullscreen:g,classes:{root:h},footerContent:c?l().createElement(zl,null):"",contentAttrs:{"data-autom":"financeOptionsOverlay"}}),n&&l().createElement(Pf,{modKey:o}),e&&l().createElement("div",{className:"rs-finance-overlay","aria-labelledby":"aprFinanceLearnMoreveOverlayHeading"},l().createElement("div",qa(ln(p.aprFinancingOverlayContent,{headerId:"aprFinanceLearnMoreveOverlayHeading"}))),l().createElement("div",{className:"rs-acmilearnmore-footnotes"},l().createElement(gi,null),l().createElement("div",null,l().createElement(vE,{rootTag:"div",index:y,handleChange:E,id:"rs-finance-footer",compact:!0},l().createElement(EE,{rootTag:"div",title:u.seeTermsConditions,withPlus:!1,withChevron:!0,role:"listitem",iconAttrs:{"aria-hidden":"true"},classes:{root:"rs-acmilearnmore-footer-item"}},l().createElement("div",qa(p.aprLearnMoreOverlayNoCardFootnote)))))))),l().createElement("div",{className:Wa()("rs-financeoverlay-link",{"rs-banneroverlay-buttonlink":d})},i?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray ","aria-label":u.processing}):l().createElement(l().Fragment,null,u.paymentCompareFinanceLinkText&&l().createElement("span",{className:"rs-financeoverlay-link-pretext"},u.paymentCompareFinanceLinkText),v),l().createElement(fr,{isPending:i,messages:{pending:u.processing}})))},Of=({modKey:e,topBanner:t})=>{const{assets:a}=z(),[r]=Ma(e,"showPaymentBreakdownLink"),n=r?`${e}.paymentBreakdownOverlay`:`${e}.financeCalculator`,[o]=Ma(e,"monthlyInstallmentsOptions"),i=Ha(e,"viewFinanceOverlay"),c=i.binding.bindExists,d=Ha(e,"viewPaymentBreakdownOverlay"),m=r?d.props:i.props,[u]=ir(n),p=xa(n),[g]=Ma(e,"financeOverlayLinkText"),[h]=Ma(ru,"partnerFinanceFromBag"),{useInstallmentTableOverlay:y,showChatLink:E}=p.data,[v,b]=(0,s.useState)(!1),f=o?{visible:v,onClose:()=>{b(!1)}}:{...u,onExited:()=>{u.onExited(),i.props&&i.props.ref.current&&i.props.ref.current.focus()}},w=o?{onClick:()=>{b(!0);Sl("Payment")}}:{...m};return l().createElement(Df,{monthlyInstallmentsExists:o,buttonProps:w,financeOverlayLink:o&&a.aprFinancingSummaryLink||r&&!h&&a.paymentBreakdownLabel||t&&a.learnMore||g||a.compareFinanceLink||c&&a.paymentCompareFinanceLink,overlayProps:f,financeCalculatorExists:p.modExists,modKey:n,useInstallmentTableOverlay:y,showChatLink:E,financingOverlayLoading:i.binding.properties.isLoadingSubmit,topBanner:t})},xf=l().memo(Of),Rf=({bagSeasonalMessage:e,bagInstallmentRestrictionMessage:t,financingMessage:a,loanOffer:r,installmentSummary:n,enableFinancingCalculatorLink:s,financeCalculatorModKey:o})=>l().createElement(l().Fragment,null,e&&l().createElement("p",qa(e)),t&&l().createElement("p",qa(t)),a&&l().createElement("div",{className:"large-12 rs-summary-financingmessage"},l().createElement("p",mr({className:"large-8 small-12"},qa(a)))),r&&l().createElement("p",qa(r)),n&&l().createElement("p",qa(n)),s&&l().createElement(xf,{modKey:o})),{NOT_SAFARI:Ff,OLD_DEVICE:Mf,OLD_SAFARI:_f,NIL:Bf,UNSUPPORTED:$f}=window.acStoreApplePaySetup.AppleCardState,Uf=[Ff,Mf,_f,Bf,$f],Kf=({modKey:e,showFinancingMessages:t,hideGetDailyCashWithAppleCardText:a})=>{const[r]=Fa(e),n=Ra(`${e}.webApplyRedirect`),s=`${e}.webApply`,{data:{applyLabel:o},properties:{isLoadingSubmit:i}}=xa(s),{fragments:{bagSeasonalMessage:c,bagInstallmentRestrictionMessage:d}}=z(),{financingMessage:m,buyflowMessages:u,showInstallmentMessage:p,showDynamicFinancing:g,creditOffer:h,loanOffer:y,installmentSummary:E,enableFinancingCalculatorLink:v,showPaymentBreakdownLink:b,financeOverlayLinkLeftAlignment:f}=r,w=Ha(s,"apply");V().get(u,"messages.additionalData.namedAssets",{}).isBFIEnabled=u&&u.isBFIEnabled;const N={hasACMessages:Boolean(t&&u),hideGetDailyCashWithAppleCardText:a,financeOverlayLinkLeftAlignment:f,webApplyButtonProps:{...w.props,isLoading:i||n,label:o,role:"link"},acMessageBootstrap:{...u,isBag:!0,bagWebApplyStates:Uf}};return l().createElement(Nf,N,l().createElement(Rf,{bagSeasonalMessage:c,installmentSummary:E,financingMessage:t?m:"",loanOffer:g&&h?y:"",bagInstallmentRestrictionMessage:p?d:"",enableFinancingCalculatorLink:v||b,financeCalculatorModKey:e}))},Vf=l().memo(Kf),{isMobileIos:Hf}=A(),jf=({summaryData:e})=>{const[t,a]=(0,s.useState)(!1),{assets:r,fragments:n,viewport:o}=z(),i="small"===o,[c,d]=l().useState([]),m=Hf?e.iosURL:e.androidURL,u=Wa()("rs-summary-financing-wrapper",{"rs-summary-label":e.showPayInFullFirst&&!e.monthlyTotalPricing,"rs-summary-value":!e.showPayInFullFirst||e.showPayInFullFirst&&e.monthlyTotalPricing});return l().createElement("div",{className:u},r.aprFinancingSummaryLink&&l().createElement("button",{type:"button",className:"as-buttonlink rs-summary-financing-link",onClick:()=>{if(a(!0),e.showPayInFullFirst){Sl("Bag")}}},l().createElement("span",mr({"aria-hidden":"true"},qa(r.aprFinancingSummaryLink))),l().createElement("span",mr({className:"visuallyhidden"},qa(r.aprFinancingSummaryLink)))),l().createElement(ss,{noPadding:!0,visible:t,onClose:()=>a(!1),isFullscreen:i,className:"rs-installment-overlay",fixedWidth:!0,ariaLabel:"aprFinanceLearnMoreveOverlayHeading"},e.partnerFinancedInstallments&&l().createElement("div",{className:"rs-acmilearnmore-overlay"},l().createElement("div",qa(ln(n.aprFinancingOverlayContent,{headerId:"aprFinanceLearnMoreveOverlayHeading",appUrl:m}))),l().createElement("div",{className:"rs-acmilearnmore-footnotes"},l().createElement(gi,null),l().createElement("div",null,l().createElement(vE,{rootTag:"div",index:c,handleChange:d,id:"rs-finance-footer",compact:!0},l().createElement(EE,{rootTag:"div",title:r.seeTermsConditions,withPlus:!1,withChevron:!0,role:"listitem",iconAttrs:{"aria-hidden":"true"},classes:{root:"rs-acmilearnmore-footer-item"}},l().createElement("div",qa(n.aprLearnMoreOverlayNoCardFootnote)))))))))},Gf=({modKey:e})=>{const[t]=Fa(e);return l().createElement(jf,{summaryData:t})},Wf=l().memo(Gf),qf=()=>{const{assets:e}=z();return l().createElement("li",mr({className:"rs-summary-onetimecharge"},qa(e.oneTimeCharge)))},Yf=({monthlyTotalPricing:e,monthlyTotalPricingLabel:t,monthlyLabelDescription:a,orKeyWord:r,downPaymentDue:n,showPayInFullFirst:s,momoInstallmentsEnabled:o,mixedTradeInMonthlyInstallmentAmount:i,mixedTradeInPayMonthlyLabel:c,mixedTradeInDiscountText:d,mixedTradeInConsumptionTax:m,mixedTradeInTotal:u,hasMixedTerms:p,mixedTradeInShippingNonFinancedText:g,mixedTradeInPaymentsTermText:h})=>{const{assets:y}=z(),E=t||c,v=e||i;return l().createElement("div",{className:"rs-summary-monthlyinstallment-price-section"},s&&l().createElement("div",{className:Wa()("rs-summary-label",{"rs-summary-or-label":e||t})},r),l().createElement("div",{className:Wa()("rs-summary-labelandvaluecontainer rs-summary-total",{"rs-pricingsummary-noborder":s})},E&&(t&&"string"==typeof t?l().createElement("div",mr({className:"rs-summary-label","data-autom":"bagtotallabel"},qa(t))):l().createElement("div",{className:"rs-summary-label","data-autom":"bagtotalvalue"},E)),v&&(e&&"string"==typeof e?l().createElement("div",mr({className:"rs-summary-value","data-autom":"bagtotalvalue"},qa(e))):l().createElement("div",mr({className:"rs-summary-value","data-autom":"bagtotalvalue"},qa(v))))),l().createElement("div",mr({className:"rs-summary-label rs-summary-monthly-desc"},qa(a))),s&&l().createElement("div",{className:"rs-summary-monthlyinstallment-details"},n&&n.map((({label:e,value:t})=>l().createElement(l().Fragment,null,l().createElement(ol,{key:`interest-${e}-${t}`,name:"interest",label:e}),l().createElement(ol,{key:`downpaymentdue-${e}-${t}`,name:"downpaymentdue",value:t})))),!e&&o&&l().createElement("div",{className:"rs-summary-label"},y.choosePreferredTerms)),!s&&!c&&l().createElement("div",{className:"rs-summary-label rs-summary-or-label"},r),p&&l().createElement(ol,{classes:"rs-mixed-terms-row",name:"mixedTradeInDiscount",label:u,value:m}),!p&&d&&l().createElement(ol,{name:"mixedTradeInDiscount",label:d,value:u}),!p&&m&&l().createElement(ol,{name:"mixedTradeInConsumptionTax",value:m}),(g||h)&&l().createElement("div",{className:"rs-summary-label"},p?h:g),p&&l().createElement("div",{className:"rs-summary-label"},d," ",g))},zf=({modKey:e})=>{const[t]=Fa(e),{monthlyTotalPricing:a,monthlyTotalPricingLabel:r,monthlyLabelDescription:n,downPaymentDue:s,showPayInFullFirst:o,momoInstallmentsEnabled:i,mixedTradeInMonthlyInstallmentAmount:c,mixedTradeInPayMonthlyLabel:d,mixedTradeInDiscountText:m,mixedTradeInConsumptionTax:u,mixedTradeInTotal:p,hasMixedTerms:g,mixedTradeInShippingNonFinancedText:h,mixedTradeInPaymentsTermText:y}=t,{assets:E}=z();return l().createElement(Yf,{monthlyTotalPricing:a,monthlyTotalPricingLabel:r,monthlyLabelDescription:n,orKeyWord:E.orKeyWord,downPaymentDue:s,showPayInFullFirst:o,momoInstallmentsEnabled:i,mixedTradeInMonthlyInstallmentAmount:c,mixedTradeInPayMonthlyLabel:d,mixedTradeInDiscountText:m,mixedTradeInConsumptionTax:u,mixedTradeInTotal:p,hasMixedTerms:g,mixedTradeInShippingNonFinancedText:h,mixedTradeInPaymentsTermText:y})},Xf=l().memo(zf),Jf=({showTooltip:e,stateDeliveryFee:t})=>{const{assets:a,viewport:r}=z(),n="small"===r;return l().createElement("div",null,l().createElement("span",{className:"rs-summary-statedeliveryfee-label"},a.stateDeliveryFeeLabel),e&&l().createElement(Eo,{className:"rs-summary-tooltip",labelA11y:a.stateDeliveryFeeLabelIconA11y,before:!n,after:n,autoAlign:!0},l().createElement(yo,null,ln(a.stateDeliveryFeeInfo,{stateDeliveryFee:t}))))},Qf=({modKey:e})=>{const[t]=Ma(e,"stateDeliveryFee"),[a]=Ma(e,"showTooltip");return l().createElement(ol,{name:"stateDeliveryFee",label:l().createElement(Jf,{showTooltip:a,stateDeliveryFee:t}),value:t})},Zf=l().memo(Qf),ew=({modKey:e,field:t,showFinancingMessages:a,hideGetDailyCashWithAppleCardText:r})=>{const{showField:n,type:s}=t;if(!n)return null;switch(s){case"summaryRow":return l().createElement(ol,{name:t.name,label:t.label,value:t.value});case"ePPPlusSummary":return l().createElement(wb,{modKey:e});case"promoCodeRow":return l().createElement(Pb,{modKey:e});case"recycleFee":return l().createElement(Cb,{modKey:e});case"taxReview":return l().createElement(xb,{modKey:e});case"taxWithTaxCalculator":return l().createElement(Mb,{modKey:e});case"pinCodeEligibility":return l().createElement($b,{modKey:e});case"totalListSavings":return l().createElement(Gb,{modKey:e});case"segmentSavings":return l().createElement(Vb,{modKey:e});case"creditInstallmentAmount":return l().createElement(Yb,{modKey:e});case"totalAmountAuthorizedRow":return l().createElement(Jb,{modKey:e});case"amountChargedToday":return l().createElement(ef,{modKey:e});case"emiDetails":return l().createElement(af,{modKey:e});case"subTotalExclusiveTax":return l().createElement(sf,{modKey:e});case"totalTaxSubValue":return l().createElement(cf,{modKey:e});case"showTaxInclusivePrices":return l().createElement(mf,{modKey:e});case"orderTotalExclusiveTax":return l().createElement(pf,{modKey:e});case"totalAmountRow":return l().createElement(yf,{modKey:e});case"monthlyInstallmentsRow":return l().createElement(Xf,{modKey:e});case"financingMessagesMarkup":return l().createElement(Vf,{modKey:e,showFinancingMessages:a,hideGetDailyCashWithAppleCardText:r});case"cashbackMessagesMarkup":return l().createElement(wf,{modKey:Ts});case"partnerFinancedInstallmentsMarkup":return l().createElement(Wf,{modKey:e});case"oneTimeChargeLabel":return l().createElement(qf,{modKey:e});case"stateDeliveryFeeDetails":return l().createElement(Zf,{modKey:e});default:return null}},tw=({name:e,label:t,value:a,subValue:r,subLabel:n,labelRed:s,labela11y:o,valuea11y:i,index:c,useLedgerSummary:d})=>{const m=e&&`rs-summary-${e.toLowerCase()}`,u=`bag${m}labelitem${c}`,p=`bag${m}valueitem${c}`,g=`bag${m}sublabelitem${c}`,h=`bag${m}subvalueitem${c}`,y=`bag${m}labelReditem${c}`,E=t&&"string"==typeof t,v=a&&"string"==typeof a,b=r&&"string"==typeof r,f=n&&"string"==typeof n,w=s&&"string"==typeof s,N=Array.isArray(s)?s.map((e=>l().createElement("div",mr({key:e,className:"rs-summary-labelred-item"},qa(e))))):s,S=Wa()("rs-summary-content",m);return l().createElement("li",{className:S,role:"listitem"},l().createElement("div",{className:"rs-summary-labelandvaluecontainer"},t&&(E?l().createElement("div",{className:"rs-summary-label","data-autom":u},l().createElement("span",mr({role:"text","aria-label":o||t},qa(t)))):l().createElement("div",{className:"rs-summary-label","data-autom":u},t))||null,a&&(v?i&&l().createElement("div",{className:"rs-summary-value","data-autom":p},l().createElement("span",mr({role:"text","aria-label":i},qa(a))))||l().createElement("div",mr({className:"rs-summary-value","data-autom":p},qa(a))):l().createElement("div",{className:"rs-summary-value","data-autom":p},a))||null),n&&(f?l().createElement("div",mr({className:Wa()("rs-summary-sublabel",{"rs-review-monthly-installment":d}),"data-autom":g},qa(n))):l().createElement("div",{className:Wa()("rs-summary-sublabel",{"rs-review-monthly-installment":d}),"data-autom":g},n))||null,r&&(b?l().createElement("div",mr({className:"rs-summary-subvalue large-last large-6 small-12","data-autom":h},qa(r))):l().createElement("div",{className:"rs-summary-subvalue large-last large-6 small-12","data-autom":h},r))||null,s&&(w?l().createElement("div",mr({className:"rs-summary-labelred","data-autom":y},qa(s))):l().createElement("div",{className:"rs-summary-labelred","data-autom":y},N))||null)},aw=({showBreakdownLink:e,headerLabel:t,paymentHeader:a,classes:r,installmentHeaderLabel:n,installmentRow:s,hasFlexibleTradeIn:o,useLedgerSummary:i,paymentBreakdownProps:c})=>{const{assets:d}=z(),m=a?"column large-9 small-12":r,u=Wa()("row rs-webinstallment-summary",{"rs-webinstallment-payment-breakdown":!!c&&e});return l().createElement("div",{className:u},a&&l().createElement("div",{className:`column large-3 small-12 rs-webinstallment-payment-header ${Jc.LABEL}`},a),l().createElement("div",{className:m},l().createElement("h3",{className:"rs-webinstallment-summary-subheader","data-autom":"bagrs-installmentsummary-subheader"},n),l().createElement("ul",{className:"rs-webinstallment-summary-list","aria-label":d.productsLabel,role:"list"},s&&s.map(((e,t)=>("productDetails"===e.name||"promoSpecialSavings"===e.name)&&l().createElement(tw,{key:e.label,name:e.name,label:e.label,subLabel:e.subLabel,labelRed:e.labelRed,value:e.value,subValue:e.subValue,labela11y:e.labela11y,valuea11y:e.valuea11y||"",index:t,useLedgerSummary:i})))),s&&s.map((t=>{let a,r;return e&&"total"===t.name&&c&&(r="rs-webinstallment-payment-breakdown-link-container",a=l().createElement("div",{className:"typography-body-reduced"},l().createElement("button",mr({},c,{type:"button",className:"rs-webinstallment-payment-breakdown-link as-buttonlink icon icon-after icon-pluscircle"}),d.paymentBreakdownLabel))),"productDetails"!==t.name&&"promoSpecialSavings"!==t.name&&l().createElement(ol,{classes:r,key:t.name,name:t.name,label:t.label,subLabel:t.subLabel,labelRed:t.labelRed,value:a||t.value,subValue:t.subValue,monthlyValue:t.monthlyValue,valuea11y:t.valuea11y||"",useLedgerSummary:i})})),t&&!o&&l().createElement("h3",{className:"rs-webinstallment-summary-subheader","data-autom":"bagrs-installmentsummary-subheader"},t)))},rw=({modKey:e,headerLabel:t,paymentHeader:a,classes:r})=>{const[n]=Fa(e),[s]=Fa(ru),o=Ha(e,"viewPaymentBreakdownOverlay"),{buyFlowInstallmentsFinancing:i,installmentsFinancing:c,hasFlexibleTradeIn:d,paidOverTimeLedger:m,paidTodayLedger:u,useLedgerSummary:p}=n,{partnerFinanceFromBag:g}=s,h=[];return m&&h.push(m),u&&h.push(u),i&&h.push(i),c&&h.push(c),h.map((e=>l().createElement(aw,{key:e,showBreakdownLink:g,headerLabel:t,paymentHeader:a,classes:r,hasFlexibleTradeIn:d,installmentHeaderLabel:e.headerLabel,installmentRow:e.row,useLedgerSummary:p,paymentBreakdownProps:o.binding.bindExists&&o.props})))},nw=l().memo(rw),sw=({fullPriceHeader:e,fullPriceRow:t,summaryData:a,classes:r})=>{const{assets:n}=z(),s=Wa()("rs-webinstallment-summary-subheader",{"rs-pricingsummary-noborder":t&&0===t.length&&!a.shipping&&a.showTaxInclusivePrices});return l().createElement("div",{className:r},l().createElement("h3",{className:s,"data-autom":"rs-fullprice-header"},e),l().createElement("ul",{className:"rs-webinstallment-summary-list","aria-label":n.productsLabel,role:"list"},t&&t.map((e=>l().createElement("li",{key:`fullprice-${e.name}`},l().createElement(ol,{name:e.name,label:e.label,labelRed:e.labelRed,value:e.value}))))))},lw=({modKey:e,classes:t})=>{const[a]=Fa(e),[r]=Ma(e,"fullPriceProducts"),{headerLabel:n,row:s}=r;return l().createElement(sw,{fullPriceHeader:n,fullPriceRow:s,summaryData:a,classes:t})},ow=l().memo(lw),iw=({oneTimeItems:e,oneTimeTotal:t,monthlyItems:a,monthlyTotal:r,totalDisclaimer:n})=>{const{assets:s}=z();return l().createElement("div",{className:"rs-bundle-summary"},e&&l().createElement("div",{className:"rs-bundle-summary-init"},l().createElement("h3",{className:"rs-bundle-summary-subheader"},s.oneTimeChargeLabel),e.map((e=>l().createElement(ol,{key:e.label,name:e.name,label:e.label,subLabel:e.subLabel,labelRed:e.labelRed,value:e.value,subValue:e.subValue,valuea11y:e.valuea11y||""}))),l().createElement(ol,{name:"total",label:s.total,value:t,key:"one-time-total"})),a&&l().createElement("div",{className:"rs-bundle-summary-monthly"},l().createElement("h3",{className:"rs-bundle-summary-subheader"},s.monthlyBundleLabel),a.map((e=>l().createElement(ol,{key:e.label,name:e.name,label:e.label,subLabel:e.subLabel,labelRed:e.labelRed,value:e.value,subValue:e.subValue,valuea11y:e.valuea11y||""}))),l().createElement(ol,{name:"total",label:s.total,value:r,subLabel:n,key:"monthly-total"})))},cw=({modKey:e})=>{const[t]=Fa(e),{oneTimeSummary:a,monthlySummary:r,totalDisclaimer:n,appleAccountBalance:s,appleAccountBalanceDisclaimer:o}=t,{items:i,total:c}=a||{},{items:d,total:m}=r||{};return l().createElement(iw,{oneTimeItems:i,oneTimeTotal:c,monthlyItems:d,monthlyTotal:m,totalDisclaimer:n,appleAccountBalance:s,appleAccountBalanceDisclaimer:o})},dw=l().memo(cw),mw=({modKey:e,classes:t,isAcmi:a,supplementalInfo:r,showFinancingMessages:n=!0,cashBackSuperscript:s,noOffset:o,hideGetDailyCashWithAppleCardText:i=!1})=>{const{assets:c,viewport:d}=z(),[m]=Fa(e),[u]=Fa(ks),[p]=Fa(Ss),g=Ra(`${e}.taxCalculator`),h=Ra(`${e}.promoCode`),y=Ra(`${e}.pinCodeEligibility`),[E]=Ma(`${e}.promoCode`,"hidePromoModule"),[v]=Ma(Is,"placements"),b=v&&v.summary,{buyFlowInstallmentsFinancing:f,installmentsFinancing:w,carrierFinancePromoSummary:N,fullPriceProducts:S,monthlySummary:C,iUPOrInstallments:T,headerLabel:L,paymentLabel:k,installmentsHeader:I,useLedgerSummary:A}=m,[P]=Ma(`${e}.ePPPlusSummary`,"epptext"),D=Boolean(f||w||A),O=Boolean(C),x=Wa()(t,{"large-9 large-offset-3 small-12 small-offset-0":!o},{"rs-summary-noline-height":f},{"rs-summary-paidovertimeledger":A}),R=Wa()({"rs-summary-webinstallment":f,"rs-webinstallment-summary-acmi":f&&a,"rs-webinstallment-summary-buyflow":f&&!a,"rs-summary-partner-financing":f&&!I,"rs-webinstallment-summary-digitalfinancing":f&&I}),{acShowInstallment:F}=Hs(),M=F&&u.displayInStack&&!f&&"small"===d?u.monthlyInstallment:"",_={acShowInstallment:F,shipping:m.shipping,epptext:P,subtotal:m.subtotal,instantCredit:m.instantCredit,amountChargedToday:m.amountChargedToday,instantCashback:m.instantCashback,emiDetails:m.emiDetails,loyaltyPointsAmount:m.loyaltyPointsAmount,downPayment:m.downPayment,paymentFullDiscount:m.paymentFullDiscount,tax:m.tax,appleBalanceApplied:m.appleBalanceApplied,totalGCsApplied:m.totalGCsApplied,noOfGiftCards:m.noOfGiftCards,taxCalculatorEnabled:m.taxCalculatorEnabled,hasTaxCalculator:g,recycleFee:m.recycleFee,fees:m.fees,hasPromoCode:h,hidePromoModule:E,upgrade:m.upgrade,installmentTerm:m.installmentTerm,installmentAmount:m.installmentAmount,total:m.total,buyFlowInstallmentsCashBackLabel:m.buyFlowInstallmentsCashBackLabel,tradeInRefund:m.tradeInRefund,savingsLabel:m.savingsLabel,totalAfterTradeIn:m.totalAfterTradeIn,totalAfterInstantTradeIn:m.totalAfterInstantTradeIn,paymentSubLabel:m.paymentSubLabel,showTotalAfterTradeinAsTotal:m.showTotalAfterTradeinAsTotal,showTaxInclusivePrices:m.showTaxInclusivePrices,taxExclusiveTax:m.taxExclusiveTax,creditInstallmentAmount:m.creditInstallmentAmount,totalSavings:m.totalSavings,totalSavingsInclusiveTax:m.totalSavingsInclusiveTax,totalListSavings:m.totalListSavings,segmentSavingsMessages:m.segmentSavingsMessages,financingMessage:m.financingMessage,enableFinancingCalculatorLink:m.enableFinancingCalculatorLink,financeOverlayLinkLeftAlignment:m.financeOverlayLinkLeftAlignment,paymentBreakdown:m.showPaymentBreakdownLink,buyflowMessages:m.buyflowMessages,installmentSummary:m.installmentSummary,cashBackOverlayLink:m.cashBackOverlayLink,hasPinCodeEligibility:y,cashBackSuperscript:s,monthlyTotal:m.monthlyTotal,partnerFinancedInstallments:m.partnerFinancedInstallments,hasFlexibleTradeIn:m.hasFlexibleTradeIn,tradeInCredit:m.tradeInCredit,outstandingLoan:m.outstandingLoan,iUPOrInstallments:m.iUPOrInstallments,paymentDetails:m.paymentDetails,totalTaxSubValue:m.totalTaxSubValue,totalTaxSubLabel:m.totalTaxSubLabel,acmiMonthlyPayment:M,acmiPayTextEnabled:u.acmiPayTextEnabled,assets:c,monthlyTotalPricing:m.monthlyTotalPricing,monthlyTotalPricingLabel:m.monthlyTotalPricingLabel,mixedTradeInMonthlyInstallmentAmount:m.mixedTradeInMonthlyInstallmentAmount,iupEstCredit:m.iupEstCredit,iupEstAfterCredit:m.iupEstAfterCredit,showPayInFullFirst:m.showPayInFullFirst,totalSavingsWithCard:m.totalSavingsWithCard,stateDeliveryFee:m.stateDeliveryFee,displayNetOfAllSavings:m.displayNetOfAllSavings,hasPartnerFinance:p.isPartnerFinancingSelectionDisabled,hideVatText:!!m.mixedTradeInConsumptionTax},B={orderTotal:m.orderTotal,subtotal:m.subtotal,installmentSubTotal:m.installmentSubTotal,subTotalExclusiveTax:m.subTotalExclusiveTax,tradeInValue:m.tradeInValue,installmentTotal:m.installmentTotal,orderTotalExclusiveTax:m.orderTotalExclusiveTax,installmentTotalFinanced:m.installmentTotalFinanced,downPayment:m.downPayment,shipping:m.shipping,tradeinCreditSecured:m.tradeinCreditSecured,tax:m.tax,hasTaxCalculator:g,recycleFee:m.recycleFee,fees:m.fees,hasPromoCode:h,hidePromoModule:E,installmentsremainingpayments:m.installmentsremainingpayments,firstInstallmentAmount:m.firstInstallmentAmount,upgrade:m.upgrade,totalCardCharge:m.totalCardCharge,amountAuthorized:m.amountAuthorized,totalAmountAuthorized:m.totalAmountAuthorized,psd2Enabled:m.psd2Enabled,financingMessage:m.financingMessage,enableFinancingCalculatorLink:m.enableFinancingCalculatorLink,buyflowMessages:m.buyflowMessages,installmentSummary:m.installmentSummary,cashBackOverlayLink:m.cashBackOverlayLink,tradeInCredit:m.tradeInCredit,iUPOrInstallments:m.iUPOrInstallments,hasFlexibleTradeIn:m.hasFlexibleTradeIn,outstandingLoan:m.outstandingLoan,tradeInType:m.tradeInType,stateDeliveryFee:m.stateDeliveryFee,assets:c},$=db(_),U=mb(B),K=O?l().createElement(dw,{modKey:e}):$.map((t=>l().createElement(ew,{key:`summary-${t.name||t.type}`,modKey:e,field:t,showFinancingMessages:n,hideGetDailyCashWithAppleCardText:i}))),V=U.map((t=>l().createElement(ew,{key:`iUP-summary-${t.name||t.type}`,modKey:e,field:t,showFinancingMessages:n,hideGetDailyCashWithAppleCardText:i})));return l().createElement(vb,{summaryClasses:x,wrapperClass:R,webInstallmentSummary:D&&l().createElement(nw,{modKey:e,headerLabel:L,paymentHeader:k,classes:x}),fullPriceProductSummary:Boolean(S)&&l().createElement(ow,{modKey:e,classes:x}),hasCarrierFinancePromoSummary:Boolean(N),hasIUPOrInstallments:Boolean(T),summaryModKey:e,supplementalInfo:r,summaryField:K,iUpSummaryField:V,showFinancingMessages:n,xMerchSummary:b})},uw=l().memo(mw),pw=({footnotes:e=[]})=>{const{assets:t}=z(),a=e.join("");return l().createElement("div",{className:"as-footnotes"},l().createElement("div",{className:"as-footnotes-content"},l().createElement("ul",mr({className:"as-footnotes-sosumi","aria-label":t.footnotesA11y,role:"list"},qa(a)))))},gw=({modKey:e,buyFlowInstallments:t=!1,paymentsBuyFlowInstallments:a=!1,buyflowMessageFootNote:r=!1,webapplyLoan:n=!1,hasAcmiPaymentOption:s=!1,appleCardApply:o=!1,returnToShopForAcmi:i=!1,acmiSelected:c=!1,partnerFinancedInstallment:d=!1,acmiCheckout:m=!1,acmiFromBag:u=!1,partnerFinanceFromBag:p=!1,thankYouacmiSelected:g=!1,hasTradeIn:h=!1,webapplyInstallmentsFootnote:y=!1,webapplyInstallmentsApprovedFootnote:E=!1,hasTradeinTopics:v=!1,hasMonthlyPricing:b=!1,getReadyAcmi:f=!1})=>{const[w]=Fa(e),{assets:N,fragments:S}=z(),C=V().get(w,"carrierFinancePromo.carrierId","").toUpperCase(),T=`carrierFinanceFootNote_${C}`,L=`carrierPromoTaxDisclaimer_${C}`,{acShowInstallment:k}=Hs(),I=w.bugattiTradeInFootNotes&&Array.isArray(w.bugattiTradeInFootNotes),A=w.financingMessageEnabled&&Ul,P=[];return A&&S.financeFootnote&&P.push(`<li class="as-footnotes-finance" role="listitem">${S.financeFootnote}</li>`),S.webapplyLegacyACCFooter&&P.push(`<li role="listitem">${S.webapplyLegacyACC}</li>`),n&&S.webapplyLoan&&P.push(`<li role="listitem">${S.webapplyLoan}</li>`),r&&S.buyflowMessageFootNote&&P.push(`<li role="listitem">${S.buyflowMessageFootNote}</li>`),S.bagGenericFootNote&&P.push(`<li role="listitem">${S.bagGenericFootNote}</li>`),S.checkoutGenericFootNote&&P.push(`<li role="listitem">${S.checkoutGenericFootNote}</li>`),a&&S.paymentsBuyFlowInstallments&&P.push(`<li role="listitem">${S.paymentsBuyFlowInstallments}</li>`),(t||p)&&S.buyFlowInstallmentsFootnotes&&P.push(`<li role="listitem">${S.buyFlowInstallmentsFootnotes}</li>`),!I&&w.carrierFinanceNoPromo&&S.carrierFinanceNoPromoFootNote&&P.push(`<li role="listitem">${ln(S.carrierFinanceNoPromoFootNote,{carrierName:w.carrierFinanceNoPromo.carrierName,monthlyPayments:w.carrierFinanceNoPromo.monthlyPayments,tradeInProductName:w.carrierFinanceNoPromo.tradeInProductName,productName:w.carrierFinanceNoPromo.productName,superScript:w.carrierFinanceNoPromo.superScript,apr:w.carrierFinanceNoPromo.apr})}</li>`),o&&S.appleCardApplyFootnote&&P.push(`<li role="listitem">${S.appleCardApplyFootnote}</li>`),!w.tradeInDisclaimerEnabled&&(k||u||d||f)&&(c||f||!S.acmiBagFootnote?(c||f)&&S.acmiIphoneBagFootnote&&P.push(`<li role="listitem">${S.acmiIphoneBagFootnote}</li>`):P.push(`<li role="listitem">${S.acmiBagFootnote}</li>`)),k||u||!S.acmiIneligibleFootnote||P.push(`<li role="listitem">${S.acmiIneligibleFootnote}</li>`),m&&S.acmiCheckoutFootnote&&P.push(`<li role="listitem">${S.acmiCheckoutFootnote}</li>`),u&&P.push(`<li role="listitem">${S.acmiDeliveryPickupFootnote}</li>`),s&&S.acmiPaymentFootnote&&P.push(`<li role="listitem">${S.acmiPaymentFootnote}</li>`),(o||s)&&S.appleCardPaymentFootnote&&P.push(`<li role="listitem">${S.appleCardPaymentFootnote}</li>`),i&&S.acmiFulfillmentFootnote&&P.push(`<li role="listitem">${S.acmiFulfillmentFootnote}</li>`),w.hasPartnerFinanceInstallment&&S.paymentPartnerFinanceFootnote&&P.push(`<li role="listitem">${S.paymentPartnerFinanceFootnote}</li>`),w.tradeInDisclaimerEnabled&&S.tradeInDisclaimerFootnote&&P.push(`<li role="listitem">${S.tradeInDisclaimerFootnote}</li>`),!I&&w.carrierFinancePromo&&S[T]&&(P.push(`<li role="listitem">${ln(S[T],{superScript:w.carrierFinancePromo.superScript})}</li>`),w.carrierFinancePromo.taxDisclaimer&&S[L]&&P.push(`<li role="listitem">${S[L]}</li>`)),w.totalAfterTradeInEnabled&&N.priceAfterTradeInDisclaimer&&P.push(`<li role="listitem">${N.priceAfterTradeInDisclaimer}</li>`),w.tradeInRefundEnabled&&N.tradeInRefundDisclaimer&&P.push(`<li role="listitem">${N.tradeInValueDagger} ${N.tradeInRefundDisclaimer}</li>`),N.giftCardDisclaimer&&P.push(`<li role="listitem">${N.giftCardDisclaimer}</li>`),N.loanDisclaimer&&!d&&P.push(`<li role="listitem">${N.loanDisclaimer}</li>`),y&&!E&&S.webapplyInstallmentsFootnote&&P.push(`<li role="listitem">${S.webapplyInstallmentsFootnote}</li>`),E&&S.webapplyInstallmentsApprovedFootnote&&P.push(`<li role="listitem">${S.webapplyInstallmentsApprovedFootnote}</li>`),w.showInstantTradeUpValueDisclaimer&&N.instantTradeInRefundDisclaimer&&P.push(`<li role="listitem">${N.instantTradeInRefundDisclaimer}</li>`),w.showLoanDisclaimer&&S.showLoanDisclaimer&&P.push(`<li role="listitem">${S.showLoanDisclaimer}</li>`),N.footerPricing&&P.push(`<li role="listitem">${N.footerPricing}</li>`),g&&S.thankyouacmiSelected&&P.push(`<li role="listitem">${S.thankyouacmiSelected}</li>`),N.footerEncryptionMsg&&P.push(`<li role="listitem">${N.footerEncryptionMsg}</li>`),N.signInFooterEncryptionMsg&&P.push(`<li role="listitem">${N.signInFooterEncryptionMsg}</li>`),w.exitWithBuyUp&&P.push(`<li role="listitem">${N.dynamicFootnotes}</li>`),w.isMonthlyProminent&&P.push(`<li role="listitem">${S.isMonthlyProminentFootnotes}</li>`),h&&P.push(`<li role="listitem">${S.isTradeInFootnotes}</li>`),I&&w.bugattiTradeInFootNotes.map((e=>P.push(`<li role="listitem">${e}</li>`))),v&&P.push(`<li role="listitem">${S.tradeinTopicsFootnotes}</li>`),S.monthlyPricingFootnotes&&b&&P.push(`<li role="listitem">* ${S.monthlyPricingFootnotes}</li>`),P.length?l().createElement(pw,{footnotes:P}):null},hw=({showIcon:e,iconImageProp:t,description:a,learnMore:r,hasOverlay:n})=>{const{assets:s}=z(),o="rs-installment-banner";return l().createElement("div",{className:o},l().createElement("div",{className:Wa()({"as-icondetails":e},{"rs-installment-banner-container":!e}),"data-autom":"rs-installment-banner"},e&&l().createElement("div",{className:"as-icondetails-icon"},l().createElement(Il,mr({},t,{"aria-hidden":"true"}))),l().createElement("div",{className:Wa()(`${o}-content`,{"as-icondetails-detail":e})},l().createElement("div",{className:`${o}-description`},l().createElement("span",qa(`${a} `)),n&&l().createElement("button",mr({type:"button",className:"as-buttonlink as-buttonlink-inline","data-autom":"installments-learn-more-link"},r.props),l().createElement("span",mr({"aria-hidden":"true"},qa(s.learnMore))),l().createElement("span",{className:"visuallyhidden"},s.acmiLearnMoreA11y))))))},yw=({acmiWithCard:e,acmiNoCard:t,showPartnerInstallment:a,applyButton:r,appUrl:n,...s})=>{const{fragments:o,assets:i,viewport:c}=z(),d="small"===c,[m,u]=l().useState([]);return l().createElement(ss,mr({},s,{noPadding:!0,isFullscreen:d,className:"rs-installment-overlay",fixedWidth:!0}),e&&l().createElement("div",qa(ln(o.acmiLearnMoreOverlayContent,{headerId:"acmiLearnMoreveOverlayHeading"}))),t&&l().createElement(l().Fragment,null,l().createElement("div",qa(ln(o.acmiNoCardLearnMoreOverlayHeader,{headerId:"acmiLearnMoreveOverlayHeading"}))),l().createElement("div",{className:"rs-installment-action"},l().createElement(os,mr({},r.props,{className:"large-6 small-12"}),r.label)),l().createElement("div",qa(o.acmiNoCardLearnMoreOverlayFooter))),a&&l().createElement("div",{className:"rs-acmilearnmore-overlay"},l().createElement("div",qa(ln(o.aprFinancingOverlayContent,{headerId:"aprFinanceLearnMoreveOverlayHeading",appUrl:n}))),l().createElement("div",{className:"rs-acmilearnmore-footnotes"},l().createElement(gi,null),l().createElement("div",null,l().createElement(vE,{rootTag:"div",index:m,handleChange:u,id:"rs-finance-footer",compact:!0},l().createElement(EE,{rootTag:"div",title:i.seeTermsConditions,withPlus:!1,withChevron:!0,role:"listitem",iconAttrs:{"aria-hidden":"true"},classes:{root:"rs-acmilearnmore-footer-item"}},l().createElement("div",qa(o.aprLearnMoreOverlayNoCardFootnote))))))))},{isMobileIos:Ew}=A(),vw=({positionTop:e})=>{const{assets:t}=z(),[a,r]=(0,s.useState)(!1),[n]=Fa(fs),[o]=Ma(Ts,"buyflowMessages"),i=Ra(`${Ts}.webApplyRedirect`),{data:c,properties:{isLoadingSubmit:d}}=xa(Ps),{acAvailable:m}=Hs(),u=V().get(o,"messages.additionalData.namedAssets",{});u.isBFIEnabled=o&&o.isBFIEnabled;const{appleCardLogo:p,topBannerDescription:g,topNoCardBannerDescription:h,bannerDescription:y,noCardBannerDescription:E,partnerFinancedInstallments:v,hasPartnerPromo:b,iosURL:f,androidURL:w,hasInstallmentIneligibilityMessage:N}=n,{state:S,handleOpenOverlay:C,handleCloseOverlay:T,handleApplyClick:L,handleWebApplyClick:k,handleContinueClick:I}=Bn({bootstrap:{...o}});let A="";A=v||b||N?y:e?m?g:h:m?y:E;const P=!(e||b||N),D={positionTop:e,showIcon:!e&&p,iconImageProp:p&&{src:p.src,data:{height:p.height,width:p.width}},description:A,learnMore:{props:{onClick:()=>{r(!0),v?Us({name:"metrics",data:{hier1:"aos:bag",prop3:"open modal | installment |ribbon| D=pageName",evar6:'D=pageName+"|ribbon|learn more - installment|open modal"'}}):C({metricsKey:"bagLearnMoreLink"})}}},hasOverlay:P},O=Ha(Ps,"apply"),x={label:S.isCompleted?u.continue:u.apply};S.canNativeApply&&!S.isCompleted?x.props={onClick:e=>{L(e)}}:S.isCompleted?x.props={onClick:e=>{r(!1),I(e)}}:S.hasNativeState||(x.label=c.applyLabel||t.apply,x.props={...O.props,isLoading:d||i,label:c.applyLabel,role:"link",onClick:e=>{O.props.onClick(e),k(e,{metricsKey:"bagLearnMoreWebApply"})}});const R=Ew?f:w,F=P&&{acmiWithCard:!n.partnerFinancedInstallments&&m,acmiNoCard:!(n.partnerFinancedInstallments||m),showPartnerInstallment:n.partnerFinancedInstallments,visible:a,ariaLabel:n.partnerFinancedInstallments?"aprFinanceLearnMoreveOverlayHeading":"acmiLearnMoreveOverlayHeading",onClose:e=>{r(!1),T(e)},applyButton:x,appUrl:R};return l().createElement(l().Fragment,null,l().createElement(hw,D),P&&l().createElement(yw,F))},bw=l().memo(vw),fw=({messages:e,messagesLastUpdated:t,hasTradeIn:a,acmiSelected:r,installmentsSelected:n,children:s})=>{const{assets:o}=z();return l().createElement("div",null,!(r||n)&&l().createElement("h2",{className:"rs-bag-installment-actions-label"},o.paymentOptionsHeader),l().createElement(qs,{messages:e,lastUpdated:t}),l().createElement("div",{className:Wa()("row","rs-bag-installment-actions",{"rs-bag-installment-tradein":a},{"rs-bag-installment-acmi":r||n})},s))},ww=({overlayProps:e,acmiSelected:t,overlayData:a,installmentCheckoutButton:r,modKey:n,informational:s})=>{const{assets:o,fragments:i,viewport:c}=z(),{acAvailable:d}=Hs(),m="rs-installmentcheckout",{appleCardLabel:u,itemsBilledSeparately:p,acmiOtbValue:g,carrierFinancePromo:h,installmentMessage:y}=a,E=h?i[`carrierFinanceFootNote_${h.carrierId.toUpperCase()}`]:"",v=l().createElement(l().Fragment,null,i.acmiOverlayFootnote&&l().createElement("div",mr({className:`${m}-footer${h?" rs-carrierfinance-footer":""}`},qa(d?i.acmiOverlayFootnote:i.acmiOverlayNoCardFootnote))),h&&E&&l().createElement("div",mr({className:`${m}-footer`},qa(ln(E,{carrierName:h.carrierName,monthlyPayments:h.monthlyPayments,carrierInstallmentPlan:h.carrierInstallmentPlan,productName:h.productName,superScript:h.superScript,apr:h.apr}))))),b="small"===c;return l().createElement(ss,mr({},e,{className:`${m}-overlay`,isFullscreen:b,noPadding:!0,fixedWidth:!0,footerContent:v,ariaLabel:"appleCardInstallmentHeader"}),l().createElement("div",{className:`${m}-overlay-content`},u&&l().createElement("div",{className:`${m}-cardlabel`,"aria-hidden":"true"},u),l().createElement("h2",mr({id:"appleCardInstallmentHeader",className:`${m}-header`},qa(o.acmiOverlayHeader))),l().createElement("div",mr({className:`${m}-subheader`},qa(d?i.acmiOverlayDescription:i.acmiOverlayNoCardDescription))),!d&&l().createElement("div",mr({className:`${m}-benefits`},qa(i.acmiOverlayCardBenefits))),l().createElement(uw,{modKey:n,classes:`large-12 ${m}-summary`,cashBackSuperscript:d?a.hasCardSuperscript:a.noCardSuperscript,isAcmi:!0,noOffset:!0}),p&&l().createElement("div",{className:"rs-bag-itembilled-separately"},l().createElement(JE,{modKey:n})),g&&l().createElement("div",mr({className:"rs-acmiotb large-8 small-12"},qa(ln(d?i.otbMessageWithAppleCard:i.otbMessageWithoutAppleCard,{acmiOtbValue:g})))),!s&&l().createElement("div",{className:Wa()("rs-installmentcheckout-bottom-wrapper","row",{"rs-installmentcheckout-withinstallment":y})},l().createElement("div",{className:`${m}-bottom`},l().createElement(os,mr({},r.props,{disabled:r.props.disabled||r.isLoading,"data-autom":"bag-checkout-button","aria-describedby":"bag-checkoutbutton-installment-message",isLoading:r.isLoading,className:"rs-bag-checkoutbutton"}),t?o.acmiCheckoutLabel:o.checkoutLabel),y&&l().createElement("div",mr({id:"bag-checkoutbutton-installment-message",className:`${m}-message`,"aria-hidden":"true"},qa(y)))))))},Nw=({informational:e,continueButtonRef:t})=>{const[a]=Fa(ks),{acmiSelected:r,partnerFinancedInstallments:n}=a,s=e?"shoppingCart.summary.cartInstallmentOverlay":"shoppingCart.actions.installmentCheckoutOverlay",[o]=ir(s),{data:i,properties:{isLoadingSubmit:c}}=xa(s),{acAvailable:d,acSupportInstallment:m}=Hs(),u=Ha(s,m?"nativeInstallmentsCheckout":"installmentsCheckout"),p={...o,onExited:()=>{o.onExited(),t&&t.current&&t.current.focus()}};return l().createElement(ww,{overlayProps:p,overlayData:i,acmiSelected:r,modKey:s,informational:e,installmentCheckoutButton:{isLoading:c,props:{...u.props,onClick:e=>{u.props.onClick(e),(({acAvailable:e,acSupportInstallment:t,partnerFinancedInstallments:a})=>{Us({name:"metrics",data:{hier1:"aos:bag",eVar1:`aos:bag|${a?"installment":"acmi"} option|${e?"check out":"continue"}`,[$s]:"aos:bag",eVar17:t?"apy-220-100006":"apy-220-100010",events:"event287"}})})({acAvailable:d,acSupportInstallment:m,partnerFinancedInstallments:n})}}}})},Sw=l().memo(Nw),Cw=({acmiSelected:e,installmentsSelected:t,...a},r)=>{const{assets:n}=z();return l().createElement(os,mr({},a,{id:"cart-actions-installmentCheckout","data-autom":"bag-checkout-button","aria-describedby":"bag-instalment-button-due-detail",className:"rs-bag-installmentbutton",ref:r}),l().createElement("span",qa(e||t?n.continueCheckoutLabel:n.acmiCheckoutLabel)))},Tw=l().forwardRef(Cw),Lw=()=>{const{acAvailable:e}=Hs(),[t]=Fa(ks),{acmiSelected:a,installmentsSelected:r,partnerFinancedInstallments:n}=t,s=Ha(ks,"continueWithInstallmentCheckout"),o=V().get(s,"props.ref",null),i={...s.props,isLoading:V().get(s,"binding.properties.isLoadingSubmit",!1),disabled:s.props.disabled||V().get(s,"binding.properties.isLoadingSubmit",!1),onClick:t=>{s.props.onClick(t),(({acAvailable:e,partnerFinancedInstallments:t})=>{const a=t?"installment":"acmi";Us({name:"metrics",data:{hier1:"aos:bag",channel:"aos:bag",prop3:`open modal|${a} option|${e?"check out":"learn more and apply"}`,[$s]:"aos:bag",[Bs]:`view|${a} benefits and ledger`}})})({acAvailable:e,partnerFinancedInstallments:n})}};return l().createElement(l().Fragment,null,s.binding.bindExists&&l().createElement(Tw,mr({acmiSelected:a,installmentsSelected:r},i)),l().createElement(Sw,{continueButtonRef:o}))},kw=l().memo(Lw),Iw=({isBagHeader:e,apwStrongDefault:t,showApplePay:a,showCheckoutButton:r,mainButton:n,addButton:s,continueButton:o,otherButton:i,applePayButton:c,showInstallmentAction:d})=>{const{assets:m}=z();return l().createElement("div",{className:Wa()("rs-bag-checkoutbuttons-wrapper",{"rs-bag-applepay-strong-default":t},{"rs-bag-applepay-enabled":a},{"rs-bag-checkout-mainbutton-show":r})},n&&l().createElement("div",{className:"rs-bag-checkoutbutton rs-bag-checkout-mainbutton"},l().createElement(os,mr({},n.props,{hasDefaultClass:!e,isLoading:n.isLoading,className:Wa()({"button button-block":e}),"data-autom":"checkout"}),n.label)),s&&l().createElement("div",{className:"rs-bag-checkoutbutton rs-bag-checkout-mainbutton"},l().createElement(os,mr({},s.props,{hasDefaultClass:!e,isLoading:s.isLoading,className:Wa()({"button button-block":e})}),s.label)),o&&l().createElement("div",{className:"rs-bag-checkoutbutton rs-bag-checkout-continuebutton"},l().createElement(os,mr({},o.props,{hasDefaultClass:!e,isLoading:o.isLoading,className:Wa()({"button button-block":e})}),o.label)),i&&l().createElement("div",{className:"rs-bag-checkoutbutton rs-bag-checkout-otheroptions"},l().createElement(os,mr({},i.props,{hasDefaultClass:!e,isLoading:i.isLoading,className:Wa()({"button button-block":e})}),i.label)),d&&l().createElement("div",{className:"rs-bag-checkoutbutton rs-bag-checkout-installment"},l().createElement(kw,null)),c&&l().createElement("div",{className:Wa()("rs-bag-checkoutbutton","rs-bag-applepay",{"rs-bag-applepay-activecard":c.apwActive})},l().createElement(os,mr({},c.props,{hasDefaultClass:!e,isLoading:c.isLoading,className:Wa()({"rs-applepay":!t},{"button button-block":e})}),c.label),c.apwPromoMessage&&l().createElement("p",mr({className:"rs-bag-applepay-promo"},qa(c.apwPromoMessage))),c.isShowApplePayFullPaymentOnlyMessage&&l().createElement("p",mr({className:"rs-bag-applepay-paymentinfo rs-bag-applepay-promo"},qa(m.applePayFullPayOnlyMessage)))))},Aw=({isBagHeader:e=!1,showInstallmentAction:t=!1})=>{const{assets:a}=z(),{showCheckoutButton:r}=Hs(),[n]=Fa(ks),[o]=Fa(Es),{apwEnabled:i,financeMessage:c,hideFinance:d,apwStrongDefault:m,disableCheckout:u,enableCheckout:p,disableAddToCart:g,merchantIdentifier:h="",isShowApplePayFullPaymentOnlyMessage:y}=n,{savedCart:E,sharedCart:v}=o;let b=e?"navCheckout":"checkout",f="";v?(b=p?b:"",f=p?"":"addAllToCart"):E?(b=p?b:"",f=g?"":"addAllToCart"):b=u?"saveCart":b;const w=Ha(ks,b),N=Ha(ks,f,{disableFocusSync:!0}),S=Ha(ks,"continueToSignIn"),C=Ha(ks,e?"navCheckoutOtherPayments":"checkoutOtherPayments"),T=Ha(ks,e?"navApwCheckout":"apwCheckout"),L=i&&!(Ul&&d),k=Ul&&c&&!e?c:a.applePayPromo,I=V().get(S,"binding.properties.isLoadingSubmit",!1)||V().get(S,"binding.properties.polling",!1);return(0,s.useEffect)((()=>{Ul&&c&&El({name:"metrics",data:{events:"event330"}})}),[c]),l().createElement(Iw,{isBagHeader:e,showInstallmentAction:t,apwStrongDefault:m,showApplePay:L,showCheckoutButton:r,mainButton:(p||w.binding.bindExists)&&{label:u?a.saveBagLabel:a.checkoutLabel,isLoading:V().get(w,"binding.properties.isLoadingSubmit",!1),props:{...w.props,disabled:w.props.disabled||V().get(w,"binding.properties.isLoadingSubmit",!1)}},addButton:N.binding.bindExists&&{label:v?a.addToBag:a.addAllToBag,isLoading:V().get(N,"binding.properties.isLoadingSubmit",!1),props:{...N.props,id:e?`${N.props.id}-header`:N.props.id,disabled:N.props.disabled||V().get(N,"binding.properties.isLoadingSubmit",!1)}},continueButton:S.binding.bindExists&&{label:a.continue,isLoading:I,props:{...S.props,disabled:S.props.disabled||I}},otherButton:!m&&L&&C.binding.bindExists&&{label:a.checkoutLabel,isLoading:V().get(C,"binding.properties.isLoadingSubmit",!1),props:{...C.props,disabled:C.props.disabled||V().get(C,"binding.properties.isLoadingSubmit",!1)}},applePayButton:L&&T.binding.bindExists&&{apwActive:Boolean(h),label:m?a.checkoutLabel:a.checkoutWithApplePayLabel,isLoading:V().get(T,"binding.properties.isLoadingSubmit",!1),apwPromoMessage:k,isShowApplePayFullPaymentOnlyMessage:y,props:{...T.props,disabled:T.props.disabled||V().get(T,"binding.properties.isLoadingSubmit",!1)}}})},Pw=l().memo(Aw),Dw=({hasTradeIn:e,total:t,totalAfterTradeIn:a,showTaxInclusivePrices:r})=>{const{assets:n}=z();return l().createElement("div",{className:"column large-6 small-12 rs-bag-payinfull rs-bag-actions-box-wrapper"},l().createElement("div",{className:"rs-bag-actions-box"},l().createElement("div",{className:"rs-bag-actions-box-title"},l().createElement("div",{className:"rs-bag-actions-box-paymentlabel"},n.fullPaymentLabel),l().createElement("div",null,`${t}${r?n.taxIncludedLabel:""}`)),l().createElement("div",{className:"rs-bag-actions-box-message"},e&&l().createElement(l().Fragment,null,l().createElement("div",null,n.totalAfterTradeInLabel),l().createElement("div",null,a))),l().createElement(Pw,null),l().createElement("div",{className:"rs-bag-actions-box-promo"},n.dailyCashPromo)))},Ow=({forcePartnerFinanceSelectionEnabled:e,hasInstallmentTradeIn:t,dueToday:a,monthlyInstallment:r,showAcmiDailyCashPromo:n})=>{const{assets:s}=z(),o=Wa()("column large-6 small-12 rs-bag-installment rs-bag-actions-box-wrapper",{"rs-bag-installmentbutton-container":e});return l().createElement("div",{className:o},e?l().createElement(kw,null):l().createElement("div",{className:"rs-bag-actions-box"},l().createElement("div",{className:"rs-bag-actions-box-title"},l().createElement("div",mr({className:"rs-bag-actions-box-paymentlabel"},qa(s.acmiPaymentLabel))),l().createElement("div",qa(r))),l().createElement("div",{className:"rs-bag-actions-box-message"},t&&l().createElement("div",qa(s.acmiTradeInMessage))),l().createElement("div",{className:"rs-applecardinstallment-checkout"},l().createElement(kw,null)),l().createElement("div",mr({id:"bag-instalment-button-due-detail",className:"rs-bag-actions-box-footer"},qa(a))),n&&l().createElement("div",{className:"rs-bag-actions-box-promo"},s.acmiDailyCashPromo)))},xw=()=>{const{viewport:e}=z(),[t,a]=_a(ks),[r]=Fa(ks),{acmiSelected:n,installmentsSelected:s,forcePartnerFinanceSelectionEnabled:o,hasTradeIn:i,hasInstallmentTradeIn:c,dueToday:d,monthlyInstallment:m,total:u,totalAfterTradeIn:p,partnerFinancedInstallments:g,showTaxInclusivePrices:h}=r,y={hasTradeIn:i,total:u,totalAfterTradeIn:p,showTaxInclusivePrices:h},E={forcePartnerFinanceSelectionEnabled:o,hasInstallmentTradeIn:c,dueToday:d,monthlyInstallment:m,showAcmiDailyCashPromo:!g};return l().createElement(fw,{messages:t,messagesLastUpdated:a,hasTradeIn:i,acmiSelected:n,installmentsSelected:s},"small"===e?l().createElement(l().Fragment,null,!(n||s)&&l().createElement(Dw,y),l().createElement(Ow,E)):l().createElement(l().Fragment,null,l().createElement(Ow,E),!(n||s)&&l().createElement(Dw,y)))},Rw=l().memo(xw),Fw=({isBagHeader:e,isLoading:t,showInstallmentAction:a,notEligibleForAcmi:r,displayInStack:n})=>{const{assets:s}=z(),o=Wa()("row",{"rs-bag-checkoutbutton-header":e,"rs-bag-checkoutbutton-bottom":!e}),i=Wa()("small-12 small-offset-0",{"large-12":e,"large-9 large-offset-3":!e}),c=!(n||e)&&a,d=n||!a;return l().createElement("div",{className:o},l().createElement(fr,{isPending:t,messages:{pending:s.processing}}),l().createElement("div",{className:i},c&&l().createElement(Rw,null),d&&l().createElement(Pw,{isBagHeader:e,showInstallmentAction:a}),r&&l().createElement("div",mr({className:"rs-bag-noteligibleforacmi"},qa(r)))))},Mw=({isBagHeader:e})=>{const{assets:t,viewport:a}=z(),{data:{enableCheckout:r,displayInStack:n},properties:{isLoadingSubmit:s}}=xa(ks),{data:{savedCart:o,sharedCart:i},properties:{isLoadingSubmit:c}}=xa(Es),[d]=Fa(Ss),{acShowInstallment:m,showInstallmentTile:u}=Hs(),p=m?"":t.notEligibleForAcmi,g=m&&(e||u)&&(!(o||i)||o&&r)&&!d.isPartnerFinancingSelectionDisabled;return l().createElement(Fw,{isBagHeader:e,isLoading:c||s,showInstallmentAction:g,notEligibleForAcmi:p,displayInStack:n&&"small"===a})},_w=l().memo(Mw),Bw=({header:e,value:t,options:a,radioProps:r})=>l().createElement("div",{className:"large-5 small-12 large-centered rs-bag-pricingselector"},l().createElement("fieldset",null,l().createElement("legend",{className:"rs-bag-pricingselectorheader"},e),l().createElement("div",{className:"as-buttongroup"},a.map(((e,a)=>l().createElement("div",{className:"as-buttongroup-item large-6",key:e.value},l().createElement("input",mr({},r,{type:"radio",value:e.value,checked:t===e.value,id:`pricingOptionButton${a}`,name:"pricingOptionButtonGroup",className:"as-buttongroup-radio","data-autom":`pricing-option-${e.value}`})),l().createElement("label",{htmlFor:`pricingOptionButton${a}`,className:"as-buttongroup-button large-12"},l().createElement("span",{className:"rs-bag-optionstitle"},l().createElement("div",null,e.title),l().createElement("div",{className:"form-label"},e.pricing))))))))),$w=()=>{const e=xa(Ds),t=nr(Ds,"selectPricing");return e.modExists?l().createElement(Bw,{header:e.data.header,value:t.binding.value,options:e.data.options,radioProps:t.props}):null},Uw=l().memo($w),Kw=({headerText:e,headerMessage:t,ariaLiveMessage:a,emiPrice:r,isSavedBag:n,bagId:s,savedBagListUrl:o,pricingDisclaimer:i,messages:c,messagesLastUpdated:d,showCheckoutButtons:m,headerRef:u,hasBanner:p})=>{const{assets:g}=z(),h=Wa()({"rs-bag-button-header":m,"large-12":m,"large-8":!m,"small-12":!m,"rs-header-noborder":p,"rs-saved-bag":n}),y=Boolean(n&&o);return l().createElement("div",{className:h},e&&l().createElement("h1",mr({ref:u,className:"rs-bag-header","data-autom":"bag-header",tabIndex:"-1"},qa(e))),l().createElement("span",{className:"visuallyhidden","aria-live":"polite"},a),r&&l().createElement("div",{className:"rs-bag-header-emiprice"},l().createElement("span",{"aria-hidden":"true"},ln(g.orderInstallmentPriceLabel,{orderInstallmentPrice:r})),l().createElement("span",{className:"visuallyhidden"},ln(g.orderInstallmentPriceLabelA11y,{orderInstallmentPrice:r}))),t&&l().createElement("div",mr({className:"rs-bag-headermessage"},qa(t))),n&&l().createElement("div",{className:"rs-savedbag-id"},g.bagId," ",s),l().createElement(qs,{messages:c,lastUpdated:d}),l().createElement(Uw,null),i&&l().createElement("div",mr({className:"rs-bag-pricingdisclaimer"},qa(i))),m&&l().createElement(_w,{isBagHeader:!0}),y&&l().createElement("div",{className:"rs-savedbag-listlink"},l().createElement("a",{href:o},g.viewAllSavedBags,l().createElement("span",{className:"more","aria-hidden":"true"}))))},Vw=({headerRef:e})=>{const{assets:t}=z(),[a]=Fa(Es),[r]=Ma(ks,"disableStickyNav"),[n]=Ma(Ts,"total"),[o]=Ma(Ts,"orderInstallmentPrice"),[i]=Ma(Ts,"suppressDefaultInstallmentDisplays"),[c]=Fa(Ds),d=xa(Is),[m]=Fa(Os),[u,p]=_a(Os),g=c.emiAmount||n,h=a.savedCart,[y]=Fa(fs),E=Ra(bs),{bindExists:v}=Ua(ks,"continueToSignIn"),{acShowInstallment:b}=Hs(),[f]=Ma(vs,"splitQuantity");let w="";w=h?t.savedBagHeader:a.sharedCart?t.sharedBagHeader:b?t.acmiBagHeader:y.priceHeader?y.priceHeader:ln(t.itemsHeader,{price:g});let N="";d.modExists&&(N=d.data.placements&&d.data.placements.middle?d.data.placements.middle:d.data.iPhoneLimitWarningMesssage);const S={headerText:w,headerMessage:N,emiPrice:i?"":o,ariaLiveMessage:f?ln(t.splitQuantityUpdateA11y,{quantity:f}):"",isSavedBag:h,bagId:m.cartId,savedBagListUrl:m.savedCartListUrl,pricingDisclaimer:c.pricingDisclaimer,messages:u,messagesLastUpdated:p,showCheckoutButtons:r&&!b&&!v,headerRef:e,hasBanner:Boolean(y.bannerDescription)};return(0,s.useEffect)((()=>{E&&h&&m.cartId&&Kl(m.cartId,"SAVED_BAG_ID")}),[E,h,m.cartId]),l().createElement(Kw,S)},Hw=l().memo(Vw),jw=({signInUrl:e,signInEvar1:t,signInMetricId:a,homeLinkURL:r,homeLinkEvar1:n,homeLinkMetricId:s,headerRef:o})=>{const{assets:i}=z();return l().createElement("div",{className:"rs-bagempty large-9 small-12"},l().createElement("h1",mr({className:"rs-bag-header",tabIndex:"-1",ref:o},qa(i.emptyBagHeader))),l().createElement("div",{className:"rs-bagempty-message"},e?i.emptyBagNotSignedPrefix:i.emptyBagSignedPrefix),l().createElement("div",{className:"rs-bagempty-actions"},l().createElement("div",{className:"row"},e&&l().createElement("div",{className:"column rs-bagempty-button"},l().createElement("a",{className:"form-button",href:e,"data-evar1":t,"data-s-object-id":a,"data-autom":"bag-empty-signin-button"},i.signinTxt)),l().createElement("div",{className:"column rs-bagempty-button"},l().createElement("a",{href:r,className:"form-button form-button-secondary","data-evar1":n,"data-s-object-id":s,"data-autom":"bag-empty-continueshopping-button"},i.continueShopping)))))},Gw=({headerRef:e})=>{const[t]=Fa(Es),{signInUrl:a,signInEvar1:r,signInMetricId:n,marcomHome:s,evar1:o,metricId:i}=t;return l().createElement(jw,{signInUrl:a,signInEvar1:r,signInMetricId:n,homeLinkURL:s,homeLinkEvar1:o,homeLinkMetricId:i,headerRef:e})},Ww=l().memo(Gw),qw=({noKeyline:e,hasCoveragePlans:t,hasSubscriptions:a,subscriptionTitle:r,isAnnualCoverage:n,hasRecurringServices:s,isNewAppleMusicSubscriber:o,isNewICloudSubscriber:i})=>{const{assets:c}=z(),d=Wa()("rs-servicessummary-section",{"rs-servicessummary-multisummary":a});let m=c.coverageSubheader;return s?m=c.recurringCoverageSubheader:n&&(m=c.annualCoverageSubheader),l().createElement("div",{className:Wa()("row rs-servicessummary-container",{"rs-servicessummary-keyline":e})},l().createElement("div",{className:"column large-3 small-12"},l().createElement("h2",{className:"rs-servicessummary-header"},c.monthlyServicesLabel)),l().createElement("div",{className:"column rs-servicessummary large-9 small-12"},t&&l().createElement("div",{className:d},l().createElement("h3",{className:"rs-servicessection-header"},c.coverageHeader),l().createElement("p",{className:"rs-servicessection-subheader"},m)),a&&l().createElement("div",{className:"rs-servicessummary-section rs-services-summaryrow"},l().createElement("h3",{className:"rs-servicessection-header"},r),l().createElement("p",{className:"rs-servicessection-subheader"},c.subscriptionsSubheader)),l().createElement("div",{className:"rs-servicessummary-note"},c.monthlyServiceNote),o&&l().createElement("p",{className:"rs-services-summaryrow"},c.appleMusicSubscriberLabel),i&&l().createElement("p",{className:"rs-services-summaryrow"},c.iCloudSubscriberLabel)))},Yw="applemusic",zw="icloud",Xw="year",Jw=({modKey:e,noKeyline:t})=>{const[a]=Fa(e),{coveragePlans:r=[],subscriptions:n=[],subscriptionTitle:s,hasRecurringServices:o}=a,i=n.some((e=>e.newSubscriberDisclaimer&&e.familyType===Yw)),c=n.some((e=>e.newSubscriberDisclaimer&&e.familyType===zw)),d=r.some((e=>e.payFrequency===Xw));return l().createElement(qw,{noKeyline:t,hasCoveragePlans:Boolean(r.length),hasSubscriptions:Boolean(n.length),subscriptionTitle:s,isAnnualCoverage:d,hasRecurringServices:o,isNewAppleMusicSubscriber:i,isNewICloudSubscriber:c})},Qw=l().memo(Jw),Zw=({tradeInProductTitle:e,title:t,subTitle:a,summary:r,overlayButtonLabel:n,overlayContent:o,outstandingLoanLabel:i,appliedTradeInLabel:c,tradeinCreditLabel:d,tradeInType:m,hideTradeInOverlay:u})=>{const[p,g]=(0,s.useState)(!1),{viewport:h}=z(),y="small"===h;return l().createElement("div",{className:"rs-tradeup-content"},e&&l().createElement("div",{className:"row"},l().createElement("h3",mr({className:"rs-tradeup-device-name-label"},qa(e)))),l().createElement("div",{className:"row"},t&&l().createElement("h3",mr({className:"rs-tradeup-estimated-label"},qa(t)))),a&&l().createElement("p",qa(a)),i&&l().createElement("div",{className:"rs-tradeup-outstanding-loan"},i),c&&l().createElement("div",{className:"rs-tradeup-credit"},c),d&&l().createElement("div",{className:"rs-tradeup-credit"},d),l().createElement("div",mr({className:"rs-tradeup-summary"},qa(r))),!u&&l().createElement("div",{className:"rs-tradeup-instruction"},l().createElement("button",mr({id:"tradeup-summary",className:"as-buttonlink",type:"button",onClick:()=>{g(!0),(({tradeInType:e})=>{const t={eVar21:'D=pageName+"||TradeIn||LearnMore"'};e&&(t.prop3='trade-in | flexible trade-in | see how it works"',t.prop37='D=pageName+"|Bag - Link|See how it works || Selected"'),Us({name:"metrics",data:t})})({tradeInType:m})}},qa(n))),l().createElement(ss,{visible:p,onClose:()=>g(!1),isFullscreen:y,ariaLabel:"pd-overlay-header",fixedWidth:!0,noPadding:!0},l().createElement("div",qa(o)))))},eN=({multipleFlexTradeIn:e})=>{const{assets:t,fragments:a}=z(),{multipleFlexTradeInSummary:r={}}=t;return l().createElement("div",{className:"rs-mutlipleflex-tradein"},e.map((({deviceName:n,isIPhone:s,installmentsWithTradeIn:o,tradeInType:i,tradeInValue:c,tradeInValueApplied:d,tradeInCredit:m,isGrv:u,grvPercentage:p,isFlexTradeIn:g,accruedInterest:h,tradeInProduct:y},E)=>{let v,b,f;const w=`multiple-flex-trade-in-${E}`;"TRADE_IN_GREATER_THAN_LOAN"===i?s?o?(v=t.multipleFlexAppliedGreaterTradeInMonthlyLabel,b=h?t.multipleFlexWithAccuredInterestCloseoutTradeInLabel:t.multipleFlexCloseoutTradeInMonthlyLabel,f=r[`${i}_MONTHLY${s&&u?"_IPHONE":""}`]):(v=t.multipleFlexAppliedGreaterTradeInLabel,b=h?t.multipleFlexWithAccuredInterestCloseoutTradeInLabel:t.multipleFlexCloseoutTradeInLabel,f=r[`${i}${s&&u?"_IPHONE":""}`]):(v=t.multipleFlexAppliedGreaterTradeInLabel,b=t.multipleFlexCloseoutTradeInLabel,f=r[`${i}_NON_IPHONE_LOB`]):(v=t.multipleFlexAppliedTradeInLabel,b=t.multipleFlexCloseoutTradeInLabel,f=r[`${i}${s&&u?"_IPHONE":""}`]);const N=(e,t,a)=>a&&ln(e,t),S=N(t.multipleFlexTradeInLabel,{tradeInValue:c},c),C="TRADE_IN_LESSER_THAN_LOAN"!==i&&N(b,{tradeInValueApplied:d,accruedInterest:h},d),T="TRADE_IN_GREATER_THAN_LOAN"===i?m:d,L="TRADE_IN_EQUAL_TO_LOAN"!==i&&N(v,{appliedTradeInValue:T,deviceName:n},T),k="TRADE_IN_MONTHLY_INSTALLMENTS"===i?t.monthlyInstallmentTradeIn:t.tradeInTagLine,I=g?N(f,{deviceName:n,grvPercentage:p},f):k,A=""+(y?`${t.tradeInDevice} ${y}`:"");return l().createElement(Zw,{key:w,tradeInProductTitle:A,title:S,summary:I,hideTradeInOverlay:E!==e.length-1,overlayButtonLabel:t.multipleFlexOverlayButtonLabel,outstandingLoanLabel:C,appliedTradeInLabel:L,overlayContent:a.tradeUpInstructionOverlayContent,tradeInType:i})})))},tN=l().memo(eN),aN=()=>{const[e]=Fa(Ls),{installmentsWithTradeIn:t,isTradeinDropoff:a,multipleFlexTradeIn:r,tradeInValue:n,tradeInType:s,outstandingLoan:o,tradeInCredit:i,subsidyValue:c,showTradeInBalanceGiftMessage:d}=e,{assets:m,fragments:u}=z();let p;p=s&&"ACDC"===s&&n?ln(m.acdcTradeInLabel,{tradeInValue:n}):n?ln(s&&"TRADE_IN_MONTHLY_INSTALLMENTS"!==s?m.totalTradeInLabel:m.tradeInLabel,{tradeInValue:n}):"";const g=c&&ln(m.tradeInSubsidyLabel,{subsidyValue:c});let h,y=s;d&&"ACDC"!==s?h=m.tradeinOverfundSummaryInfo:t&&!s?h=m.instantTradeInTagLine:"TRADE_IN_MONTHLY_INSTALLMENTS"===s?(h=m.monthlyInstallmentTradeIn,y=!1):"ACDC"===s?(h=m.acdcTradeInSummary,y=!1):h=s?u[`instructionsFor_${s.toLowerCase()}${t?"_monthly":""}`]:m.tradeInTagLine;const E=t&&!s?m.instantTradeInInstruction:m.tradeInInstruction;let v;v="ACDC"===s?u.acdcTradeUpInstructionOverlayContent:a?u.instantTradeUpInstructionDropoffOverlayContent:t?u.instantTradeUpInstructionOverlayContent:u.tradeUpInstructionOverlayContent;const b=o&&ln(m.outstandingLoan,{outstandingLoan:o}),f=i&&ln(t?m.instantTradeInCredit:m.tradeInCredit,{tradeInCredit:i});return l().createElement("div",{className:Wa()("row rs-bag-tradeup",{"rs-tradeup-noborder":r})},l().createElement("h2",mr({className:"column large-3 small-12 rs-tradeup-label"},qa(m.tradeUpQuote))),l().createElement("div",{className:"column large-9 small-12"},r?l().createElement(tN,{multipleFlexTradeIn:r}):l().createElement(Zw,{title:p,subTitle:g,summary:h,hideTradeInOverlay:y,overlayButtonLabel:E,outstandingLoanLabel:b,tradeinCreditLabel:f,overlayContent:v,tradeInType:s})))},rN=l().memo(aN),nN=()=>{const{assets:e}=z();return l().createElement("div",{className:"column large-4 small-12 rs-recommendedsystem-details"},l().createElement("div",{className:"rs-recommendedsystem-label"},e.recommendedSystemLabel),l().createElement(au,{modKey:Ns,className:"rs-recommendedsystem-wrapper",isCollapsible:!1,textField:{label:e.recommendedSystemInputLabel,bindName:"name","data-autom":"bag-recommendedsystem-input"},applyButton:{label:e.save,ally:`${e.save} ${e.recommendedSystemLabel}`,processingText:e.processing,bindName:"button","data-autom":"bag-recommendedsystem-save"}}))},sN=({errorMessage:e,dataAutom:t,buttonLabel:a,buttonProps:r,lastUpdated:n})=>{const o=(0,s.useRef)(null);(0,s.useEffect)((()=>{o.current&&o.current.focus()}),[n]);const i=e.split("{buttonLabel}").map(((e,t)=>l().createElement(l().Fragment,{key:e},e,0===t&&l().createElement("button",mr({type:"button",className:"as-buttonlink"},r),a))));return l().createElement("div",{className:"rs-trade-in-error",tabIndex:"-1","data-autom":t,ref:o},l().createElement(Gs,{key:e,error:!0},i))},lN=({modKey:e,dataAutom:t})=>{const[a,r]=Fa(e),n=V().get(a,"tradeInErrorMessage.message",""),s=V().get(a,"tradeInErrorMessage.buttonLabel",""),o=Ha(e,"removeAllTradeIns");return l().createElement(sN,{errorMessage:n,dataAutom:t,buttonLabel:s,buttonProps:o.props,lastUpdated:r})},oN=l().memo(lN),iN=({iUpTitle:e,iUpEstCreditMarkup:t,summary:a,overlayButtonLabel:r,overlayContent:n})=>{const[o,i]=(0,s.useState)(!1),{viewport:c}=z(),d="small"===c;return l().createElement("div",{className:"rs-iup-summary"},l().createElement("div",{className:"row rs-iup-summary-content"},l().createElement("h2",{className:"column large-3 small-12 rs-iup-summary-label"},e),l().createElement("div",{className:"column large-9 small-12"},l().createElement("div",{className:"row"},t),l().createElement("div",{className:"rs-iup-summary-info"},a),l().createElement("div",{className:"rs-iup-summary-instruction"},l().createElement("button",mr({id:"iup-summary",className:"as-buttonlink",type:"button",onClick:()=>{i(!0),hl({eVar:ul,feature:"Bag page - Link",action:"AOS:overlay/tradein/learn_more_about_upgrade_redemption_process| Selected"})}},qa(r))),l().createElement(ss,{visible:o,onClose:()=>i(!1),isFullscreen:d,ariaLabel:"rs-iup-overlay-header",fixedWidth:!0,noPadding:!0},l().createElement("div",{className:"rs-iup-summary-overlay as-overlay-content"},l().createElement("div",qa(n)),l().createElement(gi,null)))))))},cN=({modKey:e})=>{const[t]=Fa(e),{tradeInValue:a}=t,{assets:r,fragments:n}=z(),s=l().createElement("div",{className:"rs-iup-estimated-label"},ln(r.iUpSummaryCreditLabel,{tradeInValue:a}));return l().createElement(iN,{iUpTitle:r.iUpCreditTitle,iUpEstCreditMarkup:s,summary:r.iUpCreditSummary,overlayButtonLabel:r.iUpCreditOverlayLabel,overlayContent:n.iUpSummaryOverlayContent})},dN=l().memo(cN),mN=({title:e,subtitle:t,savedLabel:a,image:r,isPreOrderMode:n,actionLinkLabel:s,actionLinkAXLabel:o,actionLinkURL:i,actionEvar1:c})=>{const{viewport:d}=z(),m="small"===d,u=Wa()("rs-grbanner-action",{button:n,"button-reduced":m});return l().createElement("div",{className:"rs-grbanner as-l-container"},l().createElement("div",{className:"rs-grbanner-content"},l().createElement("div",{className:"rs-grbanner-content-leading"},r&&l().createElement(Il,{className:"rs-grbanner-image",data:r}),l().createElement("div",{className:"rs-grbanner-info"},a&&l().createElement("div",{className:"rs-grbanner-savedlabel"},a),l().createElement("span",{className:"rs-grbanner-title"},e),t&&l().createElement("p",{className:"rs-grbanner-subtitle"},t))),l().createElement("div",{className:"rs-grbanner-content-trailing"},l().createElement("a",{className:u,href:i,"data-evar1":c},o?l().createElement(l().Fragment,null,l().createElement("span",{"aria-hidden":"true"},s),l().createElement("div",{className:"visuallyhidden"},o)):s))))},uN=()=>{const[e]=Fa(Rs),{title:t,subtitle:a,savedLabel:r,image:n,isPreOrderMode:s,actionLinkLabel:o,actionLinkAXLabel:i,actionLinkURL:c,actionEvar1:d}=e;return l().createElement(mN,{title:t,subtitle:a,savedLabel:r,image:n,isPreOrderMode:s,actionLinkLabel:o,actionLinkAXLabel:i,actionLinkURL:c,actionEvar1:d})},pN=l().memo(uN),gN=({children:e,isSideBySide:t,index:a})=>l().createElement("li",{role:"listitem",className:Wa()("rs-product-list-item column",{"large-12":!t,"small-12":t}),"data-autom":`product-list-item-${a}`},e),hN=({productInfo:e,children:t,detailsContainer:a,actionsContainer:r,editMode:n,isSideBySide:s,listId:o,saveToStorage:i,isAddToBag:c,dataAutom:d,onClickHandler:m,addToBagLoading:u})=>{const{assets:p}=z(),{name:g,price:h,subheader:y,learnMoreUrl:E,productUrl:v,productMetricId:b,productId:f,productEvar1:w,macHardwareDetails:N,isEOLProduct:S,unavailableDisplayText:C,badge:T,monthlyPriceA11y:L}=e,k=g&&(S?l().createElement("span",null,g):l().createElement("a",{className:"rs-product-list-item-productlink",href:v,onClick:o?i:"","data-analytics-list-id":o,"data-purchase-journey":o?`${f}|lists`:"","data-evar1":w,"data-part-number":f,"data-relatedlink":b,"data-autom":"list-productlink"},g)),I=s?l().createElement("h3",{className:"rs-product-list-item-productname typography-intro-elevated"},k):l().createElement("h2",{className:"rs-product-list-item-productname typography-intro-elevated"},k),A={onClick:m,disabled:u};return l().createElement("div",{className:Wa()("column",{"large-offset-1 small-offset-0 large-11 small-12":!s,"large-12":s})},Boolean(T)&&l().createElement("div",{className:"rs-product-list-item-violator typography-caption"},T),l().createElement("div",{className:"rs-product-list-item-infocontent"+(S?" rs-yoursaves-item-noimage":"")},g&&I,S&&l().createElement("div",{className:"rs-product-list-item-eolproduct"},C),y&&l().createElement("div",{className:"rs-product-list-item-subheader"},y),h&&!S&&l().createElement("div",{className:"rs-product-list-item-productprice"},l().createElement("span",{"aria-hidden":"true"},h),l().createElement("span",{className:"visuallyhidden"},L||h)),N&&Boolean(N.length)&&l().createElement("ul",{className:"rs-product-list-item-hwdetails"},N.map((e=>l().createElement("li",{className:"rs-product-list-item-hwdetail typography-body",key:e},e)))),a,E&&l().createElement("div",{className:"rs-product-list-item-learnmore"},l().createElement("a",{href:E,className:"as-buttonlink"},p.learnMoreLink))),t,r,!c&&!n&&v&&l().createElement("a",{href:v,className:Wa()("rs-product-list-item-buybtn button",{"button-elevated":!s,"button-block button-super":s}),onClick:o?i:"","data-analytics-list-id":o,"data-purchase-journey":o?`${f}|lists`:"","data-evar1":w,"data-part-number":f,"data-autom":d},s?p.continueButton:p.buyButton,l().createElement("span",{className:"visuallyhidden"},g)),c&&!n&&l().createElement(os,mr({},A,{hasDefaultClass:!1,className:Wa()("rs-product-list-item-buybtn button",{"button-elevated":!s,"button-block button-super":s}),"data-autom":"list-item-addtobagbtn"}),p.addAllToBag,l().createElement("span",{className:"visuallyhidden"},g)))},yN=({buttonText:e,buttonVOText:t,toggleButtonClickHandler:a,toggleButtonClass:r,isDetailsShown:n,showMoreButtonRef:s})=>l().createElement("div",{className:"rs-product-list-item-toggle-button"},l().createElement("button",mr({type:"button",ref:s,className:r,onClick:a,"aria-expanded":n,"aria-label":t,"data-autom":n?"hide-details-chevronup":"see-details-chevrondown"},qa(e)))),EN=({modKey:e,isDetailsShown:t,loadingRef:a,isChildItem:r})=>{const n=r?"child-":"",{assets:o}=z(),[i]=Ma(e,"name"),c=$a(),d=Ha(e,`${n}show-more`),m=V().get(d,"binding.properties.isLoadingSubmit",!1),u=(0,s.useRef)(null);(0,s.useEffect)((()=>{u&&u.current&&t&&(m?a&&a.current&&a.current.focus():u.current.focus())}),[m]);const p=t?o.hideDetails:o.showDetails,g=ln(t?o.hideDetailsVOText:o.showDetailsVOText,{productName:i}),h=Wa()("as-buttonlink",{"icon icon-chevrondown icon-after":!t},{"icon icon-chevronup icon-after":t});return l().createElement(yN,{buttonText:p,buttonVOText:g,toggleButtonClickHandler:()=>{c(t?{type:ye,modKey:e,bindName:`${n}show-less`}:{type:ye,modKey:e,bindName:`${n}show-more`})},toggleButtonClass:h,isDetailsShown:t,showMoreButtonRef:u})},vN=l().memo(EN),bN=({pickupEnabled:e,buacPickupQuote:t,pickupLabel:a,modExists:r})=>l().createElement("div",{className:"rs-product-list-item-detail-pickup"},r&&e&&l().createElement("div",{className:"rs-product-list-item-detail-pickup-details"},l().createElement("div",{className:"rs-product-list-item-detail-pickup-label"},a),l().createElement("div",mr({className:"rs-product-list-item-detail-pickup-value"},qa(t))))),fN=({deliveryMessages:e,hasDeliveryMessages:t,promoMessage:a,orderByDeliveryBy:r,modExists:n,templateID:s,deliveryHeader:o})=>l().createElement("div",{className:"rs-product-list-item-detail-delivery"+(s?" rs-product-list-item-detail-delivery-bold":"")},n&&l().createElement(l().Fragment,null,Boolean(o)&&l().createElement("div",{className:"rs-product-list-item-detail-delivery-header"},o),l().createElement("div",{className:"rs-product-list-item-detail-delivery-label"},r),(t||a)&&l().createElement("ul",{className:"rs-product-list-item-detail-delivery-dudeinfo"},e,Boolean(a)&&l().createElement("li",{key:a,className:"rs-product-list-item-detail-delivery-deliverypromo","data-autom":"list-item-deliverypromo"},l().createElement("span",null,a))))),wN=({pickup:e,delivery:t})=>{if(!e&&!t)return null;const a=e?l().createElement(bN,mr({key:"pickup"},e,{modExists:!0})):null,{deliveryOptionMessages:r=[],leadByPickup:n}=t||{},s=!!t&&(t.templateID&&"null"!==t.templateID),o=t?l().createElement(fN,mr({key:"delivery"},t,{hasDeliveryMessages:Boolean(r.length),deliveryMessages:r.map((e=>l().createElement("li",{key:e.quote,className:"rs-product-list-item-detail-delivery-deliverymsg","data-autom":"list-item-deliverymsg"},l().createElement("span",null,e.quote),Boolean(e.tooltip)&&l().createElement(Eo,{after:!0,middle:!0},l().createElement("div",qa(e.tooltip)))))),templateID:s,modExists:!0})):null,i="true"===n||!0===n;return l().createElement("div",{className:"rs-product-list-item-detail"},i?[a,o]:[o,a])},NN=({modKey:e,isChildItem:t,isItemSubmitting:a,toggleButtonContainer:r,isDetailsShown:n,loadingRef:s})=>{const o=Ha(e,`${t?"child-":""}show-more`),i=Ra("shoppingCart"),c=t?`${e}.pickup`:`${e}.details.pickup`,d=t?`${e}.delivery`:`${e}.details.delivery`,[m]=Fa(c),[u]=Fa(d),p=Ra(c),g=Ra(d);return!i&&o.binding&&o.binding.bindExists&&l().createElement("div",{className:"rs-product-list-item-detail-container"},r,a&&l().createElement("div",{className:"rs-product-list-item-detail-waitindicator"},l().createElement("div",{ref:s,tabIndex:-1,role:"img","aria-label":"processing",className:"waitindicator waitindicator40-blue"})),n&&!a&&l().createElement(wN,{pickup:p&&m,delivery:g&&u}))},SN=l().memo(NN),CN='<svg viewBox="0 0 35 35" class="as-svgicon as-svgicon-applelogo as-svgicon-base as-svgicon-applelogobase" role="img" aria-hidden="true" width="35px" height="35px"><path fill="none" d="M0 0h35v35H0z"/><path d="M25.99 11.345a5.047 5.047 0 0 0-2.411 4.245 4.912 4.912 0 0 0 2.989 4.51 11.737 11.737 0 0 1-1.531 3.162C24.084 24.629 23.088 26 21.572 26s-1.906-.881-3.653-.881c-1.7 0-2.31.91-3.7.91s-2.354-1.271-3.465-2.83a13.679 13.679 0 0 1-2.325-7.378c0-4.332 2.816-6.628 5.588-6.628 1.473 0 2.7.967 3.624.967.881 0 2.253-1.025 3.927-1.025a5.253 5.253 0 0 1 4.422 2.21ZM17.76 8.89a1.659 1.659 0 0 1-.3-.029 1.982 1.982 0 0 1-.043-.4 4.841 4.841 0 0 1 1.227-3.018 4.989 4.989 0 0 1 3.274-1.693 2.14 2.14 0 0 1 .043.448 4.979 4.979 0 0 1-1.184 3.1A4.325 4.325 0 0 1 17.76 8.89Z"/></svg>',TN=({name:e,subheader:t,price:a,type:r,link:n,linkLabel:s,src:o,alt:i,isEOLProduct:c,showAppleLogo:d,unavailableDisplayText:m,productName:u,detailsContainer:p})=>{const{fragments:g}=z();let h="",y="";if("applecare"===r)h=CN,y=ln(g.applecareChildItemInfo,{productName:u});return l().createElement("div",{className:"rs-product-list-childitem-container"},c?l().createElement(l().Fragment,null,d&&l().createElement("div",mr({className:"as-svgicon-container"},qa(CN))),e&&l().createElement("h4",{className:"rs-product-list-childitem-name"},e),m&&l().createElement("div",{className:"rs-product-list-childitem-info"},m)):l().createElement(l().Fragment,null,h&&y?l().createElement(l().Fragment,null,l().createElement("div",mr({className:`as-svgicon-container rs-product-list-${r}logo`},qa(h))),l().createElement("div",mr({className:`rs-product-list-${r}info`},qa(y)))):l().createElement(l().Fragment,null,o&&l().createElement(Il,{src:o,alt:i}),e&&l().createElement("h4",{className:"rs-product-list-childitem-name"},e),a&&l().createElement("div",{className:"rs-product-list-childitem-price"},a),p,t&&l().createElement("div",{className:"rs-product-list-childitem-info"},t),n&&l().createElement("a",{href:n,className:"as-buttonlink more"},s))))},LN=({modKey:e,productName:t,editMode:a})=>{const[{name:r,subheader:n,price:o,type:i,link:c,linkLabel:d,src:m,alt:u,isChildItem:p,isDetailsShown:g,showChildDetails:h,isEOLProduct:y,showAppleLogo:E,unavailableDisplayText:v}]=Fa(e),b=(0,s.useRef)(null),f=Ha(e,`${p?"child-":""}show-more`),w=V().get(f,"binding.properties.isLoadingSubmit",!1),N=p?h:g,S=!a&&!y&&p?l().createElement(SN,{isItemSubmitting:w,modKey:e,isChildItem:p,isDetailsShown:N,loadingRef:b,toggleButtonContainer:l().createElement(vN,{modKey:e,isChildItem:p,isDetailsShown:N,loadingRef:b})}):null;return l().createElement(TN,{name:r,subheader:n,price:o,src:m,alt:u,type:i,link:c,linkLabel:d,isEOLProduct:y,showAppleLogo:E,unavailableDisplayText:v,productName:t,detailsContainer:S})},kN=l().memo(LN),IN=V().get(window,"asMetrics.sendUserInteraction",V().noop),AN=e=>{IN({name:"metrics",data:{prop3:`D=pageName+|${window.props3MetricValue}`,eVar59:`list|${e}`}})},PN=({visible:e,cancelHandler:t,header:a,subHeader:r,currentList:n,savedLists:o,confirmButtonProps:i,listNameFieldProps:c,setTextFieldValue:d,onChangeHandler:m,handleShowHideCreateNewList:u,isCreateNewListVisible:p,selectedListOption:g,messages:h,maxCustomListErrorLabel:y,savedByYouPageURL:E,showError:v,errorHeader:b,errorSubHeader:f,fieldError:w,setFieldError:N,fieldErrorMessage:S,errorHeaderRef:C,listFieldRef:T,props3Metrics:L})=>{const{assets:k}=z(),I={...c,onReset:e=>{c.onChange(e),T.current.focus(),d("")},resetA11y:k.reset,onChange:e=>{c.onChange(e),N(!1)},label:k.listNameLabel},A="new"===g.value?!c.value:!g.value;(0,s.useEffect)((()=>{window.props3MetricValue=L}),[L]);const P={...i,disabled:A||w||i.disabled,onClick:e=>{i.onClick(e),window.setTimeout((()=>AN(n)),50)}},D=Boolean(y);(0,s.useEffect)((()=>{v&&C.current.focus()}),[C,v]);const O=({SelectorLabel:e})=>l().createElement(l().Fragment,null,l().createElement(e,{classes:{root:"rs-pl-addtolistoverlay-selector-label"}},l().createElement("div",{className:"rs-pl-addtolistoverlay-selector-image large-2 small-3"},l().createElement("span",{className:"rs-pl-addtolistoverlay-selector-icon icon icon-after icon-plussolid"})),l().createElement("div",{className:"rs-pl-addtolistoverlay-selector-container"},l().createElement("span",mr({className:"rs-pl-addtolistoverlay-selector-title"},qa(V().get(k,"createNewListLabel","")))))),l().createElement(qr,{in:p,onExited:()=>{d("")}},l().createElement("div",{className:"rs-pl-addtolistoverlay-createnew-container"},l().createElement(Xo,mr({},I,{ref:T,classes:{root:Wa()({"is-error":w})},"data-autom":"listname-textbox"})),l().createElement("span",{role:"alert","aria-atomic":"true",className:"visuallyhidden"},S)))),x=l().createElement(l().Fragment,null,l().createElement("h2",{className:"rs-pl-addtolistoverlay-error-header",id:"rs-pl-addtolistoverlay-error-header",ref:C,tabIndex:-1},b),l().createElement("div",{className:"rs-pl-addtolistoverlay-subheader"},f),l().createElement("div",{className:"pl-rs-addtolistoverlay-error-actions"},l().createElement("button",{onClick:t,type:"button",className:"form-button"},k.okButton)));return l().createElement(ss,{visible:e,fixedWidth:!0,onClose:t,className:"rs-pl-addtolistoverlay",ariaLabel:v?"rs-pl-addtolistoverlay-error-header":"rs-pl-addtolistoverlay-header"},l().createElement("div",{className:"as-overlay-content rs-pl-addtolistoverlay-wrapper"},v?x:l().createElement(l().Fragment,null,l().createElement("h2",{className:"rs-pl-addtolistoverlay-header",id:"rs-pl-addtolistoverlay-header"},a),l().createElement("div",{className:"rs-pl-addtolistoverlay-subheader"},r),h[0]&&l().createElement(Gs,{error:!0},l().createElement("div",{className:"rt-messages-text"},l().createElement("span",qa('<svg viewBox="0 0 20 25" class="as-svgicon as-svgicon-exclamationmarkcircle as-svgicon-reduced as-svgicon-exclamationmarkcirclereduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h20v25H0z"/><path d="M10 4.1a8.4 8.4 0 1 1-8.4 8.4A8.409 8.409 0 0 1 10 4.1M10 3a9.5 9.5 0 1 0 9.5 9.5A9.5 9.5 0 0 0 10 3Z"/><path d="M9.092 16.411a.9.9 0 0 1 .908-.879.879.879 0 1 1 0 1.758.907.907 0 0 1-.908-.879Zm.3-2.773-.105-5.225A.674.674 0 0 1 10 7.71a.691.691 0 0 1 .713.7l-.113 5.228a.561.561 0 0 1-.6.635.568.568 0 0 1-.605-.635Z"/></svg>')),h[0].text),l().createElement(gr,{message:h[0].text})),l().createElement(Sd,{className:"rs-pl-addtolistoverlay-selectors"},o&&o.map(((e={})=>{const{label:t,value:a,imageData:r,isGlobalList:s,isProductAdded:o,itemsCountLabel:i}=e,c="new"===a;return l().createElement(Nd,{classes:{root:Wa()("rs-pl-addtolistoverlay-selector-item",{"rs-pl-addtolistoverlay-selector-createnew":c}),label:"rs-pl-addtolistoverlay-selector-label",input:"rs-pl-addtolistoverlay-selector-input"},"data-autom":c?"create-new-list":null,name:"savedList",id:a,value:a,key:a,disabled:s||n===a||o,checked:g.value===a,withAriaLabeledBy:"true",onClick:c?u:m,render:c?O:null},!c&&((e,t,a,r,n)=>{let s=k.multiItemCountLabel;return 0===t?s=k.zeroItemCountLabel:1===t&&(s=k.singleItemCountLabel),l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-pl-addtolistoverlay-selector-image large-2 small-3"},a&&!a.showAppleLogo?l().createElement(Il,{data:a}):l().createElement("span",qa('<svg viewBox="0 0 56 56" class="as-svgicon as-svgicon-applelogo as-svgicon-elevated as-svgicon-applelogoelevated" role="img" aria-hidden="true" width="56px" height="56px"><path fill="none" d="M0 0h56v56H0z"/><path d="M41.207 18.248a7.851 7.851 0 0 0-3.751 6.6 7.64 7.64 0 0 0 4.644 7.011 18.257 18.257 0 0 1-2.381 4.919c-1.482 2.134-3.032 4.268-5.391 4.268s-2.965-1.37-5.683-1.37c-2.65 0-3.594 1.415-5.75 1.415s-3.661-1.977-5.391-4.4a21.279 21.279 0 0 1-3.616-11.478c0-6.738 4.38-10.31 8.692-10.31 2.291 0 4.2 1.5 5.638 1.5 1.37 0 3.5-1.595 6.109-1.595a8.172 8.172 0 0 1 6.88 3.44ZM28.4 14.43a2.581 2.581 0 0 1-.472-.045 3.083 3.083 0 0 1-.067-.629 7.531 7.531 0 0 1 1.909-4.694 7.76 7.76 0 0 1 5.1-2.628 3.329 3.329 0 0 1 .067.7 7.745 7.745 0 0 1-1.837 4.825 6.728 6.728 0 0 1-4.7 2.471Z"/></svg>'))),l().createElement("div",{className:"rs-pl-addtolistoverlay-selector-container "+(n||r?"large-7 small-6":"large-10 small-9")},l().createElement("div",mr({className:"rs-pl-addtolistoverlay-selector-title"},qa(e))),l().createElement("div",mr({className:"rs-pl-addtolistoverlay-selector-subtitle"},qa(ln(s,{itemsCountLabel:t}))))),(n||r)&&l().createElement("div",{className:"large-3 rs-pl-addtolistoverlay-selector-sublabel"},k.savedLabel))})(t,i,r,o,s))}))),l().createElement("div",{className:"rs-pl-addtolistoverlay-actions"},l().createElement(os,mr({},P,{type:"button","aria-label":`${k.confirm} ${a}`,"aria-describedby":"rs-pl-addtolistoverlay-maxcustomlists-message","data-autom":"addtolistoverlay-confirm"}),k.confirm),l().createElement("button",{onClick:t,type:"button",className:"as-buttonlink rs-pl-addtolistoverlay-cancel","aria-label":`${k.cancel} ${a}`,"data-autom":"addtolistoverlay-cancel"},k.cancel)),D&&l().createElement("div",{className:"rs-pl-addtolistoverlay-maxcustomlists"},l().createElement("p",mr({className:"rs-pl-addtolistoverlay-maxcustomlists-message",id:"rs-pl-addtolistoverlay-maxcustomlists-message"},qa(y))),l().createElement("p",{className:"rs-pl-addtolistoverlay-maxcustomlists-link"},l().createElement("a",{href:E,"data-autom":"maxcustomlists-savedList"},k.manageListsLabel))))))},DN=({modKey:e,addButtonRef:t})=>{const a=e&&e.split(".")[0],[r]=Ma(a,"savedByYouUrl"),n=`${e}.addToListOverlay`,o=Ha(n,"confirm"),[i,c]=Ma(n,"showAddToListOverlay",!1),d=Ua(n,"selectedListOption"),[m,u]=(0,s.useState)(!1),[p,g]=_a(n),[h,y]=(0,s.useState)(!1),[E,v]=(0,s.useState)(""),b=Boolean(p[0]&&p[0].text),f=(0,s.useRef)(null),w=(0,s.useRef)(null),[N]=Ma(n,"props3Metrics"),{data:{header:S,subHeader:C,currentList:T,listOptions:L,maxCustomListErrorLabel:k,showError:I=!1,errorHeader:A,errorSubHeader:P}}=xa(n),D={...o.props,isLoading:o.binding.properties.isLoadingSubmit,disabled:o.binding.properties.isLoadingSubmit},{binding:{setValue:O},props:x,state:{error:R}}=rr(n,"listName"),F=e=>{d.setValue(e.target.value),u(!1),y(!1)};return(0,s.useEffect)((()=>{d.value||u(!1)}),[d]),(0,s.useEffect)((()=>{y(b),w.current&&w.current.focus()}),[b,g]),(0,s.useEffect)((()=>{v(R),setTimeout((()=>{v("")}),4e3)}),[R]),l().createElement(PN,{visible:i,header:S,subHeader:C,currentList:T,savedLists:L,cancelHandler:()=>{d.setValue(""),u(!1),c(!1),t.current.focus()},confirmButtonProps:D,listNameFieldProps:x,setTextFieldValue:O,onChangeHandler:F,selectedListOption:d,handleShowHideCreateNewList:e=>{F(e),u(!m),O("")},isCreateNewListVisible:m,messages:p,maxCustomListErrorLabel:k,savedByYouPageURL:r,showError:I,errorHeader:A,errorSubHeader:P,fieldError:h,setFieldError:y,fieldErrorMessage:E,errorHeaderRef:f,listFieldRef:w,props3Metrics:N})},ON=l().memo(DN),xN=({overlayProps:e,cancelHandler:t,header:a,subHeader:r,confirmButtonProps:n})=>{const{assets:s}=z();return l().createElement(ss,mr({},e,{fixedWidth:!0,disableFocusOut:!0,onClose:t,className:"rs-pl-removeoverlay",ariaLabel:"rs-pl-removeoverlay-header"}),l().createElement("div",{className:"as-overlay-content rs-pl-removeoverlay-wrapper"},l().createElement("h2",{className:"rs-pl-removeoverlay-header",id:"rs-pl-removeoverlay-header"},a),l().createElement("div",{className:"rs-pl-removeoverlay-subheader"},r),l().createElement("div",{className:"rs-pl-removeoverlay-actions"},l().createElement(os,mr({hasDefaultClass:!1},n,{className:"button button-pill button-super","aria-label":`${s.confirm} ${a}`,"data-autom":"removeItemOverlay-confirm"}),s.confirm),l().createElement("button",{onClick:t,type:"button",className:"as-buttonlink rs-pl-removeoverlay-cancel","aria-label":`${s.cancel} ${a}`,"data-autom":"removeItemOverlay-cancel"},s.cancel))))},RN=({modKey:e,removeButtonRef:t})=>{const a=`${e}.removeItemOverlay`,r=Ha(a,"confirm"),[n,s]=ir(a),{data:{header:o,subHeader:i}}=xa(a),c={...r.props,isLoading:r.binding.properties.isLoadingSubmit,disabled:r.binding.properties.isLoadingSubmit};return l().createElement(xN,{overlayProps:n,header:o,subHeader:i,cancelHandler:()=>{s(),t.current.focus()},confirmButtonProps:c})},FN=l().memo(RN),MN=({modKey:e})=>{const t=$a(),{assets:a}=z(),[r]=Ma(e,"name"),n={type:ye,modKey:e,bindName:"remove-item"},o={type:ye,modKey:e,bindName:"add-to-list"},i=(0,s.useRef)(null),c=(0,s.useRef)(null);return l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-product-list-item-actions"},l().createElement("button",{onClick:()=>t(o),ref:c,className:"as-buttonlink",type:"button","aria-label":ln(a.saveToAnotherListVOText,{productName:r}),"data-autom":"save-another-list-btn"},a.saveAnotherLink),l().createElement("button",{onClick:()=>t(n),ref:i,className:"as-buttonlink",type:"button","aria-label":ln(a.removeVOText,{productName:r}),"data-autom":"remove-list-btn"},a.removeLink)),l().createElement(ON,{modKey:e,addButtonRef:c}),l().createElement(FN,{modKey:e,removeButtonRef:i}))},_N=l().memo(MN),BN=({modKey:e,parentKey:t,addToBagKey:a,globalListId:r,editMode:n,listId:o,saveToStorage:i,isSideBySide:c,dataAutom:d})=>{const{data:{name:m,price:u,subheader:p,learnMoreUrl:g,productUrl:h,productMetricId:y,productId:E,productEvar1:v,isDetailsShown:b=!1,isEOLProduct:f,unavailableDisplayText:w,badge:N,isAddToBagEnabled:S,monthlyPriceA11y:C},childModKeys:T}=xa(e),L=$a(),{data:k,modExists:I}=xa(`${e}.macDetails`),A=Ha(e,"show-more"),P=V().get(A,"binding.properties.isLoadingSubmit",!1),D=(0,s.useRef)(null),O=t||e,{setValue:x,runSetEvents:R}=Ua(O,a),{setValue:F}=Ua(O,"listId"),{setValue:M}=Ua(O,"childPart"),_=V().get(Ha(O,"add-to-bag"),"binding.properties.isLoadingSubmit",!1),[B]=Ma(T.length?T[0]:"","partNumber"),$=I&&k.hardwareDetails&&k.hardwareDetails.filter((e=>e)),U=!!T.length&&T.map((t=>t!==`${e}.macDetails`&&l().createElement(kN,{key:t,modKey:t,productName:m,editMode:n})));(0,s.useEffect)((()=>{n&&L({type:ye,modKey:e,bindName:"show-less"})}),[n]);const K=!n&&!f?l().createElement(SN,{isItemSubmitting:P,modKey:e,isDetailsShown:b,loadingRef:D,toggleButtonContainer:l().createElement(vN,{modKey:e,isDetailsShown:b,loadingRef:D})}):null,H=n&&l().createElement(_N,{modKey:e});return l().createElement(hN,{productInfo:{name:m,price:u,subheader:p,learnMoreUrl:g,productUrl:h,productMetricId:y,productId:E,productEvar1:v,macHardwareDetails:$,isEOLProduct:f,unavailableDisplayText:w,badge:N,monthlyPriceA11y:C},isSideBySide:c,editMode:n,detailsContainer:K,actionsContainer:H,listId:o,saveToStorage:i,isAddToBag:S,addToBagLoading:_,onClickHandler:()=>{"add-to-bag"===a?L({type:ye,modKey:O,bindName:a}):(x(E),F(r),M(B),R())},dataAutom:d},U)},$N=l().memo(BN),UN=({modKey:e,parentKey:t,addToBagKey:a="add-to-bag",globalListId:r,showEdit:n=!1,listId:s="",isSideBySide:o=!1,dataAutom:c,index:d})=>{const[{src:m,width:u,height:p,isEOLProduct:g,productMetricId:h}]=Fa(e),y=m&&-1!==m.indexOf("NOIMAGE"),E={listId:s,isSavedItem:!0};return l().createElement(gN,{isSideBySide:o,index:d},l().createElement("div",{className:"row rs-product-list-item-container"},l().createElement("div",{className:Wa()("column rs-product-list-item-imgcontainer",{"large-6 small-12":!o,"rs-yoursaves-item-noimage":g,"rs-product-list-noimagesrc-container":y})},g?l().createElement("span",qa('<svg viewBox="0 0 53 106" class="as-svgicon as-svgicon-applelogo as-svgicon-mega as-svgicon-applelogomega" role="img" aria-hidden="true" width="106px" height="106px"><path fill="none" d="M0 0h53v106H0z"/><path d="M50.844 34.791a14.473 14.473 0 0 0-6.915 12.172c0 9.481 8.323 12.834 8.571 12.917a33.617 33.617 0 0 1-4.389 9.067c-2.732 3.933-5.588 7.866-9.936 7.866S32.71 74.288 27.7 74.288c-4.883 0-6.624 2.608-10.6 2.608s-6.747-3.643-9.936-8.115A39.23 39.23 0 0 1 .5 47.626c0-12.42 8.074-19 16.023-19 4.221 0 7.741 2.774 10.391 2.774 2.526 0 6.459-2.939 11.261-2.939a15.063 15.063 0 0 1 12.669 6.33Zm-23.6-7.038a4.779 4.779 0 0 1-.87-.083 5.778 5.778 0 0 1-.123-1.159 13.882 13.882 0 0 1 3.52-8.653 14.3 14.3 0 0 1 9.4-4.844 6.14 6.14 0 0 1 .123 1.283A14.274 14.274 0 0 1 35.9 23.2c-2.113 2.607-5.757 4.553-8.655 4.553Z"/></svg>')):l().createElement(Il,{className:"as-util-relatedlink",src:m,width:u,height:p,alt:"","data-trigger-click":`click [data-relatedlink='${h}']`})),l().createElement("div",{className:Wa()("column",{"large-6 small-12":!o,"large-12":o})},l().createElement($N,{modKey:e,parentKey:t,addToBagKey:a,globalListId:r,editMode:n,listId:s,saveToStorage:()=>{const e=i("product-list-item-container/saveToStorageForPDP");if(window.sessionStorage)try{window.sessionStorage.setItem("dt-list",JSON.stringify(E))}catch(t){e.error(t)}},isSideBySide:o,dataAutom:c}))))},KN=l().memo(UN),VN=({label:e})=>((0,s.useLayoutEffect)((()=>{window.scrollTo(window.pageXOffset,0)}),[]),(0,ur.createPortal)(l().createElement("div",{className:"rs-savedbyyou-add-to-bag-loader"},l().createElement("div",{role:"img",className:"waitindicator waitindicator40-gray","aria-label":e})),document.getElementById("portal")||document.body)),HN=({loadMore:e,itemCount:t,allSavedItems:a,showMoreItems:r,children:n,isAddingToBag:s})=>{const{assets:o,viewport:i}=z(),c=t&&t<=12&&t%3==2;let d=null;return t>12&&r?d=l().createElement("a",{href:a,"data-evar1":"aos:bag | see all",className:"as-buttonlink icon icon-after icon-chevronright"},o.seeAllLabel):r||(d=l().createElement("button",{type:"button",className:"as-buttonlink",onClick:()=>e(!0)},o.seeMoreLabel,l().createElement("span",{"aria-hidden":"true",className:"icon icon-after icon-chevrondown"}))),l().createElement(l().Fragment,null,s&&l().createElement(VN,{label:o.processing}),!s&&l().createElement("div",{className:"rs-savedbyyou"},l().createElement("h2",{className:"rs-savedbyyou-title"},o.savedItemsHeader),l().createElement("ul",{className:"as-l-container row rs-savedbyyou-tiles",role:"list","aria-label":o.productsLabel},n,"small"!==i&&c?l().createElement("li",{role:"listitem",className:"rs-product-list-emptytile column small-12"}):null),l().createElement("div",{className:"as-l-container rs-savedbyyou-loadmore"},t>3&&d)))};function jN(e){const t={...e,shoppingCart:{bagSavedItems:{bagSavedListItems:e.bagSavedListItems}}};return t.meta.l=[`/${_s}`],t}const GN=()=>{const e=$a(),[t,a]=(0,s.useState)(!1),[r]=Ma(Ms,"savedItemsFetchURL"),[{itemCount:n,allSavedItems:o,listId:c}]=Ma(_s),d=Ra(_s),{childModKeys:m}=xa(`${_s}.items`),u=V().get(Ha(Ms,"part"),"binding.properties.isLoadingSubmit",!1),p=m&&m.map(((e,a)=>(a<3||t)&&l().createElement(KN,{key:e,modKey:e,index:a,parentKey:Ms,addToBagKey:"part",globalListId:c,isSideBySide:"true",dataAutom:"bag-item-buybtn"})));return(0,s.useEffect)((()=>{const t=i("SavedByYouContainer/buildSavedList");r&&!n&&ft(r).then((t=>{e({type:ve,data:jN(t)})})).catch((e=>{t.error(e)}))}),[r,n]),(0,s.useEffect)((()=>{if(t){const e=document.querySelectorAll(".rs-product-list-item-productlink")[3];e&&e.focus()}}),[t]),d&&Boolean(n)&&l().createElement(HN,{loadMore:a,showMoreItems:t,itemCount:n,allSavedItems:o,isAddingToBag:u},p)},WN=l().memo(GN),qN=({className:e="rs-installment-summary-card",payOverTimeLabel:t,offerDetailsLinkLabel:a,installmentSummaryCard:r,singleTermFinancingMessage:n,additionalSummaryCard:s,monthlyPricingDisclaimer:o,totalPrice:i,offerDetailsDescription:c,installmentButtonProps:d,hasInstallmentTradeIn:m,hasStaticOverlay:u,staticOverlayProps:p,isZiniaInstallmentsEnabled:g})=>{const{viewport:h,assets:y}=z(),E="small"===h,v=u?p:d;return l().createElement("div",{className:`${e} large-9 large-offset-3 small-12 small-offset-0`},l().createElement("div",{className:`${e}-container`},l().createElement("h2",{className:`${e}-header`},t),l().createElement("p",mr({role:"text",className:`${e}-payment-title`},qa(n||r))),s&&l().createElement("div",mr({className:`${e}-payment-subtitle`},qa(s))),l().createElement("div",{className:`${e}-total ${e}-info`},l().createElement("div",null,o),l().createElement("span",null,i)," ",m&&l().createElement("div",mr({className:`${e}-message`},qa(y.acmiTradeInMessage))),!E&&l().createElement("button",mr({type:"button","aria-label":`${a}, ${t}`,className:`${e}${g?"-zinia-button":"-offer-details-button"} icon icon-after icon-pluscircle as-buttonlink`},v),a)),E&&l().createElement("div",{className:`${e}-offer-details`},l().createElement("button",mr({type:"button","aria-label":`${a}, ${t}`,className:`${e}-offer-details-button icon icon-after icon-pluscircle as-buttonlink`},v),a)),l().createElement("div",{className:`${e}-info`},c)))},YN=({visible:e,setVisible:t,content:a})=>{const{viewport:r}=z(),n="small"===r;return l().createElement(ss,{className:"rs-financing-bag-overlay",visible:e,onClose:()=>t(!1),isFullscreen:n,noPadding:!0,fixedWidth:!0},l().createElement("div",mr({className:"rs-financing-bag-overlay-content"},qa(a))))},zN=({modKey:e})=>{const[t]=Ma(`${e}.cartInstallmentSummary`),a=Ha(`${e}.cartInstallmentSummary`,"offerInstallmentsOverlay"),[r,n]=(0,s.useState)(!1),o=Boolean(t&&t.offerDetailsOverlayContent),i={onClick:()=>{n(!0),Us({name:"metrics",data:{eVar6:'D=pageName+"|summary|explore all financing options|open modal"'}})}};return l().createElement(l().Fragment,null,l().createElement(qN,mr({},t,{installmentButtonProps:a.props,hasStaticOverlay:o,staticOverlayProps:i})),l().createElement(Sw,{informational:!0}),o&&l().createElement(YN,{visible:r,setVisible:n,content:t&&t.offerDetailsOverlayContent}))},XN=l().memo(zN),JN=({hasItems:e,showInstallmentsExample:t,showHeader:a,messages:r,messagesLastUpdated:n,hasGetReadyBanner:s,hasRCCToolbar:o,hasTopInstallmentBanner:i,hasInstallmentBanner:c,hasAckMessages:d,hasInstallmentSummaryCard:m,hasUndoMessages:u,hasItemsBilledSeparately:p,hasRecurringServicesSummary:g,hasSummary:h,hasDeviceTradeInServicesSummary:y,hasRecommendationItems:E,hasRecommendedSystem:v,hasChat:b,xMerch:f,buyflowMessagesEnabled:w,acmiSelected:N,partnerFinancedInstallment:S,hasTradeInError:C,hasFootnotes:T,hasTradeIn:L,hasMonthlyPricing:k,displayInStack:I,hasIupSummary:A,hasPartnerFinanceTradeIn:P,hasSavedItemsMessages:D,hasMultipleFlexTradeIn:O})=>{const{fragments:x,viewport:R}=z(),{acShowInstallment:F}=Hs(),M=l().useRef(null),_=js(e)&&!e,B=I&&"small"===R&&F&&w,$=Ha(Is,"viewFinanceOverlay");l().useEffect((()=>{!_&&u||!M.current||M.current.focus()}),[_,u,M]);const U=y&&(!F||P)&&l().createElement(rN,null);return l().createElement("div",{className:"rs-bag",role:"main"},o&&l().createElement(YE,{modKey:bs,isBagToolBar:!0}),e&&x.eppBagBanner&&l().createElement("header",{className:"rs-bag-eppbanner"},l().createElement("div",mr({className:"rs-bag-eppbanner-content as-l-container"},qa(x.eppBagBanner)))),f.topBanner&&!$.binding.bindExists&&l().createElement("div",mr({className:"rs-bag-topxmerch"},qa(f.topBanner))),f.topBanner&&$.binding.bindExists&&l().createElement("div",{className:"ribbon ribbon-blue-to-default"},l().createElement("div",{className:"ribbon-drop-wrapper"},l().createElement("div",{className:"ribbon-content-wrapper"},l().createElement("div",{className:"ribbon-content column"},l().createElement("div",mr({className:"rs-bag-topxmerch"},qa(f.topBanner))),l().createElement(xf,{modKey:Is,topBanner:f.topBanner}))))),i&&l().createElement(bw,{positionTop:!0}),d&&l().createElement(pE,{modKey:ws,key:"ack-message",headerRef:M,showBindName:"ackBanner",closeBindName:"ack"}),u&&l().createElement(pE,{modKey:ws,key:"undo-message",headerRef:M,showBindName:"undoBanner",closeBindName:"undoClose",undoBindName:"undo"}),D&&l().createElement(pE,{modKey:Fs,key:"ack-message",headerRef:M,showBindName:"ackBanner",closeBindName:"ack"}),s&&l().createElement(pN,null),l().createElement("div",{id:"bag-content",className:"rs-bag-content as-l-container rs-zoom-content"},l().createElement(qs,{messages:r,lastUpdated:n,dataAutom:"bag-error-message"}),C&&l().createElement(oN,{modKey:ws,dataAutom:"bag-error-message"}),e?l().createElement(l().Fragment,null,a&&l().createElement(Hw,{headerRef:M}),c&&l().createElement(bw,null),v&&l().createElement(nN,null),l().createElement(iE,{modKey:vs})):l().createElement(Ww,{headerRef:M}),p&&l().createElement(JE,{modKey:Ss}),e&&g&&l().createElement(Qw,{modKey:Cs,noKeyline:!0}),O&&U,h&&e&&l().createElement(uw,{modKey:Ts}),A&&l().createElement(dN,{modKey:xs}),m&&l().createElement(XN,{modKey:Ts}),!O&&U,e&&l().createElement(_w,null),f.bottom&&l().createElement("div",mr({className:"rs-bag-bottomxmerch"},qa(f.bottom)))),B&&l().createElement(Vf,{modKey:Ts,showFinancingMessages:!0}),b&&l().createElement("div",{className:Wa()("rs-bag-chat-wrapper",{"rs-bag-chat-hidekeyline":E})},l().createElement(gi,null)),l().createElement(WN,null),l().createElement(ob,{modKey:"shoppingCart.recommendations"}),f.productSpotlight&&l().createElement("div",mr({className:"rs-bag-productspotlight"},qa(f.productSpotlight))),f.accessoriesLink&&l().createElement("div",mr({className:"rs-bag-accessoriesLink"},qa(f.accessoriesLink))),t&&l().createElement("div",mr({className:"rs-bag-installment-example"},qa(t))),l().createElement(cb,{modKey:"shoppingCart.faq"}),T&&l().createElement(gw,{modKey:As,buyflowMessageFootNote:w,acmiSelected:N,hasTradeIn:L,partnerFinancedInstallment:S,hasMonthlyPricing:k}))},QN=()=>{const[e]=Fa(Es),[t]=Fa(ws),[a]=Fa(fs),[r]=Fa(Ss),[n]=Fa(ks),[o]=Ma(Is,"placements"),[i,c]=_a(ws),[d]=Ma(ws,"tradeInErrorMessage"),m=Boolean(d),[u]=Fa(Ts),{buyflowMessages:p={}}=u,g=(u.total||e.savedCart||e.sharedCart)&&!u.buyFlowInstallmentsFinancing,{acShowInstallment:h}=Hs(),[y]=Ma(ks,"hasTradeIn"),E=$a(),{displayInStack:v,acmiSelected:b}=n,f=Ba(`${_s}.items`),[w]=Fa(`${Ts}.cartInstallmentSummary`),N=Object.keys(w).length>0,[S]=Fa(Ls),C=Boolean(S.multipleFlexTradeIn);(0,s.useEffect)((()=>{v&&b&&E({type:Pe,modKey:ks,key:"displayInStack",value:!1})}),[v,b]);const T=f&&f.some((e=>{const{data:{monthlyPriceA11y:t,isEOLProduct:a}}=e;return t&&!a})),L={hasItems:e.hasItems,showInstallmentsExample:e.showInstallmentsExample,showHeader:g,hasGetReadyBanner:Ra(Rs),hasRCCToolbar:Ra(bs),hasTopInstallmentBanner:Boolean(h&&a.topBannerDescription),hasInstallmentBanner:Boolean((h||r.partnerPromoAvailable)&&a.bannerDescription),hasAckMessages:Boolean(t.ackMessages),hasUndoMessages:Boolean(t.undoMessages),hasItemsBilledSeparately:Boolean(r.itemsBilledSeparately),hasInstallmentSummaryCard:N,hasRecurringServicesSummary:Ra(Cs),hasSummary:Ra(Ts),hasDeviceTradeInServicesSummary:Ra(Ls),hasRecommendedSystem:Ra(Ns),hasRecommendationItems:Ra("shoppingCart.recommendations.recommendedItem"),messages:i,messagesLastUpdated:c,hasTradeInError:m,hasChat:n.shouldShowChat,acmiSelected:n.acmiSelected,xMerch:o||{},buyflowMessagesEnabled:p.buyflowMessagesEnabled,displayInStack:n.displayInStack,partnerFinancedInstallment:Boolean(a.partnerFinancedInstallments),hasFootnotes:Ra(As),hasTradeIn:y,hasMonthlyPricing:T,hasIupSummary:Ra(xs),hasPartnerFinanceTradeIn:r.hasPartnerFinanceTradeIn,hasSavedItemsMessages:Ra(Fs),hasMultipleFlexTradeIn:C};return l().createElement(JN,L)},ZN=l().memo(QN),eS=e=>{0},tS=({initData:e})=>(l().useEffect((()=>{(({bagItemsCount:e=0})=>{try{window.performance&&(window.performance.mark("echo-rs-checkout.bag.react-render-finish"),window.performance.measure(`echo-rs-checkout.bag.react-${e}`,"echo-rs-checkout.bag.react-render-start","echo-rs-checkout.bag.react-render-finish"))}catch(e){Xr.error(e)}})({bagItemsCount:V().get(e,"shoppingCart.items.c.length",0)})}),[]),l().createElement(l().StrictMode,null,l().createElement(ka,{initData:e,onInit:eS},l().createElement(X,null,l().createElement(Vs,null,l().createElement(ZN,null))),l().createElement(zr,null))));document.addEventListener("DOMContentLoaded",(()=>{const e=i("rs-checkout/bag");window.performance&&window.performance.mark("echo-rs-checkout.bag.react-render-start");let t={};p||(document.addEventListener("click",y),document.addEventListener("focusin",y),document.addEventListener("focusout",y),document.addEventListener("keydown",y),p=!0),(()=>{const e=document.documentElement,t=A();e.classList.add(t.backgroundSvg?"svg":"no-svg"),e.classList.add(t.touch?"touch":"no-touch"),e.classList.add(t.isIe&&t.ieVersion>=9?"ie":"no-ie"),e.classList.add(t.isIe&&t.ieVersion<9?"oldie":"no-oldie"),e.classList.add(t.isMobileIos||t.isIpad?"ios":"no-ios"),e.classList.add(t.animation?"supports-animation":"no-supports-animation"),e.classList.add(T("columns",!0)?"supports-columns":"no-supports-columns"),e.classList.add(T("backdropFilter",!0)?"supports-backdrop-filter":"no-supports-backdrop-filter"),e.classList.add(t.isSafari&&t.supportsAR?"supports-ar":"no-supports-ar"),t.rtl="rtl"===window.getComputedStyle(document.body).direction})(),((e=document.documentElement)=>{O=e,F||(B(),document.addEventListener("mousedown",B),document.addEventListener("keyup",$),F=!0)})();try{t=JSON.parse(document.getElementById("init_data").innerHTML)}catch(t){e.error(t)}const a=document.getElementById("bag-container");(0,o.H)(a).render(l().createElement(tS,{initData:t}))}))})()})();